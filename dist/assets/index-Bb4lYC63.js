(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function dy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function P3(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var O_={exports:{}},Lp={},N_={exports:{}},xn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dM;function R3(){if(dM)return xn;dM=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function g(H){return H===null||typeof H!="object"?null:(H=m&&H[m]||H["@@iterator"],typeof H=="function"?H:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,M={};function E(H,ne,ce){this.props=H,this.context=ne,this.refs=M,this.updater=ce||y}E.prototype.isReactComponent={},E.prototype.setState=function(H,ne){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ne,"setState")},E.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function x(){}x.prototype=E.prototype;function A(H,ne,ce){this.props=H,this.context=ne,this.refs=M,this.updater=ce||y}var b=A.prototype=new x;b.constructor=A,_(b,E.prototype),b.isPureReactComponent=!0;var R=Array.isArray,N=Object.prototype.hasOwnProperty,I={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function V(H,ne,ce){var xe,ke={},Re=null,ze=null;if(ne!=null)for(xe in ne.ref!==void 0&&(ze=ne.ref),ne.key!==void 0&&(Re=""+ne.key),ne)N.call(ne,xe)&&!O.hasOwnProperty(xe)&&(ke[xe]=ne[xe]);var Ke=arguments.length-2;if(Ke===1)ke.children=ce;else if(1<Ke){for(var st=Array(Ke),it=0;it<Ke;it++)st[it]=arguments[it+2];ke.children=st}if(H&&H.defaultProps)for(xe in Ke=H.defaultProps,Ke)ke[xe]===void 0&&(ke[xe]=Ke[xe]);return{$$typeof:r,type:H,key:Re,ref:ze,props:ke,_owner:I.current}}function k(H,ne){return{$$typeof:r,type:H.type,key:ne,ref:H.ref,props:H.props,_owner:H._owner}}function F(H){return typeof H=="object"&&H!==null&&H.$$typeof===r}function Q(H){var ne={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ce){return ne[ce]})}var le=/\/+/g;function _e(H,ne){return typeof H=="object"&&H!==null&&H.key!=null?Q(""+H.key):ne.toString(36)}function Y(H,ne,ce,xe,ke){var Re=typeof H;(Re==="undefined"||Re==="boolean")&&(H=null);var ze=!1;if(H===null)ze=!0;else switch(Re){case"string":case"number":ze=!0;break;case"object":switch(H.$$typeof){case r:case e:ze=!0}}if(ze)return ze=H,ke=ke(ze),H=xe===""?"."+_e(ze,0):xe,R(ke)?(ce="",H!=null&&(ce=H.replace(le,"$&/")+"/"),Y(ke,ne,ce,"",function(it){return it})):ke!=null&&(F(ke)&&(ke=k(ke,ce+(!ke.key||ze&&ze.key===ke.key?"":(""+ke.key).replace(le,"$&/")+"/")+H)),ne.push(ke)),1;if(ze=0,xe=xe===""?".":xe+":",R(H))for(var Ke=0;Ke<H.length;Ke++){Re=H[Ke];var st=xe+_e(Re,Ke);ze+=Y(Re,ne,ce,st,ke)}else if(st=g(H),typeof st=="function")for(H=st.call(H),Ke=0;!(Re=H.next()).done;)Re=Re.value,st=xe+_e(Re,Ke++),ze+=Y(Re,ne,ce,st,ke);else if(Re==="object")throw ne=String(H),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return ze}function me(H,ne,ce){if(H==null)return H;var xe=[],ke=0;return Y(H,xe,"","",function(Re){return ne.call(ce,Re,ke++)}),xe}function ue(H){if(H._status===-1){var ne=H._result;ne=ne(),ne.then(function(ce){(H._status===0||H._status===-1)&&(H._status=1,H._result=ce)},function(ce){(H._status===0||H._status===-1)&&(H._status=2,H._result=ce)}),H._status===-1&&(H._status=0,H._result=ne)}if(H._status===1)return H._result.default;throw H._result}var Ee={current:null},Z={transition:null},se={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:Z,ReactCurrentOwner:I};function ee(){throw Error("act(...) is not supported in production builds of React.")}return xn.Children={map:me,forEach:function(H,ne,ce){me(H,function(){ne.apply(this,arguments)},ce)},count:function(H){var ne=0;return me(H,function(){ne++}),ne},toArray:function(H){return me(H,function(ne){return ne})||[]},only:function(H){if(!F(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},xn.Component=E,xn.Fragment=t,xn.Profiler=i,xn.PureComponent=A,xn.StrictMode=n,xn.Suspense=c,xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,xn.act=ee,xn.cloneElement=function(H,ne,ce){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var xe=_({},H.props),ke=H.key,Re=H.ref,ze=H._owner;if(ne!=null){if(ne.ref!==void 0&&(Re=ne.ref,ze=I.current),ne.key!==void 0&&(ke=""+ne.key),H.type&&H.type.defaultProps)var Ke=H.type.defaultProps;for(st in ne)N.call(ne,st)&&!O.hasOwnProperty(st)&&(xe[st]=ne[st]===void 0&&Ke!==void 0?Ke[st]:ne[st])}var st=arguments.length-2;if(st===1)xe.children=ce;else if(1<st){Ke=Array(st);for(var it=0;it<st;it++)Ke[it]=arguments[it+2];xe.children=Ke}return{$$typeof:r,type:H.type,key:ke,ref:Re,props:xe,_owner:ze}},xn.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:s,_context:H},H.Consumer=H},xn.createElement=V,xn.createFactory=function(H){var ne=V.bind(null,H);return ne.type=H,ne},xn.createRef=function(){return{current:null}},xn.forwardRef=function(H){return{$$typeof:a,render:H}},xn.isValidElement=F,xn.lazy=function(H){return{$$typeof:f,_payload:{_status:-1,_result:H},_init:ue}},xn.memo=function(H,ne){return{$$typeof:h,type:H,compare:ne===void 0?null:ne}},xn.startTransition=function(H){var ne=Z.transition;Z.transition={};try{H()}finally{Z.transition=ne}},xn.unstable_act=ee,xn.useCallback=function(H,ne){return Ee.current.useCallback(H,ne)},xn.useContext=function(H){return Ee.current.useContext(H)},xn.useDebugValue=function(){},xn.useDeferredValue=function(H){return Ee.current.useDeferredValue(H)},xn.useEffect=function(H,ne){return Ee.current.useEffect(H,ne)},xn.useId=function(){return Ee.current.useId()},xn.useImperativeHandle=function(H,ne,ce){return Ee.current.useImperativeHandle(H,ne,ce)},xn.useInsertionEffect=function(H,ne){return Ee.current.useInsertionEffect(H,ne)},xn.useLayoutEffect=function(H,ne){return Ee.current.useLayoutEffect(H,ne)},xn.useMemo=function(H,ne){return Ee.current.useMemo(H,ne)},xn.useReducer=function(H,ne,ce){return Ee.current.useReducer(H,ne,ce)},xn.useRef=function(H){return Ee.current.useRef(H)},xn.useState=function(H){return Ee.current.useState(H)},xn.useSyncExternalStore=function(H,ne,ce){return Ee.current.useSyncExternalStore(H,ne,ce)},xn.useTransition=function(){return Ee.current.useTransition()},xn.version="18.3.1",xn}var fM;function fy(){return fM||(fM=1,N_.exports=R3()),N_.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pM;function L3(){if(pM)return Lp;pM=1;var r=fy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,h){var f,m={},g=null,y=null;h!==void 0&&(g=""+h),c.key!==void 0&&(g=""+c.key),c.ref!==void 0&&(y=c.ref);for(f in c)n.call(c,f)&&!s.hasOwnProperty(f)&&(m[f]=c[f]);if(a&&a.defaultProps)for(f in c=a.defaultProps,c)m[f]===void 0&&(m[f]=c[f]);return{$$typeof:e,type:a,key:g,ref:y,props:m,_owner:i.current}}return Lp.Fragment=t,Lp.jsx=o,Lp.jsxs=o,Lp}var mM;function I3(){return mM||(mM=1,O_.exports=L3()),O_.exports}var K=I3(),j=fy();const ao=dy(j);var f0={},U_={exports:{}},ps={},F_={exports:{}},B_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gM;function k3(){return gM||(gM=1,function(r){function e(Z,se){var ee=Z.length;Z.push(se);e:for(;0<ee;){var H=ee-1>>>1,ne=Z[H];if(0<i(ne,se))Z[H]=se,Z[ee]=ne,ee=H;else break e}}function t(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var se=Z[0],ee=Z.pop();if(ee!==se){Z[0]=ee;e:for(var H=0,ne=Z.length,ce=ne>>>1;H<ce;){var xe=2*(H+1)-1,ke=Z[xe],Re=xe+1,ze=Z[Re];if(0>i(ke,ee))Re<ne&&0>i(ze,ke)?(Z[H]=ze,Z[Re]=ee,H=Re):(Z[H]=ke,Z[xe]=ee,H=xe);else if(Re<ne&&0>i(ze,ee))Z[H]=ze,Z[Re]=ee,H=Re;else break e}}return se}function i(Z,se){var ee=Z.sortIndex-se.sortIndex;return ee!==0?ee:Z.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var c=[],h=[],f=1,m=null,g=3,y=!1,_=!1,M=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Z){for(var se=t(h);se!==null;){if(se.callback===null)n(h);else if(se.startTime<=Z)n(h),se.sortIndex=se.expirationTime,e(c,se);else break;se=t(h)}}function R(Z){if(M=!1,b(Z),!_)if(t(c)!==null)_=!0,ue(N);else{var se=t(h);se!==null&&Ee(R,se.startTime-Z)}}function N(Z,se){_=!1,M&&(M=!1,x(V),V=-1),y=!0;var ee=g;try{for(b(se),m=t(c);m!==null&&(!(m.expirationTime>se)||Z&&!Q());){var H=m.callback;if(typeof H=="function"){m.callback=null,g=m.priorityLevel;var ne=H(m.expirationTime<=se);se=r.unstable_now(),typeof ne=="function"?m.callback=ne:m===t(c)&&n(c),b(se)}else n(c);m=t(c)}if(m!==null)var ce=!0;else{var xe=t(h);xe!==null&&Ee(R,xe.startTime-se),ce=!1}return ce}finally{m=null,g=ee,y=!1}}var I=!1,O=null,V=-1,k=5,F=-1;function Q(){return!(r.unstable_now()-F<k)}function le(){if(O!==null){var Z=r.unstable_now();F=Z;var se=!0;try{se=O(!0,Z)}finally{se?_e():(I=!1,O=null)}}else I=!1}var _e;if(typeof A=="function")_e=function(){A(le)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,me=Y.port2;Y.port1.onmessage=le,_e=function(){me.postMessage(null)}}else _e=function(){E(le,0)};function ue(Z){O=Z,I||(I=!0,_e())}function Ee(Z,se){V=E(function(){Z(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_continueExecution=function(){_||y||(_=!0,ue(N))},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(Z){switch(g){case 1:case 2:case 3:var se=3;break;default:se=g}var ee=g;g=se;try{return Z()}finally{g=ee}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Z,se){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ee=g;g=Z;try{return se()}finally{g=ee}},r.unstable_scheduleCallback=function(Z,se,ee){var H=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?H+ee:H):ee=H,Z){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=ee+ne,Z={id:f++,callback:se,priorityLevel:Z,startTime:ee,expirationTime:ne,sortIndex:-1},ee>H?(Z.sortIndex=ee,e(h,Z),t(c)===null&&Z===t(h)&&(M?(x(V),V=-1):M=!0,Ee(R,ee-H))):(Z.sortIndex=ne,e(c,Z),_||y||(_=!0,ue(N))),Z},r.unstable_shouldYield=Q,r.unstable_wrapCallback=function(Z){var se=g;return function(){var ee=g;g=se;try{return Z.apply(this,arguments)}finally{g=ee}}}}(B_)),B_}var vM;function D3(){return vM||(vM=1,F_.exports=k3()),F_.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yM;function O3(){if(yM)return ps;yM=1;var r=fy(),e=D3();function t(l){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+l,v=1;v<arguments.length;v++)u+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(l,u){o(l,u),o(l+"Capture",u)}function o(l,u){for(i[l]=u,l=0;l<u.length;l++)n.add(u[l])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function g(l){return c.call(m,l)?!0:c.call(f,l)?!1:h.test(l)?m[l]=!0:(f[l]=!0,!1)}function y(l,u,v,S){if(v!==null&&v.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return S?!1:v!==null?!v.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function _(l,u,v,S){if(u===null||typeof u>"u"||y(l,u,v,S))return!0;if(S)return!1;if(v!==null)switch(v.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function M(l,u,v,S,C,L,z){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=S,this.attributeNamespace=C,this.mustUseProperty=v,this.propertyName=l,this.type=u,this.sanitizeURL=L,this.removeEmptyString=z}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){E[l]=new M(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var u=l[0];E[u]=new M(u,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){E[l]=new M(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){E[l]=new M(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){E[l]=new M(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){E[l]=new M(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){E[l]=new M(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){E[l]=new M(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){E[l]=new M(l,5,!1,l.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function A(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var u=l.replace(x,A);E[u]=new M(u,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var u=l.replace(x,A);E[u]=new M(u,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var u=l.replace(x,A);E[u]=new M(u,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){E[l]=new M(l,1,!1,l.toLowerCase(),null,!1,!1)}),E.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){E[l]=new M(l,1,!1,l.toLowerCase(),null,!0,!0)});function b(l,u,v,S){var C=E.hasOwnProperty(u)?E[u]:null;(C!==null?C.type!==0:S||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(_(u,v,C,S)&&(v=null),S||C===null?g(u)&&(v===null?l.removeAttribute(u):l.setAttribute(u,""+v)):C.mustUseProperty?l[C.propertyName]=v===null?C.type===3?!1:"":v:(u=C.attributeName,S=C.attributeNamespace,v===null?l.removeAttribute(u):(C=C.type,v=C===3||C===4&&v===!0?"":""+v,S?l.setAttributeNS(S,u,v):l.setAttribute(u,v))))}var R=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),I=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),Q=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),Ee=Symbol.for("react.offscreen"),Z=Symbol.iterator;function se(l){return l===null||typeof l!="object"?null:(l=Z&&l[Z]||l["@@iterator"],typeof l=="function"?l:null)}var ee=Object.assign,H;function ne(l){if(H===void 0)try{throw Error()}catch(v){var u=v.stack.trim().match(/\n( *(at )?)/);H=u&&u[1]||""}return`
`+H+l}var ce=!1;function xe(l,u){if(!l||ce)return"";ce=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Pe){var S=Pe}Reflect.construct(l,[],u)}else{try{u.call()}catch(Pe){S=Pe}l.call(u.prototype)}else{try{throw Error()}catch(Pe){S=Pe}l()}}catch(Pe){if(Pe&&S&&typeof Pe.stack=="string"){for(var C=Pe.stack.split(`
`),L=S.stack.split(`
`),z=C.length-1,re=L.length-1;1<=z&&0<=re&&C[z]!==L[re];)re--;for(;1<=z&&0<=re;z--,re--)if(C[z]!==L[re]){if(z!==1||re!==1)do if(z--,re--,0>re||C[z]!==L[re]){var pe=`
`+C[z].replace(" at new "," at ");return l.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",l.displayName)),pe}while(1<=z&&0<=re);break}}}finally{ce=!1,Error.prepareStackTrace=v}return(l=l?l.displayName||l.name:"")?ne(l):""}function ke(l){switch(l.tag){case 5:return ne(l.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return l=xe(l.type,!1),l;case 11:return l=xe(l.type.render,!1),l;case 1:return l=xe(l.type,!0),l;default:return""}}function Re(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case O:return"Fragment";case I:return"Portal";case k:return"Profiler";case V:return"StrictMode";case _e:return"Suspense";case Y:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case Q:return(l.displayName||"Context")+".Consumer";case F:return(l._context.displayName||"Context")+".Provider";case le:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case me:return u=l.displayName||null,u!==null?u:Re(l.type)||"Memo";case ue:u=l._payload,l=l._init;try{return Re(l(u))}catch{}}return null}function ze(l){var u=l.type;switch(l.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=u.render,l=l.displayName||l.name||"",u.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(u);case 8:return u===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function Ke(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function st(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function it(l){var u=st(l)?"checked":"value",v=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),S=""+l[u];if(!l.hasOwnProperty(u)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var C=v.get,L=v.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return C.call(this)},set:function(z){S=""+z,L.call(this,z)}}),Object.defineProperty(l,u,{enumerable:v.enumerable}),{getValue:function(){return S},setValue:function(z){S=""+z},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function ft(l){l._valueTracker||(l._valueTracker=it(l))}function oe(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var v=u.getValue(),S="";return l&&(S=st(l)?l.checked?"true":"false":l.value),l=S,l!==v?(u.setValue(l),!0):!1}function Xe(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Ue(l,u){var v=u.checked;return ee({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??l._wrapperState.initialChecked})}function Je(l,u){var v=u.defaultValue==null?"":u.defaultValue,S=u.checked!=null?u.checked:u.defaultChecked;v=Ke(u.value!=null?u.value:v),l._wrapperState={initialChecked:S,initialValue:v,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Fe(l,u){u=u.checked,u!=null&&b(l,"checked",u,!1)}function Rt(l,u){Fe(l,u);var v=Ke(u.value),S=u.type;if(v!=null)S==="number"?(v===0&&l.value===""||l.value!=v)&&(l.value=""+v):l.value!==""+v&&(l.value=""+v);else if(S==="submit"||S==="reset"){l.removeAttribute("value");return}u.hasOwnProperty("value")?X(l,u.type,v):u.hasOwnProperty("defaultValue")&&X(l,u.type,Ke(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(l.defaultChecked=!!u.defaultChecked)}function dt(l,u,v){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var S=u.type;if(!(S!=="submit"&&S!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+l._wrapperState.initialValue,v||u===l.value||(l.value=u),l.defaultValue=u}v=l.name,v!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,v!==""&&(l.name=v)}function X(l,u,v){(u!=="number"||Xe(l.ownerDocument)!==l)&&(v==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+v&&(l.defaultValue=""+v))}var G=Array.isArray;function we(l,u,v,S){if(l=l.options,u){u={};for(var C=0;C<v.length;C++)u["$"+v[C]]=!0;for(v=0;v<l.length;v++)C=u.hasOwnProperty("$"+l[v].value),l[v].selected!==C&&(l[v].selected=C),C&&S&&(l[v].defaultSelected=!0)}else{for(v=""+Ke(v),u=null,C=0;C<l.length;C++){if(l[C].value===v){l[C].selected=!0,S&&(l[C].defaultSelected=!0);return}u!==null||l[C].disabled||(u=l[C])}u!==null&&(u.selected=!0)}}function We(l,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},u,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function He(l,u){var v=u.value;if(v==null){if(v=u.children,u=u.defaultValue,v!=null){if(u!=null)throw Error(t(92));if(G(v)){if(1<v.length)throw Error(t(93));v=v[0]}u=v}u==null&&(u=""),v=u}l._wrapperState={initialValue:Ke(v)}}function Ve(l,u){var v=Ke(u.value),S=Ke(u.defaultValue);v!=null&&(v=""+v,v!==l.value&&(l.value=v),u.defaultValue==null&&l.defaultValue!==v&&(l.defaultValue=v)),S!=null&&(l.defaultValue=""+S)}function Mt(l){var u=l.textContent;u===l._wrapperState.initialValue&&u!==""&&u!==null&&(l.value=u)}function at(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(l,u){return l==null||l==="http://www.w3.org/1999/xhtml"?at(u):l==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var It,Vt=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,v,S,C){MSApp.execUnsafeLocalFunction(function(){return l(u,v,S,C)})}:l}(function(l,u){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=u;else{for(It=It||document.createElement("div"),It.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=It.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;u.firstChild;)l.appendChild(u.firstChild)}});function Ge(l,u){if(u){var v=l.firstChild;if(v&&v===l.lastChild&&v.nodeType===3){v.nodeValue=u;return}}l.textContent=u}var tn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},en=["Webkit","ms","Moz","O"];Object.keys(tn).forEach(function(l){en.forEach(function(u){u=u+l.charAt(0).toUpperCase()+l.substring(1),tn[u]=tn[l]})});function Ft(l,u,v){return u==null||typeof u=="boolean"||u===""?"":v||typeof u!="number"||u===0||tn.hasOwnProperty(l)&&tn[l]?(""+u).trim():u+"px"}function yt(l,u){l=l.style;for(var v in u)if(u.hasOwnProperty(v)){var S=v.indexOf("--")===0,C=Ft(v,u[v],S);v==="float"&&(v="cssFloat"),S?l.setProperty(v,C):l[v]=C}}var xt=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function he(l,u){if(u){if(xt[l]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,l));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function Ne(l,u){if(l.indexOf("-")===-1)return typeof u.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tt=null;function pt(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Se=null,de=null,et=null;function ct(l){if(l=_o(l)){if(typeof Se!="function")throw Error(t(280));var u=l.stateNode;u&&(u=Yh(u),Se(l.stateNode,l.type,u))}}function Ut(l){de?et?et.push(l):et=[l]:de=l}function At(){if(de){var l=de,u=et;if(et=de=null,ct(l),u)for(l=0;l<u.length;l++)ct(u[l])}}function on(l,u){return l(u)}function gn(){}var Pn=!1;function Fn(l,u,v){if(Pn)return l(u,v);Pn=!0;try{return on(l,u,v)}finally{Pn=!1,(de!==null||et!==null)&&(gn(),At())}}function hn(l,u){var v=l.stateNode;if(v===null)return null;var S=Yh(v);if(S===null)return null;v=S[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(l=l.type,S=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!S;break e;default:l=!1}if(l)return null;if(v&&typeof v!="function")throw Error(t(231,u,typeof v));return v}var fr=!1;if(a)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){fr=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{fr=!1}function js(l,u,v,S,C,L,z,re,pe){var Pe=Array.prototype.slice.call(arguments,3);try{u.apply(v,Pe)}catch(Ze){this.onError(Ze)}}var Es=!1,pi=null,$r=!1,Kt=null,_a={onError:function(l){Es=!0,pi=l}};function wl(l,u,v,S,C,L,z,re,pe){Es=!1,pi=null,js.apply(_a,arguments)}function B(l,u,v,S,C,L,z,re,pe){if(wl.apply(this,arguments),Es){if(Es){var Pe=pi;Es=!1,pi=null}else throw Error(t(198));$r||($r=!0,Kt=Pe)}}function W(l){var u=l,v=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(v=u.return),l=u.return;while(l)}return u.tag===3?v:null}function fe(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function U(l){if(W(l)!==l)throw Error(t(188))}function $(l){var u=l.alternate;if(!u){if(u=W(l),u===null)throw Error(t(188));return u!==l?null:l}for(var v=l,S=u;;){var C=v.return;if(C===null)break;var L=C.alternate;if(L===null){if(S=C.return,S!==null){v=S;continue}break}if(C.child===L.child){for(L=C.child;L;){if(L===v)return U(C),l;if(L===S)return U(C),u;L=L.sibling}throw Error(t(188))}if(v.return!==S.return)v=C,S=L;else{for(var z=!1,re=C.child;re;){if(re===v){z=!0,v=C,S=L;break}if(re===S){z=!0,S=C,v=L;break}re=re.sibling}if(!z){for(re=L.child;re;){if(re===v){z=!0,v=L,S=C;break}if(re===S){z=!0,S=L,v=C;break}re=re.sibling}if(!z)throw Error(t(189))}}if(v.alternate!==S)throw Error(t(190))}if(v.tag!==3)throw Error(t(188));return v.stateNode.current===v?l:u}function J(l){return l=$(l),l!==null?ae(l):null}function ae(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var u=ae(l);if(u!==null)return u;l=l.sibling}return null}var ie=e.unstable_scheduleCallback,Ce=e.unstable_cancelCallback,Le=e.unstable_shouldYield,De=e.unstable_requestPaint,be=e.unstable_now,wt=e.unstable_getCurrentPriorityLevel,je=e.unstable_ImmediatePriority,Ye=e.unstable_UserBlockingPriority,St=e.unstable_NormalPriority,Nt=e.unstable_LowPriority,Bt=e.unstable_IdlePriority,$t=null,ut=null;function lt(l){if(ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot($t,l,void 0,(l.current.flags&128)===128)}catch{}}var Xt=Math.clz32?Math.clz32:kn,Ht=Math.log,qt=Math.LN2;function kn(l){return l>>>=0,l===0?32:31-(Ht(l)/qt|0)|0}var Yn=64,Bn=4194304;function vn(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function an(l,u){var v=l.pendingLanes;if(v===0)return 0;var S=0,C=l.suspendedLanes,L=l.pingedLanes,z=v&268435455;if(z!==0){var re=z&~C;re!==0?S=vn(re):(L&=z,L!==0&&(S=vn(L)))}else z=v&~C,z!==0?S=vn(z):L!==0&&(S=vn(L));if(S===0)return 0;if(u!==0&&u!==S&&(u&C)===0&&(C=S&-S,L=u&-u,C>=L||C===16&&(L&4194240)!==0))return u;if((S&4)!==0&&(S|=v&16),u=l.entangledLanes,u!==0)for(l=l.entanglements,u&=S;0<u;)v=31-Xt(u),C=1<<v,S|=l[v],u&=~C;return S}function sr(l,u){switch(l){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nn(l,u){for(var v=l.suspendedLanes,S=l.pingedLanes,C=l.expirationTimes,L=l.pendingLanes;0<L;){var z=31-Xt(L),re=1<<z,pe=C[z];pe===-1?((re&v)===0||(re&S)!==0)&&(C[z]=sr(re,u)):pe<=u&&(l.expiredLanes|=re),L&=~re}}function yn(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function zn(){var l=Yn;return Yn<<=1,(Yn&4194240)===0&&(Yn=64),l}function Mi(l){for(var u=[],v=0;31>v;v++)u.push(l);return u}function Tr(l,u,v){l.pendingLanes|=u,u!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,u=31-Xt(u),l[u]=v}function Xs(l,u){var v=l.pendingLanes&~u;l.pendingLanes=u,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=u,l.mutableReadLanes&=u,l.entangledLanes&=u,u=l.entanglements;var S=l.eventTimes;for(l=l.expirationTimes;0<v;){var C=31-Xt(v),L=1<<C;u[C]=0,S[C]=-1,l[C]=-1,v&=~L}}function Sl(l,u){var v=l.entangledLanes|=u;for(l=l.entanglements;v;){var S=31-Xt(v),C=1<<S;C&u|l[S]&u&&(l[S]|=u),v&=~C}}var An=0;function El(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var Oc,Uf,wg,vh,yh,xa=!1,_h=[],$s=null,dn=null,uo=null,wa=new Map,Ml=new Map,qo=[],o_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function br(l,u){switch(l){case"focusin":case"focusout":$s=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":wa.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ml.delete(u.pointerId)}}function Sa(l,u,v,S,C,L){return l===null||l.nativeEvent!==L?(l={blockedOn:u,domEventName:v,eventSystemFlags:S,nativeEvent:L,targetContainers:[C]},u!==null&&(u=_o(u),u!==null&&Uf(u)),l):(l.eventSystemFlags|=S,u=l.targetContainers,C!==null&&u.indexOf(C)===-1&&u.push(C),l)}function a_(l,u,v,S,C){switch(u){case"focusin":return $s=Sa($s,l,u,v,S,C),!0;case"dragenter":return dn=Sa(dn,l,u,v,S,C),!0;case"mouseover":return uo=Sa(uo,l,u,v,S,C),!0;case"pointerover":var L=C.pointerId;return wa.set(L,Sa(wa.get(L)||null,l,u,v,S,C)),!0;case"gotpointercapture":return L=C.pointerId,Ml.set(L,Sa(Ml.get(L)||null,l,u,v,S,C)),!0}return!1}function xh(l){var u=ta(l.target);if(u!==null){var v=W(u);if(v!==null){if(u=v.tag,u===13){if(u=fe(v),u!==null){l.blockedOn=u,yh(l.priority,function(){wg(v)});return}}else if(u===3&&v.stateNode.current.memoizedState.isDehydrated){l.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}l.blockedOn=null}function wh(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var v=is(l.domEventName,l.eventSystemFlags,u[0],l.nativeEvent);if(v===null){v=l.nativeEvent;var S=new v.constructor(v.type,v);tt=S,v.target.dispatchEvent(S),tt=null}else return u=_o(v),u!==null&&Uf(u),l.blockedOn=v,!1;u.shift()}return!0}function Nc(l,u,v){wh(l)&&v.delete(u)}function qs(){xa=!1,$s!==null&&wh($s)&&($s=null),dn!==null&&wh(dn)&&(dn=null),uo!==null&&wh(uo)&&(uo=null),wa.forEach(Nc),Ml.forEach(Nc)}function Uc(l,u){l.blockedOn===u&&(l.blockedOn=null,xa||(xa=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qs)))}function Fc(l){function u(C){return Uc(C,l)}if(0<_h.length){Uc(_h[0],l);for(var v=1;v<_h.length;v++){var S=_h[v];S.blockedOn===l&&(S.blockedOn=null)}}for($s!==null&&Uc($s,l),dn!==null&&Uc(dn,l),uo!==null&&Uc(uo,l),wa.forEach(u),Ml.forEach(u),v=0;v<qo.length;v++)S=qo[v],S.blockedOn===l&&(S.blockedOn=null);for(;0<qo.length&&(v=qo[0],v.blockedOn===null);)xh(v),v.blockedOn===null&&qo.shift()}var mi=R.ReactCurrentBatchConfig,rs=!0;function Sh(l,u,v,S){var C=An,L=mi.transition;mi.transition=null;try{An=1,Eh(l,u,v,S)}finally{An=C,mi.transition=L}}function Ff(l,u,v,S){var C=An,L=mi.transition;mi.transition=null;try{An=4,Eh(l,u,v,S)}finally{An=C,mi.transition=L}}function Eh(l,u,v,S){if(rs){var C=is(l,u,v,S);if(C===null)Gh(l,u,S,Mh,v),br(l,S);else if(a_(C,l,u,v,S))S.stopPropagation();else if(br(l,S),u&4&&-1<o_.indexOf(l)){for(;C!==null;){var L=_o(C);if(L!==null&&Oc(L),L=is(l,u,v,S),L===null&&Gh(l,u,S,Mh,v),L===C)break;C=L}C!==null&&S.stopPropagation()}else Gh(l,u,S,null,v)}}var Mh=null;function is(l,u,v,S){if(Mh=null,l=pt(S),l=ta(l),l!==null)if(u=W(l),u===null)l=null;else if(v=u.tag,v===13){if(l=fe(u),l!==null)return l;l=null}else if(v===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null);return Mh=l,null}function Sg(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wt()){case je:return 1;case Ye:return 4;case St:case Nt:return 16;case Bt:return 536870912;default:return 16}default:return 16}}var Ms=null,Bf=null,Ti=null;function Bc(){if(Ti)return Ti;var l,u=Bf,v=u.length,S,C="value"in Ms?Ms.value:Ms.textContent,L=C.length;for(l=0;l<v&&u[l]===C[l];l++);var z=v-l;for(S=1;S<=z&&u[v-S]===C[L-S];S++);return Ti=C.slice(l,1<S?1-S:void 0)}function Ea(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function ho(){return!0}function Th(){return!1}function gi(l){function u(v,S,C,L,z){this._reactName=v,this._targetInst=C,this.type=S,this.nativeEvent=L,this.target=z,this.currentTarget=null;for(var re in l)l.hasOwnProperty(re)&&(v=l[re],this[re]=v?v(L):L[re]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?ho:Th,this.isPropagationStopped=Th,this}return ee(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=ho)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=ho)},persist:function(){},isPersistent:ho}),u}var Ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zc=gi(Ma),Ta=ee({},Ma,{view:0,detail:0}),Tl=gi(Ta),bi,ss,os,bl=ee({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zo,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==os&&(os&&l.type==="mousemove"?(bi=l.screenX-os.screenX,ss=l.screenY-os.screenY):ss=bi=0,os=l),bi)},movementY:function(l){return"movementY"in l?l.movementY:ss}}),zf=gi(bl),fo=ee({},bl,{dataTransfer:0}),Yo=gi(fo),bh=ee({},Ta,{relatedTarget:0}),Ah=gi(bh),Ch=ee({},Ma,{animationName:0,elapsedTime:0,pseudoElement:0}),Eg=gi(Ch),Mg=ee({},Ma,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Vf=gi(Mg),Ph=ee({},Ma,{data:0}),Hf=gi(Ph),Tg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Al(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Gf[l])?!!u[l]:!1}function Zo(){return Al}var Rh=ee({},Ta,{key:function(l){if(l.key){var u=Tg[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=Ea(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?bg[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zo,charCode:function(l){return l.type==="keypress"?Ea(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Ea(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Lh=gi(Rh),as=ee({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hi=gi(as),ba=ee({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zo}),po=gi(ba),mo=ee({},Ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),Aa=gi(mo),Ag=ee({},bl,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Wf=gi(Ag),jf=[9,13,27,32],vi=a&&"CompositionEvent"in window,qr=null;a&&"documentMode"in document&&(qr=document.documentMode);var Jn=a&&"TextEvent"in window&&!qr,Cl=a&&(!vi||qr&&8<qr&&11>=qr),ls=" ",Xf=!1;function $f(l,u){switch(l){case"keyup":return jf.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ih(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Ko=!1;function Cg(l,u){switch(l){case"compositionend":return Ih(u);case"keypress":return u.which!==32?null:(Xf=!0,ls);case"textInput":return l=u.data,l===ls&&Xf?null:l;default:return null}}function Vc(l,u){if(Ko)return l==="compositionend"||!vi&&$f(l,u)?(l=Bc(),Ti=Bf=Ms=null,Ko=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Cl&&u.locale!=="ko"?null:u.data;default:return null}}var Pl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kh(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!Pl[l.type]:u==="textarea"}function Rl(l,u,v,S){Ut(S),u=Wh(u,"onChange"),0<u.length&&(v=new zc("onChange","change",null,v,S),l.push({event:v,listeners:u}))}var Jo=null,Ll=null;function Pg(l){Ol(l,0)}function go(l){var u=pr(l);if(oe(u))return l}function Rg(l,u){if(l==="change")return u}var Il=!1;if(a){var Ai;if(a){var Ca="oninput"in document;if(!Ca){var Pa=document.createElement("div");Pa.setAttribute("oninput","return;"),Ca=typeof Pa.oninput=="function"}Ai=Ca}else Ai=!1;Il=Ai&&(!document.documentMode||9<document.documentMode)}function Ts(){Jo&&(Jo.detachEvent("onpropertychange",Dh),Ll=Jo=null)}function Dh(l){if(l.propertyName==="value"&&go(Ll)){var u=[];Rl(u,Ll,l,pt(l)),Fn(Pg,u)}}function kl(l,u,v){l==="focusin"?(Ts(),Jo=u,Ll=v,Jo.attachEvent("onpropertychange",Dh)):l==="focusout"&&Ts()}function Lg(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return go(Ll)}function qf(l,u){if(l==="click")return go(u)}function or(l,u){if(l==="input"||l==="change")return go(u)}function Oh(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Gi=typeof Object.is=="function"?Object.is:Oh;function Ra(l,u){if(Gi(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var v=Object.keys(l),S=Object.keys(u);if(v.length!==S.length)return!1;for(S=0;S<v.length;S++){var C=v[S];if(!c.call(u,C)||!Gi(l[C],u[C]))return!1}return!0}function Hc(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Wi(l,u){var v=Hc(l);l=0;for(var S;v;){if(v.nodeType===3){if(S=l+v.textContent.length,l<=u&&S>=u)return{node:v,offset:u-l};l=S}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=Hc(v)}}function La(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?La(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function ar(){for(var l=window,u=Xe();u instanceof l.HTMLIFrameElement;){try{var v=typeof u.contentWindow.location.href=="string"}catch{v=!1}if(v)l=u.contentWindow;else break;u=Xe(l.document)}return u}function Dr(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}function Or(l){var u=ar(),v=l.focusedElem,S=l.selectionRange;if(u!==v&&v&&v.ownerDocument&&La(v.ownerDocument.documentElement,v)){if(S!==null&&Dr(v)){if(u=S.start,l=S.end,l===void 0&&(l=u),"selectionStart"in v)v.selectionStart=u,v.selectionEnd=Math.min(l,v.value.length);else if(l=(u=v.ownerDocument||document)&&u.defaultView||window,l.getSelection){l=l.getSelection();var C=v.textContent.length,L=Math.min(S.start,C);S=S.end===void 0?L:Math.min(S.end,C),!l.extend&&L>S&&(C=S,S=L,L=C),C=Wi(v,L);var z=Wi(v,S);C&&z&&(l.rangeCount!==1||l.anchorNode!==C.node||l.anchorOffset!==C.offset||l.focusNode!==z.node||l.focusOffset!==z.offset)&&(u=u.createRange(),u.setStart(C.node,C.offset),l.removeAllRanges(),L>S?(l.addRange(u),l.extend(z.node,z.offset)):(u.setEnd(z.node,z.offset),l.addRange(u)))}}for(u=[],l=v;l=l.parentNode;)l.nodeType===1&&u.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<u.length;v++)l=u[v],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var Nh=a&&"documentMode"in document&&11>=document.documentMode,Ys=null,Ia=null,Gc=null,Nr=!1;function Uh(l,u,v){var S=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Nr||Ys==null||Ys!==Xe(S)||(S=Ys,"selectionStart"in S&&Dr(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Gc&&Ra(Gc,S)||(Gc=S,S=Wh(Ia,"onSelect"),0<S.length&&(u=new zc("onSelect","select",null,u,v),l.push({event:u,listeners:S}),u.target=Ys)))}function Dl(l,u){var v={};return v[l.toLowerCase()]=u.toLowerCase(),v["Webkit"+l]="webkit"+u,v["Moz"+l]="moz"+u,v}var Qo={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},bs={},As={};a&&(As=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function Zs(l){if(bs[l])return bs[l];if(!Qo[l])return l;var u=Qo[l],v;for(v in u)if(u.hasOwnProperty(v)&&v in As)return bs[l]=u[v];return l}var Wc=Zs("animationend"),jc=Zs("animationiteration"),Yf=Zs("animationstart"),Zf=Zs("transitionend"),Kf=new Map,Jf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vo(l,u){Kf.set(l,u),s(u,[l])}for(var Fh=0;Fh<Jf.length;Fh++){var Xc=Jf[Fh],$c=Xc.toLowerCase(),Ig=Xc[0].toUpperCase()+Xc.slice(1);vo($c,"on"+Ig)}vo(Wc,"onAnimationEnd"),vo(jc,"onAnimationIteration"),vo(Yf,"onAnimationStart"),vo("dblclick","onDoubleClick"),vo("focusin","onFocus"),vo("focusout","onBlur"),vo(Zf,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bh=new Set("cancel close invalid load scroll toggle".split(" ").concat(ea));function zh(l,u,v){var S=l.type||"unknown-event";l.currentTarget=v,B(S,u,void 0,l),l.currentTarget=null}function Ol(l,u){u=(u&4)!==0;for(var v=0;v<l.length;v++){var S=l[v],C=S.event;S=S.listeners;e:{var L=void 0;if(u)for(var z=S.length-1;0<=z;z--){var re=S[z],pe=re.instance,Pe=re.currentTarget;if(re=re.listener,pe!==L&&C.isPropagationStopped())break e;zh(C,re,Pe),L=pe}else for(z=0;z<S.length;z++){if(re=S[z],pe=re.instance,Pe=re.currentTarget,re=re.listener,pe!==L&&C.isPropagationStopped())break e;zh(C,re,Pe),L=pe}}}if($r)throw l=Kt,$r=!1,Kt=null,l}function jn(l,u){var v=u[Oa];v===void 0&&(v=u[Oa]=new Set);var S=l+"__bubble";v.has(S)||(Hh(u,l,2,!1),v.add(S))}function Vh(l,u,v){var S=0;u&&(S|=4),Hh(v,l,S,u)}var qc="_reactListening"+Math.random().toString(36).slice(2);function Nl(l){if(!l[qc]){l[qc]=!0,n.forEach(function(v){v!=="selectionchange"&&(Bh.has(v)||Vh(v,!1,l),Vh(v,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[qc]||(u[qc]=!0,Vh("selectionchange",!1,u))}}function Hh(l,u,v,S){switch(Sg(u)){case 1:var C=Sh;break;case 4:C=Ff;break;default:C=Eh}v=C.bind(null,u,v,l),C=void 0,!fr||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(C=!0),S?C!==void 0?l.addEventListener(u,v,{capture:!0,passive:C}):l.addEventListener(u,v,!0):C!==void 0?l.addEventListener(u,v,{passive:C}):l.addEventListener(u,v,!1)}function Gh(l,u,v,S,C){var L=S;if((u&1)===0&&(u&2)===0&&S!==null)e:for(;;){if(S===null)return;var z=S.tag;if(z===3||z===4){var re=S.stateNode.containerInfo;if(re===C||re.nodeType===8&&re.parentNode===C)break;if(z===4)for(z=S.return;z!==null;){var pe=z.tag;if((pe===3||pe===4)&&(pe=z.stateNode.containerInfo,pe===C||pe.nodeType===8&&pe.parentNode===C))return;z=z.return}for(;re!==null;){if(z=ta(re),z===null)return;if(pe=z.tag,pe===5||pe===6){S=L=z;continue e}re=re.parentNode}}S=S.return}Fn(function(){var Pe=L,Ze=pt(v),Qe=[];e:{var qe=Kf.get(l);if(qe!==void 0){var Et=zc,Lt=l;switch(l){case"keypress":if(Ea(v)===0)break e;case"keydown":case"keyup":Et=Lh;break;case"focusin":Lt="focus",Et=Ah;break;case"focusout":Lt="blur",Et=Ah;break;case"beforeblur":case"afterblur":Et=Ah;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Et=zf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Et=Yo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Et=po;break;case Wc:case jc:case Yf:Et=Eg;break;case Zf:Et=Aa;break;case"scroll":Et=Tl;break;case"wheel":Et=Wf;break;case"copy":case"cut":case"paste":Et=Vf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Et=Hi}var kt=(u&4)!==0,Cr=!kt&&l==="scroll",Me=kt?qe!==null?qe+"Capture":null:qe;kt=[];for(var ge=Pe,Te;ge!==null;){Te=ge;var rt=Te.stateNode;if(Te.tag===5&&rt!==null&&(Te=rt,Me!==null&&(rt=hn(ge,Me),rt!=null&&kt.push(Ul(ge,rt,Te)))),Cr)break;ge=ge.return}0<kt.length&&(qe=new Et(qe,Lt,null,v,Ze),Qe.push({event:qe,listeners:kt}))}}if((u&7)===0){e:{if(qe=l==="mouseover"||l==="pointerover",Et=l==="mouseout"||l==="pointerout",qe&&v!==tt&&(Lt=v.relatedTarget||v.fromElement)&&(ta(Lt)||Lt[ji]))break e;if((Et||qe)&&(qe=Ze.window===Ze?Ze:(qe=Ze.ownerDocument)?qe.defaultView||qe.parentWindow:window,Et?(Lt=v.relatedTarget||v.toElement,Et=Pe,Lt=Lt?ta(Lt):null,Lt!==null&&(Cr=W(Lt),Lt!==Cr||Lt.tag!==5&&Lt.tag!==6)&&(Lt=null)):(Et=null,Lt=Pe),Et!==Lt)){if(kt=zf,rt="onMouseLeave",Me="onMouseEnter",ge="mouse",(l==="pointerout"||l==="pointerover")&&(kt=Hi,rt="onPointerLeave",Me="onPointerEnter",ge="pointer"),Cr=Et==null?qe:pr(Et),Te=Lt==null?qe:pr(Lt),qe=new kt(rt,ge+"leave",Et,v,Ze),qe.target=Cr,qe.relatedTarget=Te,rt=null,ta(Ze)===Pe&&(kt=new kt(Me,ge+"enter",Lt,v,Ze),kt.target=Te,kt.relatedTarget=Cr,rt=kt),Cr=rt,Et&&Lt)t:{for(kt=Et,Me=Lt,ge=0,Te=kt;Te;Te=ka(Te))ge++;for(Te=0,rt=Me;rt;rt=ka(rt))Te++;for(;0<ge-Te;)kt=ka(kt),ge--;for(;0<Te-ge;)Me=ka(Me),Te--;for(;ge--;){if(kt===Me||Me!==null&&kt===Me.alternate)break t;kt=ka(kt),Me=ka(Me)}kt=null}else kt=null;Et!==null&&kg(Qe,qe,Et,kt,!1),Lt!==null&&Cr!==null&&kg(Qe,Cr,Lt,kt,!0)}}e:{if(qe=Pe?pr(Pe):window,Et=qe.nodeName&&qe.nodeName.toLowerCase(),Et==="select"||Et==="input"&&qe.type==="file")var Ot=Rg;else if(kh(qe))if(Il)Ot=or;else{Ot=Lg;var Gt=kl}else(Et=qe.nodeName)&&Et.toLowerCase()==="input"&&(qe.type==="checkbox"||qe.type==="radio")&&(Ot=qf);if(Ot&&(Ot=Ot(l,Pe))){Rl(Qe,Ot,v,Ze);break e}Gt&&Gt(l,qe,Pe),l==="focusout"&&(Gt=qe._wrapperState)&&Gt.controlled&&qe.type==="number"&&X(qe,"number",qe.value)}switch(Gt=Pe?pr(Pe):window,l){case"focusin":(kh(Gt)||Gt.contentEditable==="true")&&(Ys=Gt,Ia=Pe,Gc=null);break;case"focusout":Gc=Ia=Ys=null;break;case"mousedown":Nr=!0;break;case"contextmenu":case"mouseup":case"dragend":Nr=!1,Uh(Qe,v,Ze);break;case"selectionchange":if(Nh)break;case"keydown":case"keyup":Uh(Qe,v,Ze)}var Wt;if(vi)e:{switch(l){case"compositionstart":var Zt="onCompositionStart";break e;case"compositionend":Zt="onCompositionEnd";break e;case"compositionupdate":Zt="onCompositionUpdate";break e}Zt=void 0}else Ko?$f(l,v)&&(Zt="onCompositionEnd"):l==="keydown"&&v.keyCode===229&&(Zt="onCompositionStart");Zt&&(Cl&&v.locale!=="ko"&&(Ko||Zt!=="onCompositionStart"?Zt==="onCompositionEnd"&&Ko&&(Wt=Bc()):(Ms=Ze,Bf="value"in Ms?Ms.value:Ms.textContent,Ko=!0)),Gt=Wh(Pe,Zt),0<Gt.length&&(Zt=new Hf(Zt,l,null,v,Ze),Qe.push({event:Zt,listeners:Gt}),Wt?Zt.data=Wt:(Wt=Ih(v),Wt!==null&&(Zt.data=Wt)))),(Wt=Jn?Cg(l,v):Vc(l,v))&&(Pe=Wh(Pe,"onBeforeInput"),0<Pe.length&&(Ze=new Hf("onBeforeInput","beforeinput",null,v,Ze),Qe.push({event:Ze,listeners:Pe}),Ze.data=Wt))}Ol(Qe,u)})}function Ul(l,u,v){return{instance:l,listener:u,currentTarget:v}}function Wh(l,u){for(var v=u+"Capture",S=[];l!==null;){var C=l,L=C.stateNode;C.tag===5&&L!==null&&(C=L,L=hn(l,v),L!=null&&S.unshift(Ul(l,L,C)),L=hn(l,u),L!=null&&S.push(Ul(l,L,C))),l=l.return}return S}function ka(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function kg(l,u,v,S,C){for(var L=u._reactName,z=[];v!==null&&v!==S;){var re=v,pe=re.alternate,Pe=re.stateNode;if(pe!==null&&pe===S)break;re.tag===5&&Pe!==null&&(re=Pe,C?(pe=hn(v,L),pe!=null&&z.unshift(Ul(v,pe,re))):C||(pe=hn(v,L),pe!=null&&z.push(Ul(v,pe,re)))),v=v.return}z.length!==0&&l.push({event:u,listeners:z})}var l_=/\r\n?/g,Dg=/\u0000|\uFFFD/g;function Qf(l){return(typeof l=="string"?l:""+l).replace(l_,`
`).replace(Dg,"")}function Yc(l,u,v){if(u=Qf(u),Qf(l)!==u&&v)throw Error(t(425))}function Zc(){}var Fl=null,ep=null;function tp(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var np=typeof setTimeout=="function"?setTimeout:void 0,rp=typeof clearTimeout=="function"?clearTimeout:void 0,jh=typeof Promise=="function"?Promise:void 0,c_=typeof queueMicrotask=="function"?queueMicrotask:typeof jh<"u"?function(l){return jh.resolve(null).then(l).catch(Og)}:np;function Og(l){setTimeout(function(){throw l})}function Xh(l,u){var v=u,S=0;do{var C=v.nextSibling;if(l.removeChild(v),C&&C.nodeType===8)if(v=C.data,v==="/$"){if(S===0){l.removeChild(C),Fc(u);return}S--}else v!=="$"&&v!=="$?"&&v!=="$!"||S++;v=C}while(v);Fc(u)}function yo(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return l}function ip(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var v=l.data;if(v==="$"||v==="$!"||v==="$?"){if(u===0)return l;u--}else v==="/$"&&u++}l=l.previousSibling}return null}var Da=Math.random().toString(36).slice(2),Ar="__reactFiber$"+Da,Bl="__reactProps$"+Da,ji="__reactContainer$"+Da,Oa="__reactEvents$"+Da,$h="__reactListeners$"+Da,qh="__reactHandles$"+Da;function ta(l){var u=l[Ar];if(u)return u;for(var v=l.parentNode;v;){if(u=v[ji]||v[Ar]){if(v=u.alternate,u.child!==null||v!==null&&v.child!==null)for(l=ip(l);l!==null;){if(v=l[Ar])return v;l=ip(l)}return u}l=v,v=l.parentNode}return null}function _o(l){return l=l[Ar]||l[ji],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function pr(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(t(33))}function Yh(l){return l[Bl]||null}var sp=[],Ur=-1;function ur(l){return{current:l}}function Xn(l){0>Ur||(l.current=sp[Ur],sp[Ur]=null,Ur--)}function Vn(l,u){Ur++,sp[Ur]=l.current,l.current=u}var xo={},Yr=ur(xo),yi=ur(!1),wo=xo;function Na(l,u){var v=l.type.contextTypes;if(!v)return xo;var S=l.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===u)return S.__reactInternalMemoizedMaskedChildContext;var C={},L;for(L in v)C[L]=u[L];return S&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=u,l.__reactInternalMemoizedMaskedChildContext=C),C}function ri(l){return l=l.childContextTypes,l!=null}function Kc(){Xn(yi),Xn(Yr)}function op(l,u,v){if(Yr.current!==xo)throw Error(t(168));Vn(Yr,u),Vn(yi,v)}function Jc(l,u,v){var S=l.stateNode;if(u=u.childContextTypes,typeof S.getChildContext!="function")return v;S=S.getChildContext();for(var C in S)if(!(C in u))throw Error(t(108,ze(l)||"Unknown",C));return ee({},v,S)}function Ua(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||xo,wo=Yr.current,Vn(Yr,l),Vn(yi,yi.current),!0}function ap(l,u,v){var S=l.stateNode;if(!S)throw Error(t(169));v?(l=Jc(l,u,wo),S.__reactInternalMemoizedMergedChildContext=l,Xn(yi),Xn(Yr),Vn(Yr,l)):Xn(yi),Vn(yi,v)}var Cs=null,Qc=!1,Zh=!1;function eu(l){Cs===null?Cs=[l]:Cs.push(l)}function Ng(l){Qc=!0,eu(l)}function Ks(){if(!Zh&&Cs!==null){Zh=!0;var l=0,u=An;try{var v=Cs;for(An=1;l<v.length;l++){var S=v[l];do S=S(!0);while(S!==null)}Cs=null,Qc=!1}catch(C){throw Cs!==null&&(Cs=Cs.slice(l+1)),ie(je,Ks),C}finally{An=u,Zh=!1}}return null}var Fa=[],Ci=0,Kh=null,Jh=0,_i=[],Fr=0,Ba=null,ot=1,cs="";function So(l,u){Fa[Ci++]=Jh,Fa[Ci++]=Kh,Kh=l,Jh=u}function lp(l,u,v){_i[Fr++]=ot,_i[Fr++]=cs,_i[Fr++]=Ba,Ba=l;var S=ot;l=cs;var C=32-Xt(S)-1;S&=~(1<<C),v+=1;var L=32-Xt(u)+C;if(30<L){var z=C-C%5;L=(S&(1<<z)-1).toString(32),S>>=z,C-=z,ot=1<<32-Xt(u)+C|v<<C|S,cs=L+l}else ot=1<<L|v<<C|S,cs=l}function cp(l){l.return!==null&&(So(l,1),lp(l,1,0))}function Eo(l){for(;l===Kh;)Kh=Fa[--Ci],Fa[Ci]=null,Jh=Fa[--Ci],Fa[Ci]=null;for(;l===Ba;)Ba=_i[--Fr],_i[Fr]=null,cs=_i[--Fr],_i[Fr]=null,ot=_i[--Fr],_i[Fr]=null}var Zr=null,xi=null,Zn=!1,us=null;function up(l,u){var v=no(5,null,null,0);v.elementType="DELETED",v.stateNode=u,v.return=l,u=l.deletions,u===null?(l.deletions=[v],l.flags|=16):u.push(v)}function hp(l,u){switch(l.tag){case 5:var v=l.type;return u=u.nodeType!==1||v.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(l.stateNode=u,Zr=l,xi=yo(u.firstChild),!0):!1;case 6:return u=l.pendingProps===""||u.nodeType!==3?null:u,u!==null?(l.stateNode=u,Zr=l,xi=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(v=Ba!==null?{id:ot,overflow:cs}:null,l.memoizedState={dehydrated:u,treeContext:v,retryLane:1073741824},v=no(18,null,null,0),v.stateNode=u,v.return=l,l.child=v,Zr=l,xi=null,!0):!1;default:return!1}}function Qh(l){return(l.mode&1)!==0&&(l.flags&128)===0}function ed(l){if(Zn){var u=xi;if(u){var v=u;if(!hp(l,u)){if(Qh(l))throw Error(t(418));u=yo(v.nextSibling);var S=Zr;u&&hp(l,u)?up(S,v):(l.flags=l.flags&-4097|2,Zn=!1,Zr=l)}}else{if(Qh(l))throw Error(t(418));l.flags=l.flags&-4097|2,Zn=!1,Zr=l}}}function td(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Zr=l}function zl(l){if(l!==Zr)return!1;if(!Zn)return td(l),Zn=!0,!1;var u;if((u=l.tag!==3)&&!(u=l.tag!==5)&&(u=l.type,u=u!=="head"&&u!=="body"&&!tp(l.type,l.memoizedProps)),u&&(u=xi)){if(Qh(l))throw dp(),Error(t(418));for(;u;)up(l,u),u=yo(u.nextSibling)}if(td(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(t(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8){var v=l.data;if(v==="/$"){if(u===0){xi=yo(l.nextSibling);break e}u--}else v!=="$"&&v!=="$!"&&v!=="$?"||u++}l=l.nextSibling}xi=null}}else xi=Zr?yo(l.stateNode.nextSibling):null;return!0}function dp(){for(var l=xi;l;)l=yo(l.nextSibling)}function na(){xi=Zr=null,Zn=!1}function Vl(l){us===null?us=[l]:us.push(l)}var u_=R.ReactCurrentBatchConfig;function tu(l,u,v){if(l=v.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(t(309));var S=v.stateNode}if(!S)throw Error(t(147,l));var C=S,L=""+l;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===L?u.ref:(u=function(z){var re=C.refs;z===null?delete re[L]:re[L]=z},u._stringRef=L,u)}if(typeof l!="string")throw Error(t(284));if(!v._owner)throw Error(t(290,l))}return l}function nu(l,u){throw l=Object.prototype.toString.call(u),Error(t(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l))}function fp(l){var u=l._init;return u(l._payload)}function pp(l){function u(Me,ge){if(l){var Te=Me.deletions;Te===null?(Me.deletions=[ge],Me.flags|=16):Te.push(ge)}}function v(Me,ge){if(!l)return null;for(;ge!==null;)u(Me,ge),ge=ge.sibling;return null}function S(Me,ge){for(Me=new Map;ge!==null;)ge.key!==null?Me.set(ge.key,ge):Me.set(ge.index,ge),ge=ge.sibling;return Me}function C(Me,ge){return Me=Jl(Me,ge),Me.index=0,Me.sibling=null,Me}function L(Me,ge,Te){return Me.index=Te,l?(Te=Me.alternate,Te!==null?(Te=Te.index,Te<ge?(Me.flags|=2,ge):Te):(Me.flags|=2,ge)):(Me.flags|=1048576,ge)}function z(Me){return l&&Me.alternate===null&&(Me.flags|=2),Me}function re(Me,ge,Te,rt){return ge===null||ge.tag!==6?(ge=P_(Te,Me.mode,rt),ge.return=Me,ge):(ge=C(ge,Te),ge.return=Me,ge)}function pe(Me,ge,Te,rt){var Ot=Te.type;return Ot===O?Ze(Me,ge,Te.props.children,rt,Te.key):ge!==null&&(ge.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===ue&&fp(Ot)===ge.type)?(rt=C(ge,Te.props),rt.ref=tu(Me,ge,Te),rt.return=Me,rt):(rt=s0(Te.type,Te.key,Te.props,null,Me.mode,rt),rt.ref=tu(Me,ge,Te),rt.return=Me,rt)}function Pe(Me,ge,Te,rt){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Te.containerInfo||ge.stateNode.implementation!==Te.implementation?(ge=R_(Te,Me.mode,rt),ge.return=Me,ge):(ge=C(ge,Te.children||[]),ge.return=Me,ge)}function Ze(Me,ge,Te,rt,Ot){return ge===null||ge.tag!==7?(ge=_u(Te,Me.mode,rt,Ot),ge.return=Me,ge):(ge=C(ge,Te),ge.return=Me,ge)}function Qe(Me,ge,Te){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ge=P_(""+ge,Me.mode,Te),ge.return=Me,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case N:return Te=s0(ge.type,ge.key,ge.props,null,Me.mode,Te),Te.ref=tu(Me,null,ge),Te.return=Me,Te;case I:return ge=R_(ge,Me.mode,Te),ge.return=Me,ge;case ue:var rt=ge._init;return Qe(Me,rt(ge._payload),Te)}if(G(ge)||se(ge))return ge=_u(ge,Me.mode,Te,null),ge.return=Me,ge;nu(Me,ge)}return null}function qe(Me,ge,Te,rt){var Ot=ge!==null?ge.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Ot!==null?null:re(Me,ge,""+Te,rt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case N:return Te.key===Ot?pe(Me,ge,Te,rt):null;case I:return Te.key===Ot?Pe(Me,ge,Te,rt):null;case ue:return Ot=Te._init,qe(Me,ge,Ot(Te._payload),rt)}if(G(Te)||se(Te))return Ot!==null?null:Ze(Me,ge,Te,rt,null);nu(Me,Te)}return null}function Et(Me,ge,Te,rt,Ot){if(typeof rt=="string"&&rt!==""||typeof rt=="number")return Me=Me.get(Te)||null,re(ge,Me,""+rt,Ot);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case N:return Me=Me.get(rt.key===null?Te:rt.key)||null,pe(ge,Me,rt,Ot);case I:return Me=Me.get(rt.key===null?Te:rt.key)||null,Pe(ge,Me,rt,Ot);case ue:var Gt=rt._init;return Et(Me,ge,Te,Gt(rt._payload),Ot)}if(G(rt)||se(rt))return Me=Me.get(Te)||null,Ze(ge,Me,rt,Ot,null);nu(ge,rt)}return null}function Lt(Me,ge,Te,rt){for(var Ot=null,Gt=null,Wt=ge,Zt=ge=0,ai=null;Wt!==null&&Zt<Te.length;Zt++){Wt.index>Zt?(ai=Wt,Wt=null):ai=Wt.sibling;var In=qe(Me,Wt,Te[Zt],rt);if(In===null){Wt===null&&(Wt=ai);break}l&&Wt&&In.alternate===null&&u(Me,Wt),ge=L(In,ge,Zt),Gt===null?Ot=In:Gt.sibling=In,Gt=In,Wt=ai}if(Zt===Te.length)return v(Me,Wt),Zn&&So(Me,Zt),Ot;if(Wt===null){for(;Zt<Te.length;Zt++)Wt=Qe(Me,Te[Zt],rt),Wt!==null&&(ge=L(Wt,ge,Zt),Gt===null?Ot=Wt:Gt.sibling=Wt,Gt=Wt);return Zn&&So(Me,Zt),Ot}for(Wt=S(Me,Wt);Zt<Te.length;Zt++)ai=Et(Wt,Me,Zt,Te[Zt],rt),ai!==null&&(l&&ai.alternate!==null&&Wt.delete(ai.key===null?Zt:ai.key),ge=L(ai,ge,Zt),Gt===null?Ot=ai:Gt.sibling=ai,Gt=ai);return l&&Wt.forEach(function(Ql){return u(Me,Ql)}),Zn&&So(Me,Zt),Ot}function kt(Me,ge,Te,rt){var Ot=se(Te);if(typeof Ot!="function")throw Error(t(150));if(Te=Ot.call(Te),Te==null)throw Error(t(151));for(var Gt=Ot=null,Wt=ge,Zt=ge=0,ai=null,In=Te.next();Wt!==null&&!In.done;Zt++,In=Te.next()){Wt.index>Zt?(ai=Wt,Wt=null):ai=Wt.sibling;var Ql=qe(Me,Wt,In.value,rt);if(Ql===null){Wt===null&&(Wt=ai);break}l&&Wt&&Ql.alternate===null&&u(Me,Wt),ge=L(Ql,ge,Zt),Gt===null?Ot=Ql:Gt.sibling=Ql,Gt=Ql,Wt=ai}if(In.done)return v(Me,Wt),Zn&&So(Me,Zt),Ot;if(Wt===null){for(;!In.done;Zt++,In=Te.next())In=Qe(Me,In.value,rt),In!==null&&(ge=L(In,ge,Zt),Gt===null?Ot=In:Gt.sibling=In,Gt=In);return Zn&&So(Me,Zt),Ot}for(Wt=S(Me,Wt);!In.done;Zt++,In=Te.next())In=Et(Wt,Me,Zt,In.value,rt),In!==null&&(l&&In.alternate!==null&&Wt.delete(In.key===null?Zt:In.key),ge=L(In,ge,Zt),Gt===null?Ot=In:Gt.sibling=In,Gt=In);return l&&Wt.forEach(function(C3){return u(Me,C3)}),Zn&&So(Me,Zt),Ot}function Cr(Me,ge,Te,rt){if(typeof Te=="object"&&Te!==null&&Te.type===O&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case N:e:{for(var Ot=Te.key,Gt=ge;Gt!==null;){if(Gt.key===Ot){if(Ot=Te.type,Ot===O){if(Gt.tag===7){v(Me,Gt.sibling),ge=C(Gt,Te.props.children),ge.return=Me,Me=ge;break e}}else if(Gt.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===ue&&fp(Ot)===Gt.type){v(Me,Gt.sibling),ge=C(Gt,Te.props),ge.ref=tu(Me,Gt,Te),ge.return=Me,Me=ge;break e}v(Me,Gt);break}else u(Me,Gt);Gt=Gt.sibling}Te.type===O?(ge=_u(Te.props.children,Me.mode,rt,Te.key),ge.return=Me,Me=ge):(rt=s0(Te.type,Te.key,Te.props,null,Me.mode,rt),rt.ref=tu(Me,ge,Te),rt.return=Me,Me=rt)}return z(Me);case I:e:{for(Gt=Te.key;ge!==null;){if(ge.key===Gt)if(ge.tag===4&&ge.stateNode.containerInfo===Te.containerInfo&&ge.stateNode.implementation===Te.implementation){v(Me,ge.sibling),ge=C(ge,Te.children||[]),ge.return=Me,Me=ge;break e}else{v(Me,ge);break}else u(Me,ge);ge=ge.sibling}ge=R_(Te,Me.mode,rt),ge.return=Me,Me=ge}return z(Me);case ue:return Gt=Te._init,Cr(Me,ge,Gt(Te._payload),rt)}if(G(Te))return Lt(Me,ge,Te,rt);if(se(Te))return kt(Me,ge,Te,rt);nu(Me,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,ge!==null&&ge.tag===6?(v(Me,ge.sibling),ge=C(ge,Te),ge.return=Me,Me=ge):(v(Me,ge),ge=P_(Te,Me.mode,rt),ge.return=Me,Me=ge),z(Me)):v(Me,ge)}return Cr}var za=pp(!0),ru=pp(!1),Va=ur(null),Ha=null,Mo=null,Hl=null;function Ga(){Hl=Mo=Ha=null}function iu(l){var u=Va.current;Xn(Va),l._currentValue=u}function su(l,u,v){for(;l!==null;){var S=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,S!==null&&(S.childLanes|=u)):S!==null&&(S.childLanes&u)!==u&&(S.childLanes|=u),l===v)break;l=l.return}}function ra(l,u){Ha=l,Hl=Mo=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&u)!==0&&(cn=!0),l.firstContext=null)}function Xi(l){var u=l._currentValue;if(Hl!==l)if(l={context:l,memoizedValue:u,next:null},Mo===null){if(Ha===null)throw Error(t(308));Mo=l,Ha.dependencies={lanes:0,firstContext:l}}else Mo=Mo.next=l;return u}var To=null;function mp(l){To===null?To=[l]:To.push(l)}function ou(l,u,v,S){var C=u.interleaved;return C===null?(v.next=v,mp(u)):(v.next=C.next,C.next=v),u.interleaved=v,Ps(l,S)}function Ps(l,u){l.lanes|=u;var v=l.alternate;for(v!==null&&(v.lanes|=u),v=l,l=l.return;l!==null;)l.childLanes|=u,v=l.alternate,v!==null&&(v.childLanes|=u),v=l,l=l.return;return v.tag===3?v.stateNode:null}var On=!1;function ln(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mr(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Nn(l,u){return{eventTime:l,lane:u,tag:0,payload:null,callback:null,next:null}}function Qn(l,u,v){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,(Rn&2)!==0){var C=S.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),S.pending=u,Ps(l,v)}return C=S.interleaved,C===null?(u.next=u,mp(S)):(u.next=C.next,C.next=u),S.interleaved=u,Ps(l,v)}function ii(l,u,v){if(u=u.updateQueue,u!==null&&(u=u.shared,(v&4194240)!==0)){var S=u.lanes;S&=l.pendingLanes,v|=S,u.lanes=v,Sl(l,v)}}function Wa(l,u){var v=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,v===S)){var C=null,L=null;if(v=v.firstBaseUpdate,v!==null){do{var z={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};L===null?C=L=z:L=L.next=z,v=v.next}while(v!==null);L===null?C=L=u:L=L.next=u}else C=L=u;v={baseState:S.baseState,firstBaseUpdate:C,lastBaseUpdate:L,shared:S.shared,effects:S.effects},l.updateQueue=v;return}l=v.lastBaseUpdate,l===null?v.firstBaseUpdate=u:l.next=u,v.lastBaseUpdate=u}function hr(l,u,v,S){var C=l.updateQueue;On=!1;var L=C.firstBaseUpdate,z=C.lastBaseUpdate,re=C.shared.pending;if(re!==null){C.shared.pending=null;var pe=re,Pe=pe.next;pe.next=null,z===null?L=Pe:z.next=Pe,z=pe;var Ze=l.alternate;Ze!==null&&(Ze=Ze.updateQueue,re=Ze.lastBaseUpdate,re!==z&&(re===null?Ze.firstBaseUpdate=Pe:re.next=Pe,Ze.lastBaseUpdate=pe))}if(L!==null){var Qe=C.baseState;z=0,Ze=Pe=pe=null,re=L;do{var qe=re.lane,Et=re.eventTime;if((S&qe)===qe){Ze!==null&&(Ze=Ze.next={eventTime:Et,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var Lt=l,kt=re;switch(qe=u,Et=v,kt.tag){case 1:if(Lt=kt.payload,typeof Lt=="function"){Qe=Lt.call(Et,Qe,qe);break e}Qe=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=kt.payload,qe=typeof Lt=="function"?Lt.call(Et,Qe,qe):Lt,qe==null)break e;Qe=ee({},Qe,qe);break e;case 2:On=!0}}re.callback!==null&&re.lane!==0&&(l.flags|=64,qe=C.effects,qe===null?C.effects=[re]:qe.push(re))}else Et={eventTime:Et,lane:qe,tag:re.tag,payload:re.payload,callback:re.callback,next:null},Ze===null?(Pe=Ze=Et,pe=Qe):Ze=Ze.next=Et,z|=qe;if(re=re.next,re===null){if(re=C.shared.pending,re===null)break;qe=re,re=qe.next,qe.next=null,C.lastBaseUpdate=qe,C.shared.pending=null}}while(!0);if(Ze===null&&(pe=Qe),C.baseState=pe,C.firstBaseUpdate=Pe,C.lastBaseUpdate=Ze,u=C.shared.interleaved,u!==null){C=u;do z|=C.lane,C=C.next;while(C!==u)}else L===null&&(C.shared.lanes=0);mu|=z,l.lanes=z,l.memoizedState=Qe}}function Gl(l,u,v){if(l=u.effects,u.effects=null,l!==null)for(u=0;u<l.length;u++){var S=l[u],C=S.callback;if(C!==null){if(S.callback=null,S=v,typeof C!="function")throw Error(t(191,C));C.call(S)}}}var Js={},$i=ur(Js),ja=ur(Js),bo=ur(Js);function _r(l){if(l===Js)throw Error(t(174));return l}function au(l,u){switch(Vn(bo,u),Vn(ja,l),Vn($i,Js),l=u.nodeType,l){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:vt(null,"");break;default:l=l===8?u.parentNode:u,u=l.namespaceURI||null,l=l.tagName,u=vt(u,l)}Xn($i),Vn($i,u)}function ia(){Xn($i),Xn(ja),Xn(bo)}function Xa(l){_r(bo.current);var u=_r($i.current),v=vt(u,l.type);u!==v&&(Vn(ja,l),Vn($i,v))}function Wl(l){ja.current===l&&(Xn($i),Xn(ja))}var Kn=ur(0);function Rs(l){for(var u=l;u!==null;){if(u.tag===13){var v=u.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var jl=[];function Qs(){for(var l=0;l<jl.length;l++)jl[l]._workInProgressVersionPrimary=null;jl.length=0}var $a=R.ReactCurrentDispatcher,qa=R.ReactCurrentBatchConfig,Ao=0,$n=null,dr=null,Cn=null,Ls=!1,si=!1,sa=0,Pi=0;function Kr(){throw Error(t(321))}function lu(l,u){if(u===null)return!1;for(var v=0;v<u.length&&v<l.length;v++)if(!Gi(l[v],u[v]))return!1;return!0}function cu(l,u,v,S,C,L){if(Ao=L,$n=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,$a.current=l===null||l.memoizedState===null?Gg:Wg,l=v(S,C),si){L=0;do{if(si=!1,sa=0,25<=L)throw Error(t(301));L+=1,Cn=dr=null,u.updateQueue=null,$a.current=jg,l=v(S,C)}while(si)}if($a.current=ld,u=dr!==null&&dr.next!==null,Ao=0,Cn=dr=$n=null,Ls=!1,u)throw Error(t(300));return l}function gp(){var l=sa!==0;return sa=0,l}function Jr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?$n.memoizedState=Cn=l:Cn=Cn.next=l,Cn}function qi(){if(dr===null){var l=$n.alternate;l=l!==null?l.memoizedState:null}else l=dr.next;var u=Cn===null?$n.memoizedState:Cn.next;if(u!==null)Cn=u,dr=l;else{if(l===null)throw Error(t(310));dr=l,l={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},Cn===null?$n.memoizedState=Cn=l:Cn=Cn.next=l}return Cn}function Xl(l,u){return typeof u=="function"?u(l):u}function uu(l){var u=qi(),v=u.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=l;var S=dr,C=S.baseQueue,L=v.pending;if(L!==null){if(C!==null){var z=C.next;C.next=L.next,L.next=z}S.baseQueue=C=L,v.pending=null}if(C!==null){L=C.next,S=S.baseState;var re=z=null,pe=null,Pe=L;do{var Ze=Pe.lane;if((Ao&Ze)===Ze)pe!==null&&(pe=pe.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),S=Pe.hasEagerState?Pe.eagerState:l(S,Pe.action);else{var Qe={lane:Ze,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};pe===null?(re=pe=Qe,z=S):pe=pe.next=Qe,$n.lanes|=Ze,mu|=Ze}Pe=Pe.next}while(Pe!==null&&Pe!==L);pe===null?z=S:pe.next=re,Gi(S,u.memoizedState)||(cn=!0),u.memoizedState=S,u.baseState=z,u.baseQueue=pe,v.lastRenderedState=S}if(l=v.interleaved,l!==null){C=l;do L=C.lane,$n.lanes|=L,mu|=L,C=C.next;while(C!==l)}else C===null&&(v.lanes=0);return[u.memoizedState,v.dispatch]}function Co(l){var u=qi(),v=u.queue;if(v===null)throw Error(t(311));v.lastRenderedReducer=l;var S=v.dispatch,C=v.pending,L=u.memoizedState;if(C!==null){v.pending=null;var z=C=C.next;do L=l(L,z.action),z=z.next;while(z!==C);Gi(L,u.memoizedState)||(cn=!0),u.memoizedState=L,u.baseQueue===null&&(u.baseState=L),v.lastRenderedState=L}return[L,S]}function vp(){}function yp(l,u){var v=$n,S=qi(),C=u(),L=!Gi(S.memoizedState,C);if(L&&(S.memoizedState=C,cn=!0),S=S.queue,wp(Ug.bind(null,v,S,l),[l]),S.getSnapshot!==u||L||Cn!==null&&Cn.memoizedState.tag&1){if(v.flags|=2048,Is(9,hu.bind(null,v,S,C,u),void 0,null),oi===null)throw Error(t(349));(Ao&30)!==0||nd(v,u,C)}return C}function nd(l,u,v){l.flags|=16384,l={getSnapshot:u,value:v},u=$n.updateQueue,u===null?(u={lastEffect:null,stores:null},$n.updateQueue=u,u.stores=[l]):(v=u.stores,v===null?u.stores=[l]:v.push(l))}function hu(l,u,v,S){u.value=v,u.getSnapshot=S,Fg(u)&&_p(l)}function Ug(l,u,v){return v(function(){Fg(u)&&_p(l)})}function Fg(l){var u=l.getSnapshot;l=l.value;try{var v=u();return!Gi(l,v)}catch{return!0}}function _p(l){var u=Ps(l,1);u!==null&&ko(u,l,1,-1)}function xp(l){var u=Jr();return typeof l=="function"&&(l=l()),u.memoizedState=u.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xl,lastRenderedState:l},u.queue=l,l=l.dispatch=Ya.bind(null,$n,l),[u.memoizedState,l]}function Is(l,u,v,S){return l={tag:l,create:u,destroy:v,deps:S,next:null},u=$n.updateQueue,u===null?(u={lastEffect:null,stores:null},$n.updateQueue=u,u.lastEffect=l.next=l):(v=u.lastEffect,v===null?u.lastEffect=l.next=l:(S=v.next,v.next=l,l.next=S,u.lastEffect=l)),l}function Bg(){return qi().memoizedState}function eo(l,u,v,S){var C=Jr();$n.flags|=l,C.memoizedState=Is(1|u,v,void 0,S===void 0?null:S)}function du(l,u,v,S){var C=qi();S=S===void 0?null:S;var L=void 0;if(dr!==null){var z=dr.memoizedState;if(L=z.destroy,S!==null&&lu(S,z.deps)){C.memoizedState=Is(u,v,L,S);return}}$n.flags|=l,C.memoizedState=Is(1|u,v,L,S)}function wi(l,u){return eo(8390656,8,l,u)}function wp(l,u){return du(2048,8,l,u)}function Sp(l,u){return du(4,2,l,u)}function zg(l,u){return du(4,4,l,u)}function Vg(l,u){if(typeof u=="function")return l=l(),u(l),function(){u(null)};if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Ep(l,u,v){return v=v!=null?v.concat([l]):null,du(4,4,Vg.bind(null,u,l),v)}function rd(){}function Hg(l,u){var v=qi();u=u===void 0?null:u;var S=v.memoizedState;return S!==null&&u!==null&&lu(u,S[1])?S[0]:(v.memoizedState=[l,u],l)}function Yi(l,u){var v=qi();u=u===void 0?null:u;var S=v.memoizedState;return S!==null&&u!==null&&lu(u,S[1])?S[0]:(l=l(),v.memoizedState=[l,u],l)}function id(l,u,v){return(Ao&21)===0?(l.baseState&&(l.baseState=!1,cn=!0),l.memoizedState=v):(Gi(v,u)||(v=zn(),$n.lanes|=v,mu|=v,l.baseState=!0),u)}function h_(l,u){var v=An;An=v!==0&&4>v?v:4,l(!0);var S=qa.transition;qa.transition={};try{l(!1),u()}finally{An=v,qa.transition=S}}function Po(){return qi().memoizedState}function sd(l,u,v){var S=Zl(l);if(v={lane:S,action:v,hasEagerState:!1,eagerState:null,next:null},fu(l))od(u,v);else if(v=ou(l,u,v,S),v!==null){var C=Ki();ko(v,l,S,C),ad(v,u,S)}}function Ya(l,u,v){var S=Zl(l),C={lane:S,action:v,hasEagerState:!1,eagerState:null,next:null};if(fu(l))od(u,C);else{var L=l.alternate;if(l.lanes===0&&(L===null||L.lanes===0)&&(L=u.lastRenderedReducer,L!==null))try{var z=u.lastRenderedState,re=L(z,v);if(C.hasEagerState=!0,C.eagerState=re,Gi(re,z)){var pe=u.interleaved;pe===null?(C.next=C,mp(u)):(C.next=pe.next,pe.next=C),u.interleaved=C;return}}catch{}finally{}v=ou(l,u,C,S),v!==null&&(C=Ki(),ko(v,l,S,C),ad(v,u,S))}}function fu(l){var u=l.alternate;return l===$n||u!==null&&u===$n}function od(l,u){si=Ls=!0;var v=l.pending;v===null?u.next=u:(u.next=v.next,v.next=u),l.pending=u}function ad(l,u,v){if((v&4194240)!==0){var S=u.lanes;S&=l.pendingLanes,v|=S,u.lanes=v,Sl(l,v)}}var ld={readContext:Xi,useCallback:Kr,useContext:Kr,useEffect:Kr,useImperativeHandle:Kr,useInsertionEffect:Kr,useLayoutEffect:Kr,useMemo:Kr,useReducer:Kr,useRef:Kr,useState:Kr,useDebugValue:Kr,useDeferredValue:Kr,useTransition:Kr,useMutableSource:Kr,useSyncExternalStore:Kr,useId:Kr,unstable_isNewReconciler:!1},Gg={readContext:Xi,useCallback:function(l,u){return Jr().memoizedState=[l,u===void 0?null:u],l},useContext:Xi,useEffect:wi,useImperativeHandle:function(l,u,v){return v=v!=null?v.concat([l]):null,eo(4194308,4,Vg.bind(null,u,l),v)},useLayoutEffect:function(l,u){return eo(4194308,4,l,u)},useInsertionEffect:function(l,u){return eo(4,2,l,u)},useMemo:function(l,u){var v=Jr();return u=u===void 0?null:u,l=l(),v.memoizedState=[l,u],l},useReducer:function(l,u,v){var S=Jr();return u=v!==void 0?v(u):u,S.memoizedState=S.baseState=u,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:u},S.queue=l,l=l.dispatch=sd.bind(null,$n,l),[S.memoizedState,l]},useRef:function(l){var u=Jr();return l={current:l},u.memoizedState=l},useState:xp,useDebugValue:rd,useDeferredValue:function(l){return Jr().memoizedState=l},useTransition:function(){var l=xp(!1),u=l[0];return l=h_.bind(null,l[1]),Jr().memoizedState=l,[u,l]},useMutableSource:function(){},useSyncExternalStore:function(l,u,v){var S=$n,C=Jr();if(Zn){if(v===void 0)throw Error(t(407));v=v()}else{if(v=u(),oi===null)throw Error(t(349));(Ao&30)!==0||nd(S,u,v)}C.memoizedState=v;var L={value:v,getSnapshot:u};return C.queue=L,wi(Ug.bind(null,S,L,l),[l]),S.flags|=2048,Is(9,hu.bind(null,S,L,v,u),void 0,null),v},useId:function(){var l=Jr(),u=oi.identifierPrefix;if(Zn){var v=cs,S=ot;v=(S&~(1<<32-Xt(S)-1)).toString(32)+v,u=":"+u+"R"+v,v=sa++,0<v&&(u+="H"+v.toString(32)),u+=":"}else v=Pi++,u=":"+u+"r"+v.toString(32)+":";return l.memoizedState=u},unstable_isNewReconciler:!1},Wg={readContext:Xi,useCallback:Hg,useContext:Xi,useEffect:wp,useImperativeHandle:Ep,useInsertionEffect:Sp,useLayoutEffect:zg,useMemo:Yi,useReducer:uu,useRef:Bg,useState:function(){return uu(Xl)},useDebugValue:rd,useDeferredValue:function(l){var u=qi();return id(u,dr.memoizedState,l)},useTransition:function(){var l=uu(Xl)[0],u=qi().memoizedState;return[l,u]},useMutableSource:vp,useSyncExternalStore:yp,useId:Po,unstable_isNewReconciler:!1},jg={readContext:Xi,useCallback:Hg,useContext:Xi,useEffect:wp,useImperativeHandle:Ep,useInsertionEffect:Sp,useLayoutEffect:zg,useMemo:Yi,useReducer:Co,useRef:Bg,useState:function(){return Co(Xl)},useDebugValue:rd,useDeferredValue:function(l){var u=qi();return dr===null?u.memoizedState=l:id(u,dr.memoizedState,l)},useTransition:function(){var l=Co(Xl)[0],u=qi().memoizedState;return[l,u]},useMutableSource:vp,useSyncExternalStore:yp,useId:Po,unstable_isNewReconciler:!1};function hs(l,u){if(l&&l.defaultProps){u=ee({},u),l=l.defaultProps;for(var v in l)u[v]===void 0&&(u[v]=l[v]);return u}return u}function pu(l,u,v,S){u=l.memoizedState,v=v(S,u),v=v==null?u:ee({},u,v),l.memoizedState=v,l.lanes===0&&(l.updateQueue.baseState=v)}var cd={isMounted:function(l){return(l=l._reactInternals)?W(l)===l:!1},enqueueSetState:function(l,u,v){l=l._reactInternals;var S=Ki(),C=Zl(l),L=Nn(S,C);L.payload=u,v!=null&&(L.callback=v),u=Qn(l,L,C),u!==null&&(ko(u,l,C,S),ii(u,l,C))},enqueueReplaceState:function(l,u,v){l=l._reactInternals;var S=Ki(),C=Zl(l),L=Nn(S,C);L.tag=1,L.payload=u,v!=null&&(L.callback=v),u=Qn(l,L,C),u!==null&&(ko(u,l,C,S),ii(u,l,C))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var v=Ki(),S=Zl(l),C=Nn(v,S);C.tag=2,u!=null&&(C.callback=u),u=Qn(l,C,S),u!==null&&(ko(u,l,S,v),ii(u,l,S))}};function Xg(l,u,v,S,C,L,z){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,L,z):u.prototype&&u.prototype.isPureReactComponent?!Ra(v,S)||!Ra(C,L):!0}function d(l,u,v){var S=!1,C=xo,L=u.contextType;return typeof L=="object"&&L!==null?L=Xi(L):(C=ri(u)?wo:Yr.current,S=u.contextTypes,L=(S=S!=null)?Na(l,C):xo),u=new u(v,L),l.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=cd,l.stateNode=u,u._reactInternals=l,S&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=C,l.__reactInternalMemoizedMaskedChildContext=L),u}function p(l,u,v,S){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(v,S),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(v,S),u.state!==l&&cd.enqueueReplaceState(u,u.state,null)}function w(l,u,v,S){var C=l.stateNode;C.props=v,C.state=l.memoizedState,C.refs={},ln(l);var L=u.contextType;typeof L=="object"&&L!==null?C.context=Xi(L):(L=ri(u)?wo:Yr.current,C.context=Na(l,L)),C.state=l.memoizedState,L=u.getDerivedStateFromProps,typeof L=="function"&&(pu(l,u,L,v),C.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(u=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),u!==C.state&&cd.enqueueReplaceState(C,C.state,null),hr(l,v,C,S),C.state=l.memoizedState),typeof C.componentDidMount=="function"&&(l.flags|=4194308)}function T(l,u){try{var v="",S=u;do v+=ke(S),S=S.return;while(S);var C=v}catch(L){C=`
Error generating stack: `+L.message+`
`+L.stack}return{value:l,source:u,stack:C,digest:null}}function P(l,u,v){return{value:l,source:null,stack:v??null,digest:u??null}}function D(l,u){try{console.error(u.value)}catch(v){setTimeout(function(){throw v})}}var te=typeof WeakMap=="function"?WeakMap:Map;function ve(l,u,v){v=Nn(-1,v),v.tag=3,v.payload={element:null};var S=u.value;return v.callback=function(){Qg||(Qg=!0,w_=S),D(l,u)},v}function Oe(l,u,v){v=Nn(-1,v),v.tag=3;var S=l.type.getDerivedStateFromError;if(typeof S=="function"){var C=u.value;v.payload=function(){return S(C)},v.callback=function(){D(l,u)}}var L=l.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(v.callback=function(){D(l,u),typeof S!="function"&&(ql===null?ql=new Set([this]):ql.add(this));var z=u.stack;this.componentDidCatch(u.value,{componentStack:z!==null?z:""})}),v}function nt(l,u,v){var S=l.pingCache;if(S===null){S=l.pingCache=new te;var C=new Set;S.set(u,C)}else C=S.get(u),C===void 0&&(C=new Set,S.set(u,C));C.has(v)||(C.add(v),l=v3.bind(null,l,u,v),u.then(l,l))}function Tt(l){do{var u;if((u=l.tag===13)&&(u=l.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return l;l=l.return}while(l!==null);return null}function Jt(l,u,v,S,C){return(l.mode&1)===0?(l===u?l.flags|=65536:(l.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(u=Nn(-1,1),u.tag=2,Qn(v,u,1))),v.lanes|=1),l):(l.flags|=65536,l.lanes=C,l)}var zt=R.ReactCurrentOwner,cn=!1;function _t(l,u,v,S){u.child=l===null?ru(u,null,v,S):za(u,l.child,v,S)}function Qr(l,u,v,S,C){v=v.render;var L=u.ref;return ra(u,C),S=cu(l,u,v,S,L,C),v=gp(),l!==null&&!cn?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~C,Za(l,u,C)):(Zn&&v&&cp(u),u.flags|=1,_t(l,u,S,C),u.child)}function Zi(l,u,v,S,C){if(l===null){var L=v.type;return typeof L=="function"&&!C_(L)&&L.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(u.tag=15,u.type=L,Ae(l,u,L,S,C)):(l=s0(v.type,null,S,u,u.mode,C),l.ref=u.ref,l.return=u,u.child=l)}if(L=l.child,(l.lanes&C)===0){var z=L.memoizedProps;if(v=v.compare,v=v!==null?v:Ra,v(z,S)&&l.ref===u.ref)return Za(l,u,C)}return u.flags|=1,l=Jl(L,S),l.ref=u.ref,l.return=u,u.child=l}function Ae(l,u,v,S,C){if(l!==null){var L=l.memoizedProps;if(Ra(L,S)&&l.ref===u.ref)if(cn=!1,u.pendingProps=S=L,(l.lanes&C)!==0)(l.flags&131072)!==0&&(cn=!0);else return u.lanes=l.lanes,Za(l,u,C)}return mt(l,u,v,S,C)}function ye(l,u,v){var S=u.pendingProps,C=S.children,L=l!==null?l.memoizedState:null;if(S.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vn(hd,ks),ks|=v;else{if((v&1073741824)===0)return l=L!==null?L.baseLanes|v:v,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:l,cachePool:null,transitions:null},u.updateQueue=null,Vn(hd,ks),ks|=l,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=L!==null?L.baseLanes:v,Vn(hd,ks),ks|=S}else L!==null?(S=L.baseLanes|v,u.memoizedState=null):S=v,Vn(hd,ks),ks|=S;return _t(l,u,C,v),u.child}function Ie(l,u){var v=u.ref;(l===null&&v!==null||l!==null&&l.ref!==v)&&(u.flags|=512,u.flags|=2097152)}function mt(l,u,v,S,C){var L=ri(v)?wo:Yr.current;return L=Na(u,L),ra(u,C),v=cu(l,u,v,S,L,C),S=gp(),l!==null&&!cn?(u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~C,Za(l,u,C)):(Zn&&S&&cp(u),u.flags|=1,_t(l,u,v,C),u.child)}function Dt(l,u,v,S,C){if(ri(v)){var L=!0;Ua(u)}else L=!1;if(ra(u,C),u.stateNode===null)qg(l,u),d(u,v,S),w(u,v,S,C),S=!0;else if(l===null){var z=u.stateNode,re=u.memoizedProps;z.props=re;var pe=z.context,Pe=v.contextType;typeof Pe=="object"&&Pe!==null?Pe=Xi(Pe):(Pe=ri(v)?wo:Yr.current,Pe=Na(u,Pe));var Ze=v.getDerivedStateFromProps,Qe=typeof Ze=="function"||typeof z.getSnapshotBeforeUpdate=="function";Qe||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(re!==S||pe!==Pe)&&p(u,z,S,Pe),On=!1;var qe=u.memoizedState;z.state=qe,hr(u,S,z,C),pe=u.memoizedState,re!==S||qe!==pe||yi.current||On?(typeof Ze=="function"&&(pu(u,v,Ze,S),pe=u.memoizedState),(re=On||Xg(u,v,re,S,qe,pe,Pe))?(Qe||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(u.flags|=4194308)):(typeof z.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=S,u.memoizedState=pe),z.props=S,z.state=pe,z.context=Pe,S=re):(typeof z.componentDidMount=="function"&&(u.flags|=4194308),S=!1)}else{z=u.stateNode,mr(l,u),re=u.memoizedProps,Pe=u.type===u.elementType?re:hs(u.type,re),z.props=Pe,Qe=u.pendingProps,qe=z.context,pe=v.contextType,typeof pe=="object"&&pe!==null?pe=Xi(pe):(pe=ri(v)?wo:Yr.current,pe=Na(u,pe));var Et=v.getDerivedStateFromProps;(Ze=typeof Et=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(re!==Qe||qe!==pe)&&p(u,z,S,pe),On=!1,qe=u.memoizedState,z.state=qe,hr(u,S,z,C);var Lt=u.memoizedState;re!==Qe||qe!==Lt||yi.current||On?(typeof Et=="function"&&(pu(u,v,Et,S),Lt=u.memoizedState),(Pe=On||Xg(u,v,Pe,S,qe,Lt,pe)||!1)?(Ze||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(S,Lt,pe),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(S,Lt,pe)),typeof z.componentDidUpdate=="function"&&(u.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof z.componentDidUpdate!="function"||re===l.memoizedProps&&qe===l.memoizedState||(u.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||re===l.memoizedProps&&qe===l.memoizedState||(u.flags|=1024),u.memoizedProps=S,u.memoizedState=Lt),z.props=S,z.state=Lt,z.context=pe,S=Pe):(typeof z.componentDidUpdate!="function"||re===l.memoizedProps&&qe===l.memoizedState||(u.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||re===l.memoizedProps&&qe===l.memoizedState||(u.flags|=1024),S=!1)}return rn(l,u,v,S,L,C)}function rn(l,u,v,S,C,L){Ie(l,u);var z=(u.flags&128)!==0;if(!S&&!z)return C&&ap(u,v,!1),Za(l,u,L);S=u.stateNode,zt.current=u;var re=z&&typeof v.getDerivedStateFromError!="function"?null:S.render();return u.flags|=1,l!==null&&z?(u.child=za(u,l.child,null,L),u.child=za(u,null,re,L)):_t(l,u,re,L),u.memoizedState=S.state,C&&ap(u,v,!0),u.child}function Qt(l){var u=l.stateNode;u.pendingContext?op(l,u.pendingContext,u.pendingContext!==u.context):u.context&&op(l,u.context,!1),au(l,u.containerInfo)}function Tn(l,u,v,S,C){return na(),Vl(C),u.flags|=256,_t(l,u,v,S),u.child}var xr={dehydrated:null,treeContext:null,retryLane:0};function Mn(l){return{baseLanes:l,cachePool:null,transitions:null}}function Ro(l,u,v){var S=u.pendingProps,C=Kn.current,L=!1,z=(u.flags&128)!==0,re;if((re=z)||(re=l!==null&&l.memoizedState===null?!1:(C&2)!==0),re?(L=!0,u.flags&=-129):(l===null||l.memoizedState!==null)&&(C|=1),Vn(Kn,C&1),l===null)return ed(u),l=u.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((u.mode&1)===0?u.lanes=1:l.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(z=S.children,l=S.fallback,L?(S=u.mode,L=u.child,z={mode:"hidden",children:z},(S&1)===0&&L!==null?(L.childLanes=0,L.pendingProps=z):L=o0(z,S,0,null),l=_u(l,S,v,null),L.return=u,l.return=u,L.sibling=l,u.child=L,u.child.memoizedState=Mn(v),u.memoizedState=xr,l):Mp(u,z));if(C=l.memoizedState,C!==null&&(re=C.dehydrated,re!==null))return s3(l,u,z,S,re,C,v);if(L){L=S.fallback,z=u.mode,C=l.child,re=C.sibling;var pe={mode:"hidden",children:S.children};return(z&1)===0&&u.child!==C?(S=u.child,S.childLanes=0,S.pendingProps=pe,u.deletions=null):(S=Jl(C,pe),S.subtreeFlags=C.subtreeFlags&14680064),re!==null?L=Jl(re,L):(L=_u(L,z,v,null),L.flags|=2),L.return=u,S.return=u,S.sibling=L,u.child=S,S=L,L=u.child,z=l.child.memoizedState,z=z===null?Mn(v):{baseLanes:z.baseLanes|v,cachePool:null,transitions:z.transitions},L.memoizedState=z,L.childLanes=l.childLanes&~v,u.memoizedState=xr,S}return L=l.child,l=L.sibling,S=Jl(L,{mode:"visible",children:S.children}),(u.mode&1)===0&&(S.lanes=v),S.return=u,S.sibling=null,l!==null&&(v=u.deletions,v===null?(u.deletions=[l],u.flags|=16):v.push(l)),u.child=S,u.memoizedState=null,S}function Mp(l,u){return u=o0({mode:"visible",children:u},l.mode,0,null),u.return=l,l.child=u}function $g(l,u,v,S){return S!==null&&Vl(S),za(u,l.child,null,v),l=Mp(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function s3(l,u,v,S,C,L,z){if(v)return u.flags&256?(u.flags&=-257,S=P(Error(t(422))),$g(l,u,z,S)):u.memoizedState!==null?(u.child=l.child,u.flags|=128,null):(L=S.fallback,C=u.mode,S=o0({mode:"visible",children:S.children},C,0,null),L=_u(L,C,z,null),L.flags|=2,S.return=u,L.return=u,S.sibling=L,u.child=S,(u.mode&1)!==0&&za(u,l.child,null,z),u.child.memoizedState=Mn(z),u.memoizedState=xr,L);if((u.mode&1)===0)return $g(l,u,z,null);if(C.data==="$!"){if(S=C.nextSibling&&C.nextSibling.dataset,S)var re=S.dgst;return S=re,L=Error(t(419)),S=P(L,S,void 0),$g(l,u,z,S)}if(re=(z&l.childLanes)!==0,cn||re){if(S=oi,S!==null){switch(z&-z){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=(C&(S.suspendedLanes|z))!==0?0:C,C!==0&&C!==L.retryLane&&(L.retryLane=C,Ps(l,C),ko(S,l,C,-1))}return A_(),S=P(Error(t(421))),$g(l,u,z,S)}return C.data==="$?"?(u.flags|=128,u.child=l.child,u=y3.bind(null,l),C._reactRetry=u,null):(l=L.treeContext,xi=yo(C.nextSibling),Zr=u,Zn=!0,us=null,l!==null&&(_i[Fr++]=ot,_i[Fr++]=cs,_i[Fr++]=Ba,ot=l.id,cs=l.overflow,Ba=u),u=Mp(u,S.children),u.flags|=4096,u)}function OE(l,u,v){l.lanes|=u;var S=l.alternate;S!==null&&(S.lanes|=u),su(l.return,u,v)}function d_(l,u,v,S,C){var L=l.memoizedState;L===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:S,tail:v,tailMode:C}:(L.isBackwards=u,L.rendering=null,L.renderingStartTime=0,L.last=S,L.tail=v,L.tailMode=C)}function NE(l,u,v){var S=u.pendingProps,C=S.revealOrder,L=S.tail;if(_t(l,u,S.children,v),S=Kn.current,(S&2)!==0)S=S&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&OE(l,v,u);else if(l.tag===19)OE(l,v,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}S&=1}if(Vn(Kn,S),(u.mode&1)===0)u.memoizedState=null;else switch(C){case"forwards":for(v=u.child,C=null;v!==null;)l=v.alternate,l!==null&&Rs(l)===null&&(C=v),v=v.sibling;v=C,v===null?(C=u.child,u.child=null):(C=v.sibling,v.sibling=null),d_(u,!1,C,v,L);break;case"backwards":for(v=null,C=u.child,u.child=null;C!==null;){if(l=C.alternate,l!==null&&Rs(l)===null){u.child=C;break}l=C.sibling,C.sibling=v,v=C,C=l}d_(u,!0,v,null,L);break;case"together":d_(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function qg(l,u){(u.mode&1)===0&&l!==null&&(l.alternate=null,u.alternate=null,u.flags|=2)}function Za(l,u,v){if(l!==null&&(u.dependencies=l.dependencies),mu|=u.lanes,(v&u.childLanes)===0)return null;if(l!==null&&u.child!==l.child)throw Error(t(153));if(u.child!==null){for(l=u.child,v=Jl(l,l.pendingProps),u.child=v,v.return=u;l.sibling!==null;)l=l.sibling,v=v.sibling=Jl(l,l.pendingProps),v.return=u;v.sibling=null}return u.child}function o3(l,u,v){switch(u.tag){case 3:Qt(u),na();break;case 5:Xa(u);break;case 1:ri(u.type)&&Ua(u);break;case 4:au(u,u.stateNode.containerInfo);break;case 10:var S=u.type._context,C=u.memoizedProps.value;Vn(Va,S._currentValue),S._currentValue=C;break;case 13:if(S=u.memoizedState,S!==null)return S.dehydrated!==null?(Vn(Kn,Kn.current&1),u.flags|=128,null):(v&u.child.childLanes)!==0?Ro(l,u,v):(Vn(Kn,Kn.current&1),l=Za(l,u,v),l!==null?l.sibling:null);Vn(Kn,Kn.current&1);break;case 19:if(S=(v&u.childLanes)!==0,(l.flags&128)!==0){if(S)return NE(l,u,v);u.flags|=128}if(C=u.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),Vn(Kn,Kn.current),S)break;return null;case 22:case 23:return u.lanes=0,ye(l,u,v)}return Za(l,u,v)}var UE,f_,FE,BE;UE=function(l,u){for(var v=u.child;v!==null;){if(v.tag===5||v.tag===6)l.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)break;for(;v.sibling===null;){if(v.return===null||v.return===u)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},f_=function(){},FE=function(l,u,v,S){var C=l.memoizedProps;if(C!==S){l=u.stateNode,_r($i.current);var L=null;switch(v){case"input":C=Ue(l,C),S=Ue(l,S),L=[];break;case"select":C=ee({},C,{value:void 0}),S=ee({},S,{value:void 0}),L=[];break;case"textarea":C=We(l,C),S=We(l,S),L=[];break;default:typeof C.onClick!="function"&&typeof S.onClick=="function"&&(l.onclick=Zc)}he(v,S);var z;v=null;for(Pe in C)if(!S.hasOwnProperty(Pe)&&C.hasOwnProperty(Pe)&&C[Pe]!=null)if(Pe==="style"){var re=C[Pe];for(z in re)re.hasOwnProperty(z)&&(v||(v={}),v[z]="")}else Pe!=="dangerouslySetInnerHTML"&&Pe!=="children"&&Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&Pe!=="autoFocus"&&(i.hasOwnProperty(Pe)?L||(L=[]):(L=L||[]).push(Pe,null));for(Pe in S){var pe=S[Pe];if(re=C?.[Pe],S.hasOwnProperty(Pe)&&pe!==re&&(pe!=null||re!=null))if(Pe==="style")if(re){for(z in re)!re.hasOwnProperty(z)||pe&&pe.hasOwnProperty(z)||(v||(v={}),v[z]="");for(z in pe)pe.hasOwnProperty(z)&&re[z]!==pe[z]&&(v||(v={}),v[z]=pe[z])}else v||(L||(L=[]),L.push(Pe,v)),v=pe;else Pe==="dangerouslySetInnerHTML"?(pe=pe?pe.__html:void 0,re=re?re.__html:void 0,pe!=null&&re!==pe&&(L=L||[]).push(Pe,pe)):Pe==="children"?typeof pe!="string"&&typeof pe!="number"||(L=L||[]).push(Pe,""+pe):Pe!=="suppressContentEditableWarning"&&Pe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Pe)?(pe!=null&&Pe==="onScroll"&&jn("scroll",l),L||re===pe||(L=[])):(L=L||[]).push(Pe,pe))}v&&(L=L||[]).push("style",v);var Pe=L;(u.updateQueue=Pe)&&(u.flags|=4)}},BE=function(l,u,v,S){v!==S&&(u.flags|=4)};function Tp(l,u){if(!Zn)switch(l.tailMode){case"hidden":u=l.tail;for(var v=null;u!==null;)u.alternate!==null&&(v=u),u=u.sibling;v===null?l.tail=null:v.sibling=null;break;case"collapsed":v=l.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function Ri(l){var u=l.alternate!==null&&l.alternate.child===l.child,v=0,S=0;if(u)for(var C=l.child;C!==null;)v|=C.lanes|C.childLanes,S|=C.subtreeFlags&14680064,S|=C.flags&14680064,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)v|=C.lanes|C.childLanes,S|=C.subtreeFlags,S|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=S,l.childLanes=v,u}function a3(l,u,v){var S=u.pendingProps;switch(Eo(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ri(u),null;case 1:return ri(u.type)&&Kc(),Ri(u),null;case 3:return S=u.stateNode,ia(),Xn(yi),Xn(Yr),Qs(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(l===null||l.child===null)&&(zl(u)?u.flags|=4:l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,us!==null&&(M_(us),us=null))),f_(l,u),Ri(u),null;case 5:Wl(u);var C=_r(bo.current);if(v=u.type,l!==null&&u.stateNode!=null)FE(l,u,v,S,C),l.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!S){if(u.stateNode===null)throw Error(t(166));return Ri(u),null}if(l=_r($i.current),zl(u)){S=u.stateNode,v=u.type;var L=u.memoizedProps;switch(S[Ar]=u,S[Bl]=L,l=(u.mode&1)!==0,v){case"dialog":jn("cancel",S),jn("close",S);break;case"iframe":case"object":case"embed":jn("load",S);break;case"video":case"audio":for(C=0;C<ea.length;C++)jn(ea[C],S);break;case"source":jn("error",S);break;case"img":case"image":case"link":jn("error",S),jn("load",S);break;case"details":jn("toggle",S);break;case"input":Je(S,L),jn("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!L.multiple},jn("invalid",S);break;case"textarea":He(S,L),jn("invalid",S)}he(v,L),C=null;for(var z in L)if(L.hasOwnProperty(z)){var re=L[z];z==="children"?typeof re=="string"?S.textContent!==re&&(L.suppressHydrationWarning!==!0&&Yc(S.textContent,re,l),C=["children",re]):typeof re=="number"&&S.textContent!==""+re&&(L.suppressHydrationWarning!==!0&&Yc(S.textContent,re,l),C=["children",""+re]):i.hasOwnProperty(z)&&re!=null&&z==="onScroll"&&jn("scroll",S)}switch(v){case"input":ft(S),dt(S,L,!0);break;case"textarea":ft(S),Mt(S);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(S.onclick=Zc)}S=C,u.updateQueue=S,S!==null&&(u.flags|=4)}else{z=C.nodeType===9?C:C.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=at(v)),l==="http://www.w3.org/1999/xhtml"?v==="script"?(l=z.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof S.is=="string"?l=z.createElement(v,{is:S.is}):(l=z.createElement(v),v==="select"&&(z=l,S.multiple?z.multiple=!0:S.size&&(z.size=S.size))):l=z.createElementNS(l,v),l[Ar]=u,l[Bl]=S,UE(l,u,!1,!1),u.stateNode=l;e:{switch(z=Ne(v,S),v){case"dialog":jn("cancel",l),jn("close",l),C=S;break;case"iframe":case"object":case"embed":jn("load",l),C=S;break;case"video":case"audio":for(C=0;C<ea.length;C++)jn(ea[C],l);C=S;break;case"source":jn("error",l),C=S;break;case"img":case"image":case"link":jn("error",l),jn("load",l),C=S;break;case"details":jn("toggle",l),C=S;break;case"input":Je(l,S),C=Ue(l,S),jn("invalid",l);break;case"option":C=S;break;case"select":l._wrapperState={wasMultiple:!!S.multiple},C=ee({},S,{value:void 0}),jn("invalid",l);break;case"textarea":He(l,S),C=We(l,S),jn("invalid",l);break;default:C=S}he(v,C),re=C;for(L in re)if(re.hasOwnProperty(L)){var pe=re[L];L==="style"?yt(l,pe):L==="dangerouslySetInnerHTML"?(pe=pe?pe.__html:void 0,pe!=null&&Vt(l,pe)):L==="children"?typeof pe=="string"?(v!=="textarea"||pe!=="")&&Ge(l,pe):typeof pe=="number"&&Ge(l,""+pe):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(i.hasOwnProperty(L)?pe!=null&&L==="onScroll"&&jn("scroll",l):pe!=null&&b(l,L,pe,z))}switch(v){case"input":ft(l),dt(l,S,!1);break;case"textarea":ft(l),Mt(l);break;case"option":S.value!=null&&l.setAttribute("value",""+Ke(S.value));break;case"select":l.multiple=!!S.multiple,L=S.value,L!=null?we(l,!!S.multiple,L,!1):S.defaultValue!=null&&we(l,!!S.multiple,S.defaultValue,!0);break;default:typeof C.onClick=="function"&&(l.onclick=Zc)}switch(v){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}}S&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Ri(u),null;case 6:if(l&&u.stateNode!=null)BE(l,u,l.memoizedProps,S);else{if(typeof S!="string"&&u.stateNode===null)throw Error(t(166));if(v=_r(bo.current),_r($i.current),zl(u)){if(S=u.stateNode,v=u.memoizedProps,S[Ar]=u,(L=S.nodeValue!==v)&&(l=Zr,l!==null))switch(l.tag){case 3:Yc(S.nodeValue,v,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&Yc(S.nodeValue,v,(l.mode&1)!==0)}L&&(u.flags|=4)}else S=(v.nodeType===9?v:v.ownerDocument).createTextNode(S),S[Ar]=u,u.stateNode=S}return Ri(u),null;case 13:if(Xn(Kn),S=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Zn&&xi!==null&&(u.mode&1)!==0&&(u.flags&128)===0)dp(),na(),u.flags|=98560,L=!1;else if(L=zl(u),S!==null&&S.dehydrated!==null){if(l===null){if(!L)throw Error(t(318));if(L=u.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(t(317));L[Ar]=u}else na(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ri(u),L=!1}else us!==null&&(M_(us),us=null),L=!0;if(!L)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=v,u):(S=S!==null,S!==(l!==null&&l.memoizedState!==null)&&S&&(u.child.flags|=8192,(u.mode&1)!==0&&(l===null||(Kn.current&1)!==0?ei===0&&(ei=3):A_())),u.updateQueue!==null&&(u.flags|=4),Ri(u),null);case 4:return ia(),f_(l,u),l===null&&Nl(u.stateNode.containerInfo),Ri(u),null;case 10:return iu(u.type._context),Ri(u),null;case 17:return ri(u.type)&&Kc(),Ri(u),null;case 19:if(Xn(Kn),L=u.memoizedState,L===null)return Ri(u),null;if(S=(u.flags&128)!==0,z=L.rendering,z===null)if(S)Tp(L,!1);else{if(ei!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(z=Rs(l),z!==null){for(u.flags|=128,Tp(L,!1),S=z.updateQueue,S!==null&&(u.updateQueue=S,u.flags|=4),u.subtreeFlags=0,S=v,v=u.child;v!==null;)L=v,l=S,L.flags&=14680066,z=L.alternate,z===null?(L.childLanes=0,L.lanes=l,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=z.childLanes,L.lanes=z.lanes,L.child=z.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=z.memoizedProps,L.memoizedState=z.memoizedState,L.updateQueue=z.updateQueue,L.type=z.type,l=z.dependencies,L.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),v=v.sibling;return Vn(Kn,Kn.current&1|2),u.child}l=l.sibling}L.tail!==null&&be()>dd&&(u.flags|=128,S=!0,Tp(L,!1),u.lanes=4194304)}else{if(!S)if(l=Rs(z),l!==null){if(u.flags|=128,S=!0,v=l.updateQueue,v!==null&&(u.updateQueue=v,u.flags|=4),Tp(L,!0),L.tail===null&&L.tailMode==="hidden"&&!z.alternate&&!Zn)return Ri(u),null}else 2*be()-L.renderingStartTime>dd&&v!==1073741824&&(u.flags|=128,S=!0,Tp(L,!1),u.lanes=4194304);L.isBackwards?(z.sibling=u.child,u.child=z):(v=L.last,v!==null?v.sibling=z:u.child=z,L.last=z)}return L.tail!==null?(u=L.tail,L.rendering=u,L.tail=u.sibling,L.renderingStartTime=be(),u.sibling=null,v=Kn.current,Vn(Kn,S?v&1|2:v&1),u):(Ri(u),null);case 22:case 23:return b_(),S=u.memoizedState!==null,l!==null&&l.memoizedState!==null!==S&&(u.flags|=8192),S&&(u.mode&1)!==0?(ks&1073741824)!==0&&(Ri(u),u.subtreeFlags&6&&(u.flags|=8192)):Ri(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function l3(l,u){switch(Eo(u),u.tag){case 1:return ri(u.type)&&Kc(),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return ia(),Xn(yi),Xn(Yr),Qs(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 5:return Wl(u),null;case 13:if(Xn(Kn),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(t(340));na()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Xn(Kn),null;case 4:return ia(),null;case 10:return iu(u.type._context),null;case 22:case 23:return b_(),null;case 24:return null;default:return null}}var Yg=!1,Li=!1,c3=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function ud(l,u){var v=l.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(S){wr(l,u,S)}else v.current=null}function p_(l,u,v){try{v()}catch(S){wr(l,u,S)}}var zE=!1;function u3(l,u){if(Fl=rs,l=ar(),Dr(l)){if("selectionStart"in l)var v={start:l.selectionStart,end:l.selectionEnd};else e:{v=(v=l.ownerDocument)&&v.defaultView||window;var S=v.getSelection&&v.getSelection();if(S&&S.rangeCount!==0){v=S.anchorNode;var C=S.anchorOffset,L=S.focusNode;S=S.focusOffset;try{v.nodeType,L.nodeType}catch{v=null;break e}var z=0,re=-1,pe=-1,Pe=0,Ze=0,Qe=l,qe=null;t:for(;;){for(var Et;Qe!==v||C!==0&&Qe.nodeType!==3||(re=z+C),Qe!==L||S!==0&&Qe.nodeType!==3||(pe=z+S),Qe.nodeType===3&&(z+=Qe.nodeValue.length),(Et=Qe.firstChild)!==null;)qe=Qe,Qe=Et;for(;;){if(Qe===l)break t;if(qe===v&&++Pe===C&&(re=z),qe===L&&++Ze===S&&(pe=z),(Et=Qe.nextSibling)!==null)break;Qe=qe,qe=Qe.parentNode}Qe=Et}v=re===-1||pe===-1?null:{start:re,end:pe}}else v=null}v=v||{start:0,end:0}}else v=null;for(ep={focusedElem:l,selectionRange:v},rs=!1,Pt=u;Pt!==null;)if(u=Pt,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Pt=l;else for(;Pt!==null;){u=Pt;try{var Lt=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(Lt!==null){var kt=Lt.memoizedProps,Cr=Lt.memoizedState,Me=u.stateNode,ge=Me.getSnapshotBeforeUpdate(u.elementType===u.type?kt:hs(u.type,kt),Cr);Me.__reactInternalSnapshotBeforeUpdate=ge}break;case 3:var Te=u.stateNode.containerInfo;Te.nodeType===1?Te.textContent="":Te.nodeType===9&&Te.documentElement&&Te.removeChild(Te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(rt){wr(u,u.return,rt)}if(l=u.sibling,l!==null){l.return=u.return,Pt=l;break}Pt=u.return}return Lt=zE,zE=!1,Lt}function bp(l,u,v){var S=u.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var C=S=S.next;do{if((C.tag&l)===l){var L=C.destroy;C.destroy=void 0,L!==void 0&&p_(u,v,L)}C=C.next}while(C!==S)}}function Zg(l,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var v=u=u.next;do{if((v.tag&l)===l){var S=v.create;v.destroy=S()}v=v.next}while(v!==u)}}function m_(l){var u=l.ref;if(u!==null){var v=l.stateNode;switch(l.tag){case 5:l=v;break;default:l=v}typeof u=="function"?u(l):u.current=l}}function VE(l){var u=l.alternate;u!==null&&(l.alternate=null,VE(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&(delete u[Ar],delete u[Bl],delete u[Oa],delete u[$h],delete u[qh])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function HE(l){return l.tag===5||l.tag===3||l.tag===4}function GE(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||HE(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function g_(l,u,v){var S=l.tag;if(S===5||S===6)l=l.stateNode,u?v.nodeType===8?v.parentNode.insertBefore(l,u):v.insertBefore(l,u):(v.nodeType===8?(u=v.parentNode,u.insertBefore(l,v)):(u=v,u.appendChild(l)),v=v._reactRootContainer,v!=null||u.onclick!==null||(u.onclick=Zc));else if(S!==4&&(l=l.child,l!==null))for(g_(l,u,v),l=l.sibling;l!==null;)g_(l,u,v),l=l.sibling}function v_(l,u,v){var S=l.tag;if(S===5||S===6)l=l.stateNode,u?v.insertBefore(l,u):v.appendChild(l);else if(S!==4&&(l=l.child,l!==null))for(v_(l,u,v),l=l.sibling;l!==null;)v_(l,u,v),l=l.sibling}var Si=null,Lo=!1;function $l(l,u,v){for(v=v.child;v!==null;)WE(l,u,v),v=v.sibling}function WE(l,u,v){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount($t,v)}catch{}switch(v.tag){case 5:Li||ud(v,u);case 6:var S=Si,C=Lo;Si=null,$l(l,u,v),Si=S,Lo=C,Si!==null&&(Lo?(l=Si,v=v.stateNode,l.nodeType===8?l.parentNode.removeChild(v):l.removeChild(v)):Si.removeChild(v.stateNode));break;case 18:Si!==null&&(Lo?(l=Si,v=v.stateNode,l.nodeType===8?Xh(l.parentNode,v):l.nodeType===1&&Xh(l,v),Fc(l)):Xh(Si,v.stateNode));break;case 4:S=Si,C=Lo,Si=v.stateNode.containerInfo,Lo=!0,$l(l,u,v),Si=S,Lo=C;break;case 0:case 11:case 14:case 15:if(!Li&&(S=v.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){C=S=S.next;do{var L=C,z=L.destroy;L=L.tag,z!==void 0&&((L&2)!==0||(L&4)!==0)&&p_(v,u,z),C=C.next}while(C!==S)}$l(l,u,v);break;case 1:if(!Li&&(ud(v,u),S=v.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=v.memoizedProps,S.state=v.memoizedState,S.componentWillUnmount()}catch(re){wr(v,u,re)}$l(l,u,v);break;case 21:$l(l,u,v);break;case 22:v.mode&1?(Li=(S=Li)||v.memoizedState!==null,$l(l,u,v),Li=S):$l(l,u,v);break;default:$l(l,u,v)}}function jE(l){var u=l.updateQueue;if(u!==null){l.updateQueue=null;var v=l.stateNode;v===null&&(v=l.stateNode=new c3),u.forEach(function(S){var C=_3.bind(null,l,S);v.has(S)||(v.add(S),S.then(C,C))})}}function Io(l,u){var v=u.deletions;if(v!==null)for(var S=0;S<v.length;S++){var C=v[S];try{var L=l,z=u,re=z;e:for(;re!==null;){switch(re.tag){case 5:Si=re.stateNode,Lo=!1;break e;case 3:Si=re.stateNode.containerInfo,Lo=!0;break e;case 4:Si=re.stateNode.containerInfo,Lo=!0;break e}re=re.return}if(Si===null)throw Error(t(160));WE(L,z,C),Si=null,Lo=!1;var pe=C.alternate;pe!==null&&(pe.return=null),C.return=null}catch(Pe){wr(C,u,Pe)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)XE(u,l),u=u.sibling}function XE(l,u){var v=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Io(u,l),oa(l),S&4){try{bp(3,l,l.return),Zg(3,l)}catch(kt){wr(l,l.return,kt)}try{bp(5,l,l.return)}catch(kt){wr(l,l.return,kt)}}break;case 1:Io(u,l),oa(l),S&512&&v!==null&&ud(v,v.return);break;case 5:if(Io(u,l),oa(l),S&512&&v!==null&&ud(v,v.return),l.flags&32){var C=l.stateNode;try{Ge(C,"")}catch(kt){wr(l,l.return,kt)}}if(S&4&&(C=l.stateNode,C!=null)){var L=l.memoizedProps,z=v!==null?v.memoizedProps:L,re=l.type,pe=l.updateQueue;if(l.updateQueue=null,pe!==null)try{re==="input"&&L.type==="radio"&&L.name!=null&&Fe(C,L),Ne(re,z);var Pe=Ne(re,L);for(z=0;z<pe.length;z+=2){var Ze=pe[z],Qe=pe[z+1];Ze==="style"?yt(C,Qe):Ze==="dangerouslySetInnerHTML"?Vt(C,Qe):Ze==="children"?Ge(C,Qe):b(C,Ze,Qe,Pe)}switch(re){case"input":Rt(C,L);break;case"textarea":Ve(C,L);break;case"select":var qe=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!L.multiple;var Et=L.value;Et!=null?we(C,!!L.multiple,Et,!1):qe!==!!L.multiple&&(L.defaultValue!=null?we(C,!!L.multiple,L.defaultValue,!0):we(C,!!L.multiple,L.multiple?[]:"",!1))}C[Bl]=L}catch(kt){wr(l,l.return,kt)}}break;case 6:if(Io(u,l),oa(l),S&4){if(l.stateNode===null)throw Error(t(162));C=l.stateNode,L=l.memoizedProps;try{C.nodeValue=L}catch(kt){wr(l,l.return,kt)}}break;case 3:if(Io(u,l),oa(l),S&4&&v!==null&&v.memoizedState.isDehydrated)try{Fc(u.containerInfo)}catch(kt){wr(l,l.return,kt)}break;case 4:Io(u,l),oa(l);break;case 13:Io(u,l),oa(l),C=l.child,C.flags&8192&&(L=C.memoizedState!==null,C.stateNode.isHidden=L,!L||C.alternate!==null&&C.alternate.memoizedState!==null||(x_=be())),S&4&&jE(l);break;case 22:if(Ze=v!==null&&v.memoizedState!==null,l.mode&1?(Li=(Pe=Li)||Ze,Io(u,l),Li=Pe):Io(u,l),oa(l),S&8192){if(Pe=l.memoizedState!==null,(l.stateNode.isHidden=Pe)&&!Ze&&(l.mode&1)!==0)for(Pt=l,Ze=l.child;Ze!==null;){for(Qe=Pt=Ze;Pt!==null;){switch(qe=Pt,Et=qe.child,qe.tag){case 0:case 11:case 14:case 15:bp(4,qe,qe.return);break;case 1:ud(qe,qe.return);var Lt=qe.stateNode;if(typeof Lt.componentWillUnmount=="function"){S=qe,v=qe.return;try{u=S,Lt.props=u.memoizedProps,Lt.state=u.memoizedState,Lt.componentWillUnmount()}catch(kt){wr(S,v,kt)}}break;case 5:ud(qe,qe.return);break;case 22:if(qe.memoizedState!==null){YE(Qe);continue}}Et!==null?(Et.return=qe,Pt=Et):YE(Qe)}Ze=Ze.sibling}e:for(Ze=null,Qe=l;;){if(Qe.tag===5){if(Ze===null){Ze=Qe;try{C=Qe.stateNode,Pe?(L=C.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(re=Qe.stateNode,pe=Qe.memoizedProps.style,z=pe!=null&&pe.hasOwnProperty("display")?pe.display:null,re.style.display=Ft("display",z))}catch(kt){wr(l,l.return,kt)}}}else if(Qe.tag===6){if(Ze===null)try{Qe.stateNode.nodeValue=Pe?"":Qe.memoizedProps}catch(kt){wr(l,l.return,kt)}}else if((Qe.tag!==22&&Qe.tag!==23||Qe.memoizedState===null||Qe===l)&&Qe.child!==null){Qe.child.return=Qe,Qe=Qe.child;continue}if(Qe===l)break e;for(;Qe.sibling===null;){if(Qe.return===null||Qe.return===l)break e;Ze===Qe&&(Ze=null),Qe=Qe.return}Ze===Qe&&(Ze=null),Qe.sibling.return=Qe.return,Qe=Qe.sibling}}break;case 19:Io(u,l),oa(l),S&4&&jE(l);break;case 21:break;default:Io(u,l),oa(l)}}function oa(l){var u=l.flags;if(u&2){try{e:{for(var v=l.return;v!==null;){if(HE(v)){var S=v;break e}v=v.return}throw Error(t(160))}switch(S.tag){case 5:var C=S.stateNode;S.flags&32&&(Ge(C,""),S.flags&=-33);var L=GE(l);v_(l,L,C);break;case 3:case 4:var z=S.stateNode.containerInfo,re=GE(l);g_(l,re,z);break;default:throw Error(t(161))}}catch(pe){wr(l,l.return,pe)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function h3(l,u,v){Pt=l,$E(l)}function $E(l,u,v){for(var S=(l.mode&1)!==0;Pt!==null;){var C=Pt,L=C.child;if(C.tag===22&&S){var z=C.memoizedState!==null||Yg;if(!z){var re=C.alternate,pe=re!==null&&re.memoizedState!==null||Li;re=Yg;var Pe=Li;if(Yg=z,(Li=pe)&&!Pe)for(Pt=C;Pt!==null;)z=Pt,pe=z.child,z.tag===22&&z.memoizedState!==null?ZE(C):pe!==null?(pe.return=z,Pt=pe):ZE(C);for(;L!==null;)Pt=L,$E(L),L=L.sibling;Pt=C,Yg=re,Li=Pe}qE(l)}else(C.subtreeFlags&8772)!==0&&L!==null?(L.return=C,Pt=L):qE(l)}}function qE(l){for(;Pt!==null;){var u=Pt;if((u.flags&8772)!==0){var v=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:Li||Zg(5,u);break;case 1:var S=u.stateNode;if(u.flags&4&&!Li)if(v===null)S.componentDidMount();else{var C=u.elementType===u.type?v.memoizedProps:hs(u.type,v.memoizedProps);S.componentDidUpdate(C,v.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var L=u.updateQueue;L!==null&&Gl(u,L,S);break;case 3:var z=u.updateQueue;if(z!==null){if(v=null,u.child!==null)switch(u.child.tag){case 5:v=u.child.stateNode;break;case 1:v=u.child.stateNode}Gl(u,z,v)}break;case 5:var re=u.stateNode;if(v===null&&u.flags&4){v=re;var pe=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":pe.autoFocus&&v.focus();break;case"img":pe.src&&(v.src=pe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Pe=u.alternate;if(Pe!==null){var Ze=Pe.memoizedState;if(Ze!==null){var Qe=Ze.dehydrated;Qe!==null&&Fc(Qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Li||u.flags&512&&m_(u)}catch(qe){wr(u,u.return,qe)}}if(u===l){Pt=null;break}if(v=u.sibling,v!==null){v.return=u.return,Pt=v;break}Pt=u.return}}function YE(l){for(;Pt!==null;){var u=Pt;if(u===l){Pt=null;break}var v=u.sibling;if(v!==null){v.return=u.return,Pt=v;break}Pt=u.return}}function ZE(l){for(;Pt!==null;){var u=Pt;try{switch(u.tag){case 0:case 11:case 15:var v=u.return;try{Zg(4,u)}catch(pe){wr(u,v,pe)}break;case 1:var S=u.stateNode;if(typeof S.componentDidMount=="function"){var C=u.return;try{S.componentDidMount()}catch(pe){wr(u,C,pe)}}var L=u.return;try{m_(u)}catch(pe){wr(u,L,pe)}break;case 5:var z=u.return;try{m_(u)}catch(pe){wr(u,z,pe)}}}catch(pe){wr(u,u.return,pe)}if(u===l){Pt=null;break}var re=u.sibling;if(re!==null){re.return=u.return,Pt=re;break}Pt=u.return}}var d3=Math.ceil,Kg=R.ReactCurrentDispatcher,y_=R.ReactCurrentOwner,to=R.ReactCurrentBatchConfig,Rn=0,oi=null,Br=null,Ei=0,ks=0,hd=ur(0),ei=0,Ap=null,mu=0,Jg=0,__=0,Cp=null,ds=null,x_=0,dd=1/0,Ka=null,Qg=!1,w_=null,ql=null,e0=!1,Yl=null,t0=0,Pp=0,S_=null,n0=-1,r0=0;function Ki(){return(Rn&6)!==0?be():n0!==-1?n0:n0=be()}function Zl(l){return(l.mode&1)===0?1:(Rn&2)!==0&&Ei!==0?Ei&-Ei:u_.transition!==null?(r0===0&&(r0=zn()),r0):(l=An,l!==0||(l=window.event,l=l===void 0?16:Sg(l.type)),l)}function ko(l,u,v,S){if(50<Pp)throw Pp=0,S_=null,Error(t(185));Tr(l,v,S),((Rn&2)===0||l!==oi)&&(l===oi&&((Rn&2)===0&&(Jg|=v),ei===4&&Kl(l,Ei)),fs(l,S),v===1&&Rn===0&&(u.mode&1)===0&&(dd=be()+500,Qc&&Ks()))}function fs(l,u){var v=l.callbackNode;nn(l,u);var S=an(l,l===oi?Ei:0);if(S===0)v!==null&&Ce(v),l.callbackNode=null,l.callbackPriority=0;else if(u=S&-S,l.callbackPriority!==u){if(v!=null&&Ce(v),u===1)l.tag===0?Ng(JE.bind(null,l)):eu(JE.bind(null,l)),c_(function(){(Rn&6)===0&&Ks()}),v=null;else{switch(El(S)){case 1:v=je;break;case 4:v=Ye;break;case 16:v=St;break;case 536870912:v=Bt;break;default:v=St}v=oM(v,KE.bind(null,l))}l.callbackPriority=u,l.callbackNode=v}}function KE(l,u){if(n0=-1,r0=0,(Rn&6)!==0)throw Error(t(327));var v=l.callbackNode;if(fd()&&l.callbackNode!==v)return null;var S=an(l,l===oi?Ei:0);if(S===0)return null;if((S&30)!==0||(S&l.expiredLanes)!==0||u)u=i0(l,S);else{u=S;var C=Rn;Rn|=2;var L=eM();(oi!==l||Ei!==u)&&(Ka=null,dd=be()+500,vu(l,u));do try{m3();break}catch(re){QE(l,re)}while(!0);Ga(),Kg.current=L,Rn=C,Br!==null?u=0:(oi=null,Ei=0,u=ei)}if(u!==0){if(u===2&&(C=yn(l),C!==0&&(S=C,u=E_(l,C))),u===1)throw v=Ap,vu(l,0),Kl(l,S),fs(l,be()),v;if(u===6)Kl(l,S);else{if(C=l.current.alternate,(S&30)===0&&!f3(C)&&(u=i0(l,S),u===2&&(L=yn(l),L!==0&&(S=L,u=E_(l,L))),u===1))throw v=Ap,vu(l,0),Kl(l,S),fs(l,be()),v;switch(l.finishedWork=C,l.finishedLanes=S,u){case 0:case 1:throw Error(t(345));case 2:yu(l,ds,Ka);break;case 3:if(Kl(l,S),(S&130023424)===S&&(u=x_+500-be(),10<u)){if(an(l,0)!==0)break;if(C=l.suspendedLanes,(C&S)!==S){Ki(),l.pingedLanes|=l.suspendedLanes&C;break}l.timeoutHandle=np(yu.bind(null,l,ds,Ka),u);break}yu(l,ds,Ka);break;case 4:if(Kl(l,S),(S&4194240)===S)break;for(u=l.eventTimes,C=-1;0<S;){var z=31-Xt(S);L=1<<z,z=u[z],z>C&&(C=z),S&=~L}if(S=C,S=be()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*d3(S/1960))-S,10<S){l.timeoutHandle=np(yu.bind(null,l,ds,Ka),S);break}yu(l,ds,Ka);break;case 5:yu(l,ds,Ka);break;default:throw Error(t(329))}}}return fs(l,be()),l.callbackNode===v?KE.bind(null,l):null}function E_(l,u){var v=Cp;return l.current.memoizedState.isDehydrated&&(vu(l,u).flags|=256),l=i0(l,u),l!==2&&(u=ds,ds=v,u!==null&&M_(u)),l}function M_(l){ds===null?ds=l:ds.push.apply(ds,l)}function f3(l){for(var u=l;;){if(u.flags&16384){var v=u.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var S=0;S<v.length;S++){var C=v[S],L=C.getSnapshot;C=C.value;try{if(!Gi(L(),C))return!1}catch{return!1}}}if(v=u.child,u.subtreeFlags&16384&&v!==null)v.return=u,u=v;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Kl(l,u){for(u&=~__,u&=~Jg,l.suspendedLanes|=u,l.pingedLanes&=~u,l=l.expirationTimes;0<u;){var v=31-Xt(u),S=1<<v;l[v]=-1,u&=~S}}function JE(l){if((Rn&6)!==0)throw Error(t(327));fd();var u=an(l,0);if((u&1)===0)return fs(l,be()),null;var v=i0(l,u);if(l.tag!==0&&v===2){var S=yn(l);S!==0&&(u=S,v=E_(l,S))}if(v===1)throw v=Ap,vu(l,0),Kl(l,u),fs(l,be()),v;if(v===6)throw Error(t(345));return l.finishedWork=l.current.alternate,l.finishedLanes=u,yu(l,ds,Ka),fs(l,be()),null}function T_(l,u){var v=Rn;Rn|=1;try{return l(u)}finally{Rn=v,Rn===0&&(dd=be()+500,Qc&&Ks())}}function gu(l){Yl!==null&&Yl.tag===0&&(Rn&6)===0&&fd();var u=Rn;Rn|=1;var v=to.transition,S=An;try{if(to.transition=null,An=1,l)return l()}finally{An=S,to.transition=v,Rn=u,(Rn&6)===0&&Ks()}}function b_(){ks=hd.current,Xn(hd)}function vu(l,u){l.finishedWork=null,l.finishedLanes=0;var v=l.timeoutHandle;if(v!==-1&&(l.timeoutHandle=-1,rp(v)),Br!==null)for(v=Br.return;v!==null;){var S=v;switch(Eo(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&Kc();break;case 3:ia(),Xn(yi),Xn(Yr),Qs();break;case 5:Wl(S);break;case 4:ia();break;case 13:Xn(Kn);break;case 19:Xn(Kn);break;case 10:iu(S.type._context);break;case 22:case 23:b_()}v=v.return}if(oi=l,Br=l=Jl(l.current,null),Ei=ks=u,ei=0,Ap=null,__=Jg=mu=0,ds=Cp=null,To!==null){for(u=0;u<To.length;u++)if(v=To[u],S=v.interleaved,S!==null){v.interleaved=null;var C=S.next,L=v.pending;if(L!==null){var z=L.next;L.next=C,S.next=z}v.pending=S}To=null}return l}function QE(l,u){do{var v=Br;try{if(Ga(),$a.current=ld,Ls){for(var S=$n.memoizedState;S!==null;){var C=S.queue;C!==null&&(C.pending=null),S=S.next}Ls=!1}if(Ao=0,Cn=dr=$n=null,si=!1,sa=0,y_.current=null,v===null||v.return===null){ei=1,Ap=u,Br=null;break}e:{var L=l,z=v.return,re=v,pe=u;if(u=Ei,re.flags|=32768,pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var Pe=pe,Ze=re,Qe=Ze.tag;if((Ze.mode&1)===0&&(Qe===0||Qe===11||Qe===15)){var qe=Ze.alternate;qe?(Ze.updateQueue=qe.updateQueue,Ze.memoizedState=qe.memoizedState,Ze.lanes=qe.lanes):(Ze.updateQueue=null,Ze.memoizedState=null)}var Et=Tt(z);if(Et!==null){Et.flags&=-257,Jt(Et,z,re,L,u),Et.mode&1&&nt(L,Pe,u),u=Et,pe=Pe;var Lt=u.updateQueue;if(Lt===null){var kt=new Set;kt.add(pe),u.updateQueue=kt}else Lt.add(pe);break e}else{if((u&1)===0){nt(L,Pe,u),A_();break e}pe=Error(t(426))}}else if(Zn&&re.mode&1){var Cr=Tt(z);if(Cr!==null){(Cr.flags&65536)===0&&(Cr.flags|=256),Jt(Cr,z,re,L,u),Vl(T(pe,re));break e}}L=pe=T(pe,re),ei!==4&&(ei=2),Cp===null?Cp=[L]:Cp.push(L),L=z;do{switch(L.tag){case 3:L.flags|=65536,u&=-u,L.lanes|=u;var Me=ve(L,pe,u);Wa(L,Me);break e;case 1:re=pe;var ge=L.type,Te=L.stateNode;if((L.flags&128)===0&&(typeof ge.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(ql===null||!ql.has(Te)))){L.flags|=65536,u&=-u,L.lanes|=u;var rt=Oe(L,re,u);Wa(L,rt);break e}}L=L.return}while(L!==null)}nM(v)}catch(Ot){u=Ot,Br===v&&v!==null&&(Br=v=v.return);continue}break}while(!0)}function eM(){var l=Kg.current;return Kg.current=ld,l===null?ld:l}function A_(){(ei===0||ei===3||ei===2)&&(ei=4),oi===null||(mu&268435455)===0&&(Jg&268435455)===0||Kl(oi,Ei)}function i0(l,u){var v=Rn;Rn|=2;var S=eM();(oi!==l||Ei!==u)&&(Ka=null,vu(l,u));do try{p3();break}catch(C){QE(l,C)}while(!0);if(Ga(),Rn=v,Kg.current=S,Br!==null)throw Error(t(261));return oi=null,Ei=0,ei}function p3(){for(;Br!==null;)tM(Br)}function m3(){for(;Br!==null&&!Le();)tM(Br)}function tM(l){var u=sM(l.alternate,l,ks);l.memoizedProps=l.pendingProps,u===null?nM(l):Br=u,y_.current=null}function nM(l){var u=l;do{var v=u.alternate;if(l=u.return,(u.flags&32768)===0){if(v=a3(v,u,ks),v!==null){Br=v;return}}else{if(v=l3(v,u),v!==null){v.flags&=32767,Br=v;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{ei=6,Br=null;return}}if(u=u.sibling,u!==null){Br=u;return}Br=u=l}while(u!==null);ei===0&&(ei=5)}function yu(l,u,v){var S=An,C=to.transition;try{to.transition=null,An=1,g3(l,u,v,S)}finally{to.transition=C,An=S}return null}function g3(l,u,v,S){do fd();while(Yl!==null);if((Rn&6)!==0)throw Error(t(327));v=l.finishedWork;var C=l.finishedLanes;if(v===null)return null;if(l.finishedWork=null,l.finishedLanes=0,v===l.current)throw Error(t(177));l.callbackNode=null,l.callbackPriority=0;var L=v.lanes|v.childLanes;if(Xs(l,L),l===oi&&(Br=oi=null,Ei=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||e0||(e0=!0,oM(St,function(){return fd(),null})),L=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||L){L=to.transition,to.transition=null;var z=An;An=1;var re=Rn;Rn|=4,y_.current=null,u3(l,v),XE(v,l),Or(ep),rs=!!Fl,ep=Fl=null,l.current=v,h3(v),De(),Rn=re,An=z,to.transition=L}else l.current=v;if(e0&&(e0=!1,Yl=l,t0=C),L=l.pendingLanes,L===0&&(ql=null),lt(v.stateNode),fs(l,be()),u!==null)for(S=l.onRecoverableError,v=0;v<u.length;v++)C=u[v],S(C.value,{componentStack:C.stack,digest:C.digest});if(Qg)throw Qg=!1,l=w_,w_=null,l;return(t0&1)!==0&&l.tag!==0&&fd(),L=l.pendingLanes,(L&1)!==0?l===S_?Pp++:(Pp=0,S_=l):Pp=0,Ks(),null}function fd(){if(Yl!==null){var l=El(t0),u=to.transition,v=An;try{if(to.transition=null,An=16>l?16:l,Yl===null)var S=!1;else{if(l=Yl,Yl=null,t0=0,(Rn&6)!==0)throw Error(t(331));var C=Rn;for(Rn|=4,Pt=l.current;Pt!==null;){var L=Pt,z=L.child;if((Pt.flags&16)!==0){var re=L.deletions;if(re!==null){for(var pe=0;pe<re.length;pe++){var Pe=re[pe];for(Pt=Pe;Pt!==null;){var Ze=Pt;switch(Ze.tag){case 0:case 11:case 15:bp(8,Ze,L)}var Qe=Ze.child;if(Qe!==null)Qe.return=Ze,Pt=Qe;else for(;Pt!==null;){Ze=Pt;var qe=Ze.sibling,Et=Ze.return;if(VE(Ze),Ze===Pe){Pt=null;break}if(qe!==null){qe.return=Et,Pt=qe;break}Pt=Et}}}var Lt=L.alternate;if(Lt!==null){var kt=Lt.child;if(kt!==null){Lt.child=null;do{var Cr=kt.sibling;kt.sibling=null,kt=Cr}while(kt!==null)}}Pt=L}}if((L.subtreeFlags&2064)!==0&&z!==null)z.return=L,Pt=z;else e:for(;Pt!==null;){if(L=Pt,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:bp(9,L,L.return)}var Me=L.sibling;if(Me!==null){Me.return=L.return,Pt=Me;break e}Pt=L.return}}var ge=l.current;for(Pt=ge;Pt!==null;){z=Pt;var Te=z.child;if((z.subtreeFlags&2064)!==0&&Te!==null)Te.return=z,Pt=Te;else e:for(z=ge;Pt!==null;){if(re=Pt,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:Zg(9,re)}}catch(Ot){wr(re,re.return,Ot)}if(re===z){Pt=null;break e}var rt=re.sibling;if(rt!==null){rt.return=re.return,Pt=rt;break e}Pt=re.return}}if(Rn=C,Ks(),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot($t,l)}catch{}S=!0}return S}finally{An=v,to.transition=u}}return!1}function rM(l,u,v){u=T(v,u),u=ve(l,u,1),l=Qn(l,u,1),u=Ki(),l!==null&&(Tr(l,1,u),fs(l,u))}function wr(l,u,v){if(l.tag===3)rM(l,l,v);else for(;u!==null;){if(u.tag===3){rM(u,l,v);break}else if(u.tag===1){var S=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(ql===null||!ql.has(S))){l=T(v,l),l=Oe(u,l,1),u=Qn(u,l,1),l=Ki(),u!==null&&(Tr(u,1,l),fs(u,l));break}}u=u.return}}function v3(l,u,v){var S=l.pingCache;S!==null&&S.delete(u),u=Ki(),l.pingedLanes|=l.suspendedLanes&v,oi===l&&(Ei&v)===v&&(ei===4||ei===3&&(Ei&130023424)===Ei&&500>be()-x_?vu(l,0):__|=v),fs(l,u)}function iM(l,u){u===0&&((l.mode&1)===0?u=1:(u=Bn,Bn<<=1,(Bn&130023424)===0&&(Bn=4194304)));var v=Ki();l=Ps(l,u),l!==null&&(Tr(l,u,v),fs(l,v))}function y3(l){var u=l.memoizedState,v=0;u!==null&&(v=u.retryLane),iM(l,v)}function _3(l,u){var v=0;switch(l.tag){case 13:var S=l.stateNode,C=l.memoizedState;C!==null&&(v=C.retryLane);break;case 19:S=l.stateNode;break;default:throw Error(t(314))}S!==null&&S.delete(u),iM(l,v)}var sM;sM=function(l,u,v){if(l!==null)if(l.memoizedProps!==u.pendingProps||yi.current)cn=!0;else{if((l.lanes&v)===0&&(u.flags&128)===0)return cn=!1,o3(l,u,v);cn=(l.flags&131072)!==0}else cn=!1,Zn&&(u.flags&1048576)!==0&&lp(u,Jh,u.index);switch(u.lanes=0,u.tag){case 2:var S=u.type;qg(l,u),l=u.pendingProps;var C=Na(u,Yr.current);ra(u,v),C=cu(null,u,S,l,C,v);var L=gp();return u.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,ri(S)?(L=!0,Ua(u)):L=!1,u.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,ln(u),C.updater=cd,u.stateNode=C,C._reactInternals=u,w(u,S,l,v),u=rn(null,u,S,!0,L,v)):(u.tag=0,Zn&&L&&cp(u),_t(null,u,C,v),u=u.child),u;case 16:S=u.elementType;e:{switch(qg(l,u),l=u.pendingProps,C=S._init,S=C(S._payload),u.type=S,C=u.tag=w3(S),l=hs(S,l),C){case 0:u=mt(null,u,S,l,v);break e;case 1:u=Dt(null,u,S,l,v);break e;case 11:u=Qr(null,u,S,l,v);break e;case 14:u=Zi(null,u,S,hs(S.type,l),v);break e}throw Error(t(306,S,""))}return u;case 0:return S=u.type,C=u.pendingProps,C=u.elementType===S?C:hs(S,C),mt(l,u,S,C,v);case 1:return S=u.type,C=u.pendingProps,C=u.elementType===S?C:hs(S,C),Dt(l,u,S,C,v);case 3:e:{if(Qt(u),l===null)throw Error(t(387));S=u.pendingProps,L=u.memoizedState,C=L.element,mr(l,u),hr(u,S,null,v);var z=u.memoizedState;if(S=z.element,L.isDehydrated)if(L={element:S,isDehydrated:!1,cache:z.cache,pendingSuspenseBoundaries:z.pendingSuspenseBoundaries,transitions:z.transitions},u.updateQueue.baseState=L,u.memoizedState=L,u.flags&256){C=T(Error(t(423)),u),u=Tn(l,u,S,v,C);break e}else if(S!==C){C=T(Error(t(424)),u),u=Tn(l,u,S,v,C);break e}else for(xi=yo(u.stateNode.containerInfo.firstChild),Zr=u,Zn=!0,us=null,v=ru(u,null,S,v),u.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(na(),S===C){u=Za(l,u,v);break e}_t(l,u,S,v)}u=u.child}return u;case 5:return Xa(u),l===null&&ed(u),S=u.type,C=u.pendingProps,L=l!==null?l.memoizedProps:null,z=C.children,tp(S,C)?z=null:L!==null&&tp(S,L)&&(u.flags|=32),Ie(l,u),_t(l,u,z,v),u.child;case 6:return l===null&&ed(u),null;case 13:return Ro(l,u,v);case 4:return au(u,u.stateNode.containerInfo),S=u.pendingProps,l===null?u.child=za(u,null,S,v):_t(l,u,S,v),u.child;case 11:return S=u.type,C=u.pendingProps,C=u.elementType===S?C:hs(S,C),Qr(l,u,S,C,v);case 7:return _t(l,u,u.pendingProps,v),u.child;case 8:return _t(l,u,u.pendingProps.children,v),u.child;case 12:return _t(l,u,u.pendingProps.children,v),u.child;case 10:e:{if(S=u.type._context,C=u.pendingProps,L=u.memoizedProps,z=C.value,Vn(Va,S._currentValue),S._currentValue=z,L!==null)if(Gi(L.value,z)){if(L.children===C.children&&!yi.current){u=Za(l,u,v);break e}}else for(L=u.child,L!==null&&(L.return=u);L!==null;){var re=L.dependencies;if(re!==null){z=L.child;for(var pe=re.firstContext;pe!==null;){if(pe.context===S){if(L.tag===1){pe=Nn(-1,v&-v),pe.tag=2;var Pe=L.updateQueue;if(Pe!==null){Pe=Pe.shared;var Ze=Pe.pending;Ze===null?pe.next=pe:(pe.next=Ze.next,Ze.next=pe),Pe.pending=pe}}L.lanes|=v,pe=L.alternate,pe!==null&&(pe.lanes|=v),su(L.return,v,u),re.lanes|=v;break}pe=pe.next}}else if(L.tag===10)z=L.type===u.type?null:L.child;else if(L.tag===18){if(z=L.return,z===null)throw Error(t(341));z.lanes|=v,re=z.alternate,re!==null&&(re.lanes|=v),su(z,v,u),z=L.sibling}else z=L.child;if(z!==null)z.return=L;else for(z=L;z!==null;){if(z===u){z=null;break}if(L=z.sibling,L!==null){L.return=z.return,z=L;break}z=z.return}L=z}_t(l,u,C.children,v),u=u.child}return u;case 9:return C=u.type,S=u.pendingProps.children,ra(u,v),C=Xi(C),S=S(C),u.flags|=1,_t(l,u,S,v),u.child;case 14:return S=u.type,C=hs(S,u.pendingProps),C=hs(S.type,C),Zi(l,u,S,C,v);case 15:return Ae(l,u,u.type,u.pendingProps,v);case 17:return S=u.type,C=u.pendingProps,C=u.elementType===S?C:hs(S,C),qg(l,u),u.tag=1,ri(S)?(l=!0,Ua(u)):l=!1,ra(u,v),d(u,S,C),w(u,S,C,v),rn(null,u,S,!0,l,v);case 19:return NE(l,u,v);case 22:return ye(l,u,v)}throw Error(t(156,u.tag))};function oM(l,u){return ie(l,u)}function x3(l,u,v,S){this.tag=l,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function no(l,u,v,S){return new x3(l,u,v,S)}function C_(l){return l=l.prototype,!(!l||!l.isReactComponent)}function w3(l){if(typeof l=="function")return C_(l)?1:0;if(l!=null){if(l=l.$$typeof,l===le)return 11;if(l===me)return 14}return 2}function Jl(l,u){var v=l.alternate;return v===null?(v=no(l.tag,u,l.key,l.mode),v.elementType=l.elementType,v.type=l.type,v.stateNode=l.stateNode,v.alternate=l,l.alternate=v):(v.pendingProps=u,v.type=l.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=l.flags&14680064,v.childLanes=l.childLanes,v.lanes=l.lanes,v.child=l.child,v.memoizedProps=l.memoizedProps,v.memoizedState=l.memoizedState,v.updateQueue=l.updateQueue,u=l.dependencies,v.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},v.sibling=l.sibling,v.index=l.index,v.ref=l.ref,v}function s0(l,u,v,S,C,L){var z=2;if(S=l,typeof l=="function")C_(l)&&(z=1);else if(typeof l=="string")z=5;else e:switch(l){case O:return _u(v.children,C,L,u);case V:z=8,C|=8;break;case k:return l=no(12,v,u,C|2),l.elementType=k,l.lanes=L,l;case _e:return l=no(13,v,u,C),l.elementType=_e,l.lanes=L,l;case Y:return l=no(19,v,u,C),l.elementType=Y,l.lanes=L,l;case Ee:return o0(v,C,L,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case F:z=10;break e;case Q:z=9;break e;case le:z=11;break e;case me:z=14;break e;case ue:z=16,S=null;break e}throw Error(t(130,l==null?l:typeof l,""))}return u=no(z,v,u,C),u.elementType=l,u.type=S,u.lanes=L,u}function _u(l,u,v,S){return l=no(7,l,S,u),l.lanes=v,l}function o0(l,u,v,S){return l=no(22,l,S,u),l.elementType=Ee,l.lanes=v,l.stateNode={isHidden:!1},l}function P_(l,u,v){return l=no(6,l,null,u),l.lanes=v,l}function R_(l,u,v){return u=no(4,l.children!==null?l.children:[],l.key,u),u.lanes=v,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function S3(l,u,v,S,C){this.tag=u,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mi(0),this.expirationTimes=Mi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.identifierPrefix=S,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function L_(l,u,v,S,C,L,z,re,pe){return l=new S3(l,u,v,re,pe),u===1?(u=1,L===!0&&(u|=8)):u=0,L=no(3,null,null,u),l.current=L,L.stateNode=l,L.memoizedState={element:S,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},ln(L),l}function E3(l,u,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:S==null?null:""+S,children:l,containerInfo:u,implementation:v}}function aM(l){if(!l)return xo;l=l._reactInternals;e:{if(W(l)!==l||l.tag!==1)throw Error(t(170));var u=l;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(ri(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(l.tag===1){var v=l.type;if(ri(v))return Jc(l,v,u)}return u}function lM(l,u,v,S,C,L,z,re,pe){return l=L_(v,S,!0,l,C,L,z,re,pe),l.context=aM(null),v=l.current,S=Ki(),C=Zl(v),L=Nn(S,C),L.callback=u??null,Qn(v,L,C),l.current.lanes=C,Tr(l,C,S),fs(l,S),l}function a0(l,u,v,S){var C=u.current,L=Ki(),z=Zl(C);return v=aM(v),u.context===null?u.context=v:u.pendingContext=v,u=Nn(L,z),u.payload={element:l},S=S===void 0?null:S,S!==null&&(u.callback=S),l=Qn(C,u,z),l!==null&&(ko(l,C,z,L),ii(l,C,z)),z}function l0(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function cM(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var v=l.retryLane;l.retryLane=v!==0&&v<u?v:u}}function I_(l,u){cM(l,u),(l=l.alternate)&&cM(l,u)}function M3(){return null}var uM=typeof reportError=="function"?reportError:function(l){console.error(l)};function k_(l){this._internalRoot=l}c0.prototype.render=k_.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(t(409));a0(l,u,null,null)},c0.prototype.unmount=k_.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;gu(function(){a0(null,l,null,null)}),u[ji]=null}};function c0(l){this._internalRoot=l}c0.prototype.unstable_scheduleHydration=function(l){if(l){var u=vh();l={blockedOn:null,target:l,priority:u};for(var v=0;v<qo.length&&u!==0&&u<qo[v].priority;v++);qo.splice(v,0,l),v===0&&xh(l)}};function D_(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function u0(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function hM(){}function T3(l,u,v,S,C){if(C){if(typeof S=="function"){var L=S;S=function(){var Pe=l0(z);L.call(Pe)}}var z=lM(u,S,l,0,null,!1,!1,"",hM);return l._reactRootContainer=z,l[ji]=z.current,Nl(l.nodeType===8?l.parentNode:l),gu(),z}for(;C=l.lastChild;)l.removeChild(C);if(typeof S=="function"){var re=S;S=function(){var Pe=l0(pe);re.call(Pe)}}var pe=L_(l,0,!1,null,null,!1,!1,"",hM);return l._reactRootContainer=pe,l[ji]=pe.current,Nl(l.nodeType===8?l.parentNode:l),gu(function(){a0(u,pe,v,S)}),pe}function h0(l,u,v,S,C){var L=v._reactRootContainer;if(L){var z=L;if(typeof C=="function"){var re=C;C=function(){var pe=l0(z);re.call(pe)}}a0(u,z,l,C)}else z=T3(v,u,l,C,S);return l0(z)}Oc=function(l){switch(l.tag){case 3:var u=l.stateNode;if(u.current.memoizedState.isDehydrated){var v=vn(u.pendingLanes);v!==0&&(Sl(u,v|1),fs(u,be()),(Rn&6)===0&&(dd=be()+500,Ks()))}break;case 13:gu(function(){var S=Ps(l,1);if(S!==null){var C=Ki();ko(S,l,1,C)}}),I_(l,1)}},Uf=function(l){if(l.tag===13){var u=Ps(l,134217728);if(u!==null){var v=Ki();ko(u,l,134217728,v)}I_(l,134217728)}},wg=function(l){if(l.tag===13){var u=Zl(l),v=Ps(l,u);if(v!==null){var S=Ki();ko(v,l,u,S)}I_(l,u)}},vh=function(){return An},yh=function(l,u){var v=An;try{return An=l,u()}finally{An=v}},Se=function(l,u,v){switch(u){case"input":if(Rt(l,v),u=v.name,v.type==="radio"&&u!=null){for(v=l;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<v.length;u++){var S=v[u];if(S!==l&&S.form===l.form){var C=Yh(S);if(!C)throw Error(t(90));oe(S),Rt(S,C)}}}break;case"textarea":Ve(l,v);break;case"select":u=v.value,u!=null&&we(l,!!v.multiple,u,!1)}},on=T_,gn=gu;var b3={usingClientEntryPoint:!1,Events:[_o,pr,Yh,Ut,At,T_]},Rp={findFiberByHostInstance:ta,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A3={bundleType:Rp.bundleType,version:Rp.version,rendererPackageName:Rp.rendererPackageName,rendererConfig:Rp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=J(l),l===null?null:l.stateNode},findFiberByHostInstance:Rp.findFiberByHostInstance||M3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var d0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!d0.isDisabled&&d0.supportsFiber)try{$t=d0.inject(A3),ut=d0}catch{}}return ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b3,ps.createPortal=function(l,u){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D_(u))throw Error(t(200));return E3(l,u,null,v)},ps.createRoot=function(l,u){if(!D_(l))throw Error(t(299));var v=!1,S="",C=uM;return u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(S=u.identifierPrefix),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),u=L_(l,1,!1,null,null,v,!1,S,C),l[ji]=u.current,Nl(l.nodeType===8?l.parentNode:l),new k_(u)},ps.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(t(188)):(l=Object.keys(l).join(","),Error(t(268,l)));return l=J(u),l=l===null?null:l.stateNode,l},ps.flushSync=function(l){return gu(l)},ps.hydrate=function(l,u,v){if(!u0(u))throw Error(t(200));return h0(null,l,u,!0,v)},ps.hydrateRoot=function(l,u,v){if(!D_(l))throw Error(t(405));var S=v!=null&&v.hydratedSources||null,C=!1,L="",z=uM;if(v!=null&&(v.unstable_strictMode===!0&&(C=!0),v.identifierPrefix!==void 0&&(L=v.identifierPrefix),v.onRecoverableError!==void 0&&(z=v.onRecoverableError)),u=lM(u,null,l,1,v??null,C,!1,L,z),l[ji]=u.current,Nl(l),S)for(l=0;l<S.length;l++)v=S[l],C=v._getVersion,C=C(v._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[v,C]:u.mutableSourceEagerHydrationData.push(v,C);return new c0(u)},ps.render=function(l,u,v){if(!u0(u))throw Error(t(200));return h0(null,l,u,!1,v)},ps.unmountComponentAtNode=function(l){if(!u0(l))throw Error(t(40));return l._reactRootContainer?(gu(function(){h0(null,null,l,!1,function(){l._reactRootContainer=null,l[ji]=null})}),!0):!1},ps.unstable_batchedUpdates=T_,ps.unstable_renderSubtreeIntoContainer=function(l,u,v,S){if(!u0(v))throw Error(t(200));if(l==null||l._reactInternals===void 0)throw Error(t(38));return h0(l,u,v,!1,S)},ps.version="18.3.1-next-f1338f8080-20240426",ps}var _M;function N3(){if(_M)return U_.exports;_M=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),U_.exports=O3(),U_.exports}var xM;function U3(){if(xM)return f0;xM=1;var r=N3();return f0.createRoot=r.createRoot,f0.hydrateRoot=r.hydrateRoot,f0}var F3=U3();const B3=dy(F3);var Ip={},wM;function z3(){if(wM)return Ip;wM=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.parse=o,Ip.serialize=h;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const g=function(){};return g.prototype=Object.create(null),g})();function o(g,y){const _=new s,M=g.length;if(M<2)return _;const E=y?.decode||f;let x=0;do{const A=g.indexOf("=",x);if(A===-1)break;const b=g.indexOf(";",x),R=b===-1?M:b;if(A>R){x=g.lastIndexOf(";",A-1)+1;continue}const N=a(g,x,A),I=c(g,A,N),O=g.slice(N,I);if(_[O]===void 0){let V=a(g,A+1,R),k=c(g,R,V);const F=E(g.slice(V,k));_[O]=F}x=R+1}while(x<M);return _}function a(g,y,_){do{const M=g.charCodeAt(y);if(M!==32&&M!==9)return y}while(++y<_);return _}function c(g,y,_){for(;y>_;){const M=g.charCodeAt(--y);if(M!==32&&M!==9)return y+1}return _}function h(g,y,_){const M=_?.encode||encodeURIComponent;if(!r.test(g))throw new TypeError(`argument name is invalid: ${g}`);const E=M(y);if(!e.test(E))throw new TypeError(`argument val is invalid: ${y}`);let x=g+"="+E;if(!_)return x;if(_.maxAge!==void 0){if(!Number.isInteger(_.maxAge))throw new TypeError(`option maxAge is invalid: ${_.maxAge}`);x+="; Max-Age="+_.maxAge}if(_.domain){if(!t.test(_.domain))throw new TypeError(`option domain is invalid: ${_.domain}`);x+="; Domain="+_.domain}if(_.path){if(!n.test(_.path))throw new TypeError(`option path is invalid: ${_.path}`);x+="; Path="+_.path}if(_.expires){if(!m(_.expires)||!Number.isFinite(_.expires.valueOf()))throw new TypeError(`option expires is invalid: ${_.expires}`);x+="; Expires="+_.expires.toUTCString()}if(_.httpOnly&&(x+="; HttpOnly"),_.secure&&(x+="; Secure"),_.partitioned&&(x+="; Partitioned"),_.priority)switch(typeof _.priority=="string"?_.priority.toLowerCase():void 0){case"low":x+="; Priority=Low";break;case"medium":x+="; Priority=Medium";break;case"high":x+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${_.priority}`)}if(_.sameSite)switch(typeof _.sameSite=="string"?_.sameSite.toLowerCase():_.sameSite){case!0:case"strict":x+="; SameSite=Strict";break;case"lax":x+="; SameSite=Lax";break;case"none":x+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${_.sameSite}`)}return x}function f(g){if(g.indexOf("%")===-1)return g;try{return decodeURIComponent(g)}catch{return g}}function m(g){return i.call(g)==="[object Date]"}return Ip}z3();var SM="popstate";function V3(r={}){function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return pw("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Sm(i)}return G3(e,t,null,r)}function yr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ma(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function H3(){return Math.random().toString(36).substring(2,10)}function EM(r,e){return{usr:r.state,key:r.key,idx:e}}function pw(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Rf(e):e,state:t,key:e&&e.key||n||H3()}}function Sm({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Rf(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function G3(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a="POP",c=null,h=f();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function f(){return(o.state||{idx:null}).idx}function m(){a="POP";let E=f(),x=E==null?null:E-h;h=E,c&&c({action:a,location:M.location,delta:x})}function g(E,x){a="PUSH";let A=pw(M.location,E,x);h=f()+1;let b=EM(A,h),R=M.createHref(A);try{o.pushState(b,"",R)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(R)}s&&c&&c({action:a,location:M.location,delta:1})}function y(E,x){a="REPLACE";let A=pw(M.location,E,x);h=f();let b=EM(A,h),R=M.createHref(A);o.replaceState(b,"",R),s&&c&&c({action:a,location:M.location,delta:0})}function _(E){return W3(E)}let M={get action(){return a},get location(){return r(i,o)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(SM,m),c=E,()=>{i.removeEventListener(SM,m),c=null}},createHref(E){return e(i,E)},createURL:_,encodeLocation(E){let x=_(E);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:y,go(E){return o.go(E)}};return M}function W3(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),yr(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:Sm(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function kC(r,e,t="/"){return j3(r,e,t,!1)}function j3(r,e,t,n){let i=typeof e=="string"?Rf(e):e,s=pl(i.pathname||"/",t);if(s==null)return null;let o=DC(r);X3(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let h=rk(s);a=tk(o[c],h,n)}return a}function DC(r,e=[],t=[],n=""){let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(yr(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let h=hl([n,c.relativePath]),f=t.concat(c);s.children&&s.children.length>0&&(yr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),DC(s.children,e,f,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:Q3(h,s.index),routesMeta:f})};return r.forEach((s,o)=>{if(s.path===""||!s.path?.includes("?"))i(s,o);else for(let a of OC(s.path))i(s,o,a)}),e}function OC(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=OC(n.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>r.startsWith("/")&&c===""?"/":c)}function X3(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:ek(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var $3=/^:[\w-]+$/,q3=3,Y3=2,Z3=1,K3=10,J3=-2,MM=r=>r==="*";function Q3(r,e){let t=r.split("/"),n=t.length;return t.some(MM)&&(n+=J3),e&&(n+=Y3),t.filter(i=>!MM(i)).reduce((i,s)=>i+($3.test(s)?q3:s===""?Z3:K3),n)}function ek(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function tk(r,e,t=!1){let{routesMeta:n}=r,i={},s="/",o=[];for(let a=0;a<n.length;++a){let c=n[a],h=a===n.length-1,f=s==="/"?e:e.slice(s.length)||"/",m=Hv({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},f),g=c.route;if(!m&&h&&t&&!n[n.length-1].route.index&&(m=Hv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:hl([s,m.pathname]),pathnameBase:ak(hl([s,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(s=hl([s,m.pathnameBase]))}return o}function Hv(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=nk(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((h,{paramName:f,isOptional:m},g)=>{if(f==="*"){let _=a[g]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const y=a[g];return m&&!y?h[f]=void 0:h[f]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:r}}function nk(r,e=!1,t=!0){ma(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(n.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function rk(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ma(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function pl(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function ik(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?Rf(r):r;return{pathname:t?t.startsWith("/")?t:sk(t,e):e,search:lk(n),hash:ck(i)}}function sk(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function z_(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ok(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function NC(r){let e=ok(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function UC(r,e,t,n=!1){let i;typeof r=="string"?i=Rf(r):(i={...r},yr(!i.pathname||!i.pathname.includes("?"),z_("?","pathname","search",i)),yr(!i.pathname||!i.pathname.includes("#"),z_("#","pathname","hash",i)),yr(!i.search||!i.search.includes("#"),z_("#","search","hash",i)));let s=r===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let m=e.length-1;if(!n&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}a=m>=0?e[m]:"/"}let c=ik(i,a),h=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||f)&&(c.pathname+="/"),c}var hl=r=>r.join("/").replace(/\/\/+/g,"/"),ak=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),lk=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,ck=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function uk(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var FC=["POST","PUT","PATCH","DELETE"];new Set(FC);var hk=["GET",...FC];new Set(hk);var Lf=j.createContext(null);Lf.displayName="DataRouter";var py=j.createContext(null);py.displayName="DataRouterState";var BC=j.createContext({isTransitioning:!1});BC.displayName="ViewTransition";var dk=j.createContext(new Map);dk.displayName="Fetchers";var fk=j.createContext(null);fk.displayName="Await";var va=j.createContext(null);va.displayName="Navigation";var qm=j.createContext(null);qm.displayName="Location";var yl=j.createContext({outlet:null,matches:[],isDataRoute:!1});yl.displayName="Route";var H1=j.createContext(null);H1.displayName="RouteError";function pk(r,{relative:e}={}){yr(Ym(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=j.useContext(va),{hash:i,pathname:s,search:o}=Zm(r,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:hl([t,s])),n.createHref({pathname:a,search:o,hash:i})}function Ym(){return j.useContext(qm)!=null}function ah(){return yr(Ym(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(qm).location}var zC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function VC(r){j.useContext(va).static||j.useLayoutEffect(r)}function mk(){let{isDataRoute:r}=j.useContext(yl);return r?Ck():gk()}function gk(){yr(Ym(),"useNavigate() may be used only in the context of a <Router> component.");let r=j.useContext(Lf),{basename:e,navigator:t}=j.useContext(va),{matches:n}=j.useContext(yl),{pathname:i}=ah(),s=JSON.stringify(NC(n)),o=j.useRef(!1);return VC(()=>{o.current=!0}),j.useCallback((c,h={})=>{if(ma(o.current,zC),!o.current)return;if(typeof c=="number"){t.go(c);return}let f=UC(c,JSON.parse(s),i,h.relative==="path");r==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:hl([e,f.pathname])),(h.replace?t.replace:t.push)(f,h.state,h)},[e,t,s,i,r])}j.createContext(null);function Zm(r,{relative:e}={}){let{matches:t}=j.useContext(yl),{pathname:n}=ah(),i=JSON.stringify(NC(t));return j.useMemo(()=>UC(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function vk(r,e){return HC(r,e)}function HC(r,e,t,n){yr(Ym(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=j.useContext(va),{matches:s}=j.useContext(yl),o=s[s.length-1],a=o?o.params:{},c=o?o.pathname:"/",h=o?o.pathnameBase:"/",f=o&&o.route;{let x=f&&f.path||"";GC(c,!f||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let m=ah(),g;if(e){let x=typeof e=="string"?Rf(e):e;yr(h==="/"||x.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${x.pathname}" was given in the \`location\` prop.`),g=x}else g=m;let y=g.pathname||"/",_=y;if(h!=="/"){let x=h.replace(/^\//,"").split("/");_="/"+y.replace(/^\//,"").split("/").slice(x.length).join("/")}let M=kC(r,{pathname:_});ma(f||M!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),ma(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=Sk(M&&M.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:hl([h,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:hl([h,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,t,n);return e&&E?j.createElement(qm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},E):E}function yk(){let r=Ak(),e=uk(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",r),o=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:s},"ErrorBoundary")," or"," ",j.createElement("code",{style:s},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:i},t):null,o)}var _k=j.createElement(yk,null),xk=class extends j.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?j.createElement(yl.Provider,{value:this.props.routeContext},j.createElement(H1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function wk({routeContext:r,match:e,children:t}){let n=j.useContext(Lf);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(yl.Provider,{value:r},t)}function Sk(r,e=[],t=null,n=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,s=t?.errors;if(s!=null){let c=i.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);yr(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,a=-1;if(t)for(let c=0;c<i.length;c++){let h=i[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(a=c),h.route.id){let{loaderData:f,errors:m}=t,g=h.route.loader&&!f.hasOwnProperty(h.route.id)&&(!m||m[h.route.id]===void 0);if(h.route.lazy||g){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((c,h,f)=>{let m,g=!1,y=null,_=null;t&&(m=s&&h.route.id?s[h.route.id]:void 0,y=h.route.errorElement||_k,o&&(a<0&&f===0?(GC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,_=null):a===f&&(g=!0,_=h.route.hydrateFallbackElement||null)));let M=e.concat(i.slice(0,f+1)),E=()=>{let x;return m?x=y:g?x=_:h.route.Component?x=j.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=c,j.createElement(wk,{match:h,routeContext:{outlet:c,matches:M,isDataRoute:t!=null},children:x})};return t&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?j.createElement(xk,{location:t.location,revalidation:t.revalidation,component:y,error:m,children:E(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):E()},null)}function G1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ek(r){let e=j.useContext(Lf);return yr(e,G1(r)),e}function Mk(r){let e=j.useContext(py);return yr(e,G1(r)),e}function Tk(r){let e=j.useContext(yl);return yr(e,G1(r)),e}function W1(r){let e=Tk(r),t=e.matches[e.matches.length-1];return yr(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function bk(){return W1("useRouteId")}function Ak(){let r=j.useContext(H1),e=Mk("useRouteError"),t=W1("useRouteError");return r!==void 0?r:e.errors?.[t]}function Ck(){let{router:r}=Ek("useNavigate"),e=W1("useNavigate"),t=j.useRef(!1);return VC(()=>{t.current=!0}),j.useCallback(async(i,s={})=>{ma(t.current,zC),t.current&&(typeof i=="number"?r.navigate(i):await r.navigate(i,{fromRouteId:e,...s}))},[r,e])}var TM={};function GC(r,e,t){!e&&!TM[r]&&(TM[r]=!0,ma(!1,t))}j.memo(Pk);function Pk({routes:r,future:e,state:t}){return HC(r,void 0,t,e)}function mw(r){yr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Rk({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:s=!1}){yr(!Ym(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=r.replace(/^\/*/,"/"),a=j.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof t=="string"&&(t=Rf(t));let{pathname:c="/",search:h="",hash:f="",state:m=null,key:g="default"}=t,y=j.useMemo(()=>{let _=pl(c,o);return _==null?null:{location:{pathname:_,search:h,hash:f,state:m,key:g},navigationType:n}},[o,c,h,f,m,g,n]);return ma(y!=null,`<Router basename="${o}"> is not able to match the URL "${c}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:j.createElement(va.Provider,{value:a},j.createElement(qm.Provider,{children:e,value:y}))}function Lk({children:r,location:e}){return vk(gw(r),e)}function gw(r,e=[]){let t=[];return j.Children.forEach(r,(n,i)=>{if(!j.isValidElement(n))return;let s=[...e,i];if(n.type===j.Fragment){t.push.apply(t,gw(n.props.children,s));return}yr(n.type===mw,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=gw(n.props.children,s)),t.push(o)}),t}var Tv="get",bv="application/x-www-form-urlencoded";function my(r){return r!=null&&typeof r.tagName=="string"}function Ik(r){return my(r)&&r.tagName.toLowerCase()==="button"}function kk(r){return my(r)&&r.tagName.toLowerCase()==="form"}function Dk(r){return my(r)&&r.tagName.toLowerCase()==="input"}function Ok(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Nk(r,e){return r.button===0&&(!e||e==="_self")&&!Ok(r)}var p0=null;function Uk(){if(p0===null)try{new FormData(document.createElement("form"),0),p0=!1}catch{p0=!0}return p0}var Fk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function V_(r){return r!=null&&!Fk.has(r)?(ma(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bv}"`),null):r}function Bk(r,e){let t,n,i,s,o;if(kk(r)){let a=r.getAttribute("action");n=a?pl(a,e):null,t=r.getAttribute("method")||Tv,i=V_(r.getAttribute("enctype"))||bv,s=new FormData(r)}else if(Ik(r)||Dk(r)&&(r.type==="submit"||r.type==="image")){let a=r.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=r.getAttribute("formaction")||a.getAttribute("action");if(n=c?pl(c,e):null,t=r.getAttribute("formmethod")||a.getAttribute("method")||Tv,i=V_(r.getAttribute("formenctype"))||V_(a.getAttribute("enctype"))||bv,s=new FormData(a,r),!Uk()){let{name:h,type:f,value:m}=r;if(f==="image"){let g=h?`${h}.`:"";s.append(`${g}x`,"0"),s.append(`${g}y`,"0")}else h&&s.append(h,m)}}else{if(my(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Tv,n=null,i=bv,o=r}return s&&i==="text/plain"&&(o=s,s=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:s,body:o}}function j1(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function zk(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Vk(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Hk(r,e,t){let n=await Promise.all(r.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await zk(s,t);return o.links?o.links():[]}return[]}));return Xk(n.flat(1).filter(Vk).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function bM(r,e,t,n,i,s){let o=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,a=(c,h)=>t[h].pathname!==c.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==c.params["*"];return s==="assets"?e.filter((c,h)=>o(c,h)||a(c,h)):s==="data"?e.filter((c,h)=>{let f=n.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(o(c,h)||a(c,h))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Gk(r,e,{includeHydrateFallback:t}={}){return Wk(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Wk(r){return[...new Set(r)]}function jk(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function Xk(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let s=JSON.stringify(jk(i));return t.has(s)||(t.add(s),n.push({key:s,link:i})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $k=new Set([100,101,204,205]);function qk(r,e){let t=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t.pathname==="/"?t.pathname="_root.data":e&&pl(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function WC(){let r=j.useContext(Lf);return j1(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Yk(){let r=j.useContext(py);return j1(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var X1=j.createContext(void 0);X1.displayName="FrameworkContext";function jC(){let r=j.useContext(X1);return j1(r,"You must render this element inside a <HydratedRouter> element"),r}function Zk(r,e){let t=j.useContext(X1),[n,i]=j.useState(!1),[s,o]=j.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:h,onMouseLeave:f,onTouchStart:m}=e,g=j.useRef(null);j.useEffect(()=>{if(r==="render"&&o(!0),r==="viewport"){let M=x=>{x.forEach(A=>{o(A.isIntersecting)})},E=new IntersectionObserver(M,{threshold:.5});return g.current&&E.observe(g.current),()=>{E.disconnect()}}},[r]),j.useEffect(()=>{if(n){let M=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(M)}}},[n]);let y=()=>{i(!0)},_=()=>{i(!1),o(!1)};return t?r!=="intent"?[s,g,{}]:[s,g,{onFocus:kp(a,y),onBlur:kp(c,_),onMouseEnter:kp(h,y),onMouseLeave:kp(f,_),onTouchStart:kp(m,y)}]:[!1,g,{}]}function kp(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function Kk({page:r,...e}){let{router:t}=WC(),n=j.useMemo(()=>kC(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?j.createElement(Qk,{page:r,matches:n,...e}):null}function Jk(r){let{manifest:e,routeModules:t}=jC(),[n,i]=j.useState([]);return j.useEffect(()=>{let s=!1;return Hk(r,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[r,e,t]),n}function Qk({page:r,matches:e,...t}){let n=ah(),{manifest:i,routeModules:s}=jC(),{basename:o}=WC(),{loaderData:a,matches:c}=Yk(),h=j.useMemo(()=>bM(r,e,c,i,n,"data"),[r,e,c,i,n]),f=j.useMemo(()=>bM(r,e,c,i,n,"assets"),[r,e,c,i,n]),m=j.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let _=new Set,M=!1;if(e.forEach(x=>{let A=i.routes[x.route.id];!A||!A.hasLoader||(!h.some(b=>b.route.id===x.route.id)&&x.route.id in a&&s[x.route.id]?.shouldRevalidate||A.hasClientLoader?M=!0:_.add(x.route.id))}),_.size===0)return[];let E=qk(r,o);return M&&_.size>0&&E.searchParams.set("_routes",e.filter(x=>_.has(x.route.id)).map(x=>x.route.id).join(",")),[E.pathname+E.search]},[o,a,n,i,h,e,r,s]),g=j.useMemo(()=>Gk(f,i),[f,i]),y=Jk(f);return j.createElement(j.Fragment,null,m.map(_=>j.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...t})),g.map(_=>j.createElement("link",{key:_,rel:"modulepreload",href:_,...t})),y.map(({key:_,link:M})=>j.createElement("link",{key:_,...M})))}function eD(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var XC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XC&&(window.__reactRouterVersion="7.6.3")}catch{}function tD({basename:r,children:e,window:t}){let n=j.useRef();n.current==null&&(n.current=V3({window:t,v5Compat:!0}));let i=n.current,[s,o]=j.useState({action:i.action,location:i.location}),a=j.useCallback(c=>{j.startTransition(()=>o(c))},[o]);return j.useLayoutEffect(()=>i.listen(a),[i,a]),j.createElement(Rk,{basename:r,children:e,location:s.location,navigationType:s.action,navigator:i})}var $C=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Km=j.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:s,replace:o,state:a,target:c,to:h,preventScrollReset:f,viewTransition:m,...g},y){let{basename:_}=j.useContext(va),M=typeof h=="string"&&$C.test(h),E,x=!1;if(typeof h=="string"&&M&&(E=h,XC))try{let k=new URL(window.location.href),F=h.startsWith("//")?new URL(k.protocol+h):new URL(h),Q=pl(F.pathname,_);F.origin===k.origin&&Q!=null?h=Q+F.search+F.hash:x=!0}catch{ma(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=pk(h,{relative:i}),[b,R,N]=Zk(n,g),I=sD(h,{replace:o,state:a,target:c,preventScrollReset:f,relative:i,viewTransition:m});function O(k){e&&e(k),k.defaultPrevented||I(k)}let V=j.createElement("a",{...g,...N,href:E||A,onClick:x||s?e:O,ref:eD(y,R),target:c,"data-discover":!M&&t==="render"?"true":void 0});return b&&!M?j.createElement(j.Fragment,null,V,j.createElement(Kk,{page:A})):V});Km.displayName="Link";var nD=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:s,to:o,viewTransition:a,children:c,...h},f){let m=Zm(o,{relative:h.relative}),g=ah(),y=j.useContext(py),{navigator:_,basename:M}=j.useContext(va),E=y!=null&&uD(m)&&a===!0,x=_.encodeLocation?_.encodeLocation(m).pathname:m.pathname,A=g.pathname,b=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(A=A.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&M&&(b=pl(b,M)||b);const R=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=A===x||!i&&A.startsWith(x)&&A.charAt(R)==="/",I=b!=null&&(b===x||!i&&b.startsWith(x)&&b.charAt(x.length)==="/"),O={isActive:N,isPending:I,isTransitioning:E},V=N?e:void 0,k;typeof n=="function"?k=n(O):k=[n,N?"active":null,I?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let F=typeof s=="function"?s(O):s;return j.createElement(Km,{...h,"aria-current":V,className:k,ref:f,style:F,to:o,viewTransition:a},typeof c=="function"?c(O):c)});nD.displayName="NavLink";var rD=j.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:s,method:o=Tv,action:a,onSubmit:c,relative:h,preventScrollReset:f,viewTransition:m,...g},y)=>{let _=lD(),M=cD(a,{relative:h}),E=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&$C.test(a),A=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let R=b.nativeEvent.submitter,N=R?.getAttribute("formmethod")||o;_(R||b.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:i,state:s,relative:h,preventScrollReset:f,viewTransition:m})};return j.createElement("form",{ref:y,method:E,action:M,onSubmit:n?c:A,...g,"data-discover":!x&&r==="render"?"true":void 0})});rD.displayName="Form";function iD(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qC(r){let e=j.useContext(Lf);return yr(e,iD(r)),e}function sD(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=mk(),c=ah(),h=Zm(r,{relative:s});return j.useCallback(f=>{if(Nk(f,e)){f.preventDefault();let m=t!==void 0?t:Sm(c)===Sm(h);a(r,{replace:m,state:n,preventScrollReset:i,relative:s,viewTransition:o})}},[c,a,h,t,n,e,r,i,s,o])}var oD=0,aD=()=>`__${String(++oD)}__`;function lD(){let{router:r}=qC("useSubmit"),{basename:e}=j.useContext(va),t=bk();return j.useCallback(async(n,i={})=>{let{action:s,method:o,encType:a,formData:c,body:h}=Bk(n,e);if(i.navigate===!1){let f=i.fetcherKey||aD();await r.fetch(f,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:h,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await r.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:h,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[r,e,t])}function cD(r,{relative:e}={}){let{basename:t}=j.useContext(va),n=j.useContext(yl);yr(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...Zm(r||".",{relative:e})},o=ah();if(r==null){s.search=o.search;let a=new URLSearchParams(s.search),c=a.getAll("index");if(c.some(f=>f==="")){a.delete("index"),c.filter(m=>m).forEach(m=>a.append("index",m));let f=a.toString();s.search=f?`?${f}`:""}}return(!r||r===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:hl([t,s.pathname])),Sm(s)}function uD(r,e={}){let t=j.useContext(BC);yr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=qC("useViewTransitionState"),i=Zm(r,{relative:e.relative});if(!t.isTransitioning)return!1;let s=pl(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=pl(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Hv(i.pathname,o)!=null||Hv(i.pathname,s)!=null}[...$k];var Ui=function(){return Ui=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ui.apply(this,arguments)};function Em(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}var lr="-ms-",im="-moz-",Un="-webkit-",YC="comm",gy="rule",$1="decl",hD="@import",ZC="@keyframes",dD="@layer",KC=Math.abs,q1=String.fromCharCode,vw=Object.assign;function fD(r,e){return hi(r,0)^45?(((e<<2^hi(r,0))<<2^hi(r,1))<<2^hi(r,2))<<2^hi(r,3):0}function JC(r){return r.trim()}function sl(r,e){return(r=e.exec(r))?r[0]:r}function _n(r,e,t){return r.replace(e,t)}function Av(r,e,t){return r.indexOf(e,t)}function hi(r,e){return r.charCodeAt(e)|0}function ff(r,e,t){return r.slice(e,t)}function aa(r){return r.length}function QC(r){return r.length}function Qp(r,e){return e.push(r),r}function pD(r,e){return r.map(e).join("")}function AM(r,e){return r.filter(function(t){return!sl(t,e)})}var vy=1,pf=1,eP=0,lo=0,Gr=0,If="";function yy(r,e,t,n,i,s,o,a){return{value:r,root:e,parent:t,type:n,props:i,children:s,line:vy,column:pf,length:o,return:"",siblings:a}}function cc(r,e){return vw(yy("",null,null,"",null,null,0,r.siblings),r,{length:-r.length},e)}function pd(r){for(;r.root;)r=cc(r.root,{children:[r]});Qp(r,r.siblings)}function mD(){return Gr}function gD(){return Gr=lo>0?hi(If,--lo):0,pf--,Gr===10&&(pf=1,vy--),Gr}function Xo(){return Gr=lo<eP?hi(If,lo++):0,pf++,Gr===10&&(pf=1,vy++),Gr}function Zu(){return hi(If,lo)}function Cv(){return lo}function _y(r,e){return ff(If,r,e)}function yw(r){switch(r){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function vD(r){return vy=pf=1,eP=aa(If=r),lo=0,[]}function yD(r){return If="",r}function H_(r){return JC(_y(lo-1,_w(r===91?r+2:r===40?r+1:r)))}function _D(r){for(;(Gr=Zu())&&Gr<33;)Xo();return yw(r)>2||yw(Gr)>3?"":" "}function xD(r,e){for(;--e&&Xo()&&!(Gr<48||Gr>102||Gr>57&&Gr<65||Gr>70&&Gr<97););return _y(r,Cv()+(e<6&&Zu()==32&&Xo()==32))}function _w(r){for(;Xo();)switch(Gr){case r:return lo;case 34:case 39:r!==34&&r!==39&&_w(Gr);break;case 40:r===41&&_w(r);break;case 92:Xo();break}return lo}function wD(r,e){for(;Xo()&&r+Gr!==57;)if(r+Gr===84&&Zu()===47)break;return"/*"+_y(e,lo-1)+"*"+q1(r===47?r:Xo())}function SD(r){for(;!yw(Zu());)Xo();return _y(r,lo)}function ED(r){return yD(Pv("",null,null,null,[""],r=vD(r),0,[0],r))}function Pv(r,e,t,n,i,s,o,a,c){for(var h=0,f=0,m=o,g=0,y=0,_=0,M=1,E=1,x=1,A=0,b="",R=i,N=s,I=n,O=b;E;)switch(_=A,A=Xo()){case 40:if(_!=108&&hi(O,m-1)==58){Av(O+=_n(H_(A),"&","&\f"),"&\f",KC(h?a[h-1]:0))!=-1&&(x=-1);break}case 34:case 39:case 91:O+=H_(A);break;case 9:case 10:case 13:case 32:O+=_D(_);break;case 92:O+=xD(Cv()-1,7);continue;case 47:switch(Zu()){case 42:case 47:Qp(MD(wD(Xo(),Cv()),e,t,c),c);break;default:O+="/"}break;case 123*M:a[h++]=aa(O)*x;case 125*M:case 59:case 0:switch(A){case 0:case 125:E=0;case 59+f:x==-1&&(O=_n(O,/\f/g,"")),y>0&&aa(O)-m&&Qp(y>32?PM(O+";",n,t,m-1,c):PM(_n(O," ","")+";",n,t,m-2,c),c);break;case 59:O+=";";default:if(Qp(I=CM(O,e,t,h,f,i,a,b,R=[],N=[],m,s),s),A===123)if(f===0)Pv(O,e,I,I,R,s,m,a,N);else switch(g===99&&hi(O,3)===110?100:g){case 100:case 108:case 109:case 115:Pv(r,I,I,n&&Qp(CM(r,I,I,0,0,i,a,b,i,R=[],m,N),N),i,N,m,a,n?R:N);break;default:Pv(O,I,I,I,[""],N,0,a,N)}}h=f=y=0,M=x=1,b=O="",m=o;break;case 58:m=1+aa(O),y=_;default:if(M<1){if(A==123)--M;else if(A==125&&M++==0&&gD()==125)continue}switch(O+=q1(A),A*M){case 38:x=f>0?1:(O+="\f",-1);break;case 44:a[h++]=(aa(O)-1)*x,x=1;break;case 64:Zu()===45&&(O+=H_(Xo())),g=Zu(),f=m=aa(b=O+=SD(Cv())),A++;break;case 45:_===45&&aa(O)==2&&(M=0)}}return s}function CM(r,e,t,n,i,s,o,a,c,h,f,m){for(var g=i-1,y=i===0?s:[""],_=QC(y),M=0,E=0,x=0;M<n;++M)for(var A=0,b=ff(r,g+1,g=KC(E=o[M])),R=r;A<_;++A)(R=JC(E>0?y[A]+" "+b:_n(b,/&\f/g,y[A])))&&(c[x++]=R);return yy(r,e,t,i===0?gy:a,c,h,f,m)}function MD(r,e,t,n){return yy(r,e,t,YC,q1(mD()),ff(r,2,-2),0,n)}function PM(r,e,t,n,i){return yy(r,e,t,$1,ff(r,0,n),ff(r,n+1,-1),n,i)}function tP(r,e,t){switch(fD(r,e)){case 5103:return Un+"print-"+r+r;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Un+r+r;case 4789:return im+r+r;case 5349:case 4246:case 4810:case 6968:case 2756:return Un+r+im+r+lr+r+r;case 5936:switch(hi(r,e+11)){case 114:return Un+r+lr+_n(r,/[svh]\w+-[tblr]{2}/,"tb")+r;case 108:return Un+r+lr+_n(r,/[svh]\w+-[tblr]{2}/,"tb-rl")+r;case 45:return Un+r+lr+_n(r,/[svh]\w+-[tblr]{2}/,"lr")+r}case 6828:case 4268:case 2903:return Un+r+lr+r+r;case 6165:return Un+r+lr+"flex-"+r+r;case 5187:return Un+r+_n(r,/(\w+).+(:[^]+)/,Un+"box-$1$2"+lr+"flex-$1$2")+r;case 5443:return Un+r+lr+"flex-item-"+_n(r,/flex-|-self/g,"")+(sl(r,/flex-|baseline/)?"":lr+"grid-row-"+_n(r,/flex-|-self/g,""))+r;case 4675:return Un+r+lr+"flex-line-pack"+_n(r,/align-content|flex-|-self/g,"")+r;case 5548:return Un+r+lr+_n(r,"shrink","negative")+r;case 5292:return Un+r+lr+_n(r,"basis","preferred-size")+r;case 6060:return Un+"box-"+_n(r,"-grow","")+Un+r+lr+_n(r,"grow","positive")+r;case 4554:return Un+_n(r,/([^-])(transform)/g,"$1"+Un+"$2")+r;case 6187:return _n(_n(_n(r,/(zoom-|grab)/,Un+"$1"),/(image-set)/,Un+"$1"),r,"")+r;case 5495:case 3959:return _n(r,/(image-set\([^]*)/,Un+"$1$`$1");case 4968:return _n(_n(r,/(.+:)(flex-)?(.*)/,Un+"box-pack:$3"+lr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Un+r+r;case 4200:if(!sl(r,/flex-|baseline/))return lr+"grid-column-align"+ff(r,e)+r;break;case 2592:case 3360:return lr+_n(r,"template-","")+r;case 4384:case 3616:return t&&t.some(function(n,i){return e=i,sl(n.props,/grid-\w+-end/)})?~Av(r+(t=t[e].value),"span",0)?r:lr+_n(r,"-start","")+r+lr+"grid-row-span:"+(~Av(t,"span",0)?sl(t,/\d+/):+sl(t,/\d+/)-+sl(r,/\d+/))+";":lr+_n(r,"-start","")+r;case 4896:case 4128:return t&&t.some(function(n){return sl(n.props,/grid-\w+-start/)})?r:lr+_n(_n(r,"-end","-span"),"span ","")+r;case 4095:case 3583:case 4068:case 2532:return _n(r,/(.+)-inline(.+)/,Un+"$1$2")+r;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(aa(r)-1-e>6)switch(hi(r,e+1)){case 109:if(hi(r,e+4)!==45)break;case 102:return _n(r,/(.+:)(.+)-([^]+)/,"$1"+Un+"$2-$3$1"+im+(hi(r,e+3)==108?"$3":"$2-$3"))+r;case 115:return~Av(r,"stretch",0)?tP(_n(r,"stretch","fill-available"),e,t)+r:r}break;case 5152:case 5920:return _n(r,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,i,s,o,a,c,h){return lr+i+":"+s+h+(o?lr+i+"-span:"+(a?c:+c-+s)+h:"")+r});case 4949:if(hi(r,e+6)===121)return _n(r,":",":"+Un)+r;break;case 6444:switch(hi(r,hi(r,14)===45?18:11)){case 120:return _n(r,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Un+(hi(r,14)===45?"inline-":"")+"box$3$1"+Un+"$2$3$1"+lr+"$2box$3")+r;case 100:return _n(r,":",":"+lr)+r}break;case 5719:case 2647:case 2135:case 3927:case 2391:return _n(r,"scroll-","scroll-snap-")+r}return r}function Gv(r,e){for(var t="",n=0;n<r.length;n++)t+=e(r[n],n,r,e)||"";return t}function TD(r,e,t,n){switch(r.type){case dD:if(r.children.length)break;case hD:case $1:return r.return=r.return||r.value;case YC:return"";case ZC:return r.return=r.value+"{"+Gv(r.children,n)+"}";case gy:if(!aa(r.value=r.props.join(",")))return""}return aa(t=Gv(r.children,n))?r.return=r.value+"{"+t+"}":""}function bD(r){var e=QC(r);return function(t,n,i,s){for(var o="",a=0;a<e;a++)o+=r[a](t,n,i,s)||"";return o}}function AD(r){return function(e){e.root||(e=e.return)&&r(e)}}function CD(r,e,t,n){if(r.length>-1&&!r.return)switch(r.type){case $1:r.return=tP(r.value,r.length,t);return;case ZC:return Gv([cc(r,{value:_n(r.value,"@","@"+Un)})],n);case gy:if(r.length)return pD(t=r.props,function(i){switch(sl(i,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":pd(cc(r,{props:[_n(i,/:(read-\w+)/,":"+im+"$1")]})),pd(cc(r,{props:[i]})),vw(r,{props:AM(t,n)});break;case"::placeholder":pd(cc(r,{props:[_n(i,/:(plac\w+)/,":"+Un+"input-$1")]})),pd(cc(r,{props:[_n(i,/:(plac\w+)/,":"+im+"$1")]})),pd(cc(r,{props:[_n(i,/:(plac\w+)/,lr+"input-$1")]})),pd(cc(r,{props:[i]})),vw(r,{props:AM(t,n)});break}return""})}}var PD={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ns={},mf=typeof process<"u"&&Ns!==void 0&&(Ns.REACT_APP_SC_ATTR||Ns.SC_ATTR)||"data-styled",nP="active",rP="data-styled-version",xy="6.1.19",Y1=`/*!sc*/
`,Wv=typeof window<"u"&&typeof document<"u",RD=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Ns!==void 0&&Ns.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Ns.REACT_APP_SC_DISABLE_SPEEDY!==""?Ns.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Ns.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Ns!==void 0&&Ns.SC_DISABLE_SPEEDY!==void 0&&Ns.SC_DISABLE_SPEEDY!==""&&Ns.SC_DISABLE_SPEEDY!=="false"&&Ns.SC_DISABLE_SPEEDY),LD={},wy=Object.freeze([]),gf=Object.freeze({});function iP(r,e,t){return t===void 0&&(t=gf),r.theme!==t.theme&&r.theme||e||t.theme}var sP=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),ID=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,kD=/(^-|-$)/g;function RM(r){return r.replace(ID,"-").replace(kD,"")}var DD=/(a)(d)/gi,m0=52,LM=function(r){return String.fromCharCode(r+(r>25?39:97))};function xw(r){var e,t="";for(e=Math.abs(r);e>m0;e=e/m0|0)t=LM(e%m0)+t;return(LM(e%m0)+t).replace(DD,"$1-$2")}var G_,oP=5381,ef=function(r,e){for(var t=e.length;t;)r=33*r^e.charCodeAt(--t);return r},aP=function(r){return ef(oP,r)};function lP(r){return xw(aP(r)>>>0)}function OD(r){return r.displayName||r.name||"Component"}function W_(r){return typeof r=="string"&&!0}var cP=typeof Symbol=="function"&&Symbol.for,uP=cP?Symbol.for("react.memo"):60115,ND=cP?Symbol.for("react.forward_ref"):60112,UD={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},FD={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},hP={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},BD=((G_={})[ND]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},G_[uP]=hP,G_);function IM(r){return("type"in(e=r)&&e.type.$$typeof)===uP?hP:"$$typeof"in r?BD[r.$$typeof]:UD;var e}var zD=Object.defineProperty,VD=Object.getOwnPropertyNames,kM=Object.getOwnPropertySymbols,HD=Object.getOwnPropertyDescriptor,GD=Object.getPrototypeOf,DM=Object.prototype;function dP(r,e,t){if(typeof e!="string"){if(DM){var n=GD(e);n&&n!==DM&&dP(r,n,t)}var i=VD(e);kM&&(i=i.concat(kM(e)));for(var s=IM(r),o=IM(e),a=0;a<i.length;++a){var c=i[a];if(!(c in FD||t&&t[c]||o&&c in o||s&&c in s)){var h=HD(e,c);try{zD(r,c,h)}catch{}}}}return r}function vf(r){return typeof r=="function"}function Z1(r){return typeof r=="object"&&"styledComponentId"in r}function Hu(r,e){return r&&e?"".concat(r," ").concat(e):r||e||""}function ww(r,e){if(r.length===0)return"";for(var t=r[0],n=1;n<r.length;n++)t+=r[n];return t}function Mm(r){return r!==null&&typeof r=="object"&&r.constructor.name===Object.name&&!("props"in r&&r.$$typeof)}function Sw(r,e,t){if(t===void 0&&(t=!1),!t&&!Mm(r)&&!Array.isArray(r))return e;if(Array.isArray(e))for(var n=0;n<e.length;n++)r[n]=Sw(r[n],e[n]);else if(Mm(e))for(var n in e)r[n]=Sw(r[n],e[n]);return r}function K1(r,e){Object.defineProperty(r,"toString",{value:e})}function Jm(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(r," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var WD=function(){function r(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return r.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},r.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,s=i;e>=s;)if((s<<=1)<0)throw Jm(16,"".concat(e));this.groupSizes=new Uint32Array(s),this.groupSizes.set(n),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),c=(o=0,t.length);o<c;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[e]++,a++)},r.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),i=n+t;this.groupSizes[e]=0;for(var s=n;s<i;s++)this.tag.deleteRule(n)}},r.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var n=this.groupSizes[e],i=this.indexOfGroup(e),s=i+n,o=i;o<s;o++)t+="".concat(this.tag.getRule(o)).concat(Y1);return t},r}(),Rv=new Map,jv=new Map,Lv=1,g0=function(r){if(Rv.has(r))return Rv.get(r);for(;jv.has(Lv);)Lv++;var e=Lv++;return Rv.set(r,e),jv.set(e,r),e},jD=function(r,e){Lv=e+1,Rv.set(r,e),jv.set(e,r)},XD="style[".concat(mf,"][").concat(rP,'="').concat(xy,'"]'),$D=new RegExp("^".concat(mf,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),qD=function(r,e,t){for(var n,i=t.split(","),s=0,o=i.length;s<o;s++)(n=i[s])&&r.registerName(e,n)},YD=function(r,e){for(var t,n=((t=e.textContent)!==null&&t!==void 0?t:"").split(Y1),i=[],s=0,o=n.length;s<o;s++){var a=n[s].trim();if(a){var c=a.match($D);if(c){var h=0|parseInt(c[1],10),f=c[2];h!==0&&(jD(f,h),qD(r,f,c[3]),r.getTag().insertRules(h,i)),i.length=0}else i.push(a)}}},OM=function(r){for(var e=document.querySelectorAll(XD),t=0,n=e.length;t<n;t++){var i=e[t];i&&i.getAttribute(mf)!==nP&&(YD(r,i),i.parentNode&&i.parentNode.removeChild(i))}};function ZD(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var fP=function(r){var e=document.head,t=r||e,n=document.createElement("style"),i=function(a){var c=Array.from(a.querySelectorAll("style[".concat(mf,"]")));return c[c.length-1]}(t),s=i!==void 0?i.nextSibling:null;n.setAttribute(mf,nP),n.setAttribute(rP,xy);var o=ZD();return o&&n.setAttribute("nonce",o),t.insertBefore(n,s),n},KD=function(){function r(e){this.element=fP(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var n=document.styleSheets,i=0,s=n.length;i<s;i++){var o=n[i];if(o.ownerNode===t)return o}throw Jm(17)}(this.element),this.length=0}return r.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},r.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},r.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},r}(),JD=function(){function r(e){this.element=fP(e),this.nodes=this.element.childNodes,this.length=0}return r.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},r.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},r.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},r}(),QD=function(){function r(e){this.rules=[],this.length=0}return r.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},r.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},r.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},r}(),NM=Wv,eO={isServer:!Wv,useCSSOMInjection:!RD},Xv=function(){function r(e,t,n){e===void 0&&(e=gf),t===void 0&&(t={});var i=this;this.options=Ui(Ui({},eO),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Wv&&NM&&(NM=!1,OM(this)),K1(this,function(){return function(s){for(var o=s.getTag(),a=o.length,c="",h=function(m){var g=function(x){return jv.get(x)}(m);if(g===void 0)return"continue";var y=s.names.get(g),_=o.getGroup(m);if(y===void 0||!y.size||_.length===0)return"continue";var M="".concat(mf,".g").concat(m,'[id="').concat(g,'"]'),E="";y!==void 0&&y.forEach(function(x){x.length>0&&(E+="".concat(x,","))}),c+="".concat(_).concat(M,'{content:"').concat(E,'"}').concat(Y1)},f=0;f<a;f++)h(f);return c}(i)})}return r.registerId=function(e){return g0(e)},r.prototype.rehydrate=function(){!this.server&&Wv&&OM(this)},r.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new r(Ui(Ui({},this.options),e),this.gs,t&&this.names||void 0)},r.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},r.prototype.getTag=function(){return this.tag||(this.tag=(e=function(t){var n=t.useCSSOMInjection,i=t.target;return t.isServer?new QD(i):n?new KD(i):new JD(i)}(this.options),new WD(e)));var e},r.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},r.prototype.registerName=function(e,t){if(g0(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},r.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(g0(e),n)},r.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},r.prototype.clearRules=function(e){this.getTag().clearGroup(g0(e)),this.clearNames(e)},r.prototype.clearTag=function(){this.tag=void 0},r}(),tO=/&/g,nO=/^\s*\/\/.*$/gm;function pP(r,e){return r.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(n){return"".concat(e," ").concat(n)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=pP(t.children,e)),t})}function rO(r){var e,t,n,i=gf,s=i.options,o=s===void 0?gf:s,a=i.plugins,c=a===void 0?wy:a,h=function(g,y,_){return _.startsWith(t)&&_.endsWith(t)&&_.replaceAll(t,"").length>0?".".concat(e):g},f=c.slice();f.push(function(g){g.type===gy&&g.value.includes("&")&&(g.props[0]=g.props[0].replace(tO,t).replace(n,h))}),o.prefix&&f.push(CD),f.push(TD);var m=function(g,y,_,M){y===void 0&&(y=""),_===void 0&&(_=""),M===void 0&&(M="&"),e=M,t=y,n=new RegExp("\\".concat(t,"\\b"),"g");var E=g.replace(nO,""),x=ED(_||y?"".concat(_," ").concat(y," { ").concat(E," }"):E);o.namespace&&(x=pP(x,o.namespace));var A=[];return Gv(x,bD(f.concat(AD(function(b){return A.push(b)})))),A};return m.hash=c.length?c.reduce(function(g,y){return y.name||Jm(15),ef(g,y.name)},oP).toString():"",m}var iO=new Xv,Ew=rO(),mP=ao.createContext({shouldForwardProp:void 0,styleSheet:iO,stylis:Ew});mP.Consumer;ao.createContext(void 0);function Mw(){return j.useContext(mP)}var sO=function(){function r(e,t){var n=this;this.inject=function(i,s){s===void 0&&(s=Ew);var o=n.name+s.hash;i.hasNameForId(n.id,o)||i.insertRules(n.id,o,s(n.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,K1(this,function(){throw Jm(12,String(n.name))})}return r.prototype.getName=function(e){return e===void 0&&(e=Ew),this.name+e.hash},r}(),oO=function(r){return r>="A"&&r<="Z"};function UM(r){for(var e="",t=0;t<r.length;t++){var n=r[t];if(t===1&&n==="-"&&r[0]==="-")return r;oO(n)?e+="-"+n.toLowerCase():e+=n}return e.startsWith("ms-")?"-"+e:e}var gP=function(r){return r==null||r===!1||r===""},vP=function(r){var e,t,n=[];for(var i in r){var s=r[i];r.hasOwnProperty(i)&&!gP(s)&&(Array.isArray(s)&&s.isCss||vf(s)?n.push("".concat(UM(i),":"),s,";"):Mm(s)?n.push.apply(n,Em(Em(["".concat(i," {")],vP(s),!1),["}"],!1)):n.push("".concat(UM(i),": ").concat((e=i,(t=s)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in PD||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return n};function _c(r,e,t,n){if(gP(r))return[];if(Z1(r))return[".".concat(r.styledComponentId)];if(vf(r)){if(!vf(s=r)||s.prototype&&s.prototype.isReactComponent||!e)return[r];var i=r(e);return _c(i,e,t,n)}var s;return r instanceof sO?t?(r.inject(t,n),[r.getName(n)]):[r]:Mm(r)?vP(r):Array.isArray(r)?Array.prototype.concat.apply(wy,r.map(function(o){return _c(o,e,t,n)})):[r.toString()]}function yP(r){for(var e=0;e<r.length;e+=1){var t=r[e];if(vf(t)&&!Z1(t))return!1}return!0}var aO=aP(xy),lO=function(){function r(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&yP(e),this.componentId=t,this.baseHash=ef(aO,t),this.baseStyle=n,Xv.registerId(t)}return r.prototype.generateAndInjectStyles=function(e,t,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=Hu(i,this.staticRulesId);else{var s=ww(_c(this.rules,e,t,n)),o=xw(ef(this.baseHash,s)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=n(s,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}i=Hu(i,o),this.staticRulesId=o}else{for(var c=ef(this.baseHash,n.hash),h="",f=0;f<this.rules.length;f++){var m=this.rules[f];if(typeof m=="string")h+=m;else if(m){var g=ww(_c(m,e,t,n));c=ef(c,g+f),h+=g}}if(h){var y=xw(c>>>0);t.hasNameForId(this.componentId,y)||t.insertRules(this.componentId,y,n(h,".".concat(y),void 0,this.componentId)),i=Hu(i,y)}}return i},r}(),J1=ao.createContext(void 0);J1.Consumer;var j_={};function cO(r,e,t){var n=Z1(r),i=r,s=!W_(r),o=e.attrs,a=o===void 0?wy:o,c=e.componentId,h=c===void 0?function(R,N){var I=typeof R!="string"?"sc":RM(R);j_[I]=(j_[I]||0)+1;var O="".concat(I,"-").concat(lP(xy+I+j_[I]));return N?"".concat(N,"-").concat(O):O}(e.displayName,e.parentComponentId):c,f=e.displayName,m=f===void 0?function(R){return W_(R)?"styled.".concat(R):"Styled(".concat(OD(R),")")}(r):f,g=e.displayName&&e.componentId?"".concat(RM(e.displayName),"-").concat(e.componentId):e.componentId||h,y=n&&i.attrs?i.attrs.concat(a).filter(Boolean):a,_=e.shouldForwardProp;if(n&&i.shouldForwardProp){var M=i.shouldForwardProp;if(e.shouldForwardProp){var E=e.shouldForwardProp;_=function(R,N){return M(R,N)&&E(R,N)}}else _=M}var x=new lO(t,g,n?i.componentStyle:void 0);function A(R,N){return function(I,O,V){var k=I.attrs,F=I.componentStyle,Q=I.defaultProps,le=I.foldedComponentIds,_e=I.styledComponentId,Y=I.target,me=ao.useContext(J1),ue=Mw(),Ee=I.shouldForwardProp||ue.shouldForwardProp,Z=iP(O,me,Q)||gf,se=function(ke,Re,ze){for(var Ke,st=Ui(Ui({},Re),{className:void 0,theme:ze}),it=0;it<ke.length;it+=1){var ft=vf(Ke=ke[it])?Ke(st):Ke;for(var oe in ft)st[oe]=oe==="className"?Hu(st[oe],ft[oe]):oe==="style"?Ui(Ui({},st[oe]),ft[oe]):ft[oe]}return Re.className&&(st.className=Hu(st.className,Re.className)),st}(k,O,Z),ee=se.as||Y,H={};for(var ne in se)se[ne]===void 0||ne[0]==="$"||ne==="as"||ne==="theme"&&se.theme===Z||(ne==="forwardedAs"?H.as=se.forwardedAs:Ee&&!Ee(ne,ee)||(H[ne]=se[ne]));var ce=function(ke,Re){var ze=Mw(),Ke=ke.generateAndInjectStyles(Re,ze.styleSheet,ze.stylis);return Ke}(F,se),xe=Hu(le,_e);return ce&&(xe+=" "+ce),se.className&&(xe+=" "+se.className),H[W_(ee)&&!sP.has(ee)?"class":"className"]=xe,V&&(H.ref=V),j.createElement(ee,H)}(b,R,N)}A.displayName=m;var b=ao.forwardRef(A);return b.attrs=y,b.componentStyle=x,b.displayName=m,b.shouldForwardProp=_,b.foldedComponentIds=n?Hu(i.foldedComponentIds,i.styledComponentId):"",b.styledComponentId=g,b.target=n?i.target:r,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(R){this._foldedDefaultProps=n?function(N){for(var I=[],O=1;O<arguments.length;O++)I[O-1]=arguments[O];for(var V=0,k=I;V<k.length;V++)Sw(N,k[V],!0);return N}({},i.defaultProps,R):R}}),K1(b,function(){return".".concat(b.styledComponentId)}),s&&dP(b,r,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function FM(r,e){for(var t=[r[0]],n=0,i=e.length;n<i;n+=1)t.push(e[n],r[n+1]);return t}var BM=function(r){return Object.assign(r,{isCss:!0})};function _P(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(vf(r)||Mm(r))return BM(_c(FM(wy,Em([r],e,!0))));var n=r;return e.length===0&&n.length===1&&typeof n[0]=="string"?_c(n):BM(_c(FM(n,e)))}function Tw(r,e,t){if(t===void 0&&(t=gf),!e)throw Jm(1,e);var n=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return r(e,t,_P.apply(void 0,Em([i],s,!1)))};return n.attrs=function(i){return Tw(r,e,Ui(Ui({},t),{attrs:Array.prototype.concat(t.attrs,i).filter(Boolean)}))},n.withConfig=function(i){return Tw(r,e,Ui(Ui({},t),i))},n}var xP=function(r){return Tw(cO,r)},$e=xP;sP.forEach(function(r){$e[r]=xP(r)});var uO=function(){function r(e,t){this.rules=e,this.componentId=t,this.isStatic=yP(e),Xv.registerId(this.componentId+1)}return r.prototype.createStyles=function(e,t,n,i){var s=i(ww(_c(this.rules,t,n,i)),""),o=this.componentId+e;n.insertRules(o,o,s)},r.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},r.prototype.renderStyles=function(e,t,n,i){e>2&&Xv.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,i)},r}();function hO(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var n=_P.apply(void 0,Em([r],e,!1)),i="sc-global-".concat(lP(JSON.stringify(n))),s=new uO(n,i),o=function(c){var h=Mw(),f=ao.useContext(J1),m=ao.useRef(h.styleSheet.allocateGSInstance(i)).current;return h.styleSheet.server&&a(m,c,h.styleSheet,f,h.stylis),ao.useLayoutEffect(function(){if(!h.styleSheet.server)return a(m,c,h.styleSheet,f,h.stylis),function(){return s.removeStyles(m,h.styleSheet)}},[m,c,h.styleSheet,f,h.stylis]),null};function a(c,h,f,m,g){if(s.isStatic)s.renderStyles(c,LD,f,g);else{var y=Ui(Ui({},h),{theme:iP(h,m,o.defaultProps)});s.renderStyles(c,y,f,g)}}return ao.memo(o)}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),fi=(r,e)=>{const t=j.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:c,...h},f)=>j.createElement("svg",{ref:f,...dO,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${fO(r)}`,a].join(" "),...h},[...e.map(([m,g])=>j.createElement(m,g)),...Array.isArray(c)?c:[c]]));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=fi("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=fi("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=fi("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=fi("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=fi("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=fi("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=fi("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=fi("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=fi("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=fi("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=fi("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=fi("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=fi("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=fi("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=fi("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=fi("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=fi("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=fi("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),wO="modulepreload",SO=function(r){return"/"+r},GM={},Qm=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let h=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};var o=h;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");i=h(t.map(f=>{if(f=SO(f),f in GM)return;GM[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":wO,m||(y.as="script"),y.crossOrigin="",y.href=f,c&&y.setAttribute("nonce",c),document.head.appendChild(y),m)return new Promise((_,M)=>{y.addEventListener("load",_),y.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},EO=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Qm(async()=>{const{default:n}=await Promise.resolve().then(()=>kf);return{default:n}},[]).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class eS extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class MO extends eS{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class WM extends eS{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class jM extends eS{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Aw;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Aw||(Aw={}));var TO=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{h(n.next(f))}catch(m){o(m)}}function c(f){try{h(n.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(a,c)}h((n=n.apply(r,e||[])).next())})};class bO{constructor(e,{headers:t={},customFetch:n,region:i=Aw.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=EO(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return TO(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=t;let a={},{region:c}=t;c||(c=this.region);const h=new URL(`${this.url}/${e}`);c&&c!=="any"&&(a["x-region"]=c,h.searchParams.set("forceFunctionRegion",c));let f;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(a["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(a["Content-Type"]="application/json",f=JSON.stringify(o)));const m=yield this.fetch(h.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:f}).catch(M=>{throw new MO(M)}),g=m.headers.get("x-relay-error");if(g&&g==="true")throw new WM(m);if(!m.ok)throw new jM(m);let y=((n=m.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),_;return y==="application/json"?_=yield m.json():y==="application/octet-stream"?_=yield m.blob():y==="text/event-stream"?_=m:y==="multipart/form-data"?_=yield m.formData():_=yield m.text(),{data:_,error:null,response:m}}catch(i){return{data:null,error:i,response:i instanceof jM||i instanceof WM?i.context:void 0}}})}}var li={},md={},gd={},vd={},yd={},_d={},AO=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},yf=AO();const CO=yf.fetch,MP=yf.fetch.bind(yf),TP=yf.Headers,PO=yf.Request,RO=yf.Response,kf=Object.freeze(Object.defineProperty({__proto__:null,Headers:TP,Request:PO,Response:RO,default:MP,fetch:CO},Symbol.toStringTag,{value:"Module"})),LO=P3(kf);var v0={},XM;function bP(){if(XM)return v0;XM=1,Object.defineProperty(v0,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return v0.default=r,v0}var $M;function AP(){if($M)return _d;$M=1;var r=_d&&_d.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(_d,"__esModule",{value:!0});const e=r(LO),t=r(bP());class n{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=Object.assign({},this.headers),this.headers[s]=o,this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let c=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var f,m,g;let y=null,_=null,M=null,E=h.status,x=h.statusText;if(h.ok){if(this.method!=="HEAD"){const N=await h.text();N===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?_=N:_=JSON.parse(N))}const b=(f=this.headers.Prefer)===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),R=(m=h.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");b&&R&&R.length>1&&(M=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(y={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,M=null,E=406,x="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const b=await h.text();try{y=JSON.parse(b),Array.isArray(y)&&h.status===404&&(_=[],y=null,E=200,x="OK")}catch{h.status===404&&b===""?(E=204,x="No Content"):y={message:b}}if(y&&this.isMaybeSingle&&(!((g=y?.details)===null||g===void 0)&&g.includes("0 rows"))&&(y=null,E=200,x="OK"),y&&this.shouldThrowOnError)throw new t.default(y)}return{error:y,data:_,count:M,status:E,statusText:x}});return this.shouldThrowOnError||(c=c.catch(h=>{var f,m,g;return{error:{message:`${(f=h?.name)!==null&&f!==void 0?f:"FetchError"}: ${h?.message}`,details:`${(m=h?.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(g=h?.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),c.then(s,o)}returns(){return this}overrideTypes(){return this}}return _d.default=n,_d}var qM;function CP(){if(qM)return yd;qM=1;var r=yd&&yd.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(yd,"__esModule",{value:!0});const e=r(AP());class t extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:c=a}={}){const h=c?`${c}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const c=typeof a>"u"?"offset":`${a}.offset`,h=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(h,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:c=!1,format:h="text"}={}){var f;const m=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,c?"wal":null].filter(Boolean).join("|"),g=(f=this.headers.Accept)!==null&&f!==void 0?f:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${g}"; options=${m};`,h==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return yd.default=t,yd}var YM;function tS(){if(YM)return vd;YM=1;var r=vd&&vd.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vd,"__esModule",{value:!0});const e=r(CP());class t extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let c="";a==="plain"?c="pl":a==="phrase"?c="ph":a==="websearch"&&(c="w");const h=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${c}fts${h}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return vd.default=t,vd}var ZM;function PP(){if(ZM)return gd;ZM=1;var r=gd&&gd.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(gd,"__esModule",{value:!0});const e=r(tS());class t{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=s,this.schema=o,this.fetch=a}select(i,{head:s=!1,count:o}={}){const a=s?"HEAD":"GET";let c=!1;const h=(i??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",h),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:o=!0}={}){const a="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),s&&c.push(`count=${s}`),o||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(i)){const h=i.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:c=!0}={}){const h="POST",f=[`resolution=${o?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&f.push(this.headers.Prefer),a&&f.push(`count=${a}`),c||f.push("missing=default"),this.headers.Prefer=f.join(","),Array.isArray(i)){const m=i.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(m.length>0){const g=[...new Set(m)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return gd.default=t,gd}var Dp={},Op={},KM;function IO(){return KM||(KM=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.version=void 0,Op.version="0.0.0-automated"),Op}var JM;function kO(){if(JM)return Dp;JM=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.DEFAULT_HEADERS=void 0;const r=IO();return Dp.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`},Dp}var QM;function DO(){if(QM)return md;QM=1;var r=md&&md.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(md,"__esModule",{value:!0});const e=r(PP()),t=r(tS()),n=kO();class i{constructor(o,{headers:a={},schema:c,fetch:h}={}){this.url=o,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=c,this.fetch=h}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:c=!1,get:h=!1,count:f}={}){let m;const g=new URL(`${this.url}/rpc/${o}`);let y;c||h?(m=c?"HEAD":"GET",Object.entries(a).filter(([M,E])=>E!==void 0).map(([M,E])=>[M,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([M,E])=>{g.searchParams.append(M,E)})):(m="POST",y=a);const _=Object.assign({},this.headers);return f&&(_.Prefer=`count=${f}`),new t.default({method:m,url:g,headers:_,schema:this.schemaName,body:y,fetch:this.fetch,allowEmpty:!1})}}return md.default=i,md}var eT;function OO(){if(eT)return li;eT=1;var r=li&&li.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(li,"__esModule",{value:!0}),li.PostgrestError=li.PostgrestBuilder=li.PostgrestTransformBuilder=li.PostgrestFilterBuilder=li.PostgrestQueryBuilder=li.PostgrestClient=void 0;const e=r(DO());li.PostgrestClient=e.default;const t=r(PP());li.PostgrestQueryBuilder=t.default;const n=r(tS());li.PostgrestFilterBuilder=n.default;const i=r(CP());li.PostgrestTransformBuilder=i.default;const s=r(AP());li.PostgrestBuilder=s.default;const o=r(bP());return li.PostgrestError=o.default,li.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},li}var NO=OO();const UO=dy(NO),{PostgrestClient:FO,PostgrestQueryBuilder:P$,PostgrestFilterBuilder:R$,PostgrestTransformBuilder:L$,PostgrestBuilder:I$,PostgrestError:k$}=UO;function BO(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const zO=BO(),VO="2.11.15",HO=`realtime-js/${VO}`,GO="1.0.0",RP=1e4,WO=1e3;var om;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(om||(om={}));var Oi;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Oi||(Oi={}));var Vo;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Vo||(Vo={}));var Cw;(function(r){r.websocket="websocket"})(Cw||(Cw={}));var zu;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(zu||(zu={}));class jO{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const c=n.decode(e.slice(o,o+s));o=o+s;const h=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:h}}}class LP{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var er;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(er||(er={}));const tT=(r,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,o)=>(s[o]=XO(o,r,e,i),s),{})},XO=(r,e,t,n)=>{const i=e.find(a=>a.name===r),s=i?.type,o=t[r];return s&&!n.includes(s)?IP(s,o):Pw(o)},IP=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return ZO(e,t)}switch(r){case er.bool:return $O(e);case er.float4:case er.float8:case er.int2:case er.int4:case er.int8:case er.numeric:case er.oid:return qO(e);case er.json:case er.jsonb:return YO(e);case er.timestamp:return KO(e);case er.abstime:case er.date:case er.daterange:case er.int4range:case er.int8range:case er.money:case er.reltime:case er.text:case er.time:case er.timestamptz:case er.timetz:case er.tsrange:case er.tstzrange:return Pw(e);default:return Pw(e)}},Pw=r=>r,$O=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},qO=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},YO=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},ZO=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let s;const o=r.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>IP(e,a))}return r},KO=r=>typeof r=="string"?r.replace(" ","T"):r,kP=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class q_{constructor(e,t,n={},i=RP){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var nT;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(nT||(nT={}));class am{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=am.syncState(this.state,i,s,o),this.pendingDiffs.forEach(c=>{this.state=am.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=am.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(s,(h,f)=>{o[h]||(c[h]=f)}),this.map(o,(h,f)=>{const m=s[h];if(m){const g=f.map(E=>E.presence_ref),y=m.map(E=>E.presence_ref),_=f.filter(E=>y.indexOf(E.presence_ref)<0),M=m.filter(E=>g.indexOf(E.presence_ref)<0);_.length>0&&(a[h]=_),M.length>0&&(c[h]=M)}else a[h]=f}),this.syncDiff(s,{joins:a,leaves:c},n,i)}static syncDiff(e,t,n,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(a,c)=>{var h;const f=(h=e[a])!==null&&h!==void 0?h:[];if(e[a]=this.cloneDeep(c),f.length>0){const m=e[a].map(y=>y.presence_ref),g=f.filter(y=>m.indexOf(y.presence_ref)<0);e[a].unshift(...g)}n(a,f,c)}),this.map(o,(a,c)=>{let h=e[a];if(!h)return;const f=c.map(m=>m.presence_ref);h=h.filter(m=>f.indexOf(m.presence_ref)<0),e[a]=h,i(a,h,c),h.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rT;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(rT||(rT={}));var iT;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(iT||(iT={}));var ol;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(ol||(ol={}));class nS{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Oi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new q_(this,Vo.join,this.params,this.timeout),this.rejoinTimer=new LP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Oi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Oi.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Oi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Oi.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vo.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new am(this),this.broadcastEndpointURL=kP(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Oi.closed){const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(f=>e?.(ol.CHANNEL_ERROR,f)),this._onClose(()=>e?.(ol.CLOSED));const c={},h={broadcast:s,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket.setAuth(),f===void 0){e?.(ol.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(m=g?.length)!==null&&m!==void 0?m:0,_=[];for(let M=0;M<y;M++){const E=g[M],{filter:{event:x,schema:A,table:b,filter:R}}=E,N=f&&f[M];if(N&&N.event===x&&N.schema===A&&N.table===b&&N.filter===R)_.push(Object.assign(Object.assign({},E),{id:N.id}));else{this.unsubscribe(),this.state=Oi.errored,e?.(ol.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(ol.SUBSCRIBED);return}}).receive("error",f=>{this.state=Oi.errored,e?.(ol.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e?.(ol.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,c;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Oi.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vo.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new q_(this,Vo.leave,{},e),n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new q_(this,e,t,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:h,join:f}=Vo;if(n&&[a,c,h,f].indexOf(o)>=0&&n!==this._joinRef())return;let g=this._onMessage(o,t,n);if(t&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var _,M,E;return((_=y.filter)===null||_===void 0?void 0:_.event)==="*"||((E=(M=y.filter)===null||M===void 0?void 0:M.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(y=>y.callback(g,n)):(s=this.bindings[o])===null||s===void 0||s.filter(y=>{var _,M,E,x,A,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const R=y.id,N=(_=y.filter)===null||_===void 0?void 0:_.event;return R&&((M=t.ids)===null||M===void 0?void 0:M.includes(R))&&(N==="*"||N?.toLocaleLowerCase()===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const R=(A=(x=y?.filter)===null||x===void 0?void 0:x.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return R==="*"||R===((b=t?.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof g=="object"&&"ids"in g){const _=g.data,{schema:M,table:E,commit_timestamp:x,type:A,errors:b}=_;g=Object.assign(Object.assign({},{schema:M,table:E,commit_timestamp:x,eventType:A,new:{},old:{},errors:b}),this._getPayloadRecords(_))}y.callback(g,n)})}_isClosed(){return this.state===Oi.closed}_isJoined(){return this.state===Oi.joined}_isJoining(){return this.state===Oi.joining}_isLeaving(){return this.state===Oi.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&nS.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vo.close,{},e)}_onError(e){this._on(Vo.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Oi.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=tT(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=tT(e.columns,e.old_record)),t}}const sT=()=>{},JO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class QO{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=RP,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=sT,this.ref=0,this.logger=sT,this.conn=null,this.sendBuffer=[],this.serializer=new jO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Qm(async()=>{const{default:c}=await Promise.resolve().then(()=>kf);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Cw.websocket}`,this.httpEndpoint=kP(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(n=t?.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t?.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new LP(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=zO),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:GO}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case om.connecting:return zu.Connecting;case om.open:return zu.Open;case om.closing:return zu.Closing;default:return zu.Closed}}isConnected(){return this.connectionState()===zu.Open}channel(e,t={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new nS(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const i={access_token:t,version:HO};t&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Vo.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(WO,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:i,payload:s,ref:o}=t;n==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(t.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vo.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([JO],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class rS extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ui(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class eN extends rS{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Rw extends rS{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var tN=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{h(n.next(f))}catch(m){o(m)}}function c(f){try{h(n.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(a,c)}h((n=n.apply(r,e||[])).next())})};const DP=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Qm(async()=>{const{default:n}=await Promise.resolve().then(()=>kf);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},nN=()=>tN(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Qm(()=>Promise.resolve().then(()=>kf),void 0)).Response:Response}),Lw=r=>{if(Array.isArray(r))return r.map(t=>Lw(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Lw(n)}),e};var lh=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{h(n.next(f))}catch(m){o(m)}}function c(f){try{h(n.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(a,c)}h((n=n.apply(r,e||[])).next())})};const Y_=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),rN=(r,e,t)=>lh(void 0,void 0,void 0,function*(){const n=yield nN();r instanceof n&&!t?.noResolveJson?r.json().then(i=>{e(new eN(Y_(i),r.status||500))}).catch(i=>{e(new Rw(Y_(i),i))}):e(new Rw(Y_(r),r))}),iN=(r,e,t,n)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),t))};function eg(r,e,t,n,i,s){return lh(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,iN(e,n,i,s)).then(c=>{if(!c.ok)throw c;return n?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>rN(c,a,n))})})}function $v(r,e,t,n){return lh(this,void 0,void 0,function*(){return eg(r,"GET",e,t,n)})}function dc(r,e,t,n,i){return lh(this,void 0,void 0,function*(){return eg(r,"POST",e,n,i,t)})}function sN(r,e,t,n,i){return lh(this,void 0,void 0,function*(){return eg(r,"PUT",e,n,i,t)})}function oN(r,e,t,n){return lh(this,void 0,void 0,function*(){return eg(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function OP(r,e,t,n,i){return lh(this,void 0,void 0,function*(){return eg(r,"DELETE",e,n,i,t)})}var ms=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{h(n.next(f))}catch(m){o(m)}}function c(f){try{h(n.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(a,c)}h((n=n.apply(r,e||[])).next())})};const aN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},oT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lN{constructor(e,t={},n,i){this.url=e,this.headers=t,this.bucketId=n,this.fetch=DP(i)}uploadOrUpdate(e,t,n,i){return ms(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},oT),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));const h=this._removeEmptyFolders(t),f=this._getFinalPath(h),m=yield this.fetch(`${this.url}/object/${f}`,Object.assign({method:e,body:s,headers:a},o?.duplex?{duplex:o.duplex}:{})),g=yield m.json();return m.ok?{data:{path:h,id:g.Id,fullPath:g.Key},error:null}:{data:null,error:g}}catch(s){if(ui(s))return{data:null,error:s};throw s}})}upload(e,t,n){return ms(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return ms(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c;const h=Object.assign({upsert:oT.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",h.cacheControl)):(c=n,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType);const m=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:f}),g=yield m.json();return m.ok?{data:{path:s,fullPath:g.Key},error:null}:{data:null,error:g}}catch(c){if(ui(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return ms(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const s=yield dc(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new rS("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(ui(n))return{data:null,error:n};throw n}})}update(e,t,n){return ms(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return ms(this,void 0,void 0,function*(){try{return{data:yield dc(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ui(i))return{data:null,error:i};throw i}})}copy(e,t,n){return ms(this,void 0,void 0,function*(){try{return{data:{path:(yield dc(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ui(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return ms(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield dc(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(ui(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return ms(this,void 0,void 0,function*(){try{const i=yield dc(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(ui(i))return{data:null,error:i};throw i}})}download(e,t){return ms(this,void 0,void 0,function*(){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield $v(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ui(a))return{data:null,error:a};throw a}})}info(e){return ms(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield $v(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Lw(n),error:null}}catch(n){if(ui(n))return{data:null,error:n};throw n}})}exists(e){return ms(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield oN(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ui(n)&&n instanceof Rw){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&i.push(c);let h=i.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${h}`)}}}remove(e){return ms(this,void 0,void 0,function*(){try{return{data:yield OP(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ui(t))return{data:null,error:t};throw t}})}list(e,t,n){return ms(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},aN),t),{prefix:e||""});return{data:yield dc(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(ui(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const cN="2.7.1",uN={"X-Client-Info":`storage-js/${cN}`};var xd=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{h(n.next(f))}catch(m){o(m)}}function c(f){try{h(n.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(a,c)}h((n=n.apply(r,e||[])).next())})};class hN{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},uN),t),this.fetch=DP(n)}listBuckets(){return xd(this,void 0,void 0,function*(){try{return{data:yield $v(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ui(e))return{data:null,error:e};throw e}})}getBucket(e){return xd(this,void 0,void 0,function*(){try{return{data:yield $v(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ui(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return xd(this,void 0,void 0,function*(){try{return{data:yield dc(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ui(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return xd(this,void 0,void 0,function*(){try{return{data:yield sN(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ui(n))return{data:null,error:n};throw n}})}emptyBucket(e){return xd(this,void 0,void 0,function*(){try{return{data:yield dc(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ui(t))return{data:null,error:t};throw t}})}deleteBucket(e){return xd(this,void 0,void 0,function*(){try{return{data:yield OP(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ui(t))return{data:null,error:t};throw t}})}}class dN extends hN{constructor(e,t={},n){super(e,t,n)}from(e){return new lN(this.url,this.headers,e,this.fetch)}}const fN="2.50.5";let em="";typeof Deno<"u"?em="deno":typeof document<"u"?em="web":typeof navigator<"u"&&navigator.product==="ReactNative"?em="react-native":em="node";const pN={"X-Client-Info":`supabase-js-${em}/${fN}`},mN={headers:pN},gN={schema:"public"},vN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yN={};var _N=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{h(n.next(f))}catch(m){o(m)}}function c(f){try{h(n.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(a,c)}h((n=n.apply(r,e||[])).next())})};const xN=r=>{let e;return r?e=r:typeof fetch>"u"?e=MP:e=fetch,(...t)=>e(...t)},wN=()=>typeof Headers>"u"?TP:Headers,SN=(r,e,t)=>{const n=xN(t),i=wN();return(s,o)=>_N(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:r;let h=new i(o?.headers);return h.has("apikey")||h.set("apikey",r),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),n(s,Object.assign(Object.assign({},o),{headers:h}))})};var EN=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{h(n.next(f))}catch(m){o(m)}}function c(f){try{h(n.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(a,c)}h((n=n.apply(r,e||[])).next())})};function MN(r){return r.endsWith("/")?r:r+"/"}function TN(r,e){var t,n;const{db:i,auth:s,realtime:o,global:a}=r,{db:c,auth:h,realtime:f,global:m}=e,g={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},h),s),realtime:Object.assign(Object.assign({},f),o),global:Object.assign(Object.assign(Object.assign({},m),a),{headers:Object.assign(Object.assign({},(t=m?.headers)!==null&&t!==void 0?t:{}),(n=a?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>EN(this,void 0,void 0,function*(){return""})};return r.accessToken?g.accessToken=r.accessToken:delete g.accessToken,g}const NP="2.70.0",Kd=30*1e3,Iw=3,Z_=Iw*Kd,bN="http://localhost:9999",AN="supabase.auth.token",CN={"X-Client-Info":`gotrue-js/${NP}`},kw="X-Supabase-Api-Version",UP={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},PN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,RN=6e5;class iS extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function un(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class LN extends iS{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function IN(r){return un(r)&&r.name==="AuthApiError"}class FP extends iS{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Rc extends iS{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class uc extends Rc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kN(r){return un(r)&&r.name==="AuthSessionMissingError"}class y0 extends Rc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _0 extends Rc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class x0 extends Rc{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function DN(r){return un(r)&&r.name==="AuthImplicitGrantRedirectError"}class aT extends Rc{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Dw extends Rc{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function K_(r){return un(r)&&r.name==="AuthRetryableFetchError"}class lT extends Rc{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class lm extends Rc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const qv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cT=` 	
\r=`.split(""),ON=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<cT.length;e+=1)r[cT[e].charCodeAt(0)]=-2;for(let e=0;e<qv.length;e+=1)r[qv[e].charCodeAt(0)]=e;return r})();function uT(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(qv[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(qv[n]),e.queuedBits-=6}}function BP(r,e,t){const n=ON[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function hT(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{FN(o,n,t)};for(let o=0;o<r.length;o+=1)BP(r.charCodeAt(o),i,s);return e.join("")}function NN(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function UN(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}NN(n,e)}}function FN(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function BN(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<r.length;i+=1)BP(r.charCodeAt(i),t,n);return new Uint8Array(e)}function zN(r){const e=[];return UN(r,t=>e.push(t)),new Uint8Array(e)}function VN(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};return r.forEach(i=>uT(i,t,n)),uT(null,t,n),e.join("")}function HN(r){return Math.round(Date.now()/1e3)+r}function GN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Bo=()=>typeof window<"u"&&typeof document<"u",xu={tested:!1,writable:!1},cm=()=>{if(!Bo())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xu.tested)return xu.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),xu.tested=!0,xu.writable=!0}catch{xu.tested=!0,xu.writable=!1}return xu.writable};function WN(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const zP=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Qm(async()=>{const{default:n}=await Promise.resolve().then(()=>kf);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},jN=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",VP=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},w0=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},S0=async(r,e)=>{await r.removeItem(e)};class Sy{constructor(){this.promise=new Sy.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Sy.promiseConstructor=Promise;function J_(r){const e=r.split(".");if(e.length!==3)throw new lm("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!PN.test(e[n]))throw new lm("JWT not in base64url format");return{header:JSON.parse(hT(e[0])),payload:JSON.parse(hT(e[1])),signature:BN(e[2]),raw:{header:e[0],payload:e[1]}}}async function XN(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function $N(r,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await r(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function qN(r){return("0"+r.toString(16)).substr(-2)}function YN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,qN).join("")}async function ZN(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function KN(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await ZN(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wd(r,e,t=!1){const n=YN();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await VP(r,`${e}-code-verifier`,i);const s=await KN(n);return[s,n===s?"plain":"s256"]}const JN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function QN(r){const e=r.headers.get(kw);if(!e||!e.match(JN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function eU(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function tU(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sd(r){if(!nU.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var rU=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const Iu=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),iU=[502,503,504];async function dT(r){var e;if(!jN(r))throw new Dw(Iu(r),0);if(iU.includes(r.status))throw new Dw(Iu(r),r.status);let t;try{t=await r.json()}catch(s){throw new FP(Iu(s),s)}let n;const i=QN(r);if(i&&i.getTime()>=UP["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new lT(Iu(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new uc}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new lT(Iu(t),r.status,t.weak_password.reasons);throw new LN(Iu(t),r.status||500,n)}const sU=(r,e,t,n)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function wn(r,e,t,n){var i;const s=Object.assign({},n?.headers);s[kw]||(s[kw]=UP["2024-01-01"].name),n?.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await oU(r,e,t+a,{headers:s,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(c):{data:Object.assign({},c),error:null}}async function oU(r,e,t,n,i,s){const o=sU(e,n,i,s);let a;try{a=await r(t,Object.assign({},o))}catch(c){throw console.error(c),new Dw(Iu(c),0)}if(a.ok||await dT(a),n?.noResolveJson)return a;try{return await a.json()}catch(c){await dT(c)}}function il(r){var e;let t=null;uU(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=HN(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function fT(r){const e=il(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function mc(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function aU(r){return{data:r,error:null}}function lU(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s}=r,o=rU(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function cU(r){return r}function uU(r){return r.access_token&&r.refresh_token&&r.expires_in}const Q_=["global","local","others"];var hU=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class dU{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=zP(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Q_[0]){if(Q_.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Q_.join(", ")}`);try{return await wn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(un(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await wn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:mc})}catch(n){if(un(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=hU(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await wn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:lU,redirectTo:t?.redirectTo})}catch(t){if(un(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await wn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:mc})}catch(t){if(un(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,s,o,a,c;try{const h={nextPage:null,lastPage:0,total:0},f=await wn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:cU});if(f.error)throw f.error;const m=await f.json(),g=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(a=f.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(_=>{const M=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);h[`${E}Page`]=M}),h.total=parseInt(g)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(un(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Sd(e);try{return await wn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:mc})}catch(t){if(un(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Sd(e);try{return await wn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:mc})}catch(n){if(un(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Sd(e);try{return await wn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:mc})}catch(n){if(un(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Sd(e.userId);try{const{data:t,error:n}=await wn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(un(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Sd(e.userId),Sd(e.id);try{return{data:await wn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(un(t))return{data:null,error:t};throw t}}}const fU={getItem:r=>cm()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{cm()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{cm()&&globalThis.localStorage.removeItem(r)}};function pT(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function pU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ed={debug:!!(globalThis&&cm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class HP extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class mU extends HP{}async function gU(r,e,t){Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw Ed.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new mU(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Ed.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}pU();const vU={url:bN,storageKey:AN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:CN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mT(r,e,t){return await t()}class Tm{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Tm.nextInstanceID,Tm.nextInstanceID+=1,this.instanceID>0&&Bo()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},vU),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new dU({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=zP(i.fetch),this.lock=i.lock||mT,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Bo()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=gU:this.lock=mT,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:cm()?this.storage=fU:(this.memoryStorage={},this.storage=pT(this.memoryStorage)):(this.memoryStorage={},this.storage=pT(this.memoryStorage)),Bo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${NP}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=WN(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Bo()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),DN(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return un(t)?{error:t}:{error:new FP("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const s=await wn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:il}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(s){if(un(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,n,i;try{let s;if("email"in e){const{email:f,password:m,options:g}=e;let y=null,_=null;this.flowType==="pkce"&&([y,_]=await wd(this.storage,this.storageKey)),s=await wn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g?.emailRedirectTo,body:{email:f,password:m,data:(t=g?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:y,code_challenge_method:_},xform:il})}else if("phone"in e){const{phone:f,password:m,options:g}=e;s=await wn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:m,data:(n=g?.data)!==null&&n!==void 0?n:{},channel:(i=g?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:il})}else throw new _0("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(s){if(un(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await wn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:fT})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await wn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:fT})}else throw new _0("You must provide either an email or phone number and a password");const{data:n,error:i}=t;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new y0}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(un(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,i,s,o,a,c,h,f,m,g,y;let _,M;if("message"in e)_=e.message,M=e.signature;else{const{chain:E,wallet:x,statement:A,options:b}=e;let R;if(Bo())if(typeof x=="object")R=x;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))R=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=x}const N=new URL((t=b?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in R&&R.signIn){const I=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b?.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),A?{statement:A}:null));let O;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")O=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)O=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)_=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),M=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${N.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(i=(n=b?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=b?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((h=b?.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((m=(f=b?.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||m===void 0)&&m.length?["Resources",...b.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const I=await R.signMessage(new TextEncoder().encode(_),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");M=I}}try{const{data:E,error:x}=await wn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:VN(M)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:il});if(x)throw x;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new y0}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:x})}catch(E){if(un(E))return{data:{user:null,session:null},error:E};throw E}}async _exchangeCodeForSession(e){const t=await w0(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{const{data:s,error:o}=await wn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:il});if(await S0(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new y0}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(un(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:s,nonce:o}=e,a=await wn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:il}),{data:c,error:h}=a;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new y0}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(t){if(un(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,i,s,o;try{if("email"in e){const{email:a,options:c}=e;let h=null,f=null;this.flowType==="pkce"&&([h,f]=await wd(this.storage,this.storageKey));const{error:m}=await wn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:h,code_challenge_method:f},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in e){const{phone:a,options:c}=e,{data:h,error:f}=await wn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(s=c?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:h?.message_id},error:f}}throw new _0("You must provide either an email or phone number.")}catch(a){if(un(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await wn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:il});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,h=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(i){if(un(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,n,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await wd(this.storage,this.storageKey)),await wn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:aU})}catch(s){if(un(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new uc;const{error:i}=await wn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(un(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await wn(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:a}=await wn(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:a}}throw new _0("You must provide either an email or phone number and a type")}catch(t){if(un(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await w0(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Z_:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,h,f)=>(!o&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,f))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await wn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:mc}):await this._useSession(async t=>{var n,i,s;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new uc}:await wn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:mc})})}catch(t){if(un(t))return kN(t)&&(await this._removeSession(),await S0(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new uc;const o=i.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await wd(this.storage,this.storageKey));const{data:h,error:f}=await wn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:mc});if(f)throw f;return o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(un(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new uc;const t=Date.now()/1e3;let n=t,i=!0,s=null;const{payload:o}=J_(e.access_token);if(o.exp&&(n=o.exp,i=n<=t),i){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(un(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new uc;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(un(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Bo())throw new x0("No browser detected.");if(e.error||e.error_description||e.error_code)throw new x0(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new aT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new x0("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new aT("No code detected.");const{data:A,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:c,token_type:h}=e;if(!s||!a||!o||!h)throw new x0("No session defined in URL");const f=Math.round(Date.now()/1e3),m=parseInt(a);let g=f+m;c&&(g=parseInt(c));const y=g-f;y*1e3<=Kd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${m}s`);const _=g-m;f-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,g,f):f-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,g,f);const{data:M,error:E}=await this._getUser(s);if(E)throw E;const x={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:g,refresh_token:o,token_type:h,user:M.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(un(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await w0(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{error:s};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(IN(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await S0(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=GN(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await wd(this.storage,this.storageKey,!0));try{return await wn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(un(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(un(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:i}=await this._useSession(async s=>{var o,a,c,h,f;const{data:m,error:g}=s;if(g)throw g;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await wn(this.fetch,"GET",y,{headers:this.headers,jwt:(f=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&f!==void 0?f:void 0})});if(i)throw i;return Bo()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:e.provider,url:n?.url},error:null}}catch(n){if(un(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)throw o;return await wn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(un(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await $N(async i=>(i>0&&await XN(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await wn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:il})),(i,s)=>{const o=200*Math.pow(2,i);return s&&K_(s)&&Date.now()+o-n<Kd})}catch(n){if(this._debug(t,"error",n),un(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Bo()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await w0(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Z_;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Z_}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:s}=await this._callRefreshToken(n.refresh_token);s&&(console.error(s),K_(s)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new uc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Sy;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new uc;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),un(s)){const o={session:null,error:s};return K_(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await VP(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await S0(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Bo()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Kd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Kd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Kd}ms, refresh threshold is ${Iw} ticks`),i<=Iw&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof HP)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bo()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await wd(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n?.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await wn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(un(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:h}=await wn(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((i=c?.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(un(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await wn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(un(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?{data:null,error:s}:await wn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(un(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=e?.factors||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=J_(i.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const f=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+RN>Date.now()))return n;const{data:i,error:s}=await wn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new lm("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),n=i.keys.find(o=>o.kid===e),!n)throw new lm("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:y,error:_}=await this.getSession();if(_||!y.session)return{data:null,error:_};n=y.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:c}}=J_(n);if(eU(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:s,header:i,signature:o},error:null}}const h=tU(i.alg),f=await this.fetchJwk(i.kid,t),m=await crypto.subtle.importKey("jwk",f,h,!0,["verify"]);if(!await crypto.subtle.verify(h,m,o,zN(`${a}.${c}`)))throw new lm("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(un(n))return{data:null,error:n};throw n}}}Tm.nextInstanceID=0;const yU=Tm;class _U extends yU{constructor(e){super(e)}}var xU=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(f){try{h(n.next(f))}catch(m){o(m)}}function c(f){try{h(n.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(a,c)}h((n=n.apply(r,e||[])).next())})};class wU{constructor(e,t,n){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=MN(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:gN,realtime:yN,auth:Object.assign(Object.assign({},vN),{storageKey:h}),global:mN},m=TN(n??{},f);this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=m.global.headers)!==null&&s!==void 0?s:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=m.auth)!==null&&o!==void 0?o:{},this.headers,m.global.fetch),this.fetch=SN(t,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new FO(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),m.accessToken||this._listenForAuthEvents()}get functions(){return new bO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new dN(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return xU(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,storageKey:s,flowType:o,lock:a,debug:c},h,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _U({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),h),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,flowType:o,lock:a,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new QO(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const SU=(r,e,t)=>new wU(r,e,t),EU="https://your-project-id.supabase.co",MU="your-anon-key-here",Do=SU(EU,MU),GP=j.createContext(void 0),sS=()=>{const r=j.useContext(GP);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},TU=({children:r})=>{const[e,t]=j.useState({user:null,isAuthenticated:!1,isLoading:!0});j.useEffect(()=>{(async()=>{try{const{data:{session:f}}=await Do.auth.getSession();if(f?.user){const{data:m,error:g}=await Do.from("users").select("*").eq("id",f.user.id).single();t(m&&!g?{user:m,isAuthenticated:!0,isLoading:!1}:{user:null,isAuthenticated:!1,isLoading:!1})}else t({user:null,isAuthenticated:!1,isLoading:!1})}catch(f){console.error("Error checking user session:",f),t({user:null,isAuthenticated:!1,isLoading:!1})}})();const{data:{subscription:h}}=Do.auth.onAuthStateChange(async(f,m)=>{if(f==="SIGNED_IN"&&m?.user){const{data:g,error:y}=await Do.from("users").select("*").eq("id",m.user.id).single();g&&!y&&t({user:g,isAuthenticated:!0,isLoading:!1})}else f==="SIGNED_OUT"&&t({user:null,isAuthenticated:!1,isLoading:!1})});return()=>h.unsubscribe()},[]);const a={...e,login:async c=>{t(h=>({...h,isLoading:!0}));try{const{data:h,error:f}=await Do.from("users").select("*").eq("email",c.email).single();if(f||!h)return t(y=>({...y,isLoading:!1})),!1;if(h.password!==c.password)return t(y=>({...y,isLoading:!1})),!1;const{data:m,error:g}=await Do.auth.signInWithPassword({email:c.email,password:c.password});return g?(console.error("Auth error:",g),t(y=>({...y,isLoading:!1})),!1):m.user?(t({user:h,isAuthenticated:!0,isLoading:!1}),!0):(t(y=>({...y,isLoading:!1})),!1)}catch(h){return console.error("Login error:",h),t(f=>({...f,isLoading:!1})),!1}},signup:async c=>{t(h=>({...h,isLoading:!0}));try{const{data:h,error:f}=await Do.from("users").select("*").eq("email",c.email).single();if(h)return t(y=>({...y,isLoading:!1})),!1;const{data:m,error:g}=await Do.auth.signUp({email:c.email,password:c.password});if(g)return console.error("Auth signup error:",g),t(y=>({...y,isLoading:!1})),!1;if(m.user){const y={username:c.username,email:c.email,password:c.password,profilePic:void 0},{data:_,error:M}=await Do.from("users").insert([{...y,id:m.user.id}]).select().single();if(M)return console.error("User creation error:",M),t(E=>({...E,isLoading:!1})),!1;if(_)return t({user:_,isAuthenticated:!0,isLoading:!1}),!0}return t(y=>({...y,isLoading:!1})),!1}catch(h){return console.error("Signup error:",h),t(f=>({...f,isLoading:!1})),!1}},logout:async()=>{try{await Do.auth.signOut(),t({user:null,isAuthenticated:!1,isLoading:!1})}catch(c){console.error("Logout error:",c)}},updateUser:async c=>{try{const{data:h,error:f}=await Do.from("users").update(c).eq("id",c.id).select().single();!f&&h&&t(m=>({...m,user:h}))}catch(h){console.error("Update user error:",h)}}};return K.jsx(GP.Provider,{value:a,children:r})},bU=$e.header`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 80px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 2rem;
`,AU=$e.h1`
  font-size: 1.8rem;
  font-weight: 700;
  background: linear-gradient(135deg, #EFC0C2 0%, #d4a5a7 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
`,CU=$e.nav`
  display: flex;
  align-items: center;
  gap: 2rem;

  @media (max-width: 768px) {
    display: none;
  }
`,E0=$e.a`
  text-decoration: none;
  color: #333;
  font-weight: 500;
  transition: color 0.3s ease;

  &:hover {
    color: #EFC0C2;
  }
`,PU=$e(Km)`
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 0.75rem 1.5rem;
  border-radius: 25px;
  text-decoration: none;
  font-weight: 600;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
    color: white;
  }
`,RU=$e.button`
  position: relative;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 50%;
  transition: background-color 0.3s ease;

  &:hover {
    background-color: rgba(239, 192, 194, 0.1);
  }
`,LU=$e.span`
  position: absolute;
  top: -5px;
  right: -5px;
      background: #EFC0C2;
  color: white;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  font-weight: 600;
`,IU=$e.button`
  display: none;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem;

  @media (max-width: 768px) {
    display: block;
  }
`,kU=$e.button`
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 50%;
  transition: background-color 0.3s ease;
  display: flex;
  align-items: center;
  gap: 0.5rem;

  &:hover {
    background-color: rgba(239, 192, 194, 0.1);
  }
`,DU=$e.img`
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
`,OU=$e.span`
  font-weight: 500;
  color: #333;
  display: none;

  @media (min-width: 768px) {
    display: block;
  }
`,NU=$e.button`
  background: linear-gradient(135deg, #EFC0C2 0%, #d4a5a7 100%);
  color: white;
  border: none;
  padding: 0.75rem 1.5rem;
  border-radius: 25px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  display: flex;
  align-items: center;
  gap: 0.5rem;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(239, 192, 194, 0.3);
  }
`,UU=$e.div`
  position: absolute;
  top: 100%;
  right: 0;
  background: white;
  border-radius: 10px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  min-width: 200px;
  overflow: hidden;
  z-index: 1000;
  margin-top: 0.5rem;
`,gT=$e.button`
  width: 100%;
  padding: 1rem;
  background: none;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: #333;
  transition: background-color 0.3s ease;

  &:hover {
    background-color: rgba(239, 192, 194, 0.1);
  }

  &:first-child {
    border-bottom: 1px solid #e1e5e9;
  }
`,FU=$e.div`
  position: relative;
`,WP=({cartItemCount:r,onCartClick:e,onLoginClick:t})=>{const{user:n,isAuthenticated:i,logout:s}=sS(),[o,a]=j.useState(!1),c=j.useRef(null);j.useEffect(()=>{const m=g=>{c.current&&!c.current.contains(g.target)&&a(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const h=()=>{a(!o)},f=()=>{s(),a(!1)};return K.jsxs(bU,{children:[K.jsx(AU,{children:"3D Shop"}),K.jsxs(CU,{children:[K.jsx(E0,{href:"#home",children:"Home"}),K.jsx(E0,{href:"#products",children:"Products"}),K.jsx(E0,{href:"#about",children:"About"}),K.jsx(E0,{href:"#contact",children:"Contact"})]}),K.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[K.jsxs(PU,{to:"/styler",children:[K.jsx(wP,{size:16}),"3D Styler"]}),K.jsxs(RU,{onClick:e,children:[K.jsx(EP,{size:24}),r>0&&K.jsx(LU,{children:r})]}),i?K.jsxs(FU,{ref:c,children:[K.jsxs(kU,{onClick:h,children:[n?.profilePic?K.jsx(DU,{src:n.profilePic,alt:n.username}):K.jsx(bw,{size:24}),K.jsx(OU,{children:n?.username})]}),o&&K.jsxs(UU,{children:[K.jsxs(gT,{onClick:()=>a(!1),children:[K.jsx(vO,{size:16}),"Settings"]}),K.jsxs(gT,{onClick:f,children:[K.jsx(mO,{size:16}),"Logout"]})]})]}):K.jsxs(NU,{onClick:t,children:[K.jsx(bw,{size:16}),"Login"]}),K.jsx(IU,{children:K.jsx(gO,{size:24})})]})]})},jP=j.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"}),Ey=j.createContext({}),My=j.createContext(null),Ty=typeof document<"u",oS=Ty?j.useLayoutEffect:j.useEffect,XP=j.createContext({strict:!1}),aS=r=>r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),BU="framerAppearId",$P="data-"+aS(BU);function zU(r,e,t,n){const{visualElement:i}=j.useContext(Ey),s=j.useContext(XP),o=j.useContext(My),a=j.useContext(jP).reducedMotion,c=j.useRef();n=n||s.renderer,!c.current&&n&&(c.current=n(r,{visualState:e,parent:i,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const h=c.current;j.useInsertionEffect(()=>{h&&h.update(t,o)});const f=j.useRef(!!(t[$P]&&!window.HandoffComplete));return oS(()=>{h&&(h.render(),f.current&&h.animationState&&h.animationState.animateChanges())}),j.useEffect(()=>{h&&(h.updateFeatures(),!f.current&&h.animationState&&h.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),h}function tf(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function VU(r,e,t){return j.useCallback(n=>{n&&r.mount&&r.mount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):tf(t)&&(t.current=n))},[e])}function bm(r){return typeof r=="string"||Array.isArray(r)}function by(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}const lS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cS=["initial",...lS];function Ay(r){return by(r.animate)||cS.some(e=>bm(r[e]))}function qP(r){return!!(Ay(r)||r.variants)}function HU(r,e){if(Ay(r)){const{initial:t,animate:n}=r;return{initial:t===!1||bm(t)?t:void 0,animate:bm(n)?n:void 0}}return r.inherit!==!1?e:{}}function GU(r){const{initial:e,animate:t}=HU(r,j.useContext(Ey));return j.useMemo(()=>({initial:e,animate:t}),[vT(e),vT(t)])}function vT(r){return Array.isArray(r)?r.join(" "):r}const yT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Am={};for(const r in yT)Am[r]={isEnabled:e=>yT[r].some(t=>!!e[t])};function WU(r){for(const e in r)Am[e]={...Am[e],...r[e]}}const uS=j.createContext({}),YP=j.createContext({}),jU=Symbol.for("motionComponentSymbol");function XU({preloadedFeatures:r,createVisualElement:e,useRender:t,useVisualState:n,Component:i}){r&&WU(r);function s(a,c){let h;const f={...j.useContext(jP),...a,layoutId:$U(a)},{isStatic:m}=f,g=GU(a),y=n(a,m);if(!m&&Ty){g.visualElement=zU(i,y,f,e);const _=j.useContext(YP),M=j.useContext(XP).strict;g.visualElement&&(h=g.visualElement.loadFeatures(f,M,r,_))}return j.createElement(Ey.Provider,{value:g},h&&g.visualElement?j.createElement(h,{visualElement:g.visualElement,...f}):null,t(i,a,VU(y,g.visualElement,c),y,m,g.visualElement))}const o=j.forwardRef(s);return o[jU]=i,o}function $U({layoutId:r}){const e=j.useContext(uS).id;return e&&r!==void 0?e+"-"+r:r}function qU(r){function e(n,i={}){return XU(r(n,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(n,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const YU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hS(r){return typeof r!="string"||r.includes("-")?!1:!!(YU.indexOf(r)>-1||/[A-Z]/.test(r))}const Yv={};function ZU(r){Object.assign(Yv,r)}const tg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ch=new Set(tg);function ZP(r,{layout:e,layoutId:t}){return ch.has(r)||r.startsWith("origin")||(e||t!==void 0)&&(!!Yv[r]||r==="opacity")}const ws=r=>!!(r&&r.getVelocity),KU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},JU=tg.length;function QU(r,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},n,i){let s="";for(let o=0;o<JU;o++){const a=tg[o];if(r[a]!==void 0){const c=KU[a]||a;s+=`${c}(${r[a]}) `}}return e&&!r.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(r,n?"":s):t&&n&&(s="none"),s}const KP=r=>e=>typeof e=="string"&&e.startsWith(r),JP=KP("--"),Ow=KP("var(--"),eF=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,tF=(r,e)=>e&&typeof r=="number"?e.transform(r):r,Tc=(r,e,t)=>Math.min(Math.max(t,r),e),uh={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},um={...uh,transform:r=>Tc(0,1,r)},M0={...uh,default:1},hm=r=>Math.round(r*1e5)/1e5,Cy=/(-)?([\d]*\.?[\d])+/g,QP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,nF=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ng(r){return typeof r=="string"}const rg=r=>({test:e=>ng(e)&&e.endsWith(r)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${r}`}),hc=rg("deg"),ua=rg("%"),Yt=rg("px"),rF=rg("vh"),iF=rg("vw"),_T={...ua,parse:r=>ua.parse(r)/100,transform:r=>ua.transform(r*100)},xT={...uh,transform:Math.round},eR={borderWidth:Yt,borderTopWidth:Yt,borderRightWidth:Yt,borderBottomWidth:Yt,borderLeftWidth:Yt,borderRadius:Yt,radius:Yt,borderTopLeftRadius:Yt,borderTopRightRadius:Yt,borderBottomRightRadius:Yt,borderBottomLeftRadius:Yt,width:Yt,maxWidth:Yt,height:Yt,maxHeight:Yt,size:Yt,top:Yt,right:Yt,bottom:Yt,left:Yt,padding:Yt,paddingTop:Yt,paddingRight:Yt,paddingBottom:Yt,paddingLeft:Yt,margin:Yt,marginTop:Yt,marginRight:Yt,marginBottom:Yt,marginLeft:Yt,rotate:hc,rotateX:hc,rotateY:hc,rotateZ:hc,scale:M0,scaleX:M0,scaleY:M0,scaleZ:M0,skew:hc,skewX:hc,skewY:hc,distance:Yt,translateX:Yt,translateY:Yt,translateZ:Yt,x:Yt,y:Yt,z:Yt,perspective:Yt,transformPerspective:Yt,opacity:um,originX:_T,originY:_T,originZ:Yt,zIndex:xT,fillOpacity:um,strokeOpacity:um,numOctaves:xT};function dS(r,e,t,n){const{style:i,vars:s,transform:o,transformOrigin:a}=r;let c=!1,h=!1,f=!0;for(const m in e){const g=e[m];if(JP(m)){s[m]=g;continue}const y=eR[m],_=tF(g,y);if(ch.has(m)){if(c=!0,o[m]=_,!f)continue;g!==(y.default||0)&&(f=!1)}else m.startsWith("origin")?(h=!0,a[m]=_):i[m]=_}if(e.transform||(c||n?i.transform=QU(r.transform,t,f,n):i.transform&&(i.transform="none")),h){const{originX:m="50%",originY:g="50%",originZ:y=0}=a;i.transformOrigin=`${m} ${g} ${y}`}}const fS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tR(r,e,t){for(const n in e)!ws(e[n])&&!ZP(n,t)&&(r[n]=e[n])}function sF({transformTemplate:r},e,t){return j.useMemo(()=>{const n=fS();return dS(n,e,{enableHardwareAcceleration:!t},r),Object.assign({},n.vars,n.style)},[e])}function oF(r,e,t){const n=r.style||{},i={};return tR(i,n,r),Object.assign(i,sF(r,e,t)),r.transformValues?r.transformValues(i):i}function aF(r,e,t){const n={},i=oF(r,e,t);return r.drag&&r.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(n.tabIndex=0),n.style=i,n}const lF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zv(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||lF.has(r)}let nR=r=>!Zv(r);function cF(r){r&&(nR=e=>e.startsWith("on")?!Zv(e):r(e))}try{cF(require("@emotion/is-prop-valid").default)}catch{}function uF(r,e,t){const n={};for(const i in r)i==="values"&&typeof r.values=="object"||(nR(i)||t===!0&&Zv(i)||!e&&!Zv(i)||r.draggable&&i.startsWith("onDrag"))&&(n[i]=r[i]);return n}function wT(r,e,t){return typeof r=="string"?r:Yt.transform(e+t*r)}function hF(r,e,t){const n=wT(e,r.x,r.width),i=wT(t,r.y,r.height);return`${n} ${i}`}const dF={offset:"stroke-dashoffset",array:"stroke-dasharray"},fF={offset:"strokeDashoffset",array:"strokeDasharray"};function pF(r,e,t=1,n=0,i=!0){r.pathLength=1;const s=i?dF:fF;r[s.offset]=Yt.transform(-n);const o=Yt.transform(e),a=Yt.transform(t);r[s.array]=`${o} ${a}`}function pS(r,{attrX:e,attrY:t,attrScale:n,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...h},f,m,g){if(dS(r,h,f,g),m){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:y,style:_,dimensions:M}=r;y.transform&&(M&&(_.transform=y.transform),delete y.transform),M&&(i!==void 0||s!==void 0||_.transform)&&(_.transformOrigin=hF(M,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),n!==void 0&&(y.scale=n),o!==void 0&&pF(y,o,a,c,!1)}const rR=()=>({...fS(),attrs:{}}),mS=r=>typeof r=="string"&&r.toLowerCase()==="svg";function mF(r,e,t,n){const i=j.useMemo(()=>{const s=rR();return pS(s,e,{enableHardwareAcceleration:!1},mS(n),r.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(r.style){const s={};tR(s,r.style,r),i.style={...s,...i.style}}return i}function gF(r=!1){return(t,n,i,{latestValues:s},o)=>{const c=(hS(t)?mF:aF)(n,s,o,t),f={...uF(n,typeof t=="string",r),...c,ref:i},{children:m}=n,g=j.useMemo(()=>ws(m)?m.get():m,[m]);return j.createElement(t,{...f,children:g})}}function iR(r,{style:e,vars:t},n,i){Object.assign(r.style,e,i&&i.getProjectionStyles(n));for(const s in t)r.style.setProperty(s,t[s])}const sR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oR(r,e,t,n){iR(r,e,void 0,n);for(const i in e.attrs)r.setAttribute(sR.has(i)?i:aS(i),e.attrs[i])}function gS(r,e){const{style:t}=r,n={};for(const i in t)(ws(t[i])||e.style&&ws(e.style[i])||ZP(i,r))&&(n[i]=t[i]);return n}function aR(r,e){const t=gS(r,e);for(const n in r)if(ws(r[n])||ws(e[n])){const i=tg.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;t[i]=r[n]}return t}function vS(r,e,t,n={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:r.custom,n,i)),typeof e=="string"&&(e=r.variants&&r.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:r.custom,n,i)),e}function lR(r){const e=j.useRef(null);return e.current===null&&(e.current=r()),e.current}const Kv=r=>Array.isArray(r),vF=r=>!!(r&&typeof r=="object"&&r.mix&&r.toValue),yF=r=>Kv(r)?r[r.length-1]||0:r;function Iv(r){const e=ws(r)?r.get():r;return vF(e)?e.toValue():e}function _F({scrapeMotionValuesFromProps:r,createRenderState:e,onMount:t},n,i,s){const o={latestValues:xF(n,i,s,r),renderState:e()};return t&&(o.mount=a=>t(n,a,o)),o}const cR=r=>(e,t)=>{const n=j.useContext(Ey),i=j.useContext(My),s=()=>_F(r,e,n,i);return t?s():lR(s)};function xF(r,e,t,n){const i={},s=n(r,{});for(const g in s)i[g]=Iv(s[g]);let{initial:o,animate:a}=r;const c=Ay(r),h=qP(r);e&&h&&!c&&r.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let f=t?t.initial===!1:!1;f=f||o===!1;const m=f?a:o;return m&&typeof m!="boolean"&&!by(m)&&(Array.isArray(m)?m:[m]).forEach(y=>{const _=vS(r,y);if(!_)return;const{transitionEnd:M,transition:E,...x}=_;for(const A in x){let b=x[A];if(Array.isArray(b)){const R=f?b.length-1:0;b=b[R]}b!==null&&(i[A]=b)}for(const A in M)i[A]=M[A]}),i}const Ir=r=>r;class ST{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function wF(r){let e=new ST,t=new ST,n=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(c,h=!1,f=!1)=>{const m=f&&i,g=m?e:t;return h&&o.add(c),g.add(c)&&m&&i&&(n=e.order.length),c},cancel:c=>{t.remove(c),o.delete(c)},process:c=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),n=e.order.length,n)for(let h=0;h<n;h++){const f=e.order[h];f(c),o.has(f)&&(a.schedule(f),r())}i=!1,s&&(s=!1,a.process(c))}};return a}const T0=["prepare","read","update","preRender","render","postRender"],SF=40;function EF(r,e){let t=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=T0.reduce((m,g)=>(m[g]=wF(()=>t=!0),m),{}),o=m=>s[m].process(i),a=()=>{const m=performance.now();t=!1,i.delta=n?1e3/60:Math.max(Math.min(m-i.timestamp,SF),1),i.timestamp=m,i.isProcessing=!0,T0.forEach(o),i.isProcessing=!1,t&&e&&(n=!1,r(a))},c=()=>{t=!0,n=!0,i.isProcessing||r(a)};return{schedule:T0.reduce((m,g)=>{const y=s[g];return m[g]=(_,M=!1,E=!1)=>(t||c(),y.schedule(_,M,E)),m},{}),cancel:m=>T0.forEach(g=>s[g].cancel(m)),state:i,steps:s}}const{schedule:ir,cancel:ml,state:Ni,steps:ex}=EF(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ir,!0),MF={useVisualState:cR({scrapeMotionValuesFromProps:aR,createRenderState:rR,onMount:(r,e,{renderState:t,latestValues:n})=>{ir.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),ir.render(()=>{pS(t,n,{enableHardwareAcceleration:!1},mS(e.tagName),r.transformTemplate),oR(e,t)})}})},TF={useVisualState:cR({scrapeMotionValuesFromProps:gS,createRenderState:fS})};function bF(r,{forwardMotionProps:e=!1},t,n){return{...hS(r)?MF:TF,preloadedFeatures:t,useRender:gF(e),createVisualElement:n,Component:r}}function cl(r,e,t,n={passive:!0}){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t)}const uR=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1;function Py(r,e="page"){return{point:{x:r[e+"X"],y:r[e+"Y"]}}}const AF=r=>e=>uR(e)&&r(e,Py(e));function dl(r,e,t,n){return cl(r,e,AF(t),n)}const CF=(r,e)=>t=>e(r(t)),xc=(...r)=>r.reduce(CF);function hR(r){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=r,t):!1}}const ET=hR("dragHorizontal"),MT=hR("dragVertical");function dR(r){let e=!1;if(r==="y")e=MT();else if(r==="x")e=ET();else{const t=ET(),n=MT();t&&n?e=()=>{t(),n()}:(t&&t(),n&&n())}return e}function fR(){const r=dR(!0);return r?(r(),!1):!0}class Lc{constructor(e){this.isMounted=!1,this.node=e}update(){}}function TT(r,e){const t="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||fR())return;const a=r.getProps();r.animationState&&a.whileHover&&r.animationState.setActive("whileHover",e),a[n]&&ir.update(()=>a[n](s,o))};return dl(r.current,t,i,{passive:!r.getProps()[n]})}class PF extends Lc{mount(){this.unmount=xc(TT(this.node,!0),TT(this.node,!1))}unmount(){}}class RF extends Lc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xc(cl(this.node.current,"focus",()=>this.onFocus()),cl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const pR=(r,e)=>e?r===e?!0:pR(r,e.parentElement):!1;function tx(r,e){if(!e)return;const t=new PointerEvent("pointer"+r);e(t,Py(t))}class LF extends Lc{constructor(){super(...arguments),this.removeStartListeners=Ir,this.removeEndListeners=Ir,this.removeAccessibleListeners=Ir,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),s=dl(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:f,globalTapTarget:m}=this.node.getProps();ir.update(()=>{!m&&!pR(this.node.current,a.target)?f&&f(a,c):h&&h(a,c)})},{passive:!(n.onTap||n.onPointerUp)}),o=dl(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=xc(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||tx("up",(c,h)=>{const{onTap:f}=this.node.getProps();f&&ir.update(()=>f(c,h))})};this.removeEndListeners(),this.removeEndListeners=cl(this.node.current,"keyup",o),tx("down",(a,c)=>{this.startPress(a,c)})},t=cl(this.node.current,"keydown",e),n=()=>{this.isPressing&&tx("cancel",(s,o)=>this.cancelPress(s,o))},i=cl(this.node.current,"blur",n);this.removeAccessibleListeners=xc(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&ir.update(()=>n(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!fR()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&ir.update(()=>n(e,t))}mount(){const e=this.node.getProps(),t=dl(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=cl(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=xc(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Nw=new WeakMap,nx=new WeakMap,IF=r=>{const e=Nw.get(r.target);e&&e(r)},kF=r=>{r.forEach(IF)};function DF({root:r,...e}){const t=r||document;nx.has(t)||nx.set(t,{});const n=nx.get(t),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(kF,{root:r,...e})),n[i]}function OF(r,e,t){const n=DF(e);return Nw.set(r,t),n.observe(r),()=>{Nw.delete(r),n.unobserve(r)}}const NF={some:0,all:1};class UF extends Lc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:NF[i]},a=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,s&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),g=h?f:m;g&&g(c)};return OF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(FF(e,t))&&this.startObserver()}unmount(){}}function FF({viewport:r={}},{viewport:e={}}={}){return t=>r[t]!==e[t]}const BF={inView:{Feature:UF},tap:{Feature:LF},focus:{Feature:RF},hover:{Feature:PF}};function mR(r,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==r.length)return!1;for(let n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0}function zF(r){const e={};return r.values.forEach((t,n)=>e[n]=t.get()),e}function VF(r){const e={};return r.values.forEach((t,n)=>e[n]=t.getVelocity()),e}function Ry(r,e,t){const n=r.getProps();return vS(n,e,t!==void 0?t:n.custom,zF(r),VF(r))}let yS=Ir;const Ku=r=>r*1e3,fl=r=>r/1e3,HF={current:!1},gR=r=>Array.isArray(r)&&typeof r[0]=="number";function vR(r){return!!(!r||typeof r=="string"&&yR[r]||gR(r)||Array.isArray(r)&&r.every(vR))}const tm=([r,e,t,n])=>`cubic-bezier(${r}, ${e}, ${t}, ${n})`,yR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tm([0,.65,.55,1]),circOut:tm([.55,0,1,.45]),backIn:tm([.31,.01,.66,-.59]),backOut:tm([.33,1.53,.69,.99])};function _R(r){if(r)return gR(r)?tm(r):Array.isArray(r)?r.map(_R):yR[r]}function GF(r,e,t,{delay:n=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:c}={}){const h={[e]:t};c&&(h.offset=c);const f=_R(a);return Array.isArray(f)&&(h.easing=f),r.animate(h,{delay:n,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function WF(r,{repeat:e,repeatType:t="loop"}){const n=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[n]}const xR=(r,e,t)=>(((1-3*t+3*e)*r+(3*t-6*e))*r+3*e)*r,jF=1e-7,XF=12;function $F(r,e,t,n,i){let s,o,a=0;do o=e+(t-e)/2,s=xR(o,n,i)-r,s>0?t=o:e=o;while(Math.abs(s)>jF&&++a<XF);return o}function ig(r,e,t,n){if(r===e&&t===n)return Ir;const i=s=>$F(s,0,1,r,t);return s=>s===0||s===1?s:xR(i(s),e,n)}const qF=ig(.42,0,1,1),YF=ig(0,0,.58,1),wR=ig(.42,0,.58,1),ZF=r=>Array.isArray(r)&&typeof r[0]!="number",SR=r=>e=>e<=.5?r(2*e)/2:(2-r(2*(1-e)))/2,ER=r=>e=>1-r(1-e),_S=r=>1-Math.sin(Math.acos(r)),MR=ER(_S),KF=SR(_S),TR=ig(.33,1.53,.69,.99),xS=ER(TR),JF=SR(xS),QF=r=>(r*=2)<1?.5*xS(r):.5*(2-Math.pow(2,-10*(r-1))),eB={linear:Ir,easeIn:qF,easeInOut:wR,easeOut:YF,circIn:_S,circInOut:KF,circOut:MR,backIn:xS,backInOut:JF,backOut:TR,anticipate:QF},bT=r=>{if(Array.isArray(r)){yS(r.length===4);const[e,t,n,i]=r;return ig(e,t,n,i)}else if(typeof r=="string")return eB[r];return r},wS=(r,e)=>t=>!!(ng(t)&&nF.test(t)&&t.startsWith(r)||e&&Object.prototype.hasOwnProperty.call(t,e)),bR=(r,e,t)=>n=>{if(!ng(n))return n;const[i,s,o,a]=n.match(Cy);return{[r]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},tB=r=>Tc(0,255,r),rx={...uh,transform:r=>Math.round(tB(r))},Gu={test:wS("rgb","red"),parse:bR("red","green","blue"),transform:({red:r,green:e,blue:t,alpha:n=1})=>"rgba("+rx.transform(r)+", "+rx.transform(e)+", "+rx.transform(t)+", "+hm(um.transform(n))+")"};function nB(r){let e="",t="",n="",i="";return r.length>5?(e=r.substring(1,3),t=r.substring(3,5),n=r.substring(5,7),i=r.substring(7,9)):(e=r.substring(1,2),t=r.substring(2,3),n=r.substring(3,4),i=r.substring(4,5),e+=e,t+=t,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const Uw={test:wS("#"),parse:nB,transform:Gu.transform},nf={test:wS("hsl","hue"),parse:bR("hue","saturation","lightness"),transform:({hue:r,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(r)+", "+ua.transform(hm(e))+", "+ua.transform(hm(t))+", "+hm(um.transform(n))+")"},es={test:r=>Gu.test(r)||Uw.test(r)||nf.test(r),parse:r=>Gu.test(r)?Gu.parse(r):nf.test(r)?nf.parse(r):Uw.parse(r),transform:r=>ng(r)?r:r.hasOwnProperty("red")?Gu.transform(r):nf.transform(r)},gr=(r,e,t)=>-t*r+t*e+r;function ix(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function rB({hue:r,saturation:e,lightness:t,alpha:n}){r/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,c=2*t-a;i=ix(c,a,r+1/3),s=ix(c,a,r),o=ix(c,a,r-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:n}}const sx=(r,e,t)=>{const n=r*r;return Math.sqrt(Math.max(0,t*(e*e-n)+n))},iB=[Uw,Gu,nf],sB=r=>iB.find(e=>e.test(r));function AT(r){const e=sB(r);let t=e.parse(r);return e===nf&&(t=rB(t)),t}const AR=(r,e)=>{const t=AT(r),n=AT(e),i={...t};return s=>(i.red=sx(t.red,n.red,s),i.green=sx(t.green,n.green,s),i.blue=sx(t.blue,n.blue,s),i.alpha=gr(t.alpha,n.alpha,s),Gu.transform(i))};function oB(r){var e,t;return isNaN(r)&&ng(r)&&(((e=r.match(Cy))===null||e===void 0?void 0:e.length)||0)+(((t=r.match(QP))===null||t===void 0?void 0:t.length)||0)>0}const CR={regex:eF,countKey:"Vars",token:"${v}",parse:Ir},PR={regex:QP,countKey:"Colors",token:"${c}",parse:es.parse},RR={regex:Cy,countKey:"Numbers",token:"${n}",parse:uh.parse};function ox(r,{regex:e,countKey:t,token:n,parse:i}){const s=r.tokenised.match(e);s&&(r["num"+t]=s.length,r.tokenised=r.tokenised.replace(e,n),r.values.push(...s.map(i)))}function Jv(r){const e=r.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&ox(t,CR),ox(t,PR),ox(t,RR),t}function LR(r){return Jv(r).values}function IR(r){const{values:e,numColors:t,numVars:n,tokenised:i}=Jv(r),s=e.length;return o=>{let a=i;for(let c=0;c<s;c++)c<n?a=a.replace(CR.token,o[c]):c<n+t?a=a.replace(PR.token,es.transform(o[c])):a=a.replace(RR.token,hm(o[c]));return a}}const aB=r=>typeof r=="number"?0:r;function lB(r){const e=LR(r);return IR(r)(e.map(aB))}const bc={test:oB,parse:LR,createTransformer:IR,getAnimatableNone:lB},kR=(r,e)=>t=>`${t>0?e:r}`;function DR(r,e){return typeof r=="number"?t=>gr(r,e,t):es.test(r)?AR(r,e):r.startsWith("var(")?kR(r,e):NR(r,e)}const OR=(r,e)=>{const t=[...r],n=t.length,i=r.map((s,o)=>DR(s,e[o]));return s=>{for(let o=0;o<n;o++)t[o]=i[o](s);return t}},cB=(r,e)=>{const t={...r,...e},n={};for(const i in t)r[i]!==void 0&&e[i]!==void 0&&(n[i]=DR(r[i],e[i]));return i=>{for(const s in n)t[s]=n[s](i);return t}},NR=(r,e)=>{const t=bc.createTransformer(e),n=Jv(r),i=Jv(e);return n.numVars===i.numVars&&n.numColors===i.numColors&&n.numNumbers>=i.numNumbers?xc(OR(n.values,i.values),t):kR(r,e)},Cm=(r,e,t)=>{const n=e-r;return n===0?1:(t-r)/n},CT=(r,e)=>t=>gr(r,e,t);function uB(r){return typeof r=="number"?CT:typeof r=="string"?es.test(r)?AR:NR:Array.isArray(r)?OR:typeof r=="object"?cB:CT}function hB(r,e,t){const n=[],i=t||uB(r[0]),s=r.length-1;for(let o=0;o<s;o++){let a=i(r[o],r[o+1]);if(e){const c=Array.isArray(e)?e[o]||Ir:e;a=xc(c,a)}n.push(a)}return n}function UR(r,e,{clamp:t=!0,ease:n,mixer:i}={}){const s=r.length;if(yS(s===e.length),s===1)return()=>e[0];r[0]>r[s-1]&&(r=[...r].reverse(),e=[...e].reverse());const o=hB(e,n,i),a=o.length,c=h=>{let f=0;if(a>1)for(;f<r.length-2&&!(h<r[f+1]);f++);const m=Cm(r[f],r[f+1],h);return o[f](m)};return t?h=>c(Tc(r[0],r[s-1],h)):c}function dB(r,e){const t=r[r.length-1];for(let n=1;n<=e;n++){const i=Cm(0,e,n);r.push(gr(t,1,i))}}function fB(r){const e=[0];return dB(e,r.length-1),e}function pB(r,e){return r.map(t=>t*e)}function mB(r,e){return r.map(()=>e||wR).splice(0,r.length-1)}function Qv({duration:r=300,keyframes:e,times:t,ease:n="easeInOut"}){const i=ZF(n)?n.map(bT):bT(n),s={done:!1,value:e[0]},o=pB(t&&t.length===e.length?t:fB(e),r),a=UR(o,e,{ease:Array.isArray(i)?i:mB(e,i)});return{calculatedDuration:r,next:c=>(s.value=a(c),s.done=c>=r,s)}}function FR(r,e){return e?r*(1e3/e):0}const gB=5;function BR(r,e,t){const n=Math.max(e-gB,0);return FR(t-r(n),e-n)}const ax=.001,vB=.01,yB=10,_B=.05,xB=1;function wB({duration:r=800,bounce:e=.25,velocity:t=0,mass:n=1}){let i,s,o=1-e;o=Tc(_B,xB,o),r=Tc(vB,yB,fl(r)),o<1?(i=h=>{const f=h*o,m=f*r,g=f-t,y=Fw(h,o),_=Math.exp(-m);return ax-g/y*_},s=h=>{const m=h*o*r,g=m*t+t,y=Math.pow(o,2)*Math.pow(h,2)*r,_=Math.exp(-m),M=Fw(Math.pow(h,2),o);return(-i(h)+ax>0?-1:1)*((g-y)*_)/M}):(i=h=>{const f=Math.exp(-h*r),m=(h-t)*r+1;return-ax+f*m},s=h=>{const f=Math.exp(-h*r),m=(t-h)*(r*r);return f*m});const a=5/r,c=EB(i,s,a);if(r=Ku(r),isNaN(c))return{stiffness:100,damping:10,duration:r};{const h=Math.pow(c,2)*n;return{stiffness:h,damping:o*2*Math.sqrt(n*h),duration:r}}}const SB=12;function EB(r,e,t){let n=t;for(let i=1;i<SB;i++)n=n-r(n)/e(n);return n}function Fw(r,e){return r*Math.sqrt(1-e*e)}const MB=["duration","bounce"],TB=["stiffness","damping","mass"];function PT(r,e){return e.some(t=>r[t]!==void 0)}function bB(r){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...r};if(!PT(r,TB)&&PT(r,MB)){const t=wB(r);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function zR({keyframes:r,restDelta:e,restSpeed:t,...n}){const i=r[0],s=r[r.length-1],o={done:!1,value:i},{stiffness:a,damping:c,mass:h,duration:f,velocity:m,isResolvedFromDuration:g}=bB({...n,velocity:-fl(n.velocity||0)}),y=m||0,_=c/(2*Math.sqrt(a*h)),M=s-i,E=fl(Math.sqrt(a/h)),x=Math.abs(M)<5;t||(t=x?.01:2),e||(e=x?.005:.5);let A;if(_<1){const b=Fw(E,_);A=R=>{const N=Math.exp(-_*E*R);return s-N*((y+_*E*M)/b*Math.sin(b*R)+M*Math.cos(b*R))}}else if(_===1)A=b=>s-Math.exp(-E*b)*(M+(y+E*M)*b);else{const b=E*Math.sqrt(_*_-1);A=R=>{const N=Math.exp(-_*E*R),I=Math.min(b*R,300);return s-N*((y+_*E*M)*Math.sinh(I)+b*M*Math.cosh(I))/b}}return{calculatedDuration:g&&f||null,next:b=>{const R=A(b);if(g)o.done=b>=f;else{let N=y;b!==0&&(_<1?N=BR(A,b,R):N=0);const I=Math.abs(N)<=t,O=Math.abs(s-R)<=e;o.done=I&&O}return o.value=o.done?s:R,o}}}function RT({keyframes:r,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:h=.5,restSpeed:f}){const m=r[0],g={done:!1,value:m},y=V=>a!==void 0&&V<a||c!==void 0&&V>c,_=V=>a===void 0?c:c===void 0||Math.abs(a-V)<Math.abs(c-V)?a:c;let M=t*e;const E=m+M,x=o===void 0?E:o(E);x!==E&&(M=x-m);const A=V=>-M*Math.exp(-V/n),b=V=>x+A(V),R=V=>{const k=A(V),F=b(V);g.done=Math.abs(k)<=h,g.value=g.done?x:F};let N,I;const O=V=>{y(g.value)&&(N=V,I=zR({keyframes:[g.value,_(g.value)],velocity:BR(b,V,g.value),damping:i,stiffness:s,restDelta:h,restSpeed:f}))};return O(0),{calculatedDuration:null,next:V=>{let k=!1;return!I&&N===void 0&&(k=!0,R(V),O(V)),N!==void 0&&V>N?I.next(V-N):(!k&&R(V),g)}}}const AB=r=>{const e=({timestamp:t})=>r(t);return{start:()=>ir.update(e,!0),stop:()=>ml(e),now:()=>Ni.isProcessing?Ni.timestamp:performance.now()}},LT=2e4;function IT(r){let e=0;const t=50;let n=r.next(e);for(;!n.done&&e<LT;)e+=t,n=r.next(e);return e>=LT?1/0:e}const CB={decay:RT,inertia:RT,tween:Qv,keyframes:Qv,spring:zR};function ey({autoplay:r=!0,delay:e=0,driver:t=AB,keyframes:n,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:h,onComplete:f,onUpdate:m,...g}){let y=1,_=!1,M,E;const x=()=>{E=new Promise(H=>{M=H})};x();let A;const b=CB[i]||Qv;let R;b!==Qv&&typeof n[0]!="number"&&(R=UR([0,100],n,{clamp:!1}),n=[0,100]);const N=b({...g,keyframes:n});let I;a==="mirror"&&(I=b({...g,keyframes:[...n].reverse(),velocity:-(g.velocity||0)}));let O="idle",V=null,k=null,F=null;N.calculatedDuration===null&&s&&(N.calculatedDuration=IT(N));const{calculatedDuration:Q}=N;let le=1/0,_e=1/0;Q!==null&&(le=Q+o,_e=le*(s+1)-o);let Y=0;const me=H=>{if(k===null)return;y>0&&(k=Math.min(k,H)),y<0&&(k=Math.min(H-_e/y,k)),V!==null?Y=V:Y=Math.round(H-k)*y;const ne=Y-e*(y>=0?1:-1),ce=y>=0?ne<0:ne>_e;Y=Math.max(ne,0),O==="finished"&&V===null&&(Y=_e);let xe=Y,ke=N;if(s){const st=Math.min(Y,_e)/le;let it=Math.floor(st),ft=st%1;!ft&&st>=1&&(ft=1),ft===1&&it--,it=Math.min(it,s+1),!!(it%2)&&(a==="reverse"?(ft=1-ft,o&&(ft-=o/le)):a==="mirror"&&(ke=I)),xe=Tc(0,1,ft)*le}const Re=ce?{done:!1,value:n[0]}:ke.next(xe);R&&(Re.value=R(Re.value));let{done:ze}=Re;!ce&&Q!==null&&(ze=y>=0?Y>=_e:Y<=0);const Ke=V===null&&(O==="finished"||O==="running"&&ze);return m&&m(Re.value),Ke&&Z(),Re},ue=()=>{A&&A.stop(),A=void 0},Ee=()=>{O="idle",ue(),M(),x(),k=F=null},Z=()=>{O="finished",f&&f(),ue(),M()},se=()=>{if(_)return;A||(A=t(me));const H=A.now();c&&c(),V!==null?k=H-V:(!k||O==="finished")&&(k=H),O==="finished"&&x(),F=k,V=null,O="running",A.start()};r&&se();const ee={then(H,ne){return E.then(H,ne)},get time(){return fl(Y)},set time(H){H=Ku(H),Y=H,V!==null||!A||y===0?V=H:k=A.now()-H/y},get duration(){const H=N.calculatedDuration===null?IT(N):N.calculatedDuration;return fl(H)},get speed(){return y},set speed(H){H===y||!A||(y=H,ee.time=fl(Y))},get state(){return O},play:se,pause:()=>{O="paused",V=Y},stop:()=>{_=!0,O!=="idle"&&(O="idle",h&&h(),Ee())},cancel:()=>{F!==null&&me(F),Ee()},complete:()=>{O="finished"},sample:H=>(k=0,me(H))};return ee}function PB(r){let e;return()=>(e===void 0&&(e=r()),e)}const RB=PB(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),LB=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),b0=10,IB=2e4,kB=(r,e)=>e.type==="spring"||r==="backgroundColor"||!vR(e.ease);function DB(r,e,{onUpdate:t,onComplete:n,...i}){if(!(RB()&&LB.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,c,h=!1;const f=()=>{c=new Promise(b=>{a=b})};f();let{keyframes:m,duration:g=300,ease:y,times:_}=i;if(kB(e,i)){const b=ey({...i,repeat:0,delay:0});let R={done:!1,value:m[0]};const N=[];let I=0;for(;!R.done&&I<IB;)R=b.sample(I),N.push(R.value),I+=b0;_=void 0,m=N,g=I-b0,y="linear"}const M=GF(r.owner.current,e,m,{...i,duration:g,ease:y,times:_}),E=()=>{h=!1,M.cancel()},x=()=>{h=!0,ir.update(E),a(),f()};return M.onfinish=()=>{h||(r.set(WF(m,i)),n&&n(),x())},{then(b,R){return c.then(b,R)},attachTimeline(b){return M.timeline=b,M.onfinish=null,Ir},get time(){return fl(M.currentTime||0)},set time(b){M.currentTime=Ku(b)},get speed(){return M.playbackRate},set speed(b){M.playbackRate=b},get duration(){return fl(g)},play:()=>{o||(M.play(),ml(E))},pause:()=>M.pause(),stop:()=>{if(o=!0,M.playState==="idle")return;const{currentTime:b}=M;if(b){const R=ey({...i,autoplay:!1});r.setWithVelocity(R.sample(b-b0).value,R.sample(b).value,b0)}x()},complete:()=>{h||M.finish()},cancel:x}}function OB({keyframes:r,delay:e,onUpdate:t,onComplete:n}){const i=()=>(t&&t(r[r.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Ir,pause:Ir,stop:Ir,then:s=>(s(),Promise.resolve()),cancel:Ir,complete:Ir});return e?ey({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const NB={type:"spring",stiffness:500,damping:25,restSpeed:10},UB=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),FB={type:"keyframes",duration:.8},BB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},zB=(r,{keyframes:e})=>e.length>2?FB:ch.has(r)?r.startsWith("scale")?UB(e[1]):NB:BB,Bw=(r,e)=>r==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(bc.test(e)||e==="0")&&!e.startsWith("url(")),VB=new Set(["brightness","contrast","saturate","opacity"]);function HB(r){const[e,t]=r.slice(0,-1).split("(");if(e==="drop-shadow")return r;const[n]=t.match(Cy)||[];if(!n)return r;const i=t.replace(n,"");let s=VB.has(e)?1:0;return n!==t&&(s*=100),e+"("+s+i+")"}const GB=/([a-z-]*)\(.*?\)/g,zw={...bc,getAnimatableNone:r=>{const e=r.match(GB);return e?e.map(HB).join(" "):r}},WB={...eR,color:es,backgroundColor:es,outlineColor:es,fill:es,stroke:es,borderColor:es,borderTopColor:es,borderRightColor:es,borderBottomColor:es,borderLeftColor:es,filter:zw,WebkitFilter:zw},SS=r=>WB[r];function VR(r,e){let t=SS(r);return t!==zw&&(t=bc),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const HR=r=>/^0[^.\s]+$/.test(r);function jB(r){if(typeof r=="number")return r===0;if(r!==null)return r==="none"||r==="0"||HR(r)}function XB(r,e,t,n){const i=Bw(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=n.from!==void 0?n.from:r.get();let a;const c=[];for(let h=0;h<s.length;h++)s[h]===null&&(s[h]=h===0?o:s[h-1]),jB(s[h])&&c.push(h),typeof s[h]=="string"&&s[h]!=="none"&&s[h]!=="0"&&(a=s[h]);if(i&&c.length&&a)for(let h=0;h<c.length;h++){const f=c[h];s[f]=VR(e,a)}return s}function $B({when:r,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:h,...f}){return!!Object.keys(f).length}function ES(r,e){return r[e]||r.default||r}const qB={skipAnimations:!1},MS=(r,e,t,n={})=>i=>{const s=ES(n,r)||{},o=s.delay||n.delay||0;let{elapsed:a=0}=n;a=a-Ku(o);const c=XB(e,r,t,s),h=c[0],f=c[c.length-1],m=Bw(r,h),g=Bw(r,f);let y={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:_=>{e.set(_),s.onUpdate&&s.onUpdate(_)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if($B(s)||(y={...y,...zB(r,y)}),y.duration&&(y.duration=Ku(y.duration)),y.repeatDelay&&(y.repeatDelay=Ku(y.repeatDelay)),!m||!g||HF.current||s.type===!1||qB.skipAnimations)return OB(y);if(!n.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const _=DB(e,r,y);if(_)return _}return ey(y)};function ty(r){return!!(ws(r)&&r.add)}const GR=r=>/^\-?\d*\.?\d+$/.test(r);function TS(r,e){r.indexOf(e)===-1&&r.push(e)}function bS(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}class AS{constructor(){this.subscriptions=[]}add(e){return TS(this.subscriptions,e),()=>bS(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,n);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const YB=r=>!isNaN(parseFloat(r));class ZB{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,i=!0)=>{this.prev=this.current,this.current=n;const{delta:s,timestamp:o}=Ni;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,ir.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ir.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=YB(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new AS);const n=this.events[e].add(t);return e==="change"?()=>{n(),ir.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?FR(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _f(r,e){return new ZB(r,e)}const WR=r=>e=>e.test(r),KB={test:r=>r==="auto",parse:r=>r},jR=[uh,Yt,ua,hc,iF,rF,KB],Np=r=>jR.find(WR(r)),JB=[...jR,es,bc],QB=r=>JB.find(WR(r));function ez(r,e,t){r.hasValue(e)?r.getValue(e).set(t):r.addValue(e,_f(t))}function tz(r,e){const t=Ry(r,e);let{transitionEnd:n={},transition:i={},...s}=t?r.makeTargetAnimatable(t,!1):{};s={...s,...n};for(const o in s){const a=yF(s[o]);ez(r,o,a)}}function nz(r,e,t){var n,i;const s=Object.keys(e).filter(a=>!r.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const c=s[a],h=e[c];let f=null;Array.isArray(h)&&(f=h[0]),f===null&&(f=(i=(n=t[c])!==null&&n!==void 0?n:r.readValue(c))!==null&&i!==void 0?i:e[c]),f!=null&&(typeof f=="string"&&(GR(f)||HR(f))?f=parseFloat(f):!QB(f)&&bc.test(h)&&(f=VR(c,h)),r.addValue(c,_f(f,{owner:r})),t[c]===void 0&&(t[c]=f),f!==null&&r.setBaseTarget(c,f))}}function rz(r,e){return e?(e[r]||e.default||e).from:void 0}function iz(r,e,t){const n={};for(const i in r){const s=rz(i,e);if(s!==void 0)n[i]=s;else{const o=t.getValue(i);o&&(n[i]=o.get())}}return n}function sz({protectedKeys:r,needsAnimating:e},t){const n=r.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function oz(r,e){const t=r.get();if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}else return t!==e}function XR(r,e,{delay:t=0,transitionOverride:n,type:i}={}){let{transition:s=r.getDefaultTransition(),transitionEnd:o,...a}=r.makeTargetAnimatable(e);const c=r.getValue("willChange");n&&(s=n);const h=[],f=i&&r.animationState&&r.animationState.getState()[i];for(const m in a){const g=r.getValue(m),y=a[m];if(!g||y===void 0||f&&sz(f,m))continue;const _={delay:t,elapsed:0,...ES(s||{},m)};if(window.HandoffAppearAnimations){const x=r.getProps()[$P];if(x){const A=window.HandoffAppearAnimations(x,m,g,ir);A!==null&&(_.elapsed=A,_.isHandoff=!0)}}let M=!_.isHandoff&&!oz(g,y);if(_.type==="spring"&&(g.getVelocity()||_.velocity)&&(M=!1),g.animation&&(M=!1),M)continue;g.start(MS(m,g,y,r.shouldReduceMotion&&ch.has(m)?{type:!1}:_));const E=g.animation;ty(c)&&(c.add(m),E.then(()=>c.remove(m))),h.push(E)}return o&&Promise.all(h).then(()=>{o&&tz(r,o)}),h}function Vw(r,e,t={}){const n=Ry(r,e,t.custom);let{transition:i=r.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(i=t.transitionOverride);const s=n?()=>Promise.all(XR(r,n,t)):()=>Promise.resolve(),o=r.variantChildren&&r.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=i;return az(r,e,h+c,f,m,t)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,h]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>h())}else return Promise.all([s(),o(t.delay)])}function az(r,e,t=0,n=0,i=1,s){const o=[],a=(r.variantChildren.size-1)*n,c=i===1?(h=0)=>h*n:(h=0)=>a-h*n;return Array.from(r.variantChildren).sort(lz).forEach((h,f)=>{h.notify("AnimationStart",e),o.push(Vw(h,e,{...s,delay:t+c(f)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(o)}function lz(r,e){return r.sortNodePosition(e)}function cz(r,e,t={}){r.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(s=>Vw(r,s,t));n=Promise.all(i)}else if(typeof e=="string")n=Vw(r,e,t);else{const i=typeof e=="function"?Ry(r,e,t.custom):e;n=Promise.all(XR(r,i,t))}return n.then(()=>r.notify("AnimationComplete",e))}const uz=[...lS].reverse(),hz=lS.length;function dz(r){return e=>Promise.all(e.map(({animation:t,options:n})=>cz(r,t,n)))}function fz(r){let e=dz(r);const t=mz();let n=!0;const i=(c,h)=>{const f=Ry(r,h);if(f){const{transition:m,transitionEnd:g,...y}=f;c={...c,...y,...g}}return c};function s(c){e=c(r)}function o(c,h){const f=r.getProps(),m=r.getVariantContext(!0)||{},g=[],y=new Set;let _={},M=1/0;for(let x=0;x<hz;x++){const A=uz[x],b=t[A],R=f[A]!==void 0?f[A]:m[A],N=bm(R),I=A===h?b.isActive:null;I===!1&&(M=x);let O=R===m[A]&&R!==f[A]&&N;if(O&&n&&r.manuallyAnimateOnMount&&(O=!1),b.protectedKeys={..._},!b.isActive&&I===null||!R&&!b.prevProp||by(R)||typeof R=="boolean")continue;let k=pz(b.prevProp,R)||A===h&&b.isActive&&!O&&N||x>M&&N,F=!1;const Q=Array.isArray(R)?R:[R];let le=Q.reduce(i,{});I===!1&&(le={});const{prevResolvedValues:_e={}}=b,Y={..._e,...le},me=ue=>{k=!0,y.has(ue)&&(F=!0,y.delete(ue)),b.needsAnimating[ue]=!0};for(const ue in Y){const Ee=le[ue],Z=_e[ue];if(_.hasOwnProperty(ue))continue;let se=!1;Kv(Ee)&&Kv(Z)?se=!mR(Ee,Z):se=Ee!==Z,se?Ee!==void 0?me(ue):y.add(ue):Ee!==void 0&&y.has(ue)?me(ue):b.protectedKeys[ue]=!0}b.prevProp=R,b.prevResolvedValues=le,b.isActive&&(_={..._,...le}),n&&r.blockInitialAnimation&&(k=!1),k&&(!O||F)&&g.push(...Q.map(ue=>({animation:ue,options:{type:A,...c}})))}if(y.size){const x={};y.forEach(A=>{const b=r.getBaseTarget(A);b!==void 0&&(x[A]=b)}),g.push({animation:x})}let E=!!g.length;return n&&(f.initial===!1||f.initial===f.animate)&&!r.manuallyAnimateOnMount&&(E=!1),n=!1,E?e(g):Promise.resolve()}function a(c,h,f){var m;if(t[c].isActive===h)return Promise.resolve();(m=r.variantChildren)===null||m===void 0||m.forEach(y=>{var _;return(_=y.animationState)===null||_===void 0?void 0:_.setActive(c,h)}),t[c].isActive=h;const g=o(f,c);for(const y in t)t[y].protectedKeys={};return g}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function pz(r,e){return typeof e=="string"?e!==r:Array.isArray(e)?!mR(e,r):!1}function wu(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mz(){return{animate:wu(!0),whileInView:wu(),whileHover:wu(),whileTap:wu(),whileDrag:wu(),whileFocus:wu(),exit:wu()}}class gz extends Lc{constructor(e){super(e),e.animationState||(e.animationState=fz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),by(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let vz=0;class yz extends Lc{constructor(){super(...arguments),this.id=vz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const _z={animation:{Feature:gz},exit:{Feature:yz}},kT=(r,e)=>Math.abs(r-e);function xz(r,e){const t=kT(r.x,e.x),n=kT(r.y,e.y);return Math.sqrt(t**2+n**2)}class $R{constructor(e,t,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=cx(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=xz(m.offset,{x:0,y:0})>=3;if(!g&&!y)return;const{point:_}=m,{timestamp:M}=Ni;this.history.push({..._,timestamp:M});const{onStart:E,onMove:x}=this.handlers;g||(E&&E(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=lx(g,this.transformPagePoint),ir.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:y,onSessionEnd:_,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=cx(m.type==="pointercancel"?this.lastMoveEventInfo:lx(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,E),_&&_(m,E)},!uR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=i||window;const o=Py(e),a=lx(o,this.transformPagePoint),{point:c}=a,{timestamp:h}=Ni;this.history=[{...c,timestamp:h}];const{onSessionStart:f}=t;f&&f(e,cx(a,this.history)),this.removeListeners=xc(dl(this.contextWindow,"pointermove",this.handlePointerMove),dl(this.contextWindow,"pointerup",this.handlePointerUp),dl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ml(this.updatePoint)}}function lx(r,e){return e?{point:e(r.point)}:r}function DT(r,e){return{x:r.x-e.x,y:r.y-e.y}}function cx({point:r},e){return{point:r,delta:DT(r,qR(e)),offset:DT(r,wz(e)),velocity:Sz(e,.1)}}function wz(r){return r[0]}function qR(r){return r[r.length-1]}function Sz(r,e){if(r.length<2)return{x:0,y:0};let t=r.length-1,n=null;const i=qR(r);for(;t>=0&&(n=r[t],!(i.timestamp-n.timestamp>Ku(e)));)t--;if(!n)return{x:0,y:0};const s=fl(i.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Vs(r){return r.max-r.min}function Hw(r,e=0,t=.01){return Math.abs(r-e)<=t}function OT(r,e,t,n=.5){r.origin=n,r.originPoint=gr(e.min,e.max,r.origin),r.scale=Vs(t)/Vs(e),(Hw(r.scale,1,1e-4)||isNaN(r.scale))&&(r.scale=1),r.translate=gr(t.min,t.max,r.origin)-r.originPoint,(Hw(r.translate)||isNaN(r.translate))&&(r.translate=0)}function dm(r,e,t,n){OT(r.x,e.x,t.x,n?n.originX:void 0),OT(r.y,e.y,t.y,n?n.originY:void 0)}function NT(r,e,t){r.min=t.min+e.min,r.max=r.min+Vs(e)}function Ez(r,e,t){NT(r.x,e.x,t.x),NT(r.y,e.y,t.y)}function UT(r,e,t){r.min=e.min-t.min,r.max=r.min+Vs(e)}function fm(r,e,t){UT(r.x,e.x,t.x),UT(r.y,e.y,t.y)}function Mz(r,{min:e,max:t},n){return e!==void 0&&r<e?r=n?gr(e,r,n.min):Math.max(r,e):t!==void 0&&r>t&&(r=n?gr(t,r,n.max):Math.min(r,t)),r}function FT(r,e,t){return{min:e!==void 0?r.min+e:void 0,max:t!==void 0?r.max+t-(r.max-r.min):void 0}}function Tz(r,{top:e,left:t,bottom:n,right:i}){return{x:FT(r.x,t,i),y:FT(r.y,e,n)}}function BT(r,e){let t=e.min-r.min,n=e.max-r.max;return e.max-e.min<r.max-r.min&&([t,n]=[n,t]),{min:t,max:n}}function bz(r,e){return{x:BT(r.x,e.x),y:BT(r.y,e.y)}}function Az(r,e){let t=.5;const n=Vs(r),i=Vs(e);return i>n?t=Cm(e.min,e.max-n,r.min):n>i&&(t=Cm(r.min,r.max-i,e.min)),Tc(0,1,t)}function Cz(r,e){const t={};return e.min!==void 0&&(t.min=e.min-r.min),e.max!==void 0&&(t.max=e.max-r.min),t}const Gw=.35;function Pz(r=Gw){return r===!1?r=0:r===!0&&(r=Gw),{x:zT(r,"left","right"),y:zT(r,"top","bottom")}}function zT(r,e,t){return{min:VT(r,e),max:VT(r,t)}}function VT(r,e){return typeof r=="number"?r:r[e]||0}const HT=()=>({translate:0,scale:1,origin:0,originPoint:0}),rf=()=>({x:HT(),y:HT()}),GT=()=>({min:0,max:0}),Vr=()=>({x:GT(),y:GT()});function so(r){return[r("x"),r("y")]}function YR({top:r,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:r,max:n}}}function Rz({x:r,y:e}){return{top:e.min,right:r.max,bottom:e.max,left:r.min}}function Lz(r,e){if(!e)return r;const t=e({x:r.left,y:r.top}),n=e({x:r.right,y:r.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function ux(r){return r===void 0||r===1}function Ww({scale:r,scaleX:e,scaleY:t}){return!ux(r)||!ux(e)||!ux(t)}function ku(r){return Ww(r)||ZR(r)||r.z||r.rotate||r.rotateX||r.rotateY}function ZR(r){return WT(r.x)||WT(r.y)}function WT(r){return r&&r!=="0%"}function ny(r,e,t){const n=r-t,i=e*n;return t+i}function jT(r,e,t,n,i){return i!==void 0&&(r=ny(r,i,n)),ny(r,t,n)+e}function jw(r,e=0,t=1,n,i){r.min=jT(r.min,e,t,n,i),r.max=jT(r.max,e,t,n,i)}function KR(r,{x:e,y:t}){jw(r.x,e.translate,e.scale,e.originPoint),jw(r.y,t.translate,t.scale,t.originPoint)}function Iz(r,e,t,n=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const c=s.instance;c&&c.style&&c.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&sf(r,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,KR(r,o)),n&&ku(s.latestValues)&&sf(r,s.latestValues))}e.x=XT(e.x),e.y=XT(e.y)}function XT(r){return Number.isInteger(r)||r>1.0000000000001||r<.999999999999?r:1}function fc(r,e){r.min=r.min+e,r.max=r.max+e}function $T(r,e,[t,n,i]){const s=e[i]!==void 0?e[i]:.5,o=gr(r.min,r.max,s);jw(r,e[t],e[n],o,e.scale)}const kz=["x","scaleX","originX"],Dz=["y","scaleY","originY"];function sf(r,e){$T(r.x,e,kz),$T(r.y,e,Dz)}function JR(r,e){return YR(Lz(r.getBoundingClientRect(),e))}function Oz(r,e,t){const n=JR(r,t),{scroll:i}=e;return i&&(fc(n.x,i.offset.x),fc(n.y,i.offset.y)),n}const QR=({current:r})=>r?r.ownerDocument.defaultView:null,Nz=new WeakMap;class Uz{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Vr(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Py(f,"page").point)},s=(f,m)=>{const{drag:g,dragPropagation:y,onDragStart:_}=this.getProps();if(g&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=dR(g),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),so(E=>{let x=this.getAxisMotionValue(E).get()||0;if(ua.test(x)){const{projection:A}=this.visualElement;if(A&&A.layout){const b=A.layout.layoutBox[E];b&&(x=Vs(b)*(parseFloat(x)/100))}}this.originPoint[E]=x}),_&&ir.update(()=>_(f,m),!1,!0);const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},o=(f,m)=>{const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:_,onDrag:M}=this.getProps();if(!g&&!this.openGlobalLock)return;const{offset:E}=m;if(y&&this.currentDirection===null){this.currentDirection=Fz(E),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",m.point,E),this.updateAxis("y",m.point,E),this.visualElement.render(),M&&M(f,m)},a=(f,m)=>this.stop(f,m),c=()=>so(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new $R(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:QR(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&ir.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!A0(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=Mz(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&tf(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=Tz(i.layoutBox,t):this.constraints=!1,this.elastic=Pz(n),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&so(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Cz(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!tf(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Oz(n,i.root,this.visualElement.getTransformPagePoint());let o=bz(i.layout.layoutBox,s);if(t){const a=t(Rz(o));this.hasMutatedConstraints=!!a,a&&(o=YR(a))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},h=so(f=>{if(!A0(f,t,this.currentDirection))return;let m=c&&c[f]||{};o&&(m={min:0,max:0});const g=i?200:1e6,y=i?40:1e7,_={type:"inertia",velocity:n?e[f]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(f,_)});return Promise.all(h).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(MS(e,n,0,t))}stopAnimation(){so(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){so(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){so(t=>{const{drag:n}=this.getProps();if(!A0(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-gr(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!tf(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};so(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();i[o]=Az({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),so(o=>{if(!A0(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:h}=this.constraints[o];a.set(gr(c,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;Nz.set(this.visualElement,this);const e=this.visualElement.current,t=dl(e,"pointerdown",c=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();tf(c)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),n();const o=cl(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(so(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=c[f].translate,m.set(m.get()+c[f].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Gw,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function A0(r,e,t){return(e===!0||e===r)&&(t===null||t===r)}function Fz(r,e=10){let t=null;return Math.abs(r.y)>e?t="y":Math.abs(r.x)>e&&(t="x"),t}class Bz extends Lc{constructor(e){super(e),this.removeGroupControls=Ir,this.removeListeners=Ir,this.controls=new Uz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ir}unmount(){this.removeGroupControls(),this.removeListeners()}}const qT=r=>(e,t)=>{r&&ir.update(()=>r(e,t))};class zz extends Lc{constructor(){super(...arguments),this.removePointerDownListener=Ir}onPointerDown(e){this.session=new $R(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:QR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:qT(e),onStart:qT(t),onMove:n,onEnd:(s,o)=>{delete this.session,i&&ir.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=dl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Vz(){const r=j.useContext(My);if(r===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:n}=r,i=j.useId();return j.useEffect(()=>n(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const kv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function YT(r,e){return e.max===e.min?0:r/(e.max-e.min)*100}const Up={correct:(r,e)=>{if(!e.target)return r;if(typeof r=="string")if(Yt.test(r))r=parseFloat(r);else return r;const t=YT(r,e.target.x),n=YT(r,e.target.y);return`${t}% ${n}%`}},Hz={correct:(r,{treeScale:e,projectionDelta:t})=>{const n=r,i=bc.parse(r);if(i.length>5)return n;const s=bc.createTransformer(r),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,c=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=c;const h=gr(a,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),s(i)}};class Gz extends ao.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:s}=e;ZU(Wz),s&&(t.group&&t.group.add(s),n&&n.register&&i&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),kv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:s}=this.props,o=n.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ir.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function e2(r){const[e,t]=Vz(),n=j.useContext(uS);return ao.createElement(Gz,{...r,layoutGroup:n,switchLayoutGroup:j.useContext(YP),isPresent:e,safeToRemove:t})}const Wz={borderRadius:{...Up,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Up,borderTopRightRadius:Up,borderBottomLeftRadius:Up,borderBottomRightRadius:Up,boxShadow:Hz},t2=["TopLeft","TopRight","BottomLeft","BottomRight"],jz=t2.length,ZT=r=>typeof r=="string"?parseFloat(r):r,KT=r=>typeof r=="number"||Yt.test(r);function Xz(r,e,t,n,i,s){i?(r.opacity=gr(0,t.opacity!==void 0?t.opacity:1,$z(n)),r.opacityExit=gr(e.opacity!==void 0?e.opacity:1,0,qz(n))):s&&(r.opacity=gr(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,n));for(let o=0;o<jz;o++){const a=`border${t2[o]}Radius`;let c=JT(e,a),h=JT(t,a);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||KT(c)===KT(h)?(r[a]=Math.max(gr(ZT(c),ZT(h),n),0),(ua.test(h)||ua.test(c))&&(r[a]+="%")):r[a]=h}(e.rotate||t.rotate)&&(r.rotate=gr(e.rotate||0,t.rotate||0,n))}function JT(r,e){return r[e]!==void 0?r[e]:r.borderRadius}const $z=n2(0,.5,MR),qz=n2(.5,.95,Ir);function n2(r,e,t){return n=>n<r?0:n>e?1:t(Cm(r,e,n))}function QT(r,e){r.min=e.min,r.max=e.max}function ro(r,e){QT(r.x,e.x),QT(r.y,e.y)}function eb(r,e,t,n,i){return r-=e,r=ny(r,1/t,n),i!==void 0&&(r=ny(r,1/i,n)),r}function Yz(r,e=0,t=1,n=.5,i,s=r,o=r){if(ua.test(e)&&(e=parseFloat(e),e=gr(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=gr(s.min,s.max,n);r===s&&(a-=e),r.min=eb(r.min,e,t,a,i),r.max=eb(r.max,e,t,a,i)}function tb(r,e,[t,n,i],s,o){Yz(r,e[t],e[n],e[i],e.scale,s,o)}const Zz=["x","scaleX","originX"],Kz=["y","scaleY","originY"];function nb(r,e,t,n){tb(r.x,e,Zz,t?t.x:void 0,n?n.x:void 0),tb(r.y,e,Kz,t?t.y:void 0,n?n.y:void 0)}function rb(r){return r.translate===0&&r.scale===1}function r2(r){return rb(r.x)&&rb(r.y)}function Jz(r,e){return r.x.min===e.x.min&&r.x.max===e.x.max&&r.y.min===e.y.min&&r.y.max===e.y.max}function i2(r,e){return Math.round(r.x.min)===Math.round(e.x.min)&&Math.round(r.x.max)===Math.round(e.x.max)&&Math.round(r.y.min)===Math.round(e.y.min)&&Math.round(r.y.max)===Math.round(e.y.max)}function ib(r){return Vs(r.x)/Vs(r.y)}class Qz{constructor(){this.members=[]}add(e){TS(this.members,e),e.scheduleRender()}remove(e){if(bS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let n;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sb(r,e,t){let n="";const i=r.x.translate/e.x,s=r.y.translate/e.y;if((i||s)&&(n=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:c,rotateX:h,rotateY:f}=t;c&&(n+=`rotate(${c}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `)}const o=r.x.scale*e.x,a=r.y.scale*e.y;return(o!==1||a!==1)&&(n+=`scale(${o}, ${a})`),n||"none"}const e4=(r,e)=>r.depth-e.depth;class t4{constructor(){this.children=[],this.isDirty=!1}add(e){TS(this.children,e),this.isDirty=!0}remove(e){bS(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(e4),this.isDirty=!1,this.children.forEach(e)}}function n4(r,e){const t=performance.now(),n=({timestamp:i})=>{const s=i-t;s>=e&&(ml(n),r(s-e))};return ir.read(n,!0),()=>ml(n)}function r4(r){window.MotionDebug&&window.MotionDebug.record(r)}function i4(r){return r instanceof SVGElement&&r.tagName!=="svg"}function s4(r,e,t){const n=ws(r)?r:_f(r);return n.start(MS("",n,e,t)),n.animation}const ob=["","X","Y","Z"],o4={visibility:"hidden"},ab=1e3;let a4=0;const Du={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function s2({attachResizeListener:r,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=a4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Du.totalNodes=Du.resolvedTargetDeltas=Du.recalculatedProjection=0,this.nodes.forEach(u4),this.nodes.forEach(m4),this.nodes.forEach(g4),this.nodes.forEach(h4),r4(Du)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new t4)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new AS),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=i4(o),this.instance=o;const{layoutId:c,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(h||c)&&(this.isLayoutDirty=!0),r){let m;const g=()=>this.root.updateBlockedByResize=!1;r(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=n4(g,250),kv.hasAnimatedSinceResize&&(kv.hasAnimatedSinceResize=!1,this.nodes.forEach(cb))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||h)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g,hasRelativeTargetChanged:y,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||f.getDefaultTransition()||w4,{onLayoutAnimationStart:E,onLayoutAnimationComplete:x}=f.getProps(),A=!this.targetLayout||!i2(this.targetLayout,_)||y,b=!g&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||g&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,b);const R={...ES(M,"layout"),onPlay:E,onComplete:x};(f.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else g||cb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ml(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(v4),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lb);return}this.isUpdating||this.nodes.forEach(f4),this.isUpdating=!1,this.nodes.forEach(p4),this.nodes.forEach(l4),this.nodes.forEach(c4),this.clearAllSnapshots();const a=performance.now();Ni.delta=Tc(0,1e3/60,a-Ni.timestamp),Ni.timestamp=a,Ni.isProcessing=!0,ex.update.process(Ni),ex.preRender.process(Ni),ex.render.process(Ni),Ni.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(d4),this.sharedNodes.forEach(y4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ir.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ir.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Vr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!r2(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&(a||ku(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),S4(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Vr();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(fc(a.x,c.offset.x),fc(a.y,c.offset.y)),a}removeElementScroll(o){const a=Vr();ro(a,o);for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:f,options:m}=h;if(h!==this.root&&f&&m.layoutScroll){if(f.isRoot){ro(a,o);const{scroll:g}=this.root;g&&(fc(a.x,-g.offset.x),fc(a.y,-g.offset.y))}fc(a.x,f.offset.x),fc(a.y,f.offset.y)}}return a}applyTransform(o,a=!1){const c=Vr();ro(c,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&sf(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),ku(f.latestValues)&&sf(c,f.latestValues)}return ku(this.latestValues)&&sf(c,this.latestValues),c}removeTransform(o){const a=Vr();ro(a,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!ku(h.latestValues))continue;Ww(h.latestValues)&&h.updateSnapshot();const f=Vr(),m=h.measurePageBox();ro(f,m),nb(a,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return ku(this.latestValues)&&nb(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ni.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(o||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:m,layoutId:g}=this.options;if(!(!this.layout||!(m||g))){if(this.resolvedRelativeTargetAt=Ni.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vr(),this.relativeTargetOrigin=Vr(),fm(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),ro(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Vr(),this.targetWithTransforms=Vr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ez(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ro(this.target,this.layout.layoutBox),KR(this.target,this.targetDelta)):ro(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vr(),this.relativeTargetOrigin=Vr(),fm(this.relativeTargetOrigin,this.target,y.target),ro(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Du.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ww(this.parent.latestValues)||ZR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let h=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Ni.timestamp&&(h=!1),h)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;ro(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;Iz(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:_}=a;if(!_){this.projectionTransform&&(this.projectionDelta=rf(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=rf(),this.projectionDeltaWithTransform=rf());const M=this.projectionTransform;dm(this.projectionDelta,this.layoutCorrected,_,this.latestValues),this.projectionTransform=sb(this.projectionDelta,this.treeScale),(this.projectionTransform!==M||this.treeScale.x!==g||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),Du.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,h=c?c.latestValues:{},f={...this.latestValues},m=rf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const g=Vr(),y=c?c.source:void 0,_=this.layout?this.layout.source:void 0,M=y!==_,E=this.getStack(),x=!E||E.members.length<=1,A=!!(M&&!x&&this.options.crossfade===!0&&!this.path.some(x4));this.animationProgress=0;let b;this.mixTargetDelta=R=>{const N=R/1e3;ub(m.x,o.x,N),ub(m.y,o.y,N),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fm(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_4(this.relativeTarget,this.relativeTargetOrigin,g,N),b&&Jz(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Vr()),ro(b,this.relativeTarget)),M&&(this.animationValues=f,Xz(f,h,this.latestValues,N,A,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ml(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ir.update(()=>{kv.hasAnimatedSinceResize=!0,this.currentAnimation=s4(0,ab,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ab),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:h,latestValues:f}=o;if(!(!a||!c||!h)){if(this!==o&&this.layout&&h&&o2(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||Vr();const m=Vs(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const g=Vs(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+g}ro(a,c),sf(a,f),dm(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Qz),this.sharedNodes.get(o).add(a);const h=a.options.initialPromotionConfig;a.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const h={};for(let f=0;f<ob.length;f++){const m="rotate"+ob[f];c[m]&&(h[m]=c[m],o.setStaticValue(m,0))}o.render();for(const f in h)o.setStaticValue(f,h[f]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return o4;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Iv(o?.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const M={};return this.options.layoutId&&(M.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,M.pointerEvents=Iv(o?.pointerEvents)||""),this.hasProjected&&!ku(this.latestValues)&&(M.transform=f?f({},""):"none",this.hasProjected=!1),M}const g=m.animationValues||m.latestValues;this.applyTransformsToTarget(),h.transform=sb(this.projectionDeltaWithTransform,this.treeScale,g),f&&(h.transform=f(g,h.transform));const{x:y,y:_}=this.projectionDelta;h.transformOrigin=`${y.origin*100}% ${_.origin*100}% 0`,m.animationValues?h.opacity=m===this?(c=(a=g.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:h.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const M in Yv){if(g[M]===void 0)continue;const{correct:E,applyTo:x}=Yv[M],A=h.transform==="none"?g[M]:E(g[M],m);if(x){const b=x.length;for(let R=0;R<b;R++)h[x[R]]=A}else h[M]=A}return this.options.layoutId&&(h.pointerEvents=m===this?Iv(o?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(lb),this.root.sharedNodes.clear()}}}function l4(r){r.updateLayout()}function c4(r){var e;const t=((e=r.resumeFrom)===null||e===void 0?void 0:e.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&t&&r.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=r.layout,{animationType:s}=r.options,o=t.source!==r.layout.source;s==="size"?so(m=>{const g=o?t.measuredBox[m]:t.layoutBox[m],y=Vs(g);g.min=n[m].min,g.max=g.min+y}):o2(s,t.layoutBox,n)&&so(m=>{const g=o?t.measuredBox[m]:t.layoutBox[m],y=Vs(n[m]);g.max=g.min+y,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[m].max=r.relativeTarget[m].min+y)});const a=rf();dm(a,n,t.layoutBox);const c=rf();o?dm(c,r.applyTransform(i,!0),t.measuredBox):dm(c,n,t.layoutBox);const h=!r2(a);let f=!1;if(!r.resumeFrom){const m=r.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:g,layout:y}=m;if(g&&y){const _=Vr();fm(_,t.layoutBox,g.layoutBox);const M=Vr();fm(M,n,y.layoutBox),i2(_,M)||(f=!0),m.options.layoutRoot&&(r.relativeTarget=M,r.relativeTargetOrigin=_,r.relativeParent=m)}}}r.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:a,hasLayoutChanged:h,hasRelativeTargetChanged:f})}else if(r.isLead()){const{onExitComplete:n}=r.options;n&&n()}r.options.transition=void 0}function u4(r){Du.totalNodes++,r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function h4(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function d4(r){r.clearSnapshot()}function lb(r){r.clearMeasurements()}function f4(r){r.isLayoutDirty=!1}function p4(r){const{visualElement:e}=r.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),r.resetTransform()}function cb(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function m4(r){r.resolveTargetDelta()}function g4(r){r.calcProjection()}function v4(r){r.resetRotation()}function y4(r){r.removeLeadSnapshot()}function ub(r,e,t){r.translate=gr(e.translate,0,t),r.scale=gr(e.scale,1,t),r.origin=e.origin,r.originPoint=e.originPoint}function hb(r,e,t,n){r.min=gr(e.min,t.min,n),r.max=gr(e.max,t.max,n)}function _4(r,e,t,n){hb(r.x,e.x,t.x,n),hb(r.y,e.y,t.y,n)}function x4(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const w4={duration:.45,ease:[.4,0,.1,1]},db=r=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(r),fb=db("applewebkit/")&&!db("chrome/")?Math.round:Ir;function pb(r){r.min=fb(r.min),r.max=fb(r.max)}function S4(r){pb(r.x),pb(r.y)}function o2(r,e,t){return r==="position"||r==="preserve-aspect"&&!Hw(ib(e),ib(t),.2)}const E4=s2({attachResizeListener:(r,e)=>cl(r,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),hx={current:void 0},a2=s2({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!hx.current){const r=new E4({});r.mount(window),r.setOptions({layoutScroll:!0}),hx.current=r}return hx.current},resetTransform:(r,e)=>{r.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),M4={pan:{Feature:zz},drag:{Feature:Bz,ProjectionNode:a2,MeasureLayout:e2}},T4=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function b4(r){const e=T4.exec(r);if(!e)return[,];const[,t,n]=e;return[t,n]}function Xw(r,e,t=1){const[n,i]=b4(r);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const o=s.trim();return GR(o)?parseFloat(o):o}else return Ow(i)?Xw(i,e,t+1):i}function A4(r,{...e},t){const n=r.current;if(!(n instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),r.values.forEach(i=>{const s=i.get();if(!Ow(s))return;const o=Xw(s,n);o&&i.set(o)});for(const i in e){const s=e[i];if(!Ow(s))continue;const o=Xw(s,n);o&&(e[i]=o,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const C4=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),l2=r=>C4.has(r),P4=r=>Object.keys(r).some(l2),mb=r=>r===uh||r===Yt,gb=(r,e)=>parseFloat(r.split(", ")[e]),vb=(r,e)=>(t,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/);if(i)return gb(i[1],e);{const s=n.match(/^matrix\((.+)\)$/);return s?gb(s[1],r):0}},R4=new Set(["x","y","z"]),L4=tg.filter(r=>!R4.has(r));function I4(r){const e=[];return L4.forEach(t=>{const n=r.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e.length&&r.render(),e}const xf={width:({x:r},{paddingLeft:e="0",paddingRight:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),height:({y:r},{paddingTop:e="0",paddingBottom:t="0"})=>r.max-r.min-parseFloat(e)-parseFloat(t),top:(r,{top:e})=>parseFloat(e),left:(r,{left:e})=>parseFloat(e),bottom:({y:r},{top:e})=>parseFloat(e)+(r.max-r.min),right:({x:r},{left:e})=>parseFloat(e)+(r.max-r.min),x:vb(4,13),y:vb(5,14)};xf.translateX=xf.x;xf.translateY=xf.y;const k4=(r,e,t)=>{const n=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",r.display||"block"),t.forEach(h=>{a[h]=xf[h](n,s)}),e.render();const c=e.measureViewportBox();return t.forEach(h=>{const f=e.getValue(h);f&&f.jump(a[h]),r[h]=xf[h](c,s)}),r},D4=(r,e,t={},n={})=>{e={...e},n={...n};const i=Object.keys(e).filter(l2);let s=[],o=!1;const a=[];if(i.forEach(c=>{const h=r.getValue(c);if(!r.hasValue(c))return;let f=t[c],m=Np(f);const g=e[c];let y;if(Kv(g)){const _=g.length,M=g[0]===null?1:0;f=g[M],m=Np(f);for(let E=M;E<_&&g[E]!==null;E++)y?yS(Np(g[E])===y):y=Np(g[E])}else y=Np(g);if(m!==y)if(mb(m)&&mb(y)){const _=h.get();typeof _=="string"&&h.set(parseFloat(_)),typeof g=="string"?e[c]=parseFloat(g):Array.isArray(g)&&y===Yt&&(e[c]=g.map(parseFloat))}else m?.transform&&y?.transform&&(f===0||g===0)?f===0?h.set(y.transform(f)):e[c]=m.transform(g):(o||(s=I4(r),o=!0),a.push(c),n[c]=n[c]!==void 0?n[c]:e[c],h.jump(g))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,h=k4(e,r,a);return s.length&&s.forEach(([f,m])=>{r.getValue(f).set(m)}),r.render(),Ty&&c!==null&&window.scrollTo({top:c}),{target:h,transitionEnd:n}}else return{target:e,transitionEnd:n}};function O4(r,e,t,n){return P4(e)?D4(r,e,t,n):{target:e,transitionEnd:n}}const N4=(r,e,t,n)=>{const i=A4(r,e,n);return e=i.target,n=i.transitionEnd,O4(r,e,t,n)},$w={current:null},c2={current:!1};function U4(){if(c2.current=!0,!!Ty)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),e=()=>$w.current=r.matches;r.addListener(e),e()}else $w.current=!1}function F4(r,e,t){const{willChange:n}=e;for(const i in e){const s=e[i],o=t[i];if(ws(s))r.addValue(i,s),ty(n)&&n.add(i);else if(ws(o))r.addValue(i,_f(s,{owner:r})),ty(n)&&n.remove(i);else if(o!==s)if(r.hasValue(i)){const a=r.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=r.getStaticValue(i);r.addValue(i,_f(a!==void 0?a:s,{owner:r}))}}for(const i in t)e[i]===void 0&&r.removeValue(i);return e}const yb=new WeakMap,u2=Object.keys(Am),B4=u2.length,_b=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],z4=cS.length;class V4{constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ir.render(this.render,!1,!0);const{latestValues:a,renderState:c}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=Ay(t),this.isVariantNode=qP(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(t,{});for(const m in f){const g=f[m];a[m]!==void 0&&ws(g)&&(g.set(a[m],!1),ty(h)&&h.add(m))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,yb.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),c2.current||U4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$w.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){yb.delete(this.current),this.projection&&this.projection.unmount(),ml(this.notifyUpdate),ml(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=ch.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ir.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},n,i,s){let o,a;for(let c=0;c<B4;c++){const h=u2[c],{isEnabled:f,Feature:m,ProjectionNode:g,MeasureLayout:y}=Am[h];g&&(o=g),f(t)&&(!this.features[h]&&m&&(this.features[h]=new m(this)),y&&(a=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:h,drag:f,dragConstraints:m,layoutScroll:g,layoutRoot:y}=t;this.projection.setOptions({layoutId:c,layout:h,alwaysMeasureLayout:!!f||m&&tf(m),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof h=="string"?h:"both",initialPromotionConfig:s,layoutScroll:g,layoutRoot:y})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Vr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<_b.length;n++){const i=_b[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=F4(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const t={};for(let n=0;n<z4;n++){const i=cS[n],s=this.props[i];(bm(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=_f(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,i=typeof n=="string"||typeof n=="object"?(t=vS(this.props,n))===null||t===void 0?void 0:t[e]:void 0;if(n&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ws(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new AS),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class h2 extends V4{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...n},{transformValues:i},s){let o=iz(n,e||{},this);if(i&&(t&&(t=i(t)),n&&(n=i(n)),o&&(o=i(o))),s){nz(this,n,o);const a=N4(this,n,o,t);t=a.transitionEnd,n=a.target}return{transition:e,transitionEnd:t,...n}}}function H4(r){return window.getComputedStyle(r)}class G4 extends h2{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(ch.has(t)){const n=SS(t);return n&&n.default||0}else{const n=H4(e),i=(JP(t)?n.getPropertyValue(t):n[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return JR(e,t)}build(e,t,n,i){dS(e,t,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return gS(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ws(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,n,i){iR(e,t,n,i)}}class W4 extends h2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ch.has(t)){const n=SS(t);return n&&n.default||0}return t=sR.has(t)?t:aS(t),e.getAttribute(t)}measureInstanceViewportBox(){return Vr()}scrapeMotionValuesFromProps(e,t){return aR(e,t)}build(e,t,n,i){pS(e,t,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,n,i){oR(e,t,n,i)}mount(e){this.isSVGTag=mS(e.tagName),super.mount(e)}}const j4=(r,e)=>hS(r)?new W4(e,{enableHardwareAcceleration:!1}):new G4(e,{enableHardwareAcceleration:!0}),X4={layout:{ProjectionNode:a2,MeasureLayout:e2}},$4={..._z,...BF,...M4,...X4},Ss=qU((r,e)=>bF(r,e,$4,j4));function d2(){const r=j.useRef(!1);return oS(()=>(r.current=!0,()=>{r.current=!1}),[]),r}function q4(){const r=d2(),[e,t]=j.useState(0),n=j.useCallback(()=>{r.current&&t(e+1)},[e]);return[j.useCallback(()=>ir.postRender(n),[n]),e]}class Y4 extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Z4({children:r,isPresent:e}){const t=j.useId(),n=j.useRef(null),i=j.useRef({width:0,height:0,top:0,left:0});return j.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:c}=i.current;if(e||!n.current||!s||!o)return;n.current.dataset.motionPopId=t;const h=document.createElement("style");return document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),j.createElement(Y4,{isPresent:e,childRef:n,sizeRef:i},j.cloneElement(r,{ref:n}))}const dx=({children:r,initial:e,isPresent:t,onExitComplete:n,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=lR(K4),c=j.useId(),h=j.useMemo(()=>({id:c,initial:e,isPresent:t,custom:i,onExitComplete:f=>{a.set(f,!0);for(const m of a.values())if(!m)return;n&&n()},register:f=>(a.set(f,!1),()=>a.delete(f))}),s?void 0:[t]);return j.useMemo(()=>{a.forEach((f,m)=>a.set(m,!1))},[t]),j.useEffect(()=>{!t&&!a.size&&n&&n()},[t]),o==="popLayout"&&(r=j.createElement(Z4,{isPresent:t},r)),j.createElement(My.Provider,{value:h},r)};function K4(){return new Map}function J4(r){return j.useEffect(()=>()=>r(),[])}const Ou=r=>r.key||"";function Q4(r,e){r.forEach(t=>{const n=Ou(t);e.set(n,t)})}function e5(r){const e=[];return j.Children.forEach(r,t=>{j.isValidElement(t)&&e.push(t)}),e}const f2=({children:r,custom:e,initial:t=!0,onExitComplete:n,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=j.useContext(uS).forceRender||q4()[0],c=d2(),h=e5(r);let f=h;const m=j.useRef(new Map).current,g=j.useRef(f),y=j.useRef(new Map).current,_=j.useRef(!0);if(oS(()=>{_.current=!1,Q4(h,y),g.current=f}),J4(()=>{_.current=!0,y.clear(),m.clear()}),_.current)return j.createElement(j.Fragment,null,f.map(A=>j.createElement(dx,{key:Ou(A),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:o},A)));f=[...f];const M=g.current.map(Ou),E=h.map(Ou),x=M.length;for(let A=0;A<x;A++){const b=M[A];E.indexOf(b)===-1&&!m.has(b)&&m.set(b,void 0)}return o==="wait"&&m.size&&(f=[]),m.forEach((A,b)=>{if(E.indexOf(b)!==-1)return;const R=y.get(b);if(!R)return;const N=M.indexOf(b);let I=A;if(!I){const O=()=>{m.delete(b);const V=Array.from(y.keys()).filter(k=>!E.includes(k));if(V.forEach(k=>y.delete(k)),g.current=h.filter(k=>{const F=Ou(k);return F===b||V.includes(F)}),!m.size){if(c.current===!1)return;a(),n&&n()}};I=j.createElement(dx,{key:Ou(R),isPresent:!1,onExitComplete:O,custom:e,presenceAffectsLayout:s,mode:o},R),m.set(b,I)}f.splice(N,0,I)}),f=f.map(A=>{const b=A.key;return m.has(b)?A:j.createElement(dx,{key:Ou(A),isPresent:!0,presenceAffectsLayout:s,mode:o},A)}),j.createElement(j.Fragment,null,m.size?f:f.map(A=>j.cloneElement(A)))},t5=$e.section`
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
  overflow: hidden;
`,n5=$e.div`
  max-width: 800px;
  padding: 0 2rem;
  z-index: 2;
`,r5=$e(Ss.h1)`
  font-size: clamp(2.5rem, 8vw, 4.5rem);
  font-weight: 700;
  margin-bottom: 1.5rem;
  background: linear-gradient(135deg, #EFC0C2 0%, #d4a5a7 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  line-height: 1.2;
`,i5=$e(Ss.p)`
  font-size: 1.25rem;
  color: #666;
  margin-bottom: 2rem;
  line-height: 1.6;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
`,s5=$e(Ss.button)`
  background: linear-gradient(135deg, #EFC0C2 0%, #d4a5a7 100%);
  color: white;
  border: none;
  padding: 1rem 2rem;
  font-size: 1.1rem;
  font-weight: 600;
  border-radius: 50px;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(239, 192, 194, 0.3);
  }
`,o5=$e(Ss(Km))`
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  padding: 1rem 2rem;
  font-size: 1.1rem;
  font-weight: 600;
  border-radius: 50px;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  text-decoration: none;
  margin-left: 1rem;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
    color: white;
  }
`,a5=$e(Ss.div)`
  position: absolute;
  bottom: 2rem;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  color: #666;
  cursor: pointer;
`,xb=$e(Ss.div)`
  position: absolute;
  width: 100px;
  height: 100px;
  background: linear-gradient(135deg, rgba(239, 192, 194, 0.1) 0%, rgba(212, 165, 167, 0.1) 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
`,l5=()=>{const r=()=>{document.getElementById("products")?.scrollIntoView({behavior:"smooth"})};return K.jsxs(t5,{children:[K.jsx(xb,{style:{top:"20%",left:"10%"},animate:{y:[0,-20,0],rotate:[0,180,360]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},children:K.jsx(HM,{size:24,color:"#EFC0C2"})}),K.jsx(xb,{style:{top:"60%",right:"15%"},animate:{y:[0,20,0],rotate:[360,180,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},children:K.jsx(HM,{size:20,color:"#d4a5a7"})}),K.jsxs(n5,{children:[K.jsxs(r5,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},children:["Discover Products in",K.jsx("br",{}),K.jsx("span",{style:{color:"#EFC0C2"},children:"3D Reality"})]}),K.jsx(i5,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:"Experience our products like never before with immersive 3D models. Rotate, zoom, and explore every detail before making your purchase."}),K.jsxs(s5,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.4},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,children:["Explore Products",K.jsx(zM,{size:20})]}),K.jsxs(o5,{to:"/styler",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.6},whileHover:{scale:1.05},whileTap:{scale:.95},children:[K.jsx(wP,{size:20}),"3D Mannequin Styler"]})]}),K.jsxs(a5,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.6},onClick:r,whileHover:{y:5},children:[K.jsx("span",{style:{fontSize:"0.875rem"},children:"Scroll to explore"}),K.jsx(Ss.div,{animate:{y:[0,5,0]},transition:{duration:1.5,repeat:1/0},children:K.jsx(zM,{size:20})})]})]})};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const sg="160",Nu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Uu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},p2=0,qw=1,m2=2,c5=3,g2=0,Ly=1,pm=2,zo=3,gl=0,ts=1,Go=2,u5=2,ha=0,Ju=1,Yw=2,Zw=3,Kw=4,v2=5,gc=100,y2=101,_2=102,Jw=103,Qw=104,x2=200,w2=201,S2=202,E2=203,ry=204,iy=205,M2=206,T2=207,b2=208,A2=209,C2=210,P2=211,R2=212,L2=213,I2=214,k2=0,D2=1,O2=2,Pm=3,N2=4,U2=5,F2=6,B2=7,og=0,z2=1,V2=2,da=0,H2=1,G2=2,W2=3,CS=4,j2=5,X2=6,e1="attached",$2="detached",Ac=300,ga=301,Cc=302,nh=303,Rm=304,Df=306,rh=1e3,rr=1001,Lm=1002,Lr=1003,sy=1004,h5=1004,mm=1005,d5=1005,Dn=1006,PS=1007,f5=1007,Pc=1008,t1=1008,Bs=1009,RS=1010,LS=1011,Iy=1012,ky=1013,la=1014,jr=1015,di=1016,IS=1017,kS=1018,wc=1020,q2=1021,Wr=1023,Y2=1024,Z2=1025,Sc=1026,ih=1027,DS=1028,OS=1029,K2=1030,NS=1031,US=1033,Dv=33776,Ov=33777,Nv=33778,Uv=33779,n1=35840,r1=35841,i1=35842,s1=35843,FS=36196,o1=37492,a1=37496,l1=37808,c1=37809,u1=37810,h1=37811,d1=37812,f1=37813,p1=37814,m1=37815,g1=37816,v1=37817,y1=37818,_1=37819,x1=37820,w1=37821,Fv=36492,S1=36494,E1=36495,J2=36283,M1=36284,T1=36285,b1=36286,Q2=2200,eL=2201,tL=2202,Im=2300,km=2301,Bv=2302,Wu=2400,ju=2401,Dm=2402,Dy=2500,BS=2501,p5=0,m5=1,g5=2,zS=3e3,Ec=3001,nL=3200,rL=3201,Ic=0,iL=1,Fs="",Hr="srgb",Hs="srgb-linear",Oy="display-p3",ag="display-p3-linear",Om="linear",tr="srgb",Nm="rec709",Um="p3",v5=0,Fu=7680,y5=7681,_5=7682,x5=7683,w5=34055,S5=34056,E5=5386,M5=512,T5=513,b5=514,A5=515,C5=516,P5=517,R5=518,A1=519,sL=512,oL=513,aL=514,VS=515,lL=516,cL=517,uL=518,hL=519,Fm=35044,L5=35048,I5=35040,k5=35045,D5=35049,O5=35041,N5=35046,U5=35050,F5=35042,B5="100",C1="300 es",oy=1035,jo=2e3,wf=2001;let _l=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Ii=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let wb=1234567;const Qu=Math.PI/180,Sf=180/Math.PI;function zs(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ii[r&255]+Ii[r>>8&255]+Ii[r>>16&255]+Ii[r>>24&255]+"-"+Ii[e&255]+Ii[e>>8&255]+"-"+Ii[e>>16&15|64]+Ii[e>>24&255]+"-"+Ii[t&63|128]+Ii[t>>8&255]+"-"+Ii[t>>16&255]+Ii[t>>24&255]+Ii[n&255]+Ii[n>>8&255]+Ii[n>>16&255]+Ii[n>>24&255]).toLowerCase()}function Er(r,e,t){return Math.max(e,Math.min(t,r))}function HS(r,e){return(r%e+e)%e}function z5(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function V5(r,e,t){return r!==e?(t-r)/(e-r):0}function gm(r,e,t){return(1-t)*r+t*e}function H5(r,e,t,n){return gm(r,e,1-Math.exp(-t*n))}function G5(r,e=1){return e-Math.abs(HS(r,e*2)-e)}function W5(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function j5(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function X5(r,e){return r+Math.floor(Math.random()*(e-r+1))}function $5(r,e){return r+Math.random()*(e-r)}function q5(r){return r*(.5-Math.random())}function Y5(r){r!==void 0&&(wb=r);let e=wb+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Z5(r){return r*Qu}function K5(r){return r*Sf}function P1(r){return(r&r-1)===0&&r!==0}function J5(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function ay(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function Q5(r,e,t,n,i){const s=Math.cos,o=Math.sin,a=s(t/2),c=o(t/2),h=s((e+n)/2),f=o((e+n)/2),m=s((e-n)/2),g=o((e-n)/2),y=s((n-e)/2),_=o((n-e)/2);switch(i){case"XYX":r.set(a*f,c*m,c*g,a*h);break;case"YZY":r.set(c*g,a*f,c*m,a*h);break;case"ZXZ":r.set(c*m,c*g,a*f,a*h);break;case"XZX":r.set(a*f,c*_,c*y,a*h);break;case"YXY":r.set(c*y,a*f,c*_,a*h);break;case"ZYZ":r.set(c*_,c*y,a*f,a*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function _s(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function mn(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const Wo={DEG2RAD:Qu,RAD2DEG:Sf,generateUUID:zs,clamp:Er,euclideanModulo:HS,mapLinear:z5,inverseLerp:V5,lerp:gm,damp:H5,pingpong:G5,smoothstep:W5,smootherstep:j5,randInt:X5,randFloat:$5,randFloatSpread:q5,seededRandom:Y5,degToRad:Z5,radToDeg:K5,isPowerOfTwo:P1,ceilPowerOfTwo:J5,floorPowerOfTwo:ay,setQuaternionFromProperEuler:Q5,normalize:mn,denormalize:_s};class Be{constructor(e=0,t=0){Be.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Er(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*i+e.x,this.y=s*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class pn{constructor(e,t,n,i,s,o,a,c,h){pn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,o,a,c,h)}set(e,t,n,i,s,o,a,c,h){const f=this.elements;return f[0]=e,f[1]=i,f[2]=a,f[3]=t,f[4]=s,f[5]=c,f[6]=n,f[7]=o,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],a=n[3],c=n[6],h=n[1],f=n[4],m=n[7],g=n[2],y=n[5],_=n[8],M=i[0],E=i[3],x=i[6],A=i[1],b=i[4],R=i[7],N=i[2],I=i[5],O=i[8];return s[0]=o*M+a*A+c*N,s[3]=o*E+a*b+c*I,s[6]=o*x+a*R+c*O,s[1]=h*M+f*A+m*N,s[4]=h*E+f*b+m*I,s[7]=h*x+f*R+m*O,s[2]=g*M+y*A+_*N,s[5]=g*E+y*b+_*I,s[8]=g*x+y*R+_*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],h=e[7],f=e[8];return t*o*f-t*a*h-n*s*f+n*a*c+i*s*h-i*o*c}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],h=e[7],f=e[8],m=f*o-a*h,g=a*c-f*s,y=h*s-o*c,_=t*m+n*g+i*y;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/_;return e[0]=m*M,e[1]=(i*h-f*n)*M,e[2]=(a*n-i*o)*M,e[3]=g*M,e[4]=(f*t-i*c)*M,e[5]=(i*s-a*t)*M,e[6]=y*M,e[7]=(n*c-h*t)*M,e[8]=(o*t-n*s)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,o,a){const c=Math.cos(s),h=Math.sin(s);return this.set(n*c,n*h,-n*(c*o+h*a)+o+e,-i*h,i*c,-i*(-h*o+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(fx.makeScale(e,t)),this}rotate(e){return this.premultiply(fx.makeRotation(-e)),this}translate(e,t){return this.premultiply(fx.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const fx=new pn;function dL(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const eV={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function of(r,e){return new eV[r](e)}function Bm(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function fL(){const r=Bm("canvas");return r.style.display="block",r}const Sb={};function vm(r){r in Sb||(Sb[r]=!0,console.warn(r))}const Eb=new pn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Mb=new pn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),C0={[Hs]:{transfer:Om,primaries:Nm,toReference:r=>r,fromReference:r=>r},[Hr]:{transfer:tr,primaries:Nm,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[ag]:{transfer:Om,primaries:Um,toReference:r=>r.applyMatrix3(Mb),fromReference:r=>r.applyMatrix3(Eb)},[Oy]:{transfer:tr,primaries:Um,toReference:r=>r.convertSRGBToLinear().applyMatrix3(Mb),fromReference:r=>r.applyMatrix3(Eb).convertLinearToSRGB()}},tV=new Set([Hs,ag]),Hn={enabled:!0,_workingColorSpace:Hs,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!tV.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const n=C0[e].toReference,i=C0[t].fromReference;return i(n(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return C0[r].primaries},getTransfer:function(r){return r===Fs?Om:C0[r].transfer}};function hf(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function px(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Md;class GS{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Md===void 0&&(Md=Bm("canvas")),Md.width=e.width,Md.height=e.height;const n=Md.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Md}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Bm("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=hf(s[o]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(hf(t[n]/255)*255):t[n]=hf(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let nV=0;class Xu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:nV++}),this.uuid=zs(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(mx(i[o].image)):s.push(mx(i[o]))}else s=mx(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function mx(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?GS.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let rV=0;class Gn extends _l{constructor(e=Gn.DEFAULT_IMAGE,t=Gn.DEFAULT_MAPPING,n=rr,i=rr,s=Dn,o=Pc,a=Wr,c=Bs,h=Gn.DEFAULT_ANISOTROPY,f=Fs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:rV++}),this.uuid=zs(),this.name="",this.source=new Xu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=h,this.format=a,this.internalFormat=null,this.type=c,this.offset=new Be(0,0),this.repeat=new Be(1,1),this.center=new Be(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof f=="string"?this.colorSpace=f:(vm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=f===Ec?Hr:Fs),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ac)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case rh:e.x=e.x-Math.floor(e.x);break;case rr:e.x=e.x<0?0:1;break;case Lm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case rh:e.y=e.y-Math.floor(e.y);break;case rr:e.y=e.y<0?0:1;break;case Lm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return vm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Hr?Ec:zS}set encoding(e){vm("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ec?Hr:Fs}}Gn.DEFAULT_IMAGE=null;Gn.DEFAULT_MAPPING=Ac;Gn.DEFAULT_ANISOTROPY=1;class Ln{constructor(e=0,t=0,n=0,i=1){Ln.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const c=e.elements,h=c[0],f=c[4],m=c[8],g=c[1],y=c[5],_=c[9],M=c[2],E=c[6],x=c[10];if(Math.abs(f-g)<.01&&Math.abs(m-M)<.01&&Math.abs(_-E)<.01){if(Math.abs(f+g)<.1&&Math.abs(m+M)<.1&&Math.abs(_+E)<.1&&Math.abs(h+y+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(h+1)/2,R=(y+1)/2,N=(x+1)/2,I=(f+g)/4,O=(m+M)/4,V=(_+E)/4;return b>R&&b>N?b<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(b),i=I/n,s=O/n):R>N?R<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(R),n=I/i,s=V/i):N<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(N),n=O/s,i=V/s),this.set(n,i,s,t),this}let A=Math.sqrt((E-_)*(E-_)+(m-M)*(m-M)+(g-f)*(g-f));return Math.abs(A)<.001&&(A=1),this.x=(E-_)/A,this.y=(m-M)/A,this.z=(g-f)/A,this.w=Math.acos((h+y+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class pL extends _l{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ln(0,0,e,t),this.scissorTest=!1,this.viewport=new Ln(0,0,e,t);const i={width:e,height:t,depth:1};n.encoding!==void 0&&(vm("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Ec?Hr:Fs),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Dn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new Gn(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Xu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Gs extends pL{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Ny extends Gn{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Lr,this.minFilter=Lr,this.wrapR=rr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class iV extends Gs{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Ny(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class WS extends Gn{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=Lr,this.minFilter=Lr,this.wrapR=rr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class sV extends Gs{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new WS(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class oV extends Gs{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Xr{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,o,a){let c=n[i+0],h=n[i+1],f=n[i+2],m=n[i+3];const g=s[o+0],y=s[o+1],_=s[o+2],M=s[o+3];if(a===0){e[t+0]=c,e[t+1]=h,e[t+2]=f,e[t+3]=m;return}if(a===1){e[t+0]=g,e[t+1]=y,e[t+2]=_,e[t+3]=M;return}if(m!==M||c!==g||h!==y||f!==_){let E=1-a;const x=c*g+h*y+f*_+m*M,A=x>=0?1:-1,b=1-x*x;if(b>Number.EPSILON){const N=Math.sqrt(b),I=Math.atan2(N,x*A);E=Math.sin(E*I)/N,a=Math.sin(a*I)/N}const R=a*A;if(c=c*E+g*R,h=h*E+y*R,f=f*E+_*R,m=m*E+M*R,E===1-a){const N=1/Math.sqrt(c*c+h*h+f*f+m*m);c*=N,h*=N,f*=N,m*=N}}e[t]=c,e[t+1]=h,e[t+2]=f,e[t+3]=m}static multiplyQuaternionsFlat(e,t,n,i,s,o){const a=n[i],c=n[i+1],h=n[i+2],f=n[i+3],m=s[o],g=s[o+1],y=s[o+2],_=s[o+3];return e[t]=a*_+f*m+c*y-h*g,e[t+1]=c*_+f*g+h*m-a*y,e[t+2]=h*_+f*y+a*g-c*m,e[t+3]=f*_-a*m-c*g-h*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,c=Math.sin,h=a(n/2),f=a(i/2),m=a(s/2),g=c(n/2),y=c(i/2),_=c(s/2);switch(o){case"XYZ":this._x=g*f*m+h*y*_,this._y=h*y*m-g*f*_,this._z=h*f*_+g*y*m,this._w=h*f*m-g*y*_;break;case"YXZ":this._x=g*f*m+h*y*_,this._y=h*y*m-g*f*_,this._z=h*f*_-g*y*m,this._w=h*f*m+g*y*_;break;case"ZXY":this._x=g*f*m-h*y*_,this._y=h*y*m+g*f*_,this._z=h*f*_+g*y*m,this._w=h*f*m-g*y*_;break;case"ZYX":this._x=g*f*m-h*y*_,this._y=h*y*m+g*f*_,this._z=h*f*_-g*y*m,this._w=h*f*m+g*y*_;break;case"YZX":this._x=g*f*m+h*y*_,this._y=h*y*m+g*f*_,this._z=h*f*_-g*y*m,this._w=h*f*m-g*y*_;break;case"XZY":this._x=g*f*m-h*y*_,this._y=h*y*m-g*f*_,this._z=h*f*_+g*y*m,this._w=h*f*m+g*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],o=t[1],a=t[5],c=t[9],h=t[2],f=t[6],m=t[10],g=n+a+m;if(g>0){const y=.5/Math.sqrt(g+1);this._w=.25/y,this._x=(f-c)*y,this._y=(s-h)*y,this._z=(o-i)*y}else if(n>a&&n>m){const y=2*Math.sqrt(1+n-a-m);this._w=(f-c)/y,this._x=.25*y,this._y=(i+o)/y,this._z=(s+h)/y}else if(a>m){const y=2*Math.sqrt(1+a-n-m);this._w=(s-h)/y,this._x=(i+o)/y,this._y=.25*y,this._z=(c+f)/y}else{const y=2*Math.sqrt(1+m-n-a);this._w=(o-i)/y,this._x=(s+h)/y,this._y=(c+f)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Er(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,o=e._w,a=t._x,c=t._y,h=t._z,f=t._w;return this._x=n*f+o*a+i*h-s*c,this._y=i*f+o*c+s*a-n*h,this._z=s*f+o*h+n*c-i*a,this._w=o*f-n*a-i*c-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=i,this._z=s,this;const c=1-a*a;if(c<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*n+t*this._x,this._y=y*i+t*this._y,this._z=y*s+t*this._z,this.normalize(),this}const h=Math.sqrt(c),f=Math.atan2(h,a),m=Math.sin((1-t)*f)/h,g=Math.sin(t*f)/h;return this._w=o*m+this._w*g,this._x=n*m+this._x*g,this._y=i*m+this._y*g,this._z=s*m+this._z*g,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(s),n*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class q{constructor(e=0,t=0,n=0){q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Tb.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Tb.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,o=e.y,a=e.z,c=e.w,h=2*(o*i-a*n),f=2*(a*t-s*i),m=2*(s*n-o*t);return this.x=t+c*h+o*m-a*f,this.y=n+c*f+a*h-s*m,this.z=i+c*m+s*f-o*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,o=t.x,a=t.y,c=t.z;return this.x=i*c-s*a,this.y=s*o-n*c,this.z=n*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return gx.copy(this).projectOnVector(e),this.sub(gx)}reflect(e){return this.sub(gx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Er(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gx=new q,Tb=new Xr;class ns{constructor(e=new q(1/0,1/0,1/0),t=new q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Oo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Oo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Oo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Oo):Oo.fromBufferAttribute(s,o),Oo.applyMatrix4(e.matrixWorld),this.expandByPoint(Oo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),P0.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),P0.copy(n.boundingBox)),P0.applyMatrix4(e.matrixWorld),this.union(P0)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Oo),Oo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Fp),R0.subVectors(this.max,Fp),Td.subVectors(e.a,Fp),bd.subVectors(e.b,Fp),Ad.subVectors(e.c,Fp),ec.subVectors(bd,Td),tc.subVectors(Ad,bd),Su.subVectors(Td,Ad);let t=[0,-ec.z,ec.y,0,-tc.z,tc.y,0,-Su.z,Su.y,ec.z,0,-ec.x,tc.z,0,-tc.x,Su.z,0,-Su.x,-ec.y,ec.x,0,-tc.y,tc.x,0,-Su.y,Su.x,0];return!vx(t,Td,bd,Ad,R0)||(t=[1,0,0,0,1,0,0,0,1],!vx(t,Td,bd,Ad,R0))?!1:(L0.crossVectors(ec,tc),t=[L0.x,L0.y,L0.z],vx(t,Td,bd,Ad,R0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Oo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Oo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ja[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ja[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ja[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ja[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ja[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ja[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ja[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ja[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ja),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ja=[new q,new q,new q,new q,new q,new q,new q,new q],Oo=new q,P0=new ns,Td=new q,bd=new q,Ad=new q,ec=new q,tc=new q,Su=new q,Fp=new q,R0=new q,L0=new q,Eu=new q;function vx(r,e,t,n,i){for(let s=0,o=r.length-3;s<=o;s+=3){Eu.fromArray(r,s);const a=i.x*Math.abs(Eu.x)+i.y*Math.abs(Eu.y)+i.z*Math.abs(Eu.z),c=e.dot(Eu),h=t.dot(Eu),f=n.dot(Eu);if(Math.max(-Math.max(c,h,f),Math.min(c,h,f))>a)return!1}return!0}const aV=new ns,Bp=new q,yx=new q;class Fi{constructor(e=new q,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):aV.setFromPoints(e).getCenter(n);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Bp.subVectors(e,this.center);const t=Bp.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Bp,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(yx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Bp.copy(e.center).add(yx)),this.expandByPoint(Bp.copy(e.center).sub(yx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Qa=new q,_x=new q,I0=new q,nc=new q,xx=new q,k0=new q,wx=new q;class hh{constructor(e=new q,t=new q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Qa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Qa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Qa.copy(this.origin).addScaledVector(this.direction,t),Qa.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){_x.copy(e).add(t).multiplyScalar(.5),I0.copy(t).sub(e).normalize(),nc.copy(this.origin).sub(_x);const s=e.distanceTo(t)*.5,o=-this.direction.dot(I0),a=nc.dot(this.direction),c=-nc.dot(I0),h=nc.lengthSq(),f=Math.abs(1-o*o);let m,g,y,_;if(f>0)if(m=o*c-a,g=o*a-c,_=s*f,m>=0)if(g>=-_)if(g<=_){const M=1/f;m*=M,g*=M,y=m*(m+o*g+2*a)+g*(o*m+g+2*c)+h}else g=s,m=Math.max(0,-(o*g+a)),y=-m*m+g*(g+2*c)+h;else g=-s,m=Math.max(0,-(o*g+a)),y=-m*m+g*(g+2*c)+h;else g<=-_?(m=Math.max(0,-(-o*s+a)),g=m>0?-s:Math.min(Math.max(-s,-c),s),y=-m*m+g*(g+2*c)+h):g<=_?(m=0,g=Math.min(Math.max(-s,-c),s),y=g*(g+2*c)+h):(m=Math.max(0,-(o*s+a)),g=m>0?s:Math.min(Math.max(-s,-c),s),y=-m*m+g*(g+2*c)+h);else g=o>0?-s:s,m=Math.max(0,-(o*g+a)),y=-m*m+g*(g+2*c)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,m),i&&i.copy(_x).addScaledVector(I0,g),y}intersectSphere(e,t){Qa.subVectors(e.center,this.origin);const n=Qa.dot(this.direction),i=Qa.dot(Qa)-n*n,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=n-o,c=n+o;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,o,a,c;const h=1/this.direction.x,f=1/this.direction.y,m=1/this.direction.z,g=this.origin;return h>=0?(n=(e.min.x-g.x)*h,i=(e.max.x-g.x)*h):(n=(e.max.x-g.x)*h,i=(e.min.x-g.x)*h),f>=0?(s=(e.min.y-g.y)*f,o=(e.max.y-g.y)*f):(s=(e.max.y-g.y)*f,o=(e.min.y-g.y)*f),n>o||s>i||((s>n||isNaN(n))&&(n=s),(o<i||isNaN(i))&&(i=o),m>=0?(a=(e.min.z-g.z)*m,c=(e.max.z-g.z)*m):(a=(e.max.z-g.z)*m,c=(e.min.z-g.z)*m),n>c||a>i)||((a>n||n!==n)&&(n=a),(c<i||i!==i)&&(i=c),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Qa)!==null}intersectTriangle(e,t,n,i,s){xx.subVectors(t,e),k0.subVectors(n,e),wx.crossVectors(xx,k0);let o=this.direction.dot(wx),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;nc.subVectors(this.origin,e);const c=a*this.direction.dot(k0.crossVectors(nc,k0));if(c<0)return null;const h=a*this.direction.dot(xx.cross(nc));if(h<0||c+h>o)return null;const f=-a*nc.dot(wx);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class bt{constructor(e,t,n,i,s,o,a,c,h,f,m,g,y,_,M,E){bt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,o,a,c,h,f,m,g,y,_,M,E)}set(e,t,n,i,s,o,a,c,h,f,m,g,y,_,M,E){const x=this.elements;return x[0]=e,x[4]=t,x[8]=n,x[12]=i,x[1]=s,x[5]=o,x[9]=a,x[13]=c,x[2]=h,x[6]=f,x[10]=m,x[14]=g,x[3]=y,x[7]=_,x[11]=M,x[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new bt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Cd.setFromMatrixColumn(e,0).length(),s=1/Cd.setFromMatrixColumn(e,1).length(),o=1/Cd.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),c=Math.cos(i),h=Math.sin(i),f=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const g=o*f,y=o*m,_=a*f,M=a*m;t[0]=c*f,t[4]=-c*m,t[8]=h,t[1]=y+_*h,t[5]=g-M*h,t[9]=-a*c,t[2]=M-g*h,t[6]=_+y*h,t[10]=o*c}else if(e.order==="YXZ"){const g=c*f,y=c*m,_=h*f,M=h*m;t[0]=g+M*a,t[4]=_*a-y,t[8]=o*h,t[1]=o*m,t[5]=o*f,t[9]=-a,t[2]=y*a-_,t[6]=M+g*a,t[10]=o*c}else if(e.order==="ZXY"){const g=c*f,y=c*m,_=h*f,M=h*m;t[0]=g-M*a,t[4]=-o*m,t[8]=_+y*a,t[1]=y+_*a,t[5]=o*f,t[9]=M-g*a,t[2]=-o*h,t[6]=a,t[10]=o*c}else if(e.order==="ZYX"){const g=o*f,y=o*m,_=a*f,M=a*m;t[0]=c*f,t[4]=_*h-y,t[8]=g*h+M,t[1]=c*m,t[5]=M*h+g,t[9]=y*h-_,t[2]=-h,t[6]=a*c,t[10]=o*c}else if(e.order==="YZX"){const g=o*c,y=o*h,_=a*c,M=a*h;t[0]=c*f,t[4]=M-g*m,t[8]=_*m+y,t[1]=m,t[5]=o*f,t[9]=-a*f,t[2]=-h*f,t[6]=y*m+_,t[10]=g-M*m}else if(e.order==="XZY"){const g=o*c,y=o*h,_=a*c,M=a*h;t[0]=c*f,t[4]=-m,t[8]=h*f,t[1]=g*m+M,t[5]=o*f,t[9]=y*m-_,t[2]=_*m-y,t[6]=a*f,t[10]=M*m+g}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(lV,e,cV)}lookAt(e,t,n){const i=this.elements;return Ds.subVectors(e,t),Ds.lengthSq()===0&&(Ds.z=1),Ds.normalize(),rc.crossVectors(n,Ds),rc.lengthSq()===0&&(Math.abs(n.z)===1?Ds.x+=1e-4:Ds.z+=1e-4,Ds.normalize(),rc.crossVectors(n,Ds)),rc.normalize(),D0.crossVectors(Ds,rc),i[0]=rc.x,i[4]=D0.x,i[8]=Ds.x,i[1]=rc.y,i[5]=D0.y,i[9]=Ds.y,i[2]=rc.z,i[6]=D0.z,i[10]=Ds.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],a=n[4],c=n[8],h=n[12],f=n[1],m=n[5],g=n[9],y=n[13],_=n[2],M=n[6],E=n[10],x=n[14],A=n[3],b=n[7],R=n[11],N=n[15],I=i[0],O=i[4],V=i[8],k=i[12],F=i[1],Q=i[5],le=i[9],_e=i[13],Y=i[2],me=i[6],ue=i[10],Ee=i[14],Z=i[3],se=i[7],ee=i[11],H=i[15];return s[0]=o*I+a*F+c*Y+h*Z,s[4]=o*O+a*Q+c*me+h*se,s[8]=o*V+a*le+c*ue+h*ee,s[12]=o*k+a*_e+c*Ee+h*H,s[1]=f*I+m*F+g*Y+y*Z,s[5]=f*O+m*Q+g*me+y*se,s[9]=f*V+m*le+g*ue+y*ee,s[13]=f*k+m*_e+g*Ee+y*H,s[2]=_*I+M*F+E*Y+x*Z,s[6]=_*O+M*Q+E*me+x*se,s[10]=_*V+M*le+E*ue+x*ee,s[14]=_*k+M*_e+E*Ee+x*H,s[3]=A*I+b*F+R*Y+N*Z,s[7]=A*O+b*Q+R*me+N*se,s[11]=A*V+b*le+R*ue+N*ee,s[15]=A*k+b*_e+R*Ee+N*H,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],o=e[1],a=e[5],c=e[9],h=e[13],f=e[2],m=e[6],g=e[10],y=e[14],_=e[3],M=e[7],E=e[11],x=e[15];return _*(+s*c*m-i*h*m-s*a*g+n*h*g+i*a*y-n*c*y)+M*(+t*c*y-t*h*g+s*o*g-i*o*y+i*h*f-s*c*f)+E*(+t*h*m-t*a*y-s*o*m+n*o*y+s*a*f-n*h*f)+x*(-i*a*f-t*c*m+t*a*g+i*o*m-n*o*g+n*c*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],h=e[7],f=e[8],m=e[9],g=e[10],y=e[11],_=e[12],M=e[13],E=e[14],x=e[15],A=m*E*h-M*g*h+M*c*y-a*E*y-m*c*x+a*g*x,b=_*g*h-f*E*h-_*c*y+o*E*y+f*c*x-o*g*x,R=f*M*h-_*m*h+_*a*y-o*M*y-f*a*x+o*m*x,N=_*m*c-f*M*c-_*a*g+o*M*g+f*a*E-o*m*E,I=t*A+n*b+i*R+s*N;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/I;return e[0]=A*O,e[1]=(M*g*s-m*E*s-M*i*y+n*E*y+m*i*x-n*g*x)*O,e[2]=(a*E*s-M*c*s+M*i*h-n*E*h-a*i*x+n*c*x)*O,e[3]=(m*c*s-a*g*s-m*i*h+n*g*h+a*i*y-n*c*y)*O,e[4]=b*O,e[5]=(f*E*s-_*g*s+_*i*y-t*E*y-f*i*x+t*g*x)*O,e[6]=(_*c*s-o*E*s-_*i*h+t*E*h+o*i*x-t*c*x)*O,e[7]=(o*g*s-f*c*s+f*i*h-t*g*h-o*i*y+t*c*y)*O,e[8]=R*O,e[9]=(_*m*s-f*M*s-_*n*y+t*M*y+f*n*x-t*m*x)*O,e[10]=(o*M*s-_*a*s+_*n*h-t*M*h-o*n*x+t*a*x)*O,e[11]=(f*a*s-o*m*s-f*n*h+t*m*h+o*n*y-t*a*y)*O,e[12]=N*O,e[13]=(f*M*i-_*m*i+_*n*g-t*M*g-f*n*E+t*m*E)*O,e[14]=(_*a*i-o*M*i-_*n*c+t*M*c+o*n*E-t*a*E)*O,e[15]=(o*m*i-f*a*i+f*n*c-t*m*c-o*n*g+t*a*g)*O,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,o=e.x,a=e.y,c=e.z,h=s*o,f=s*a;return this.set(h*o+n,h*a-i*c,h*c+i*a,0,h*a+i*c,f*a+n,f*c-i*o,0,h*c-i*a,f*c+i*o,s*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,o){return this.set(1,n,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,o=t._y,a=t._z,c=t._w,h=s+s,f=o+o,m=a+a,g=s*h,y=s*f,_=s*m,M=o*f,E=o*m,x=a*m,A=c*h,b=c*f,R=c*m,N=n.x,I=n.y,O=n.z;return i[0]=(1-(M+x))*N,i[1]=(y+R)*N,i[2]=(_-b)*N,i[3]=0,i[4]=(y-R)*I,i[5]=(1-(g+x))*I,i[6]=(E+A)*I,i[7]=0,i[8]=(_+b)*O,i[9]=(E-A)*O,i[10]=(1-(g+M))*O,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=Cd.set(i[0],i[1],i[2]).length();const o=Cd.set(i[4],i[5],i[6]).length(),a=Cd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],No.copy(this);const h=1/s,f=1/o,m=1/a;return No.elements[0]*=h,No.elements[1]*=h,No.elements[2]*=h,No.elements[4]*=f,No.elements[5]*=f,No.elements[6]*=f,No.elements[8]*=m,No.elements[9]*=m,No.elements[10]*=m,t.setFromRotationMatrix(No),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,i,s,o,a=jo){const c=this.elements,h=2*s/(t-e),f=2*s/(n-i),m=(t+e)/(t-e),g=(n+i)/(n-i);let y,_;if(a===jo)y=-(o+s)/(o-s),_=-2*o*s/(o-s);else if(a===wf)y=-o/(o-s),_=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=h,c[4]=0,c[8]=m,c[12]=0,c[1]=0,c[5]=f,c[9]=g,c[13]=0,c[2]=0,c[6]=0,c[10]=y,c[14]=_,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,i,s,o,a=jo){const c=this.elements,h=1/(t-e),f=1/(n-i),m=1/(o-s),g=(t+e)*h,y=(n+i)*f;let _,M;if(a===jo)_=(o+s)*m,M=-2*m;else if(a===wf)_=s*m,M=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=2*h,c[4]=0,c[8]=0,c[12]=-g,c[1]=0,c[5]=2*f,c[9]=0,c[13]=-y,c[2]=0,c[6]=0,c[10]=M,c[14]=-_,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Cd=new q,No=new bt,lV=new q(0,0,0),cV=new q(1,1,1),rc=new q,D0=new q,Ds=new q,bb=new bt,Ab=new Xr;class ca{constructor(e=0,t=0,n=0,i=ca.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],c=i[1],h=i[5],f=i[9],m=i[2],g=i[6],y=i[10];switch(t){case"XYZ":this._y=Math.asin(Er(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(g,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Er(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,y),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(Er(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Er(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(g,y),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,h));break;case"YZX":this._z=Math.asin(Er(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(a,y));break;case"XZY":this._z=Math.asin(-Er(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(g,h),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return bb.makeRotationFromQuaternion(e),this.setFromRotationMatrix(bb,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Ab.setFromEuler(this),this.setFromQuaternion(Ab,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ca.DEFAULT_ORDER="XYZ";class eh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let uV=0;const Cb=new q,Pd=new Xr,el=new bt,O0=new q,zp=new q,hV=new q,dV=new Xr,Pb=new q(1,0,0),Rb=new q(0,1,0),Lb=new q(0,0,1),fV={type:"added"},pV={type:"removed"};class bn extends _l{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:uV++}),this.uuid=zs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=bn.DEFAULT_UP.clone();const e=new q,t=new ca,n=new Xr,i=new q(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new bt},normalMatrix:{value:new pn}}),this.matrix=new bt,this.matrixWorld=new bt,this.matrixAutoUpdate=bn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new eh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Pd.setFromAxisAngle(e,t),this.quaternion.multiply(Pd),this}rotateOnWorldAxis(e,t){return Pd.setFromAxisAngle(e,t),this.quaternion.premultiply(Pd),this}rotateX(e){return this.rotateOnAxis(Pb,e)}rotateY(e){return this.rotateOnAxis(Rb,e)}rotateZ(e){return this.rotateOnAxis(Lb,e)}translateOnAxis(e,t){return Cb.copy(e).applyQuaternion(this.quaternion),this.position.add(Cb.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Pb,e)}translateY(e){return this.translateOnAxis(Rb,e)}translateZ(e){return this.translateOnAxis(Lb,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(el.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?O0.copy(e):O0.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),zp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?el.lookAt(zp,O0,this.up):el.lookAt(O0,zp,this.up),this.quaternion.setFromRotationMatrix(el),i&&(el.extractRotation(i.matrixWorld),Pd.setFromRotationMatrix(el),this.quaternion.premultiply(Pd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(fV)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(pV)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),el.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),el.multiply(e.parent.matrixWorld)),e.applyMatrix4(el),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zp,e,hV),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zp,dV,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,c){return a[c.uuid]===void 0&&(a[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const c=a.shapes;if(Array.isArray(c))for(let h=0,f=c.length;h<f;h++){const m=c[h];s(e.shapes,m)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let c=0,h=this.material.length;c<h;c++)a.push(s(e.materials,this.material[c]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const c=this.animations[a];i.animations.push(s(e.animations,c))}}if(t){const a=o(e.geometries),c=o(e.materials),h=o(e.textures),f=o(e.images),m=o(e.shapes),g=o(e.skeletons),y=o(e.animations),_=o(e.nodes);a.length>0&&(n.geometries=a),c.length>0&&(n.materials=c),h.length>0&&(n.textures=h),f.length>0&&(n.images=f),m.length>0&&(n.shapes=m),g.length>0&&(n.skeletons=g),y.length>0&&(n.animations=y),_.length>0&&(n.nodes=_)}return n.object=i,n;function o(a){const c=[];for(const h in a){const f=a[h];delete f.metadata,c.push(f)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}bn.DEFAULT_UP=new q(0,1,0);bn.DEFAULT_MATRIX_AUTO_UPDATE=!0;bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Uo=new q,tl=new q,Sx=new q,nl=new q,Rd=new q,Ld=new q,Ib=new q,Ex=new q,Mx=new q,Tx=new q;let N0=!1;class ys{constructor(e=new q,t=new q,n=new q){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Uo.subVectors(e,t),i.cross(Uo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){Uo.subVectors(i,t),tl.subVectors(n,t),Sx.subVectors(e,t);const o=Uo.dot(Uo),a=Uo.dot(tl),c=Uo.dot(Sx),h=tl.dot(tl),f=tl.dot(Sx),m=o*h-a*a;if(m===0)return s.set(0,0,0),null;const g=1/m,y=(h*c-a*f)*g,_=(o*f-a*c)*g;return s.set(1-y-_,_,y)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,nl)===null?!1:nl.x>=0&&nl.y>=0&&nl.x+nl.y<=1}static getUV(e,t,n,i,s,o,a,c){return N0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),N0=!0),this.getInterpolation(e,t,n,i,s,o,a,c)}static getInterpolation(e,t,n,i,s,o,a,c){return this.getBarycoord(e,t,n,i,nl)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,nl.x),c.addScaledVector(o,nl.y),c.addScaledVector(a,nl.z),c)}static isFrontFacing(e,t,n,i){return Uo.subVectors(n,t),tl.subVectors(e,t),Uo.cross(tl).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Uo.subVectors(this.c,this.b),tl.subVectors(this.a,this.b),Uo.cross(tl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ys.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ys.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,s){return N0===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),N0=!0),ys.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}getInterpolation(e,t,n,i,s){return ys.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return ys.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ys.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let o,a;Rd.subVectors(i,n),Ld.subVectors(s,n),Ex.subVectors(e,n);const c=Rd.dot(Ex),h=Ld.dot(Ex);if(c<=0&&h<=0)return t.copy(n);Mx.subVectors(e,i);const f=Rd.dot(Mx),m=Ld.dot(Mx);if(f>=0&&m<=f)return t.copy(i);const g=c*m-f*h;if(g<=0&&c>=0&&f<=0)return o=c/(c-f),t.copy(n).addScaledVector(Rd,o);Tx.subVectors(e,s);const y=Rd.dot(Tx),_=Ld.dot(Tx);if(_>=0&&y<=_)return t.copy(s);const M=y*h-c*_;if(M<=0&&h>=0&&_<=0)return a=h/(h-_),t.copy(n).addScaledVector(Ld,a);const E=f*_-y*m;if(E<=0&&m-f>=0&&y-_>=0)return Ib.subVectors(s,i),a=(m-f)/(m-f+(y-_)),t.copy(i).addScaledVector(Ib,a);const x=1/(E+M+g);return o=M*x,a=g*x,t.copy(n).addScaledVector(Rd,o).addScaledVector(Ld,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const mL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ic={h:0,s:0,l:0},U0={h:0,s:0,l:0};function bx(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class gt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Hr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Hn.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=Hn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Hn.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=Hn.workingColorSpace){if(e=HS(e,1),t=Er(t,0,1),n=Er(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=bx(o,s,e+1/3),this.g=bx(o,s,e),this.b=bx(o,s,e-1/3)}return Hn.toWorkingColorSpace(this,i),this}setStyle(e,t=Hr){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Hr){const n=mL[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=hf(e.r),this.g=hf(e.g),this.b=hf(e.b),this}copyLinearToSRGB(e){return this.r=px(e.r),this.g=px(e.g),this.b=px(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Hr){return Hn.fromWorkingColorSpace(ki.copy(this),e),Math.round(Er(ki.r*255,0,255))*65536+Math.round(Er(ki.g*255,0,255))*256+Math.round(Er(ki.b*255,0,255))}getHexString(e=Hr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Hn.workingColorSpace){Hn.fromWorkingColorSpace(ki.copy(this),t);const n=ki.r,i=ki.g,s=ki.b,o=Math.max(n,i,s),a=Math.min(n,i,s);let c,h;const f=(a+o)/2;if(a===o)c=0,h=0;else{const m=o-a;switch(h=f<=.5?m/(o+a):m/(2-o-a),o){case n:c=(i-s)/m+(i<s?6:0);break;case i:c=(s-n)/m+2;break;case s:c=(n-i)/m+4;break}c/=6}return e.h=c,e.s=h,e.l=f,e}getRGB(e,t=Hn.workingColorSpace){return Hn.fromWorkingColorSpace(ki.copy(this),t),e.r=ki.r,e.g=ki.g,e.b=ki.b,e}getStyle(e=Hr){Hn.fromWorkingColorSpace(ki.copy(this),e);const t=ki.r,n=ki.g,i=ki.b;return e!==Hr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(ic),this.setHSL(ic.h+e,ic.s+t,ic.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ic),e.getHSL(U0);const n=gm(ic.h,U0.h,t),i=gm(ic.s,U0.s,t),s=gm(ic.l,U0.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ki=new gt;gt.NAMES=mL;let mV=0;class Bi extends _l{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:mV++}),this.uuid=zs(),this.name="",this.type="Material",this.blending=Ju,this.side=gl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ry,this.blendDst=iy,this.blendEquation=gc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new gt(0,0,0),this.blendAlpha=0,this.depthFunc=Pm,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=A1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Fu,this.stencilZFail=Fu,this.stencilZPass=Fu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Ju&&(n.blending=this.blending),this.side!==gl&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==ry&&(n.blendSrc=this.blendSrc),this.blendDst!==iy&&(n.blendDst=this.blendDst),this.blendEquation!==gc&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Pm&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==A1&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Fu&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Fu&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Fu&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const o=[];for(const a in s){const c=s[a];delete c.metadata,o.push(c)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class xl extends Bi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ll=gV();function gV(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let c=0;c<256;++c){const h=c-127;h<-27?(n[c]=0,n[c|256]=32768,i[c]=24,i[c|256]=24):h<-14?(n[c]=1024>>-h-14,n[c|256]=1024>>-h-14|32768,i[c]=-h-1,i[c|256]=-h-1):h<=15?(n[c]=h+15<<10,n[c|256]=h+15<<10|32768,i[c]=13,i[c|256]=13):h<128?(n[c]=31744,n[c|256]=64512,i[c]=24,i[c|256]=24):(n[c]=31744,n[c|256]=64512,i[c]=13,i[c|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let c=1;c<1024;++c){let h=c<<13,f=0;for(;(h&8388608)===0;)h<<=1,f-=8388608;h&=-8388609,f+=947912704,s[c]=h|f}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)o[c]=c<<23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c<63;++c)o[c]=2147483648+(c-32<<23);o[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(a[c]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function gs(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=Er(r,-65504,65504),ll.floatView[0]=r;const e=ll.uint32View[0],t=e>>23&511;return ll.baseTable[t]+((e&8388607)>>ll.shiftTable[t])}function nm(r){const e=r>>10;return ll.uint32View[0]=ll.mantissaTable[ll.offsetTable[e]+(r&1023)]+ll.exponentTable[e],ll.floatView[0]}const $u={toHalfFloat:gs,fromHalfFloat:nm},zr=new q,F0=new Be;class Wn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Fm,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=jr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)F0.fromBufferAttribute(this,t),F0.applyMatrix3(e),this.setXY(t,F0.x,F0.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)zr.fromBufferAttribute(this,t),zr.applyMatrix3(e),this.setXYZ(t,zr.x,zr.y,zr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)zr.fromBufferAttribute(this,t),zr.applyMatrix4(e),this.setXYZ(t,zr.x,zr.y,zr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)zr.fromBufferAttribute(this,t),zr.applyNormalMatrix(e),this.setXYZ(t,zr.x,zr.y,zr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)zr.fromBufferAttribute(this,t),zr.transformDirection(e),this.setXYZ(t,zr.x,zr.y,zr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=_s(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=mn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=_s(t,this.array)),t}setX(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=_s(t,this.array)),t}setY(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=_s(t,this.array)),t}setZ(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=_s(t,this.array)),t}setW(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array),i=mn(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array),i=mn(i,this.array),s=mn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Fm&&(e.usage=this.usage),e}}class vV extends Wn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class yV extends Wn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class _V extends Wn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class xV extends Wn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Uy extends Wn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class wV extends Wn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class jS extends Wn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class SV extends Wn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=nm(this.array[e*this.itemSize]);return this.normalized&&(t=_s(t,this.array)),t}setX(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize]=gs(t),this}getY(e){let t=nm(this.array[e*this.itemSize+1]);return this.normalized&&(t=_s(t,this.array)),t}setY(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+1]=gs(t),this}getZ(e){let t=nm(this.array[e*this.itemSize+2]);return this.normalized&&(t=_s(t,this.array)),t}setZ(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+2]=gs(t),this}getW(e){let t=nm(this.array[e*this.itemSize+3]);return this.normalized&&(t=_s(t,this.array)),t}setW(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+3]=gs(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array)),this.array[e+0]=gs(t),this.array[e+1]=gs(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array),i=mn(i,this.array)),this.array[e+0]=gs(t),this.array[e+1]=gs(n),this.array[e+2]=gs(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array),i=mn(i,this.array),s=mn(s,this.array)),this.array[e+0]=gs(t),this.array[e+1]=gs(n),this.array[e+2]=gs(i),this.array[e+3]=gs(s),this}}class Ct extends Wn{constructor(e,t,n){super(new Float32Array(e),t,n)}}class EV extends Wn{constructor(e,t,n){super(new Float64Array(e),t,n)}}let MV=0;const io=new bt,Ax=new bn,Id=new q,Os=new ns,Vp=new ns,ci=new q;class sn extends _l{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:MV++}),this.uuid=zs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(dL(e)?jS:Uy)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new pn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return io.makeRotationFromQuaternion(e),this.applyMatrix4(io),this}rotateX(e){return io.makeRotationX(e),this.applyMatrix4(io),this}rotateY(e){return io.makeRotationY(e),this.applyMatrix4(io),this}rotateZ(e){return io.makeRotationZ(e),this.applyMatrix4(io),this}translate(e,t,n){return io.makeTranslation(e,t,n),this.applyMatrix4(io),this}scale(e,t,n){return io.makeScale(e,t,n),this.applyMatrix4(io),this}lookAt(e){return Ax.lookAt(e),Ax.updateMatrix(),this.applyMatrix4(Ax.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Id).negate(),this.translate(Id.x,Id.y,Id.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ct(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ns);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];Os.setFromBufferAttribute(s),this.morphTargetsRelative?(ci.addVectors(this.boundingBox.min,Os.min),this.boundingBox.expandByPoint(ci),ci.addVectors(this.boundingBox.max,Os.max),this.boundingBox.expandByPoint(ci)):(this.boundingBox.expandByPoint(Os.min),this.boundingBox.expandByPoint(Os.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new q,1/0);return}if(e){const n=this.boundingSphere.center;if(Os.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Vp.setFromBufferAttribute(a),this.morphTargetsRelative?(ci.addVectors(Os.min,Vp.min),Os.expandByPoint(ci),ci.addVectors(Os.max,Vp.max),Os.expandByPoint(ci)):(Os.expandByPoint(Vp.min),Os.expandByPoint(Vp.max))}Os.getCenter(n);let i=0;for(let s=0,o=e.count;s<o;s++)ci.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(ci));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],c=this.morphTargetsRelative;for(let h=0,f=a.count;h<f;h++)ci.fromBufferAttribute(a,h),c&&(Id.fromBufferAttribute(e,h),ci.add(Id)),i=Math.max(i,n.distanceToSquared(ci))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Wn(new Float32Array(4*a),4));const c=this.getAttribute("tangent").array,h=[],f=[];for(let F=0;F<a;F++)h[F]=new q,f[F]=new q;const m=new q,g=new q,y=new q,_=new Be,M=new Be,E=new Be,x=new q,A=new q;function b(F,Q,le){m.fromArray(i,F*3),g.fromArray(i,Q*3),y.fromArray(i,le*3),_.fromArray(o,F*2),M.fromArray(o,Q*2),E.fromArray(o,le*2),g.sub(m),y.sub(m),M.sub(_),E.sub(_);const _e=1/(M.x*E.y-E.x*M.y);isFinite(_e)&&(x.copy(g).multiplyScalar(E.y).addScaledVector(y,-M.y).multiplyScalar(_e),A.copy(y).multiplyScalar(M.x).addScaledVector(g,-E.x).multiplyScalar(_e),h[F].add(x),h[Q].add(x),h[le].add(x),f[F].add(A),f[Q].add(A),f[le].add(A))}let R=this.groups;R.length===0&&(R=[{start:0,count:n.length}]);for(let F=0,Q=R.length;F<Q;++F){const le=R[F],_e=le.start,Y=le.count;for(let me=_e,ue=_e+Y;me<ue;me+=3)b(n[me+0],n[me+1],n[me+2])}const N=new q,I=new q,O=new q,V=new q;function k(F){O.fromArray(s,F*3),V.copy(O);const Q=h[F];N.copy(Q),N.sub(O.multiplyScalar(O.dot(Q))).normalize(),I.crossVectors(V,Q);const _e=I.dot(f[F])<0?-1:1;c[F*4]=N.x,c[F*4+1]=N.y,c[F*4+2]=N.z,c[F*4+3]=_e}for(let F=0,Q=R.length;F<Q;++F){const le=R[F],_e=le.start,Y=le.count;for(let me=_e,ue=_e+Y;me<ue;me+=3)k(n[me+0]),k(n[me+1]),k(n[me+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Wn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let g=0,y=n.count;g<y;g++)n.setXYZ(g,0,0,0);const i=new q,s=new q,o=new q,a=new q,c=new q,h=new q,f=new q,m=new q;if(e)for(let g=0,y=e.count;g<y;g+=3){const _=e.getX(g+0),M=e.getX(g+1),E=e.getX(g+2);i.fromBufferAttribute(t,_),s.fromBufferAttribute(t,M),o.fromBufferAttribute(t,E),f.subVectors(o,s),m.subVectors(i,s),f.cross(m),a.fromBufferAttribute(n,_),c.fromBufferAttribute(n,M),h.fromBufferAttribute(n,E),a.add(f),c.add(f),h.add(f),n.setXYZ(_,a.x,a.y,a.z),n.setXYZ(M,c.x,c.y,c.z),n.setXYZ(E,h.x,h.y,h.z)}else for(let g=0,y=t.count;g<y;g+=3)i.fromBufferAttribute(t,g+0),s.fromBufferAttribute(t,g+1),o.fromBufferAttribute(t,g+2),f.subVectors(o,s),m.subVectors(i,s),f.cross(m),n.setXYZ(g+0,f.x,f.y,f.z),n.setXYZ(g+1,f.x,f.y,f.z),n.setXYZ(g+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ci.fromBufferAttribute(e,t),ci.normalize(),e.setXYZ(t,ci.x,ci.y,ci.z)}toNonIndexed(){function e(a,c){const h=a.array,f=a.itemSize,m=a.normalized,g=new h.constructor(c.length*f);let y=0,_=0;for(let M=0,E=c.length;M<E;M++){a.isInterleavedBufferAttribute?y=c[M]*a.data.stride+a.offset:y=c[M]*f;for(let x=0;x<f;x++)g[_++]=h[y++]}return new Wn(g,f,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new sn,n=this.index.array,i=this.attributes;for(const a in i){const c=i[a],h=e(c,n);t.setAttribute(a,h)}const s=this.morphAttributes;for(const a in s){const c=[],h=s[a];for(let f=0,m=h.length;f<m;f++){const g=h[f],y=e(g,n);c.push(y)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,c=o.length;a<c;a++){const h=o[a];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const h in c)c[h]!==void 0&&(e[h]=c[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const h=n[c];e.data.attributes[c]=h.toJSON(e.data)}const i={};let s=!1;for(const c in this.morphAttributes){const h=this.morphAttributes[c],f=[];for(let m=0,g=h.length;m<g;m++){const y=h[m];f.push(y.toJSON(e.data))}f.length>0&&(i[c]=f,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const h in i){const f=i[h];this.setAttribute(h,f.clone(t))}const s=e.morphAttributes;for(const h in s){const f=[],m=s[h];for(let g=0,y=m.length;g<y;g++)f.push(m[g].clone(t));this.morphAttributes[h]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let h=0,f=o.length;h<f;h++){const m=o[h];this.addGroup(m.start,m.count,m.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const kb=new bt,Mu=new hh,B0=new Fi,Db=new q,kd=new q,Dd=new q,Od=new q,Cx=new q,z0=new q,V0=new Be,H0=new Be,G0=new Be,Ob=new q,Nb=new q,Ub=new q,W0=new q,j0=new q;class qn extends bn{constructor(e=new sn,t=new xl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){z0.set(0,0,0);for(let c=0,h=s.length;c<h;c++){const f=a[c],m=s[c];f!==0&&(Cx.fromBufferAttribute(m,e),o?z0.addScaledVector(Cx,f):z0.addScaledVector(Cx.sub(t),f))}t.add(z0)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),B0.copy(n.boundingSphere),B0.applyMatrix4(s),Mu.copy(e.ray).recast(e.near),!(B0.containsPoint(Mu.origin)===!1&&(Mu.intersectSphere(B0,Db)===null||Mu.origin.distanceToSquared(Db)>(e.far-e.near)**2))&&(kb.copy(s).invert(),Mu.copy(e.ray).applyMatrix4(kb),!(n.boundingBox!==null&&Mu.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Mu)))}_computeIntersections(e,t,n){let i;const s=this.geometry,o=this.material,a=s.index,c=s.attributes.position,h=s.attributes.uv,f=s.attributes.uv1,m=s.attributes.normal,g=s.groups,y=s.drawRange;if(a!==null)if(Array.isArray(o))for(let _=0,M=g.length;_<M;_++){const E=g[_],x=o[E.materialIndex],A=Math.max(E.start,y.start),b=Math.min(a.count,Math.min(E.start+E.count,y.start+y.count));for(let R=A,N=b;R<N;R+=3){const I=a.getX(R),O=a.getX(R+1),V=a.getX(R+2);i=X0(this,x,e,n,h,f,m,I,O,V),i&&(i.faceIndex=Math.floor(R/3),i.face.materialIndex=E.materialIndex,t.push(i))}}else{const _=Math.max(0,y.start),M=Math.min(a.count,y.start+y.count);for(let E=_,x=M;E<x;E+=3){const A=a.getX(E),b=a.getX(E+1),R=a.getX(E+2);i=X0(this,o,e,n,h,f,m,A,b,R),i&&(i.faceIndex=Math.floor(E/3),t.push(i))}}else if(c!==void 0)if(Array.isArray(o))for(let _=0,M=g.length;_<M;_++){const E=g[_],x=o[E.materialIndex],A=Math.max(E.start,y.start),b=Math.min(c.count,Math.min(E.start+E.count,y.start+y.count));for(let R=A,N=b;R<N;R+=3){const I=R,O=R+1,V=R+2;i=X0(this,x,e,n,h,f,m,I,O,V),i&&(i.faceIndex=Math.floor(R/3),i.face.materialIndex=E.materialIndex,t.push(i))}}else{const _=Math.max(0,y.start),M=Math.min(c.count,y.start+y.count);for(let E=_,x=M;E<x;E+=3){const A=E,b=E+1,R=E+2;i=X0(this,o,e,n,h,f,m,A,b,R),i&&(i.faceIndex=Math.floor(E/3),t.push(i))}}}}function TV(r,e,t,n,i,s,o,a){let c;if(e.side===ts?c=n.intersectTriangle(o,s,i,!0,a):c=n.intersectTriangle(i,s,o,e.side===gl,a),c===null)return null;j0.copy(a),j0.applyMatrix4(r.matrixWorld);const h=t.ray.origin.distanceTo(j0);return h<t.near||h>t.far?null:{distance:h,point:j0.clone(),object:r}}function X0(r,e,t,n,i,s,o,a,c,h){r.getVertexPosition(a,kd),r.getVertexPosition(c,Dd),r.getVertexPosition(h,Od);const f=TV(r,e,t,n,kd,Dd,Od,W0);if(f){i&&(V0.fromBufferAttribute(i,a),H0.fromBufferAttribute(i,c),G0.fromBufferAttribute(i,h),f.uv=ys.getInterpolation(W0,kd,Dd,Od,V0,H0,G0,new Be)),s&&(V0.fromBufferAttribute(s,a),H0.fromBufferAttribute(s,c),G0.fromBufferAttribute(s,h),f.uv1=ys.getInterpolation(W0,kd,Dd,Od,V0,H0,G0,new Be),f.uv2=f.uv1),o&&(Ob.fromBufferAttribute(o,a),Nb.fromBufferAttribute(o,c),Ub.fromBufferAttribute(o,h),f.normal=ys.getInterpolation(W0,kd,Dd,Od,Ob,Nb,Ub,new q),f.normal.dot(n.direction)>0&&f.normal.multiplyScalar(-1));const m={a,b:c,c:h,normal:new q,materialIndex:0};ys.getNormal(kd,Dd,Od,m.normal),f.face=m}return f}class dh extends sn{constructor(e=1,t=1,n=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const c=[],h=[],f=[],m=[];let g=0,y=0;_("z","y","x",-1,-1,n,t,e,o,s,0),_("z","y","x",1,-1,n,t,-e,o,s,1),_("x","z","y",1,1,e,n,t,i,o,2),_("x","z","y",1,-1,e,n,-t,i,o,3),_("x","y","z",1,-1,e,t,n,i,s,4),_("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(c),this.setAttribute("position",new Ct(h,3)),this.setAttribute("normal",new Ct(f,3)),this.setAttribute("uv",new Ct(m,2));function _(M,E,x,A,b,R,N,I,O,V,k){const F=R/O,Q=N/V,le=R/2,_e=N/2,Y=I/2,me=O+1,ue=V+1;let Ee=0,Z=0;const se=new q;for(let ee=0;ee<ue;ee++){const H=ee*Q-_e;for(let ne=0;ne<me;ne++){const ce=ne*F-le;se[M]=ce*A,se[E]=H*b,se[x]=Y,h.push(se.x,se.y,se.z),se[M]=0,se[E]=0,se[x]=I>0?1:-1,f.push(se.x,se.y,se.z),m.push(ne/O),m.push(1-ee/V),Ee+=1}}for(let ee=0;ee<V;ee++)for(let H=0;H<O;H++){const ne=g+H+me*ee,ce=g+H+me*(ee+1),xe=g+(H+1)+me*(ee+1),ke=g+(H+1)+me*ee;c.push(ne,ce,ke),c.push(ce,xe,ke),Z+=6}a.addGroup(y,Z,k),y+=Z,g+=Ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ef(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function Qi(r){const e={};for(let t=0;t<r.length;t++){const n=Ef(r[t]);for(const i in n)e[i]=n[i]}return e}function bV(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function gL(r){return r.getRenderTarget()===null?r.outputColorSpace:Hn.workingColorSpace}const vL={clone:Ef,merge:Qi};var AV=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,CV=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ws extends Bi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=AV,this.fragmentShader=CV,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ef(e.uniforms),this.uniformsGroups=bV(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class lg extends bn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new bt,this.projectionMatrix=new bt,this.projectionMatrixInverse=new bt,this.coordinateSystem=jo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Mr extends lg{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Sf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Qu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Sf*2*Math.atan(Math.tan(Qu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Qu*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const c=o.fullWidth,h=o.fullHeight;s+=o.offsetX*i/c,t-=o.offsetY*n/h,i*=o.width/c,n*=o.height/h}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Nd=-90,Ud=1;class yL extends bn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Mr(Nd,Ud,e,t);i.layers=this.layers,this.add(i);const s=new Mr(Nd,Ud,e,t);s.layers=this.layers,this.add(s);const o=new Mr(Nd,Ud,e,t);o.layers=this.layers,this.add(o);const a=new Mr(Nd,Ud,e,t);a.layers=this.layers,this.add(a);const c=new Mr(Nd,Ud,e,t);c.layers=this.layers,this.add(c);const h=new Mr(Nd,Ud,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,o,a,c]=t;for(const h of t)this.remove(h);if(e===jo)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===wf)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,c,h,f]=this.children,m=e.getRenderTarget(),g=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const M=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,s),e.setRenderTarget(n,1,i),e.render(t,o),e.setRenderTarget(n,2,i),e.render(t,a),e.setRenderTarget(n,3,i),e.render(t,c),e.setRenderTarget(n,4,i),e.render(t,h),n.texture.generateMipmaps=M,e.setRenderTarget(n,5,i),e.render(t,f),e.setRenderTarget(m,g,y),e.xr.enabled=_,n.texture.needsPMREMUpdate=!0}}class cg extends Gn{constructor(e,t,n,i,s,o,a,c,h,f){e=e!==void 0?e:[],t=t!==void 0?t:ga,super(e,t,n,i,s,o,a,c,h,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class XS extends Gs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];t.encoding!==void 0&&(vm("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ec?Hr:Fs),this.texture=new cg(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Dn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new dh(5,5,5),s=new Ws({name:"CubemapFromEquirect",uniforms:Ef(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:ts,blending:ha});s.uniforms.tEquirect.value=t;const o=new qn(i,s),a=t.minFilter;return t.minFilter===Pc&&(t.minFilter=Dn),new yL(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(s)}}const Px=new q,PV=new q,RV=new pn;class al{constructor(e=new q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=Px.subVectors(n,t).cross(PV.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Px),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||RV.getNormalMatrix(e),i=this.coplanarPoint(Px).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Tu=new Fi,$0=new q;class ug{constructor(e=new al,t=new al,n=new al,i=new al,s=new al,o=new al){this.planes=[e,t,n,i,s,o]}set(e,t,n,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=jo){const n=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],c=i[3],h=i[4],f=i[5],m=i[6],g=i[7],y=i[8],_=i[9],M=i[10],E=i[11],x=i[12],A=i[13],b=i[14],R=i[15];if(n[0].setComponents(c-s,g-h,E-y,R-x).normalize(),n[1].setComponents(c+s,g+h,E+y,R+x).normalize(),n[2].setComponents(c+o,g+f,E+_,R+A).normalize(),n[3].setComponents(c-o,g-f,E-_,R-A).normalize(),n[4].setComponents(c-a,g-m,E-M,R-b).normalize(),t===jo)n[5].setComponents(c+a,g+m,E+M,R+b).normalize();else if(t===wf)n[5].setComponents(a,m,M,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Tu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Tu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Tu)}intersectsSprite(e){return Tu.center.set(0,0,0),Tu.radius=.7071067811865476,Tu.applyMatrix4(e.matrixWorld),this.intersectsSphere(Tu)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if($0.x=i.normal.x>0?e.max.x:e.min.x,$0.y=i.normal.y>0?e.max.y:e.min.y,$0.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint($0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function _L(){let r=null,e=!1,t=null,n=null;function i(s,o){t(s,o),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function LV(r,e){const t=e.isWebGL2,n=new WeakMap;function i(h,f){const m=h.array,g=h.usage,y=m.byteLength,_=r.createBuffer();r.bindBuffer(f,_),r.bufferData(f,m,g),h.onUploadCallback();let M;if(m instanceof Float32Array)M=r.FLOAT;else if(m instanceof Uint16Array)if(h.isFloat16BufferAttribute)if(t)M=r.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else M=r.UNSIGNED_SHORT;else if(m instanceof Int16Array)M=r.SHORT;else if(m instanceof Uint32Array)M=r.UNSIGNED_INT;else if(m instanceof Int32Array)M=r.INT;else if(m instanceof Int8Array)M=r.BYTE;else if(m instanceof Uint8Array)M=r.UNSIGNED_BYTE;else if(m instanceof Uint8ClampedArray)M=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:_,type:M,bytesPerElement:m.BYTES_PER_ELEMENT,version:h.version,size:y}}function s(h,f,m){const g=f.array,y=f._updateRange,_=f.updateRanges;if(r.bindBuffer(m,h),y.count===-1&&_.length===0&&r.bufferSubData(m,0,g),_.length!==0){for(let M=0,E=_.length;M<E;M++){const x=_[M];t?r.bufferSubData(m,x.start*g.BYTES_PER_ELEMENT,g,x.start,x.count):r.bufferSubData(m,x.start*g.BYTES_PER_ELEMENT,g.subarray(x.start,x.start+x.count))}f.clearUpdateRanges()}y.count!==-1&&(t?r.bufferSubData(m,y.offset*g.BYTES_PER_ELEMENT,g,y.offset,y.count):r.bufferSubData(m,y.offset*g.BYTES_PER_ELEMENT,g.subarray(y.offset,y.offset+y.count)),y.count=-1),f.onUploadCallback()}function o(h){return h.isInterleavedBufferAttribute&&(h=h.data),n.get(h)}function a(h){h.isInterleavedBufferAttribute&&(h=h.data);const f=n.get(h);f&&(r.deleteBuffer(f.buffer),n.delete(h))}function c(h,f){if(h.isGLBufferAttribute){const g=n.get(h);(!g||g.version<h.version)&&n.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const m=n.get(h);if(m===void 0)n.set(h,i(h,f));else if(m.version<h.version){if(m.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(m.buffer,h,f),m.version=h.version}}return{get:o,remove:a,update:c}}class fh extends sn{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(n),c=Math.floor(i),h=a+1,f=c+1,m=e/a,g=t/c,y=[],_=[],M=[],E=[];for(let x=0;x<f;x++){const A=x*g-o;for(let b=0;b<h;b++){const R=b*m-s;_.push(R,-A,0),M.push(0,0,1),E.push(b/a),E.push(1-x/c)}}for(let x=0;x<c;x++)for(let A=0;A<a;A++){const b=A+h*x,R=A+h*(x+1),N=A+1+h*(x+1),I=A+1+h*x;y.push(b,R,I),y.push(R,N,I)}this.setIndex(y),this.setAttribute("position",new Ct(_,3)),this.setAttribute("normal",new Ct(M,3)),this.setAttribute("uv",new Ct(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fh(e.width,e.height,e.widthSegments,e.heightSegments)}}var IV=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,kV=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,DV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,OV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,NV=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,UV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,FV=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,BV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,zV=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,VV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,HV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,GV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,WV=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,jV=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,XV=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,$V=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,qV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,YV=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ZV=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,KV=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,JV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,QV=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,eH=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,tH=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,nH=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,rH=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,iH=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,sH=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,oH=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,aH=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,lH="gl_FragColor = linearToOutputTexel( gl_FragColor );",cH=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,uH=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,hH=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,dH=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,fH=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,pH=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,mH=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,gH=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,vH=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,yH=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,_H=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,xH=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,wH=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,SH=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,EH=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,MH=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,TH=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,bH=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,AH=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,CH=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,PH=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,RH=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,LH=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,IH=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,kH=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,DH=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,OH=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,NH=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,UH=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,FH=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,BH=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,zH=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,VH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,HH=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,GH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,WH=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,jH=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,XH=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,$H=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,qH=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,YH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,ZH=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,KH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,JH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,QH=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,e6=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,t6=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,n6=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,r6=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,i6=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,s6=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,o6=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,a6=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,l6=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,c6=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,u6=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,h6=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,d6=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,f6=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,p6=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,m6=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,g6=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,v6=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,y6=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,_6=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,x6=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,w6=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,S6=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,E6=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,M6=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,T6=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,b6=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,A6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,C6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,P6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,R6=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const L6=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,I6=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,k6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,D6=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,O6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,N6=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,U6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,F6=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,B6=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,z6=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,V6=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,H6=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,G6=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,W6=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,j6=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,X6=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$6=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,q6=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Y6=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Z6=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K6=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,J6=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Q6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,e8=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,t8=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,n8=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r8=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,i8=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,s8=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,o8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,a8=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,l8=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,c8=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,u8=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,fn={alphahash_fragment:IV,alphahash_pars_fragment:kV,alphamap_fragment:DV,alphamap_pars_fragment:OV,alphatest_fragment:NV,alphatest_pars_fragment:UV,aomap_fragment:FV,aomap_pars_fragment:BV,batching_pars_vertex:zV,batching_vertex:VV,begin_vertex:HV,beginnormal_vertex:GV,bsdfs:WV,iridescence_fragment:jV,bumpmap_pars_fragment:XV,clipping_planes_fragment:$V,clipping_planes_pars_fragment:qV,clipping_planes_pars_vertex:YV,clipping_planes_vertex:ZV,color_fragment:KV,color_pars_fragment:JV,color_pars_vertex:QV,color_vertex:eH,common:tH,cube_uv_reflection_fragment:nH,defaultnormal_vertex:rH,displacementmap_pars_vertex:iH,displacementmap_vertex:sH,emissivemap_fragment:oH,emissivemap_pars_fragment:aH,colorspace_fragment:lH,colorspace_pars_fragment:cH,envmap_fragment:uH,envmap_common_pars_fragment:hH,envmap_pars_fragment:dH,envmap_pars_vertex:fH,envmap_physical_pars_fragment:TH,envmap_vertex:pH,fog_vertex:mH,fog_pars_vertex:gH,fog_fragment:vH,fog_pars_fragment:yH,gradientmap_pars_fragment:_H,lightmap_fragment:xH,lightmap_pars_fragment:wH,lights_lambert_fragment:SH,lights_lambert_pars_fragment:EH,lights_pars_begin:MH,lights_toon_fragment:bH,lights_toon_pars_fragment:AH,lights_phong_fragment:CH,lights_phong_pars_fragment:PH,lights_physical_fragment:RH,lights_physical_pars_fragment:LH,lights_fragment_begin:IH,lights_fragment_maps:kH,lights_fragment_end:DH,logdepthbuf_fragment:OH,logdepthbuf_pars_fragment:NH,logdepthbuf_pars_vertex:UH,logdepthbuf_vertex:FH,map_fragment:BH,map_pars_fragment:zH,map_particle_fragment:VH,map_particle_pars_fragment:HH,metalnessmap_fragment:GH,metalnessmap_pars_fragment:WH,morphcolor_vertex:jH,morphnormal_vertex:XH,morphtarget_pars_vertex:$H,morphtarget_vertex:qH,normal_fragment_begin:YH,normal_fragment_maps:ZH,normal_pars_fragment:KH,normal_pars_vertex:JH,normal_vertex:QH,normalmap_pars_fragment:e6,clearcoat_normal_fragment_begin:t6,clearcoat_normal_fragment_maps:n6,clearcoat_pars_fragment:r6,iridescence_pars_fragment:i6,opaque_fragment:s6,packing:o6,premultiplied_alpha_fragment:a6,project_vertex:l6,dithering_fragment:c6,dithering_pars_fragment:u6,roughnessmap_fragment:h6,roughnessmap_pars_fragment:d6,shadowmap_pars_fragment:f6,shadowmap_pars_vertex:p6,shadowmap_vertex:m6,shadowmask_pars_fragment:g6,skinbase_vertex:v6,skinning_pars_vertex:y6,skinning_vertex:_6,skinnormal_vertex:x6,specularmap_fragment:w6,specularmap_pars_fragment:S6,tonemapping_fragment:E6,tonemapping_pars_fragment:M6,transmission_fragment:T6,transmission_pars_fragment:b6,uv_pars_fragment:A6,uv_pars_vertex:C6,uv_vertex:P6,worldpos_vertex:R6,background_vert:L6,background_frag:I6,backgroundCube_vert:k6,backgroundCube_frag:D6,cube_vert:O6,cube_frag:N6,depth_vert:U6,depth_frag:F6,distanceRGBA_vert:B6,distanceRGBA_frag:z6,equirect_vert:V6,equirect_frag:H6,linedashed_vert:G6,linedashed_frag:W6,meshbasic_vert:j6,meshbasic_frag:X6,meshlambert_vert:$6,meshlambert_frag:q6,meshmatcap_vert:Y6,meshmatcap_frag:Z6,meshnormal_vert:K6,meshnormal_frag:J6,meshphong_vert:Q6,meshphong_frag:e8,meshphysical_vert:t8,meshphysical_frag:n8,meshtoon_vert:r8,meshtoon_frag:i8,points_vert:s8,points_frag:o8,shadow_vert:a8,shadow_frag:l8,sprite_vert:c8,sprite_frag:u8},ht={common:{diffuse:{value:new gt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new pn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new pn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new pn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new pn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new pn},normalScale:{value:new Be(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new pn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new pn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new pn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new pn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new gt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new gt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0},uvTransform:{value:new pn}},sprite:{diffuse:{value:new gt(16777215)},opacity:{value:1},center:{value:new Be(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new pn},alphaMap:{value:null},alphaMapTransform:{value:new pn},alphaTest:{value:0}}},Ho={basic:{uniforms:Qi([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:Qi([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,ht.lights,{emissive:{value:new gt(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:Qi([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,ht.lights,{emissive:{value:new gt(0)},specular:{value:new gt(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:Qi([ht.common,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.roughnessmap,ht.metalnessmap,ht.fog,ht.lights,{emissive:{value:new gt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},toon:{uniforms:Qi([ht.common,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.gradientmap,ht.fog,ht.lights,{emissive:{value:new gt(0)}}]),vertexShader:fn.meshtoon_vert,fragmentShader:fn.meshtoon_frag},matcap:{uniforms:Qi([ht.common,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,{matcap:{value:null}}]),vertexShader:fn.meshmatcap_vert,fragmentShader:fn.meshmatcap_frag},points:{uniforms:Qi([ht.points,ht.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:Qi([ht.common,ht.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:Qi([ht.common,ht.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:Qi([ht.common,ht.bumpmap,ht.normalmap,ht.displacementmap,{opacity:{value:1}}]),vertexShader:fn.meshnormal_vert,fragmentShader:fn.meshnormal_frag},sprite:{uniforms:Qi([ht.sprite,ht.fog]),vertexShader:fn.sprite_vert,fragmentShader:fn.sprite_frag},background:{uniforms:{uvTransform:{value:new pn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fn.background_vert,fragmentShader:fn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:fn.backgroundCube_vert,fragmentShader:fn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:Qi([ht.common,ht.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:Qi([ht.lights,ht.fog,{color:{value:new gt(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};Ho.physical={uniforms:Qi([Ho.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new pn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new pn},clearcoatNormalScale:{value:new Be(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new pn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new pn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new pn},sheen:{value:0},sheenColor:{value:new gt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new pn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new pn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new pn},transmissionSamplerSize:{value:new Be},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new pn},attenuationDistance:{value:0},attenuationColor:{value:new gt(0)},specularColor:{value:new gt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new pn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new pn},anisotropyVector:{value:new Be},anisotropyMap:{value:null},anisotropyMapTransform:{value:new pn}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag};const q0={r:0,b:0,g:0};function h8(r,e,t,n,i,s,o){const a=new gt(0);let c=s===!0?0:1,h,f,m=null,g=0,y=null;function _(E,x){let A=!1,b=x.isScene===!0?x.background:null;b&&b.isTexture&&(b=(x.backgroundBlurriness>0?t:e).get(b)),b===null?M(a,c):b&&b.isColor&&(M(b,1),A=!0);const R=r.xr.getEnvironmentBlendMode();R==="additive"?n.buffers.color.setClear(0,0,0,1,o):R==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(r.autoClear||A)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),b&&(b.isCubeTexture||b.mapping===Df)?(f===void 0&&(f=new qn(new dh(1,1,1),new Ws({name:"BackgroundCubeMaterial",uniforms:Ef(Ho.backgroundCube.uniforms),vertexShader:Ho.backgroundCube.vertexShader,fragmentShader:Ho.backgroundCube.fragmentShader,side:ts,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(N,I,O){this.matrixWorld.copyPosition(O.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(f)),f.material.uniforms.envMap.value=b,f.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,f.material.toneMapped=Hn.getTransfer(b.colorSpace)!==tr,(m!==b||g!==b.version||y!==r.toneMapping)&&(f.material.needsUpdate=!0,m=b,g=b.version,y=r.toneMapping),f.layers.enableAll(),E.unshift(f,f.geometry,f.material,0,0,null)):b&&b.isTexture&&(h===void 0&&(h=new qn(new fh(2,2),new Ws({name:"BackgroundMaterial",uniforms:Ef(Ho.background.uniforms),vertexShader:Ho.background.vertexShader,fragmentShader:Ho.background.fragmentShader,side:gl,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(h)),h.material.uniforms.t2D.value=b,h.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,h.material.toneMapped=Hn.getTransfer(b.colorSpace)!==tr,b.matrixAutoUpdate===!0&&b.updateMatrix(),h.material.uniforms.uvTransform.value.copy(b.matrix),(m!==b||g!==b.version||y!==r.toneMapping)&&(h.material.needsUpdate=!0,m=b,g=b.version,y=r.toneMapping),h.layers.enableAll(),E.unshift(h,h.geometry,h.material,0,0,null))}function M(E,x){E.getRGB(q0,gL(r)),n.buffers.color.setClear(q0.r,q0.g,q0.b,x,o)}return{getClearColor:function(){return a},setClearColor:function(E,x=1){a.set(E),c=x,M(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(E){c=E,M(a,c)},render:_}}function d8(r,e,t,n){const i=r.getParameter(r.MAX_VERTEX_ATTRIBS),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||s!==null,a={},c=E(null);let h=c,f=!1;function m(Y,me,ue,Ee,Z){let se=!1;if(o){const ee=M(Ee,ue,me);h!==ee&&(h=ee,y(h.object)),se=x(Y,Ee,ue,Z),se&&A(Y,Ee,ue,Z)}else{const ee=me.wireframe===!0;(h.geometry!==Ee.id||h.program!==ue.id||h.wireframe!==ee)&&(h.geometry=Ee.id,h.program=ue.id,h.wireframe=ee,se=!0)}Z!==null&&t.update(Z,r.ELEMENT_ARRAY_BUFFER),(se||f)&&(f=!1,V(Y,me,ue,Ee),Z!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.get(Z).buffer))}function g(){return n.isWebGL2?r.createVertexArray():s.createVertexArrayOES()}function y(Y){return n.isWebGL2?r.bindVertexArray(Y):s.bindVertexArrayOES(Y)}function _(Y){return n.isWebGL2?r.deleteVertexArray(Y):s.deleteVertexArrayOES(Y)}function M(Y,me,ue){const Ee=ue.wireframe===!0;let Z=a[Y.id];Z===void 0&&(Z={},a[Y.id]=Z);let se=Z[me.id];se===void 0&&(se={},Z[me.id]=se);let ee=se[Ee];return ee===void 0&&(ee=E(g()),se[Ee]=ee),ee}function E(Y){const me=[],ue=[],Ee=[];for(let Z=0;Z<i;Z++)me[Z]=0,ue[Z]=0,Ee[Z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:me,enabledAttributes:ue,attributeDivisors:Ee,object:Y,attributes:{},index:null}}function x(Y,me,ue,Ee){const Z=h.attributes,se=me.attributes;let ee=0;const H=ue.getAttributes();for(const ne in H)if(H[ne].location>=0){const xe=Z[ne];let ke=se[ne];if(ke===void 0&&(ne==="instanceMatrix"&&Y.instanceMatrix&&(ke=Y.instanceMatrix),ne==="instanceColor"&&Y.instanceColor&&(ke=Y.instanceColor)),xe===void 0||xe.attribute!==ke||ke&&xe.data!==ke.data)return!0;ee++}return h.attributesNum!==ee||h.index!==Ee}function A(Y,me,ue,Ee){const Z={},se=me.attributes;let ee=0;const H=ue.getAttributes();for(const ne in H)if(H[ne].location>=0){let xe=se[ne];xe===void 0&&(ne==="instanceMatrix"&&Y.instanceMatrix&&(xe=Y.instanceMatrix),ne==="instanceColor"&&Y.instanceColor&&(xe=Y.instanceColor));const ke={};ke.attribute=xe,xe&&xe.data&&(ke.data=xe.data),Z[ne]=ke,ee++}h.attributes=Z,h.attributesNum=ee,h.index=Ee}function b(){const Y=h.newAttributes;for(let me=0,ue=Y.length;me<ue;me++)Y[me]=0}function R(Y){N(Y,0)}function N(Y,me){const ue=h.newAttributes,Ee=h.enabledAttributes,Z=h.attributeDivisors;ue[Y]=1,Ee[Y]===0&&(r.enableVertexAttribArray(Y),Ee[Y]=1),Z[Y]!==me&&((n.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Y,me),Z[Y]=me)}function I(){const Y=h.newAttributes,me=h.enabledAttributes;for(let ue=0,Ee=me.length;ue<Ee;ue++)me[ue]!==Y[ue]&&(r.disableVertexAttribArray(ue),me[ue]=0)}function O(Y,me,ue,Ee,Z,se,ee){ee===!0?r.vertexAttribIPointer(Y,me,ue,Z,se):r.vertexAttribPointer(Y,me,ue,Ee,Z,se)}function V(Y,me,ue,Ee){if(n.isWebGL2===!1&&(Y.isInstancedMesh||Ee.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const Z=Ee.attributes,se=ue.getAttributes(),ee=me.defaultAttributeValues;for(const H in se){const ne=se[H];if(ne.location>=0){let ce=Z[H];if(ce===void 0&&(H==="instanceMatrix"&&Y.instanceMatrix&&(ce=Y.instanceMatrix),H==="instanceColor"&&Y.instanceColor&&(ce=Y.instanceColor)),ce!==void 0){const xe=ce.normalized,ke=ce.itemSize,Re=t.get(ce);if(Re===void 0)continue;const ze=Re.buffer,Ke=Re.type,st=Re.bytesPerElement,it=n.isWebGL2===!0&&(Ke===r.INT||Ke===r.UNSIGNED_INT||ce.gpuType===ky);if(ce.isInterleavedBufferAttribute){const ft=ce.data,oe=ft.stride,Xe=ce.offset;if(ft.isInstancedInterleavedBuffer){for(let Ue=0;Ue<ne.locationSize;Ue++)N(ne.location+Ue,ft.meshPerAttribute);Y.isInstancedMesh!==!0&&Ee._maxInstanceCount===void 0&&(Ee._maxInstanceCount=ft.meshPerAttribute*ft.count)}else for(let Ue=0;Ue<ne.locationSize;Ue++)R(ne.location+Ue);r.bindBuffer(r.ARRAY_BUFFER,ze);for(let Ue=0;Ue<ne.locationSize;Ue++)O(ne.location+Ue,ke/ne.locationSize,Ke,xe,oe*st,(Xe+ke/ne.locationSize*Ue)*st,it)}else{if(ce.isInstancedBufferAttribute){for(let ft=0;ft<ne.locationSize;ft++)N(ne.location+ft,ce.meshPerAttribute);Y.isInstancedMesh!==!0&&Ee._maxInstanceCount===void 0&&(Ee._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let ft=0;ft<ne.locationSize;ft++)R(ne.location+ft);r.bindBuffer(r.ARRAY_BUFFER,ze);for(let ft=0;ft<ne.locationSize;ft++)O(ne.location+ft,ke/ne.locationSize,Ke,xe,ke*st,ke/ne.locationSize*ft*st,it)}}else if(ee!==void 0){const xe=ee[H];if(xe!==void 0)switch(xe.length){case 2:r.vertexAttrib2fv(ne.location,xe);break;case 3:r.vertexAttrib3fv(ne.location,xe);break;case 4:r.vertexAttrib4fv(ne.location,xe);break;default:r.vertexAttrib1fv(ne.location,xe)}}}}I()}function k(){le();for(const Y in a){const me=a[Y];for(const ue in me){const Ee=me[ue];for(const Z in Ee)_(Ee[Z].object),delete Ee[Z];delete me[ue]}delete a[Y]}}function F(Y){if(a[Y.id]===void 0)return;const me=a[Y.id];for(const ue in me){const Ee=me[ue];for(const Z in Ee)_(Ee[Z].object),delete Ee[Z];delete me[ue]}delete a[Y.id]}function Q(Y){for(const me in a){const ue=a[me];if(ue[Y.id]===void 0)continue;const Ee=ue[Y.id];for(const Z in Ee)_(Ee[Z].object),delete Ee[Z];delete ue[Y.id]}}function le(){_e(),f=!0,h!==c&&(h=c,y(h.object))}function _e(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:m,reset:le,resetDefaultState:_e,dispose:k,releaseStatesOfGeometry:F,releaseStatesOfProgram:Q,initAttributes:b,enableAttribute:R,disableUnusedAttributes:I}}function f8(r,e,t,n){const i=n.isWebGL2;let s;function o(f){s=f}function a(f,m){r.drawArrays(s,f,m),t.update(m,s,1)}function c(f,m,g){if(g===0)return;let y,_;if(i)y=r,_="drawArraysInstanced";else if(y=e.get("ANGLE_instanced_arrays"),_="drawArraysInstancedANGLE",y===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[_](s,f,m,g),t.update(m,s,g)}function h(f,m,g){if(g===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let _=0;_<g;_++)this.render(f[_],m[_]);else{y.multiDrawArraysWEBGL(s,f,0,m,0,g);let _=0;for(let M=0;M<g;M++)_+=m[M];t.update(_,s,1)}}this.setMode=o,this.render=a,this.renderInstances=c,this.renderMultiDraw=h}function p8(r,e,t){let n;function i(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");n=r.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(O){if(O==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&r.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const c=s(a);c!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",c,"instead."),a=c);const h=o||e.has("WEBGL_draw_buffers"),f=t.logarithmicDepthBuffer===!0,m=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),g=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=r.getParameter(r.MAX_TEXTURE_SIZE),_=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),M=r.getParameter(r.MAX_VERTEX_ATTRIBS),E=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),x=r.getParameter(r.MAX_VARYING_VECTORS),A=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),b=g>0,R=o||e.has("OES_texture_float"),N=b&&R,I=o?r.getParameter(r.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:h,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:f,maxTextures:m,maxVertexTextures:g,maxTextureSize:y,maxCubemapSize:_,maxAttributes:M,maxVertexUniforms:E,maxVaryings:x,maxFragmentUniforms:A,vertexTextures:b,floatFragmentTextures:R,floatVertexTextures:N,maxSamples:I}}function m8(r){const e=this;let t=null,n=0,i=!1,s=!1;const o=new al,a=new pn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,g){const y=m.length!==0||g||n!==0||i;return i=g,n=m.length,y},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(m,g){t=f(m,g,0)},this.setState=function(m,g,y){const _=m.clippingPlanes,M=m.clipIntersection,E=m.clipShadows,x=r.get(m);if(!i||_===null||_.length===0||s&&!E)s?f(null):h();else{const A=s?0:n,b=A*4;let R=x.clippingState||null;c.value=R,R=f(_,g,b,y);for(let N=0;N!==b;++N)R[N]=t[N];x.clippingState=R,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=A}};function h(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function f(m,g,y,_){const M=m!==null?m.length:0;let E=null;if(M!==0){if(E=c.value,_!==!0||E===null){const x=y+M*4,A=g.matrixWorldInverse;a.getNormalMatrix(A),(E===null||E.length<x)&&(E=new Float32Array(x));for(let b=0,R=y;b!==M;++b,R+=4)o.copy(m[b]).applyMatrix4(A,a),o.normal.toArray(E,R),E[R+3]=o.constant}c.value=E,c.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,E}}function g8(r){let e=new WeakMap;function t(o,a){return a===nh?o.mapping=ga:a===Rm&&(o.mapping=Cc),o}function n(o){if(o&&o.isTexture){const a=o.mapping;if(a===nh||a===Rm)if(e.has(o)){const c=e.get(o).texture;return t(c,o.mapping)}else{const c=o.image;if(c&&c.height>0){const h=new XS(c.height/2);return h.fromEquirectangularTexture(r,o),e.set(o,h),o.addEventListener("dispose",i),t(h.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class fa extends lg{constructor(e=-1,t=1,n=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=i+t,c=i-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,o=s+h*this.view.width,a-=f*this.view.offsetY,c=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const af=4,Fb=[.125,.215,.35,.446,.526,.582],Vu=20,Rx=new fa,Bb=new gt;let Lx=null,Ix=0,kx=0;const Bu=(1+Math.sqrt(5))/2,Fd=1/Bu,zb=[new q(1,1,1),new q(-1,1,1),new q(1,1,-1),new q(-1,1,-1),new q(0,Bu,Fd),new q(0,Bu,-Fd),new q(Fd,0,Bu),new q(-Fd,0,Bu),new q(Bu,Fd,0),new q(-Bu,Fd,0)];class R1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){Lx=this._renderer.getRenderTarget(),Ix=this._renderer.getActiveCubeFace(),kx=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Gb(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Hb(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Lx,Ix,kx),e.scissorTest=!1,Y0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ga||e.mapping===Cc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Lx=this._renderer.getRenderTarget(),Ix=this._renderer.getActiveCubeFace(),kx=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Dn,minFilter:Dn,generateMipmaps:!1,type:di,format:Wr,colorSpace:Hs,depthBuffer:!1},i=Vb(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Vb(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=v8(s)),this._blurMaterial=y8(s,e,t)}return i}_compileMaterial(e){const t=new qn(this._lodPlanes[0],e);this._renderer.compile(t,Rx)}_sceneToCubeUV(e,t,n,i){const a=new Mr(90,1,t,n),c=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],f=this._renderer,m=f.autoClear,g=f.toneMapping;f.getClearColor(Bb),f.toneMapping=da,f.autoClear=!1;const y=new xl({name:"PMREM.Background",side:ts,depthWrite:!1,depthTest:!1}),_=new qn(new dh,y);let M=!1;const E=e.background;E?E.isColor&&(y.color.copy(E),e.background=null,M=!0):(y.color.copy(Bb),M=!0);for(let x=0;x<6;x++){const A=x%3;A===0?(a.up.set(0,c[x],0),a.lookAt(h[x],0,0)):A===1?(a.up.set(0,0,c[x]),a.lookAt(0,h[x],0)):(a.up.set(0,c[x],0),a.lookAt(0,0,h[x]));const b=this._cubeSize;Y0(i,A*b,x>2?b:0,b,b),f.setRenderTarget(i),M&&f.render(_,a),f.render(e,a)}_.geometry.dispose(),_.material.dispose(),f.toneMapping=g,f.autoClear=m,e.background=E}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===ga||e.mapping===Cc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Gb()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Hb());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new qn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const c=this._cubeSize;Y0(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(o,Rx)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=zb[(i-1)%zb.length];this._blur(e,i-1,i,s,o)}t.autoClear=n}_blur(e,t,n,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",s),this._halfBlur(o,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,o,a){const c=this._renderer,h=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,m=new qn(this._lodPlanes[i],h),g=h.uniforms,y=this._sizeLods[n]-1,_=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*Vu-1),M=s/_,E=isFinite(s)?1+Math.floor(f*M):Vu;E>Vu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${Vu}`);const x=[];let A=0;for(let O=0;O<Vu;++O){const V=O/M,k=Math.exp(-V*V/2);x.push(k),O===0?A+=k:O<E&&(A+=2*k)}for(let O=0;O<x.length;O++)x[O]=x[O]/A;g.envMap.value=e.texture,g.samples.value=E,g.weights.value=x,g.latitudinal.value=o==="latitudinal",a&&(g.poleAxis.value=a);const{_lodMax:b}=this;g.dTheta.value=_,g.mipInt.value=b-n;const R=this._sizeLods[i],N=3*R*(i>b-af?i-b+af:0),I=4*(this._cubeSize-R);Y0(t,N,I,3*R,2*R),c.setRenderTarget(t),c.render(m,Rx)}}function v8(r){const e=[],t=[],n=[];let i=r;const s=r-af+1+Fb.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let c=1/a;o>r-af?c=Fb[o-r+af-1]:o===0&&(c=0),n.push(c);const h=1/(a-2),f=-h,m=1+h,g=[f,f,m,f,m,m,f,f,m,m,f,m],y=6,_=6,M=3,E=2,x=1,A=new Float32Array(M*_*y),b=new Float32Array(E*_*y),R=new Float32Array(x*_*y);for(let I=0;I<y;I++){const O=I%3*2/3-1,V=I>2?0:-1,k=[O,V,0,O+2/3,V,0,O+2/3,V+1,0,O,V,0,O+2/3,V+1,0,O,V+1,0];A.set(k,M*_*I),b.set(g,E*_*I);const F=[I,I,I,I,I,I];R.set(F,x*_*I)}const N=new sn;N.setAttribute("position",new Wn(A,M)),N.setAttribute("uv",new Wn(b,E)),N.setAttribute("faceIndex",new Wn(R,x)),e.push(N),i>af&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function Vb(r,e,t){const n=new Gs(r,e,t);return n.texture.mapping=Df,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Y0(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function y8(r,e,t){const n=new Float32Array(Vu),i=new q(0,1,0);return new Ws({name:"SphericalGaussianBlur",defines:{n:Vu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:$S(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ha,depthTest:!1,depthWrite:!1})}function Hb(){return new Ws({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:$S(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ha,depthTest:!1,depthWrite:!1})}function Gb(){return new Ws({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:$S(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ha,depthTest:!1,depthWrite:!1})}function $S(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function _8(r){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const c=a.mapping,h=c===nh||c===Rm,f=c===ga||c===Cc;if(h||f)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let m=e.get(a);return t===null&&(t=new R1(r)),m=h?t.fromEquirectangular(a,m):t.fromCubemap(a,m),e.set(a,m),m.texture}else{if(e.has(a))return e.get(a).texture;{const m=a.image;if(h&&m&&m.height>0||f&&m&&i(m)){t===null&&(t=new R1(r));const g=h?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,g),a.addEventListener("dispose",s),g.texture}else return null}}}return a}function i(a){let c=0;const h=6;for(let f=0;f<h;f++)a[f]!==void 0&&c++;return c===h}function s(a){const c=a.target;c.removeEventListener("dispose",s);const h=e.get(c);h!==void 0&&(e.delete(c),h.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function x8(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const i=t(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function w8(r,e,t,n){const i={},s=new WeakMap;function o(m){const g=m.target;g.index!==null&&e.remove(g.index);for(const _ in g.attributes)e.remove(g.attributes[_]);for(const _ in g.morphAttributes){const M=g.morphAttributes[_];for(let E=0,x=M.length;E<x;E++)e.remove(M[E])}g.removeEventListener("dispose",o),delete i[g.id];const y=s.get(g);y&&(e.remove(y),s.delete(g)),n.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,t.memory.geometries--}function a(m,g){return i[g.id]===!0||(g.addEventListener("dispose",o),i[g.id]=!0,t.memory.geometries++),g}function c(m){const g=m.attributes;for(const _ in g)e.update(g[_],r.ARRAY_BUFFER);const y=m.morphAttributes;for(const _ in y){const M=y[_];for(let E=0,x=M.length;E<x;E++)e.update(M[E],r.ARRAY_BUFFER)}}function h(m){const g=[],y=m.index,_=m.attributes.position;let M=0;if(y!==null){const A=y.array;M=y.version;for(let b=0,R=A.length;b<R;b+=3){const N=A[b+0],I=A[b+1],O=A[b+2];g.push(N,I,I,O,O,N)}}else if(_!==void 0){const A=_.array;M=_.version;for(let b=0,R=A.length/3-1;b<R;b+=3){const N=b+0,I=b+1,O=b+2;g.push(N,I,I,O,O,N)}}else return;const E=new(dL(g)?jS:Uy)(g,1);E.version=M;const x=s.get(m);x&&e.remove(x),s.set(m,E)}function f(m){const g=s.get(m);if(g){const y=m.index;y!==null&&g.version<y.version&&h(m)}else h(m);return s.get(m)}return{get:a,update:c,getWireframeAttribute:f}}function S8(r,e,t,n){const i=n.isWebGL2;let s;function o(y){s=y}let a,c;function h(y){a=y.type,c=y.bytesPerElement}function f(y,_){r.drawElements(s,_,a,y*c),t.update(_,s,1)}function m(y,_,M){if(M===0)return;let E,x;if(i)E=r,x="drawElementsInstanced";else if(E=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",E===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}E[x](s,_,a,y*c,M),t.update(_,s,M)}function g(y,_,M){if(M===0)return;const E=e.get("WEBGL_multi_draw");if(E===null)for(let x=0;x<M;x++)this.render(y[x]/c,_[x]);else{E.multiDrawElementsWEBGL(s,_,0,a,y,0,M);let x=0;for(let A=0;A<M;A++)x+=_[A];t.update(x,s,1)}}this.setMode=o,this.setIndex=h,this.render=f,this.renderInstances=m,this.renderMultiDraw=g}function E8(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,a){switch(t.calls++,o){case r.TRIANGLES:t.triangles+=a*(s/3);break;case r.LINES:t.lines+=a*(s/2);break;case r.LINE_STRIP:t.lines+=a*(s-1);break;case r.LINE_LOOP:t.lines+=a*s;break;case r.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function M8(r,e){return r[0]-e[0]}function T8(r,e){return Math.abs(e[1])-Math.abs(r[1])}function b8(r,e,t){const n={},i=new Float32Array(8),s=new WeakMap,o=new Ln,a=[];for(let h=0;h<8;h++)a[h]=[h,0];function c(h,f,m){const g=h.morphTargetInfluences;if(e.isWebGL2===!0){const _=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,M=_!==void 0?_.length:0;let E=s.get(f);if(E===void 0||E.count!==M){let me=function(){_e.dispose(),s.delete(f),f.removeEventListener("dispose",me)};var y=me;E!==void 0&&E.texture.dispose();const b=f.morphAttributes.position!==void 0,R=f.morphAttributes.normal!==void 0,N=f.morphAttributes.color!==void 0,I=f.morphAttributes.position||[],O=f.morphAttributes.normal||[],V=f.morphAttributes.color||[];let k=0;b===!0&&(k=1),R===!0&&(k=2),N===!0&&(k=3);let F=f.attributes.position.count*k,Q=1;F>e.maxTextureSize&&(Q=Math.ceil(F/e.maxTextureSize),F=e.maxTextureSize);const le=new Float32Array(F*Q*4*M),_e=new Ny(le,F,Q,M);_e.type=jr,_e.needsUpdate=!0;const Y=k*4;for(let ue=0;ue<M;ue++){const Ee=I[ue],Z=O[ue],se=V[ue],ee=F*Q*4*ue;for(let H=0;H<Ee.count;H++){const ne=H*Y;b===!0&&(o.fromBufferAttribute(Ee,H),le[ee+ne+0]=o.x,le[ee+ne+1]=o.y,le[ee+ne+2]=o.z,le[ee+ne+3]=0),R===!0&&(o.fromBufferAttribute(Z,H),le[ee+ne+4]=o.x,le[ee+ne+5]=o.y,le[ee+ne+6]=o.z,le[ee+ne+7]=0),N===!0&&(o.fromBufferAttribute(se,H),le[ee+ne+8]=o.x,le[ee+ne+9]=o.y,le[ee+ne+10]=o.z,le[ee+ne+11]=se.itemSize===4?o.w:1)}}E={count:M,texture:_e,size:new Be(F,Q)},s.set(f,E),f.addEventListener("dispose",me)}let x=0;for(let b=0;b<g.length;b++)x+=g[b];const A=f.morphTargetsRelative?1:1-x;m.getUniforms().setValue(r,"morphTargetBaseInfluence",A),m.getUniforms().setValue(r,"morphTargetInfluences",g),m.getUniforms().setValue(r,"morphTargetsTexture",E.texture,t),m.getUniforms().setValue(r,"morphTargetsTextureSize",E.size)}else{const _=g===void 0?0:g.length;let M=n[f.id];if(M===void 0||M.length!==_){M=[];for(let R=0;R<_;R++)M[R]=[R,0];n[f.id]=M}for(let R=0;R<_;R++){const N=M[R];N[0]=R,N[1]=g[R]}M.sort(T8);for(let R=0;R<8;R++)R<_&&M[R][1]?(a[R][0]=M[R][0],a[R][1]=M[R][1]):(a[R][0]=Number.MAX_SAFE_INTEGER,a[R][1]=0);a.sort(M8);const E=f.morphAttributes.position,x=f.morphAttributes.normal;let A=0;for(let R=0;R<8;R++){const N=a[R],I=N[0],O=N[1];I!==Number.MAX_SAFE_INTEGER&&O?(E&&f.getAttribute("morphTarget"+R)!==E[I]&&f.setAttribute("morphTarget"+R,E[I]),x&&f.getAttribute("morphNormal"+R)!==x[I]&&f.setAttribute("morphNormal"+R,x[I]),i[R]=O,A+=O):(E&&f.hasAttribute("morphTarget"+R)===!0&&f.deleteAttribute("morphTarget"+R),x&&f.hasAttribute("morphNormal"+R)===!0&&f.deleteAttribute("morphNormal"+R),i[R]=0)}const b=f.morphTargetsRelative?1:1-A;m.getUniforms().setValue(r,"morphTargetBaseInfluence",b),m.getUniforms().setValue(r,"morphTargetInfluences",i)}}return{update:c}}function A8(r,e,t,n){let i=new WeakMap;function s(c){const h=n.render.frame,f=c.geometry,m=e.get(c,f);if(i.get(m)!==h&&(e.update(m),i.set(m,h)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),i.get(c)!==h&&(t.update(c.instanceMatrix,r.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,r.ARRAY_BUFFER),i.set(c,h))),c.isSkinnedMesh){const g=c.skeleton;i.get(g)!==h&&(g.update(),i.set(g,h))}return m}function o(){i=new WeakMap}function a(c){const h=c.target;h.removeEventListener("dispose",a),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:s,dispose:o}}class qS extends Gn{constructor(e,t,n,i,s,o,a,c,h,f){if(f=f!==void 0?f:Sc,f!==Sc&&f!==ih)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&f===Sc&&(n=la),n===void 0&&f===ih&&(n=wc),super(null,i,s,o,a,c,f,n,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Lr,this.minFilter=c!==void 0?c:Lr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const xL=new Gn,wL=new qS(1,1);wL.compareFunction=VS;const SL=new Ny,EL=new WS,ML=new cg,Wb=[],jb=[],Xb=new Float32Array(16),$b=new Float32Array(9),qb=new Float32Array(4);function Of(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=Wb[i];if(s===void 0&&(s=new Float32Array(i),Wb[i]=s),e!==0){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,r[o].toArray(s,a)}return s}function ti(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function ni(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function Fy(r,e){let t=jb[e];t===void 0&&(t=new Int32Array(e),jb[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function C8(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function P8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ti(t,e))return;r.uniform2fv(this.addr,e),ni(t,e)}}function R8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ti(t,e))return;r.uniform3fv(this.addr,e),ni(t,e)}}function L8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ti(t,e))return;r.uniform4fv(this.addr,e),ni(t,e)}}function I8(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(ti(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),ni(t,e)}else{if(ti(t,n))return;qb.set(n),r.uniformMatrix2fv(this.addr,!1,qb),ni(t,n)}}function k8(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(ti(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),ni(t,e)}else{if(ti(t,n))return;$b.set(n),r.uniformMatrix3fv(this.addr,!1,$b),ni(t,n)}}function D8(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(ti(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),ni(t,e)}else{if(ti(t,n))return;Xb.set(n),r.uniformMatrix4fv(this.addr,!1,Xb),ni(t,n)}}function O8(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function N8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ti(t,e))return;r.uniform2iv(this.addr,e),ni(t,e)}}function U8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ti(t,e))return;r.uniform3iv(this.addr,e),ni(t,e)}}function F8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ti(t,e))return;r.uniform4iv(this.addr,e),ni(t,e)}}function B8(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function z8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ti(t,e))return;r.uniform2uiv(this.addr,e),ni(t,e)}}function V8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ti(t,e))return;r.uniform3uiv(this.addr,e),ni(t,e)}}function H8(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ti(t,e))return;r.uniform4uiv(this.addr,e),ni(t,e)}}function G8(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i);const s=this.type===r.SAMPLER_2D_SHADOW?wL:xL;t.setTexture2D(e||s,i)}function W8(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||EL,i)}function j8(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||ML,i)}function X8(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||SL,i)}function $8(r){switch(r){case 5126:return C8;case 35664:return P8;case 35665:return R8;case 35666:return L8;case 35674:return I8;case 35675:return k8;case 35676:return D8;case 5124:case 35670:return O8;case 35667:case 35671:return N8;case 35668:case 35672:return U8;case 35669:case 35673:return F8;case 5125:return B8;case 36294:return z8;case 36295:return V8;case 36296:return H8;case 35678:case 36198:case 36298:case 36306:case 35682:return G8;case 35679:case 36299:case 36307:return W8;case 35680:case 36300:case 36308:case 36293:return j8;case 36289:case 36303:case 36311:case 36292:return X8}}function q8(r,e){r.uniform1fv(this.addr,e)}function Y8(r,e){const t=Of(e,this.size,2);r.uniform2fv(this.addr,t)}function Z8(r,e){const t=Of(e,this.size,3);r.uniform3fv(this.addr,t)}function K8(r,e){const t=Of(e,this.size,4);r.uniform4fv(this.addr,t)}function J8(r,e){const t=Of(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function Q8(r,e){const t=Of(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function eG(r,e){const t=Of(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function tG(r,e){r.uniform1iv(this.addr,e)}function nG(r,e){r.uniform2iv(this.addr,e)}function rG(r,e){r.uniform3iv(this.addr,e)}function iG(r,e){r.uniform4iv(this.addr,e)}function sG(r,e){r.uniform1uiv(this.addr,e)}function oG(r,e){r.uniform2uiv(this.addr,e)}function aG(r,e){r.uniform3uiv(this.addr,e)}function lG(r,e){r.uniform4uiv(this.addr,e)}function cG(r,e,t){const n=this.cache,i=e.length,s=Fy(t,i);ti(n,s)||(r.uniform1iv(this.addr,s),ni(n,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||xL,s[o])}function uG(r,e,t){const n=this.cache,i=e.length,s=Fy(t,i);ti(n,s)||(r.uniform1iv(this.addr,s),ni(n,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||EL,s[o])}function hG(r,e,t){const n=this.cache,i=e.length,s=Fy(t,i);ti(n,s)||(r.uniform1iv(this.addr,s),ni(n,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||ML,s[o])}function dG(r,e,t){const n=this.cache,i=e.length,s=Fy(t,i);ti(n,s)||(r.uniform1iv(this.addr,s),ni(n,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||SL,s[o])}function fG(r){switch(r){case 5126:return q8;case 35664:return Y8;case 35665:return Z8;case 35666:return K8;case 35674:return J8;case 35675:return Q8;case 35676:return eG;case 5124:case 35670:return tG;case 35667:case 35671:return nG;case 35668:case 35672:return rG;case 35669:case 35673:return iG;case 5125:return sG;case 36294:return oG;case 36295:return aG;case 36296:return lG;case 35678:case 36198:case 36298:case 36306:case 35682:return cG;case 35679:case 36299:case 36307:return uG;case 35680:case 36300:case 36308:case 36293:return hG;case 36289:case 36303:case 36311:case 36292:return dG}}class pG{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=$8(t.type)}}class mG{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=fG(t.type)}}class gG{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],n)}}}const Dx=/(\w+)(\])?(\[|\.)?/g;function Yb(r,e){r.seq.push(e),r.map[e.id]=e}function vG(r,e,t){const n=r.name,i=n.length;for(Dx.lastIndex=0;;){const s=Dx.exec(n),o=Dx.lastIndex;let a=s[1];const c=s[2]==="]",h=s[3];if(c&&(a=a|0),h===void 0||h==="["&&o+2===i){Yb(t,h===void 0?new pG(a,r,e):new mG(a,r,e));break}else{let m=t.map[a];m===void 0&&(m=new gG(a),Yb(t,m)),t=m}}}class zv{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);vG(s,o,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],c=n[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&n.push(o)}return n}}function Zb(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const yG=37297;let _G=0;function xG(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}function wG(r){const e=Hn.getPrimaries(Hn.workingColorSpace),t=Hn.getPrimaries(r);let n;switch(e===t?n="":e===Um&&t===Nm?n="LinearDisplayP3ToLinearSRGB":e===Nm&&t===Um&&(n="LinearSRGBToLinearDisplayP3"),r){case Hs:case ag:return[n,"LinearTransferOETF"];case Hr:case Oy:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[n,"LinearTransferOETF"]}}function Kb(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+xG(r.getShaderSource(e),o)}else return i}function SG(r,e){const t=wG(e);return`vec4 ${r}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function EG(r,e){let t;switch(e){case H2:t="Linear";break;case G2:t="Reinhard";break;case W2:t="OptimizedCineon";break;case CS:t="ACESFilmic";break;case X2:t="AgX";break;case j2:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function MG(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.normalMapTangentSpace||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(lf).join(`
`)}function TG(r){return[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(lf).join(`
`)}function bG(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function AG(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),o=s.name;let a=1;s.type===r.FLOAT_MAT2&&(a=2),s.type===r.FLOAT_MAT3&&(a=3),s.type===r.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:r.getAttribLocation(e,o),locationSize:a}}return t}function lf(r){return r!==""}function Jb(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Qb(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const CG=/^[ \t]*#include +<([\w\d./]+)>/gm;function L1(r){return r.replace(CG,RG)}const PG=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function RG(r,e){let t=fn[e];if(t===void 0){const n=PG.get(e);if(n!==void 0)t=fn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return L1(t)}const LG=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function eA(r){return r.replace(LG,IG)}function IG(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function tA(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function kG(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===Ly?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===pm?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===zo&&(e="SHADOWMAP_TYPE_VSM"),e}function DG(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case ga:case Cc:e="ENVMAP_TYPE_CUBE";break;case Df:e="ENVMAP_TYPE_CUBE_UV";break}return e}function OG(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Cc:e="ENVMAP_MODE_REFRACTION";break}return e}function NG(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case og:e="ENVMAP_BLENDING_MULTIPLY";break;case z2:e="ENVMAP_BLENDING_MIX";break;case V2:e="ENVMAP_BLENDING_ADD";break}return e}function UG(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function FG(r,e,t,n){const i=r.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const c=kG(t),h=DG(t),f=OG(t),m=NG(t),g=UG(t),y=t.isWebGL2?"":MG(t),_=TG(t),M=bG(s),E=i.createProgram();let x,A,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(lf).join(`
`),x.length>0&&(x+=`
`),A=[y,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(lf).join(`
`),A.length>0&&(A+=`
`)):(x=[tA(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(lf).join(`
`),A=[y,tA(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+f:"",t.envMap?"#define "+m:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==da?"#define TONE_MAPPING":"",t.toneMapping!==da?fn.tonemapping_pars_fragment:"",t.toneMapping!==da?EG("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",fn.colorspace_pars_fragment,SG("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(lf).join(`
`)),o=L1(o),o=Jb(o,t),o=Qb(o,t),a=L1(a),a=Jb(a,t),a=Qb(a,t),o=eA(o),a=eA(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,x=[_,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,A=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===C1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===C1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+A);const R=b+x+o,N=b+A+a,I=Zb(i,i.VERTEX_SHADER,R),O=Zb(i,i.FRAGMENT_SHADER,N);i.attachShader(E,I),i.attachShader(E,O),t.index0AttributeName!==void 0?i.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(E,0,"position"),i.linkProgram(E);function V(le){if(r.debug.checkShaderErrors){const _e=i.getProgramInfoLog(E).trim(),Y=i.getShaderInfoLog(I).trim(),me=i.getShaderInfoLog(O).trim();let ue=!0,Ee=!0;if(i.getProgramParameter(E,i.LINK_STATUS)===!1)if(ue=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,E,I,O);else{const Z=Kb(i,I,"vertex"),se=Kb(i,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(E,i.VALIDATE_STATUS)+`

Program Info Log: `+_e+`
`+Z+`
`+se)}else _e!==""?console.warn("THREE.WebGLProgram: Program Info Log:",_e):(Y===""||me==="")&&(Ee=!1);Ee&&(le.diagnostics={runnable:ue,programLog:_e,vertexShader:{log:Y,prefix:x},fragmentShader:{log:me,prefix:A}})}i.deleteShader(I),i.deleteShader(O),k=new zv(i,E),F=AG(i,E)}let k;this.getUniforms=function(){return k===void 0&&V(this),k};let F;this.getAttributes=function(){return F===void 0&&V(this),F};let Q=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Q===!1&&(Q=i.getProgramParameter(E,yG)),Q},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(E),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=_G++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=I,this.fragmentShader=O,this}let BG=0;class zG{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new VG(e),t.set(e,n)),n}}class VG{constructor(e){this.id=BG++,this.code=e,this.usedTimes=0}}function HG(r,e,t,n,i,s,o){const a=new eh,c=new zG,h=[],f=i.isWebGL2,m=i.logarithmicDepthBuffer,g=i.vertexTextures;let y=i.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(k){return k===0?"uv":`uv${k}`}function E(k,F,Q,le,_e){const Y=le.fog,me=_e.geometry,ue=k.isMeshStandardMaterial?le.environment:null,Ee=(k.isMeshStandardMaterial?t:e).get(k.envMap||ue),Z=Ee&&Ee.mapping===Df?Ee.image.height:null,se=_[k.type];k.precision!==null&&(y=i.getMaxPrecision(k.precision),y!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",y,"instead."));const ee=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,H=ee!==void 0?ee.length:0;let ne=0;me.morphAttributes.position!==void 0&&(ne=1),me.morphAttributes.normal!==void 0&&(ne=2),me.morphAttributes.color!==void 0&&(ne=3);let ce,xe,ke,Re;if(se){const Fn=Ho[se];ce=Fn.vertexShader,xe=Fn.fragmentShader}else ce=k.vertexShader,xe=k.fragmentShader,c.update(k),ke=c.getVertexShaderID(k),Re=c.getFragmentShaderID(k);const ze=r.getRenderTarget(),Ke=_e.isInstancedMesh===!0,st=_e.isBatchedMesh===!0,it=!!k.map,ft=!!k.matcap,oe=!!Ee,Xe=!!k.aoMap,Ue=!!k.lightMap,Je=!!k.bumpMap,Fe=!!k.normalMap,Rt=!!k.displacementMap,dt=!!k.emissiveMap,X=!!k.metalnessMap,G=!!k.roughnessMap,we=k.anisotropy>0,We=k.clearcoat>0,He=k.iridescence>0,Ve=k.sheen>0,Mt=k.transmission>0,at=we&&!!k.anisotropyMap,vt=We&&!!k.clearcoatMap,It=We&&!!k.clearcoatNormalMap,Vt=We&&!!k.clearcoatRoughnessMap,Ge=He&&!!k.iridescenceMap,tn=He&&!!k.iridescenceThicknessMap,en=Ve&&!!k.sheenColorMap,Ft=Ve&&!!k.sheenRoughnessMap,yt=!!k.specularMap,xt=!!k.specularColorMap,he=!!k.specularIntensityMap,Ne=Mt&&!!k.transmissionMap,tt=Mt&&!!k.thicknessMap,pt=!!k.gradientMap,Se=!!k.alphaMap,de=k.alphaTest>0,et=!!k.alphaHash,ct=!!k.extensions,Ut=!!me.attributes.uv1,At=!!me.attributes.uv2,on=!!me.attributes.uv3;let gn=da;return k.toneMapped&&(ze===null||ze.isXRRenderTarget===!0)&&(gn=r.toneMapping),{isWebGL2:f,shaderID:se,shaderType:k.type,shaderName:k.name,vertexShader:ce,fragmentShader:xe,defines:k.defines,customVertexShaderID:ke,customFragmentShaderID:Re,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:y,batching:st,instancing:Ke,instancingColor:Ke&&_e.instanceColor!==null,supportsVertexTextures:g,outputColorSpace:ze===null?r.outputColorSpace:ze.isXRRenderTarget===!0?ze.texture.colorSpace:Hs,map:it,matcap:ft,envMap:oe,envMapMode:oe&&Ee.mapping,envMapCubeUVHeight:Z,aoMap:Xe,lightMap:Ue,bumpMap:Je,normalMap:Fe,displacementMap:g&&Rt,emissiveMap:dt,normalMapObjectSpace:Fe&&k.normalMapType===iL,normalMapTangentSpace:Fe&&k.normalMapType===Ic,metalnessMap:X,roughnessMap:G,anisotropy:we,anisotropyMap:at,clearcoat:We,clearcoatMap:vt,clearcoatNormalMap:It,clearcoatRoughnessMap:Vt,iridescence:He,iridescenceMap:Ge,iridescenceThicknessMap:tn,sheen:Ve,sheenColorMap:en,sheenRoughnessMap:Ft,specularMap:yt,specularColorMap:xt,specularIntensityMap:he,transmission:Mt,transmissionMap:Ne,thicknessMap:tt,gradientMap:pt,opaque:k.transparent===!1&&k.blending===Ju,alphaMap:Se,alphaTest:de,alphaHash:et,combine:k.combine,mapUv:it&&M(k.map.channel),aoMapUv:Xe&&M(k.aoMap.channel),lightMapUv:Ue&&M(k.lightMap.channel),bumpMapUv:Je&&M(k.bumpMap.channel),normalMapUv:Fe&&M(k.normalMap.channel),displacementMapUv:Rt&&M(k.displacementMap.channel),emissiveMapUv:dt&&M(k.emissiveMap.channel),metalnessMapUv:X&&M(k.metalnessMap.channel),roughnessMapUv:G&&M(k.roughnessMap.channel),anisotropyMapUv:at&&M(k.anisotropyMap.channel),clearcoatMapUv:vt&&M(k.clearcoatMap.channel),clearcoatNormalMapUv:It&&M(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Vt&&M(k.clearcoatRoughnessMap.channel),iridescenceMapUv:Ge&&M(k.iridescenceMap.channel),iridescenceThicknessMapUv:tn&&M(k.iridescenceThicknessMap.channel),sheenColorMapUv:en&&M(k.sheenColorMap.channel),sheenRoughnessMapUv:Ft&&M(k.sheenRoughnessMap.channel),specularMapUv:yt&&M(k.specularMap.channel),specularColorMapUv:xt&&M(k.specularColorMap.channel),specularIntensityMapUv:he&&M(k.specularIntensityMap.channel),transmissionMapUv:Ne&&M(k.transmissionMap.channel),thicknessMapUv:tt&&M(k.thicknessMap.channel),alphaMapUv:Se&&M(k.alphaMap.channel),vertexTangents:!!me.attributes.tangent&&(Fe||we),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,vertexUv1s:Ut,vertexUv2s:At,vertexUv3s:on,pointsUvs:_e.isPoints===!0&&!!me.attributes.uv&&(it||Se),fog:!!Y,useFog:k.fog===!0,fogExp2:Y&&Y.isFogExp2,flatShading:k.flatShading===!0,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:m,skinning:_e.isSkinnedMesh===!0,morphTargets:me.morphAttributes.position!==void 0,morphNormals:me.morphAttributes.normal!==void 0,morphColors:me.morphAttributes.color!==void 0,morphTargetsCount:H,morphTextureStride:ne,numDirLights:F.directional.length,numPointLights:F.point.length,numSpotLights:F.spot.length,numSpotLightMaps:F.spotLightMap.length,numRectAreaLights:F.rectArea.length,numHemiLights:F.hemi.length,numDirLightShadows:F.directionalShadowMap.length,numPointLightShadows:F.pointShadowMap.length,numSpotLightShadows:F.spotShadowMap.length,numSpotLightShadowsWithMaps:F.numSpotLightShadowsWithMaps,numLightProbes:F.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:k.dithering,shadowMapEnabled:r.shadowMap.enabled&&Q.length>0,shadowMapType:r.shadowMap.type,toneMapping:gn,useLegacyLights:r._useLegacyLights,decodeVideoTexture:it&&k.map.isVideoTexture===!0&&Hn.getTransfer(k.map.colorSpace)===tr,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===Go,flipSided:k.side===ts,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionDerivatives:ct&&k.extensions.derivatives===!0,extensionFragDepth:ct&&k.extensions.fragDepth===!0,extensionDrawBuffers:ct&&k.extensions.drawBuffers===!0,extensionShaderTextureLOD:ct&&k.extensions.shaderTextureLOD===!0,extensionClipCullDistance:ct&&k.extensions.clipCullDistance&&n.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:f||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||n.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:k.customProgramCacheKey()}}function x(k){const F=[];if(k.shaderID?F.push(k.shaderID):(F.push(k.customVertexShaderID),F.push(k.customFragmentShaderID)),k.defines!==void 0)for(const Q in k.defines)F.push(Q),F.push(k.defines[Q]);return k.isRawShaderMaterial===!1&&(A(F,k),b(F,k),F.push(r.outputColorSpace)),F.push(k.customProgramCacheKey),F.join()}function A(k,F){k.push(F.precision),k.push(F.outputColorSpace),k.push(F.envMapMode),k.push(F.envMapCubeUVHeight),k.push(F.mapUv),k.push(F.alphaMapUv),k.push(F.lightMapUv),k.push(F.aoMapUv),k.push(F.bumpMapUv),k.push(F.normalMapUv),k.push(F.displacementMapUv),k.push(F.emissiveMapUv),k.push(F.metalnessMapUv),k.push(F.roughnessMapUv),k.push(F.anisotropyMapUv),k.push(F.clearcoatMapUv),k.push(F.clearcoatNormalMapUv),k.push(F.clearcoatRoughnessMapUv),k.push(F.iridescenceMapUv),k.push(F.iridescenceThicknessMapUv),k.push(F.sheenColorMapUv),k.push(F.sheenRoughnessMapUv),k.push(F.specularMapUv),k.push(F.specularColorMapUv),k.push(F.specularIntensityMapUv),k.push(F.transmissionMapUv),k.push(F.thicknessMapUv),k.push(F.combine),k.push(F.fogExp2),k.push(F.sizeAttenuation),k.push(F.morphTargetsCount),k.push(F.morphAttributeCount),k.push(F.numDirLights),k.push(F.numPointLights),k.push(F.numSpotLights),k.push(F.numSpotLightMaps),k.push(F.numHemiLights),k.push(F.numRectAreaLights),k.push(F.numDirLightShadows),k.push(F.numPointLightShadows),k.push(F.numSpotLightShadows),k.push(F.numSpotLightShadowsWithMaps),k.push(F.numLightProbes),k.push(F.shadowMapType),k.push(F.toneMapping),k.push(F.numClippingPlanes),k.push(F.numClipIntersection),k.push(F.depthPacking)}function b(k,F){a.disableAll(),F.isWebGL2&&a.enable(0),F.supportsVertexTextures&&a.enable(1),F.instancing&&a.enable(2),F.instancingColor&&a.enable(3),F.matcap&&a.enable(4),F.envMap&&a.enable(5),F.normalMapObjectSpace&&a.enable(6),F.normalMapTangentSpace&&a.enable(7),F.clearcoat&&a.enable(8),F.iridescence&&a.enable(9),F.alphaTest&&a.enable(10),F.vertexColors&&a.enable(11),F.vertexAlphas&&a.enable(12),F.vertexUv1s&&a.enable(13),F.vertexUv2s&&a.enable(14),F.vertexUv3s&&a.enable(15),F.vertexTangents&&a.enable(16),F.anisotropy&&a.enable(17),F.alphaHash&&a.enable(18),F.batching&&a.enable(19),k.push(a.mask),a.disableAll(),F.fog&&a.enable(0),F.useFog&&a.enable(1),F.flatShading&&a.enable(2),F.logarithmicDepthBuffer&&a.enable(3),F.skinning&&a.enable(4),F.morphTargets&&a.enable(5),F.morphNormals&&a.enable(6),F.morphColors&&a.enable(7),F.premultipliedAlpha&&a.enable(8),F.shadowMapEnabled&&a.enable(9),F.useLegacyLights&&a.enable(10),F.doubleSided&&a.enable(11),F.flipSided&&a.enable(12),F.useDepthPacking&&a.enable(13),F.dithering&&a.enable(14),F.transmission&&a.enable(15),F.sheen&&a.enable(16),F.opaque&&a.enable(17),F.pointsUvs&&a.enable(18),F.decodeVideoTexture&&a.enable(19),k.push(a.mask)}function R(k){const F=_[k.type];let Q;if(F){const le=Ho[F];Q=vL.clone(le.uniforms)}else Q=k.uniforms;return Q}function N(k,F){let Q;for(let le=0,_e=h.length;le<_e;le++){const Y=h[le];if(Y.cacheKey===F){Q=Y,++Q.usedTimes;break}}return Q===void 0&&(Q=new FG(r,F,k,s),h.push(Q)),Q}function I(k){if(--k.usedTimes===0){const F=h.indexOf(k);h[F]=h[h.length-1],h.pop(),k.destroy()}}function O(k){c.remove(k)}function V(){c.dispose()}return{getParameters:E,getProgramCacheKey:x,getUniforms:R,acquireProgram:N,releaseProgram:I,releaseShaderCache:O,programs:h,dispose:V}}function GG(){let r=new WeakMap;function e(s){let o=r.get(s);return o===void 0&&(o={},r.set(s,o)),o}function t(s){r.delete(s)}function n(s,o,a){r.get(s)[o]=a}function i(){r=new WeakMap}return{get:e,remove:t,update:n,dispose:i}}function WG(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function nA(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function rA(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function o(m,g,y,_,M,E){let x=r[e];return x===void 0?(x={id:m.id,object:m,geometry:g,material:y,groupOrder:_,renderOrder:m.renderOrder,z:M,group:E},r[e]=x):(x.id=m.id,x.object=m,x.geometry=g,x.material=y,x.groupOrder=_,x.renderOrder=m.renderOrder,x.z=M,x.group=E),e++,x}function a(m,g,y,_,M,E){const x=o(m,g,y,_,M,E);y.transmission>0?n.push(x):y.transparent===!0?i.push(x):t.push(x)}function c(m,g,y,_,M,E){const x=o(m,g,y,_,M,E);y.transmission>0?n.unshift(x):y.transparent===!0?i.unshift(x):t.unshift(x)}function h(m,g){t.length>1&&t.sort(m||WG),n.length>1&&n.sort(g||nA),i.length>1&&i.sort(g||nA)}function f(){for(let m=e,g=r.length;m<g;m++){const y=r[m];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:a,unshift:c,finish:f,sort:h}}function jG(){let r=new WeakMap;function e(n,i){const s=r.get(n);let o;return s===void 0?(o=new rA,r.set(n,[o])):i>=s.length?(o=new rA,s.push(o)):o=s[i],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function XG(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new q,color:new gt};break;case"SpotLight":t={position:new q,direction:new q,color:new gt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new q,color:new gt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new q,skyColor:new gt,groundColor:new gt};break;case"RectAreaLight":t={color:new gt,position:new q,halfWidth:new q,halfHeight:new q};break}return r[e.id]=t,t}}}function $G(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Be};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Be};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Be,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let qG=0;function YG(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function ZG(r,e){const t=new XG,n=$G(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new q);const s=new q,o=new bt,a=new bt;function c(f,m){let g=0,y=0,_=0;for(let le=0;le<9;le++)i.probe[le].set(0,0,0);let M=0,E=0,x=0,A=0,b=0,R=0,N=0,I=0,O=0,V=0,k=0;f.sort(YG);const F=m===!0?Math.PI:1;for(let le=0,_e=f.length;le<_e;le++){const Y=f[le],me=Y.color,ue=Y.intensity,Ee=Y.distance,Z=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null;if(Y.isAmbientLight)g+=me.r*ue*F,y+=me.g*ue*F,_+=me.b*ue*F;else if(Y.isLightProbe){for(let se=0;se<9;se++)i.probe[se].addScaledVector(Y.sh.coefficients[se],ue);k++}else if(Y.isDirectionalLight){const se=t.get(Y);if(se.color.copy(Y.color).multiplyScalar(Y.intensity*F),Y.castShadow){const ee=Y.shadow,H=n.get(Y);H.shadowBias=ee.bias,H.shadowNormalBias=ee.normalBias,H.shadowRadius=ee.radius,H.shadowMapSize=ee.mapSize,i.directionalShadow[M]=H,i.directionalShadowMap[M]=Z,i.directionalShadowMatrix[M]=Y.shadow.matrix,R++}i.directional[M]=se,M++}else if(Y.isSpotLight){const se=t.get(Y);se.position.setFromMatrixPosition(Y.matrixWorld),se.color.copy(me).multiplyScalar(ue*F),se.distance=Ee,se.coneCos=Math.cos(Y.angle),se.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),se.decay=Y.decay,i.spot[x]=se;const ee=Y.shadow;if(Y.map&&(i.spotLightMap[O]=Y.map,O++,ee.updateMatrices(Y),Y.castShadow&&V++),i.spotLightMatrix[x]=ee.matrix,Y.castShadow){const H=n.get(Y);H.shadowBias=ee.bias,H.shadowNormalBias=ee.normalBias,H.shadowRadius=ee.radius,H.shadowMapSize=ee.mapSize,i.spotShadow[x]=H,i.spotShadowMap[x]=Z,I++}x++}else if(Y.isRectAreaLight){const se=t.get(Y);se.color.copy(me).multiplyScalar(ue),se.halfWidth.set(Y.width*.5,0,0),se.halfHeight.set(0,Y.height*.5,0),i.rectArea[A]=se,A++}else if(Y.isPointLight){const se=t.get(Y);if(se.color.copy(Y.color).multiplyScalar(Y.intensity*F),se.distance=Y.distance,se.decay=Y.decay,Y.castShadow){const ee=Y.shadow,H=n.get(Y);H.shadowBias=ee.bias,H.shadowNormalBias=ee.normalBias,H.shadowRadius=ee.radius,H.shadowMapSize=ee.mapSize,H.shadowCameraNear=ee.camera.near,H.shadowCameraFar=ee.camera.far,i.pointShadow[E]=H,i.pointShadowMap[E]=Z,i.pointShadowMatrix[E]=Y.shadow.matrix,N++}i.point[E]=se,E++}else if(Y.isHemisphereLight){const se=t.get(Y);se.skyColor.copy(Y.color).multiplyScalar(ue*F),se.groundColor.copy(Y.groundColor).multiplyScalar(ue*F),i.hemi[b]=se,b++}}A>0&&(e.isWebGL2?r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ht.LTC_FLOAT_1,i.rectAreaLTC2=ht.LTC_FLOAT_2):(i.rectAreaLTC1=ht.LTC_HALF_1,i.rectAreaLTC2=ht.LTC_HALF_2):r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ht.LTC_FLOAT_1,i.rectAreaLTC2=ht.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=ht.LTC_HALF_1,i.rectAreaLTC2=ht.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=g,i.ambient[1]=y,i.ambient[2]=_;const Q=i.hash;(Q.directionalLength!==M||Q.pointLength!==E||Q.spotLength!==x||Q.rectAreaLength!==A||Q.hemiLength!==b||Q.numDirectionalShadows!==R||Q.numPointShadows!==N||Q.numSpotShadows!==I||Q.numSpotMaps!==O||Q.numLightProbes!==k)&&(i.directional.length=M,i.spot.length=x,i.rectArea.length=A,i.point.length=E,i.hemi.length=b,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=N,i.pointShadowMap.length=N,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=N,i.spotLightMatrix.length=I+O-V,i.spotLightMap.length=O,i.numSpotLightShadowsWithMaps=V,i.numLightProbes=k,Q.directionalLength=M,Q.pointLength=E,Q.spotLength=x,Q.rectAreaLength=A,Q.hemiLength=b,Q.numDirectionalShadows=R,Q.numPointShadows=N,Q.numSpotShadows=I,Q.numSpotMaps=O,Q.numLightProbes=k,i.version=qG++)}function h(f,m){let g=0,y=0,_=0,M=0,E=0;const x=m.matrixWorldInverse;for(let A=0,b=f.length;A<b;A++){const R=f[A];if(R.isDirectionalLight){const N=i.directional[g];N.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),N.direction.sub(s),N.direction.transformDirection(x),g++}else if(R.isSpotLight){const N=i.spot[_];N.position.setFromMatrixPosition(R.matrixWorld),N.position.applyMatrix4(x),N.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),N.direction.sub(s),N.direction.transformDirection(x),_++}else if(R.isRectAreaLight){const N=i.rectArea[M];N.position.setFromMatrixPosition(R.matrixWorld),N.position.applyMatrix4(x),a.identity(),o.copy(R.matrixWorld),o.premultiply(x),a.extractRotation(o),N.halfWidth.set(R.width*.5,0,0),N.halfHeight.set(0,R.height*.5,0),N.halfWidth.applyMatrix4(a),N.halfHeight.applyMatrix4(a),M++}else if(R.isPointLight){const N=i.point[y];N.position.setFromMatrixPosition(R.matrixWorld),N.position.applyMatrix4(x),y++}else if(R.isHemisphereLight){const N=i.hemi[E];N.direction.setFromMatrixPosition(R.matrixWorld),N.direction.transformDirection(x),E++}}}return{setup:c,setupView:h,state:i}}function iA(r,e){const t=new ZG(r,e),n=[],i=[];function s(){n.length=0,i.length=0}function o(m){n.push(m)}function a(m){i.push(m)}function c(m){t.setup(n,m)}function h(m){t.setupView(n,m)}return{init:s,state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:c,setupLightsView:h,pushLight:o,pushShadow:a}}function KG(r,e){let t=new WeakMap;function n(s,o=0){const a=t.get(s);let c;return a===void 0?(c=new iA(r,e),t.set(s,[c])):o>=a.length?(c=new iA(r,e),a.push(c)):c=a[o],c}function i(){t=new WeakMap}return{get:n,dispose:i}}class YS extends Bi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=nL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ZS extends Bi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const JG=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,QG=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function eW(r,e,t){let n=new ug;const i=new Be,s=new Be,o=new Ln,a=new YS({depthPacking:rL}),c=new ZS,h={},f=t.maxTextureSize,m={[gl]:ts,[ts]:gl,[Go]:Go},g=new Ws({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Be},radius:{value:4}},vertexShader:JG,fragmentShader:QG}),y=g.clone();y.defines.HORIZONTAL_PASS=1;const _=new sn;_.setAttribute("position",new Wn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new qn(_,g),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ly;let x=this.type;this.render=function(I,O,V){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||I.length===0)return;const k=r.getRenderTarget(),F=r.getActiveCubeFace(),Q=r.getActiveMipmapLevel(),le=r.state;le.setBlending(ha),le.buffers.color.setClear(1,1,1,1),le.buffers.depth.setTest(!0),le.setScissorTest(!1);const _e=x!==zo&&this.type===zo,Y=x===zo&&this.type!==zo;for(let me=0,ue=I.length;me<ue;me++){const Ee=I[me],Z=Ee.shadow;if(Z===void 0){console.warn("THREE.WebGLShadowMap:",Ee,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;i.copy(Z.mapSize);const se=Z.getFrameExtents();if(i.multiply(se),s.copy(Z.mapSize),(i.x>f||i.y>f)&&(i.x>f&&(s.x=Math.floor(f/se.x),i.x=s.x*se.x,Z.mapSize.x=s.x),i.y>f&&(s.y=Math.floor(f/se.y),i.y=s.y*se.y,Z.mapSize.y=s.y)),Z.map===null||_e===!0||Y===!0){const H=this.type!==zo?{minFilter:Lr,magFilter:Lr}:{};Z.map!==null&&Z.map.dispose(),Z.map=new Gs(i.x,i.y,H),Z.map.texture.name=Ee.name+".shadowMap",Z.camera.updateProjectionMatrix()}r.setRenderTarget(Z.map),r.clear();const ee=Z.getViewportCount();for(let H=0;H<ee;H++){const ne=Z.getViewport(H);o.set(s.x*ne.x,s.y*ne.y,s.x*ne.z,s.y*ne.w),le.viewport(o),Z.updateMatrices(Ee,H),n=Z.getFrustum(),R(O,V,Z.camera,Ee,this.type)}Z.isPointLightShadow!==!0&&this.type===zo&&A(Z,V),Z.needsUpdate=!1}x=this.type,E.needsUpdate=!1,r.setRenderTarget(k,F,Q)};function A(I,O){const V=e.update(M);g.defines.VSM_SAMPLES!==I.blurSamples&&(g.defines.VSM_SAMPLES=I.blurSamples,y.defines.VSM_SAMPLES=I.blurSamples,g.needsUpdate=!0,y.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Gs(i.x,i.y)),g.uniforms.shadow_pass.value=I.map.texture,g.uniforms.resolution.value=I.mapSize,g.uniforms.radius.value=I.radius,r.setRenderTarget(I.mapPass),r.clear(),r.renderBufferDirect(O,null,V,g,M,null),y.uniforms.shadow_pass.value=I.mapPass.texture,y.uniforms.resolution.value=I.mapSize,y.uniforms.radius.value=I.radius,r.setRenderTarget(I.map),r.clear(),r.renderBufferDirect(O,null,V,y,M,null)}function b(I,O,V,k){let F=null;const Q=V.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(Q!==void 0)F=Q;else if(F=V.isPointLight===!0?c:a,r.localClippingEnabled&&O.clipShadows===!0&&Array.isArray(O.clippingPlanes)&&O.clippingPlanes.length!==0||O.displacementMap&&O.displacementScale!==0||O.alphaMap&&O.alphaTest>0||O.map&&O.alphaTest>0){const le=F.uuid,_e=O.uuid;let Y=h[le];Y===void 0&&(Y={},h[le]=Y);let me=Y[_e];me===void 0&&(me=F.clone(),Y[_e]=me,O.addEventListener("dispose",N)),F=me}if(F.visible=O.visible,F.wireframe=O.wireframe,k===zo?F.side=O.shadowSide!==null?O.shadowSide:O.side:F.side=O.shadowSide!==null?O.shadowSide:m[O.side],F.alphaMap=O.alphaMap,F.alphaTest=O.alphaTest,F.map=O.map,F.clipShadows=O.clipShadows,F.clippingPlanes=O.clippingPlanes,F.clipIntersection=O.clipIntersection,F.displacementMap=O.displacementMap,F.displacementScale=O.displacementScale,F.displacementBias=O.displacementBias,F.wireframeLinewidth=O.wireframeLinewidth,F.linewidth=O.linewidth,V.isPointLight===!0&&F.isMeshDistanceMaterial===!0){const le=r.properties.get(F);le.light=V}return F}function R(I,O,V,k,F){if(I.visible===!1)return;if(I.layers.test(O.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&F===zo)&&(!I.frustumCulled||n.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(V.matrixWorldInverse,I.matrixWorld);const _e=e.update(I),Y=I.material;if(Array.isArray(Y)){const me=_e.groups;for(let ue=0,Ee=me.length;ue<Ee;ue++){const Z=me[ue],se=Y[Z.materialIndex];if(se&&se.visible){const ee=b(I,se,k,F);I.onBeforeShadow(r,I,O,V,_e,ee,Z),r.renderBufferDirect(V,null,_e,ee,I,Z),I.onAfterShadow(r,I,O,V,_e,ee,Z)}}}else if(Y.visible){const me=b(I,Y,k,F);I.onBeforeShadow(r,I,O,V,_e,me,null),r.renderBufferDirect(V,null,_e,me,I,null),I.onAfterShadow(r,I,O,V,_e,me,null)}}const le=I.children;for(let _e=0,Y=le.length;_e<Y;_e++)R(le[_e],O,V,k,F)}function N(I){I.target.removeEventListener("dispose",N);for(const V in h){const k=h[V],F=I.target.uuid;F in k&&(k[F].dispose(),delete k[F])}}}function tW(r,e,t){const n=t.isWebGL2;function i(){let de=!1;const et=new Ln;let ct=null;const Ut=new Ln(0,0,0,0);return{setMask:function(At){ct!==At&&!de&&(r.colorMask(At,At,At,At),ct=At)},setLocked:function(At){de=At},setClear:function(At,on,gn,Pn,Fn){Fn===!0&&(At*=Pn,on*=Pn,gn*=Pn),et.set(At,on,gn,Pn),Ut.equals(et)===!1&&(r.clearColor(At,on,gn,Pn),Ut.copy(et))},reset:function(){de=!1,ct=null,Ut.set(-1,0,0,0)}}}function s(){let de=!1,et=null,ct=null,Ut=null;return{setTest:function(At){At?st(r.DEPTH_TEST):it(r.DEPTH_TEST)},setMask:function(At){et!==At&&!de&&(r.depthMask(At),et=At)},setFunc:function(At){if(ct!==At){switch(At){case k2:r.depthFunc(r.NEVER);break;case D2:r.depthFunc(r.ALWAYS);break;case O2:r.depthFunc(r.LESS);break;case Pm:r.depthFunc(r.LEQUAL);break;case N2:r.depthFunc(r.EQUAL);break;case U2:r.depthFunc(r.GEQUAL);break;case F2:r.depthFunc(r.GREATER);break;case B2:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}ct=At}},setLocked:function(At){de=At},setClear:function(At){Ut!==At&&(r.clearDepth(At),Ut=At)},reset:function(){de=!1,et=null,ct=null,Ut=null}}}function o(){let de=!1,et=null,ct=null,Ut=null,At=null,on=null,gn=null,Pn=null,Fn=null;return{setTest:function(hn){de||(hn?st(r.STENCIL_TEST):it(r.STENCIL_TEST))},setMask:function(hn){et!==hn&&!de&&(r.stencilMask(hn),et=hn)},setFunc:function(hn,fr,kr){(ct!==hn||Ut!==fr||At!==kr)&&(r.stencilFunc(hn,fr,kr),ct=hn,Ut=fr,At=kr)},setOp:function(hn,fr,kr){(on!==hn||gn!==fr||Pn!==kr)&&(r.stencilOp(hn,fr,kr),on=hn,gn=fr,Pn=kr)},setLocked:function(hn){de=hn},setClear:function(hn){Fn!==hn&&(r.clearStencil(hn),Fn=hn)},reset:function(){de=!1,et=null,ct=null,Ut=null,At=null,on=null,gn=null,Pn=null,Fn=null}}}const a=new i,c=new s,h=new o,f=new WeakMap,m=new WeakMap;let g={},y={},_=new WeakMap,M=[],E=null,x=!1,A=null,b=null,R=null,N=null,I=null,O=null,V=null,k=new gt(0,0,0),F=0,Q=!1,le=null,_e=null,Y=null,me=null,ue=null;const Ee=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Z=!1,se=0;const ee=r.getParameter(r.VERSION);ee.indexOf("WebGL")!==-1?(se=parseFloat(/^WebGL (\d)/.exec(ee)[1]),Z=se>=1):ee.indexOf("OpenGL ES")!==-1&&(se=parseFloat(/^OpenGL ES (\d)/.exec(ee)[1]),Z=se>=2);let H=null,ne={};const ce=r.getParameter(r.SCISSOR_BOX),xe=r.getParameter(r.VIEWPORT),ke=new Ln().fromArray(ce),Re=new Ln().fromArray(xe);function ze(de,et,ct,Ut){const At=new Uint8Array(4),on=r.createTexture();r.bindTexture(de,on),r.texParameteri(de,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(de,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let gn=0;gn<ct;gn++)n&&(de===r.TEXTURE_3D||de===r.TEXTURE_2D_ARRAY)?r.texImage3D(et,0,r.RGBA,1,1,Ut,0,r.RGBA,r.UNSIGNED_BYTE,At):r.texImage2D(et+gn,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,At);return on}const Ke={};Ke[r.TEXTURE_2D]=ze(r.TEXTURE_2D,r.TEXTURE_2D,1),Ke[r.TEXTURE_CUBE_MAP]=ze(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(Ke[r.TEXTURE_2D_ARRAY]=ze(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),Ke[r.TEXTURE_3D]=ze(r.TEXTURE_3D,r.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),c.setClear(1),h.setClear(0),st(r.DEPTH_TEST),c.setFunc(Pm),dt(!1),X(qw),st(r.CULL_FACE),Fe(ha);function st(de){g[de]!==!0&&(r.enable(de),g[de]=!0)}function it(de){g[de]!==!1&&(r.disable(de),g[de]=!1)}function ft(de,et){return y[de]!==et?(r.bindFramebuffer(de,et),y[de]=et,n&&(de===r.DRAW_FRAMEBUFFER&&(y[r.FRAMEBUFFER]=et),de===r.FRAMEBUFFER&&(y[r.DRAW_FRAMEBUFFER]=et)),!0):!1}function oe(de,et){let ct=M,Ut=!1;if(de)if(ct=_.get(et),ct===void 0&&(ct=[],_.set(et,ct)),de.isWebGLMultipleRenderTargets){const At=de.texture;if(ct.length!==At.length||ct[0]!==r.COLOR_ATTACHMENT0){for(let on=0,gn=At.length;on<gn;on++)ct[on]=r.COLOR_ATTACHMENT0+on;ct.length=At.length,Ut=!0}}else ct[0]!==r.COLOR_ATTACHMENT0&&(ct[0]=r.COLOR_ATTACHMENT0,Ut=!0);else ct[0]!==r.BACK&&(ct[0]=r.BACK,Ut=!0);Ut&&(t.isWebGL2?r.drawBuffers(ct):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ct))}function Xe(de){return E!==de?(r.useProgram(de),E=de,!0):!1}const Ue={[gc]:r.FUNC_ADD,[y2]:r.FUNC_SUBTRACT,[_2]:r.FUNC_REVERSE_SUBTRACT};if(n)Ue[Jw]=r.MIN,Ue[Qw]=r.MAX;else{const de=e.get("EXT_blend_minmax");de!==null&&(Ue[Jw]=de.MIN_EXT,Ue[Qw]=de.MAX_EXT)}const Je={[x2]:r.ZERO,[w2]:r.ONE,[S2]:r.SRC_COLOR,[ry]:r.SRC_ALPHA,[C2]:r.SRC_ALPHA_SATURATE,[b2]:r.DST_COLOR,[M2]:r.DST_ALPHA,[E2]:r.ONE_MINUS_SRC_COLOR,[iy]:r.ONE_MINUS_SRC_ALPHA,[A2]:r.ONE_MINUS_DST_COLOR,[T2]:r.ONE_MINUS_DST_ALPHA,[P2]:r.CONSTANT_COLOR,[R2]:r.ONE_MINUS_CONSTANT_COLOR,[L2]:r.CONSTANT_ALPHA,[I2]:r.ONE_MINUS_CONSTANT_ALPHA};function Fe(de,et,ct,Ut,At,on,gn,Pn,Fn,hn){if(de===ha){x===!0&&(it(r.BLEND),x=!1);return}if(x===!1&&(st(r.BLEND),x=!0),de!==v2){if(de!==A||hn!==Q){if((b!==gc||I!==gc)&&(r.blendEquation(r.FUNC_ADD),b=gc,I=gc),hn)switch(de){case Ju:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Yw:r.blendFunc(r.ONE,r.ONE);break;case Zw:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case Kw:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case Ju:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Yw:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case Zw:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case Kw:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}R=null,N=null,O=null,V=null,k.set(0,0,0),F=0,A=de,Q=hn}return}At=At||et,on=on||ct,gn=gn||Ut,(et!==b||At!==I)&&(r.blendEquationSeparate(Ue[et],Ue[At]),b=et,I=At),(ct!==R||Ut!==N||on!==O||gn!==V)&&(r.blendFuncSeparate(Je[ct],Je[Ut],Je[on],Je[gn]),R=ct,N=Ut,O=on,V=gn),(Pn.equals(k)===!1||Fn!==F)&&(r.blendColor(Pn.r,Pn.g,Pn.b,Fn),k.copy(Pn),F=Fn),A=de,Q=!1}function Rt(de,et){de.side===Go?it(r.CULL_FACE):st(r.CULL_FACE);let ct=de.side===ts;et&&(ct=!ct),dt(ct),de.blending===Ju&&de.transparent===!1?Fe(ha):Fe(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),c.setFunc(de.depthFunc),c.setTest(de.depthTest),c.setMask(de.depthWrite),a.setMask(de.colorWrite);const Ut=de.stencilWrite;h.setTest(Ut),Ut&&(h.setMask(de.stencilWriteMask),h.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),h.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),we(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?st(r.SAMPLE_ALPHA_TO_COVERAGE):it(r.SAMPLE_ALPHA_TO_COVERAGE)}function dt(de){le!==de&&(de?r.frontFace(r.CW):r.frontFace(r.CCW),le=de)}function X(de){de!==p2?(st(r.CULL_FACE),de!==_e&&(de===qw?r.cullFace(r.BACK):de===m2?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):it(r.CULL_FACE),_e=de}function G(de){de!==Y&&(Z&&r.lineWidth(de),Y=de)}function we(de,et,ct){de?(st(r.POLYGON_OFFSET_FILL),(me!==et||ue!==ct)&&(r.polygonOffset(et,ct),me=et,ue=ct)):it(r.POLYGON_OFFSET_FILL)}function We(de){de?st(r.SCISSOR_TEST):it(r.SCISSOR_TEST)}function He(de){de===void 0&&(de=r.TEXTURE0+Ee-1),H!==de&&(r.activeTexture(de),H=de)}function Ve(de,et,ct){ct===void 0&&(H===null?ct=r.TEXTURE0+Ee-1:ct=H);let Ut=ne[ct];Ut===void 0&&(Ut={type:void 0,texture:void 0},ne[ct]=Ut),(Ut.type!==de||Ut.texture!==et)&&(H!==ct&&(r.activeTexture(ct),H=ct),r.bindTexture(de,et||Ke[de]),Ut.type=de,Ut.texture=et)}function Mt(){const de=ne[H];de!==void 0&&de.type!==void 0&&(r.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function at(){try{r.compressedTexImage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function vt(){try{r.compressedTexImage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function It(){try{r.texSubImage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Vt(){try{r.texSubImage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ge(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function tn(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function en(){try{r.texStorage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ft(){try{r.texStorage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function yt(){try{r.texImage2D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function xt(){try{r.texImage3D.apply(r,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function he(de){ke.equals(de)===!1&&(r.scissor(de.x,de.y,de.z,de.w),ke.copy(de))}function Ne(de){Re.equals(de)===!1&&(r.viewport(de.x,de.y,de.z,de.w),Re.copy(de))}function tt(de,et){let ct=m.get(et);ct===void 0&&(ct=new WeakMap,m.set(et,ct));let Ut=ct.get(de);Ut===void 0&&(Ut=r.getUniformBlockIndex(et,de.name),ct.set(de,Ut))}function pt(de,et){const Ut=m.get(et).get(de);f.get(et)!==Ut&&(r.uniformBlockBinding(et,Ut,de.__bindingPointIndex),f.set(et,Ut))}function Se(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),n===!0&&(r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),g={},H=null,ne={},y={},_=new WeakMap,M=[],E=null,x=!1,A=null,b=null,R=null,N=null,I=null,O=null,V=null,k=new gt(0,0,0),F=0,Q=!1,le=null,_e=null,Y=null,me=null,ue=null,ke.set(0,0,r.canvas.width,r.canvas.height),Re.set(0,0,r.canvas.width,r.canvas.height),a.reset(),c.reset(),h.reset()}return{buffers:{color:a,depth:c,stencil:h},enable:st,disable:it,bindFramebuffer:ft,drawBuffers:oe,useProgram:Xe,setBlending:Fe,setMaterial:Rt,setFlipSided:dt,setCullFace:X,setLineWidth:G,setPolygonOffset:we,setScissorTest:We,activeTexture:He,bindTexture:Ve,unbindTexture:Mt,compressedTexImage2D:at,compressedTexImage3D:vt,texImage2D:yt,texImage3D:xt,updateUBOMapping:tt,uniformBlockBinding:pt,texStorage2D:en,texStorage3D:Ft,texSubImage2D:It,texSubImage3D:Vt,compressedTexSubImage2D:Ge,compressedTexSubImage3D:tn,scissor:he,viewport:Ne,reset:Se}}function nW(r,e,t,n,i,s,o){const a=i.isWebGL2,c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(X,G){return y?new OffscreenCanvas(X,G):Bm("canvas")}function M(X,G,we,We){let He=1;if((X.width>We||X.height>We)&&(He=We/Math.max(X.width,X.height)),He<1||G===!0)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap){const Ve=G?ay:Math.floor,Mt=Ve(He*X.width),at=Ve(He*X.height);m===void 0&&(m=_(Mt,at));const vt=we?_(Mt,at):m;return vt.width=Mt,vt.height=at,vt.getContext("2d").drawImage(X,0,0,Mt,at),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+X.width+"x"+X.height+") to ("+Mt+"x"+at+")."),vt}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+X.width+"x"+X.height+")."),X;return X}function E(X){return P1(X.width)&&P1(X.height)}function x(X){return a?!1:X.wrapS!==rr||X.wrapT!==rr||X.minFilter!==Lr&&X.minFilter!==Dn}function A(X,G){return X.generateMipmaps&&G&&X.minFilter!==Lr&&X.minFilter!==Dn}function b(X){r.generateMipmap(X)}function R(X,G,we,We,He=!1){if(a===!1)return G;if(X!==null){if(r[X]!==void 0)return r[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Ve=G;if(G===r.RED&&(we===r.FLOAT&&(Ve=r.R32F),we===r.HALF_FLOAT&&(Ve=r.R16F),we===r.UNSIGNED_BYTE&&(Ve=r.R8)),G===r.RED_INTEGER&&(we===r.UNSIGNED_BYTE&&(Ve=r.R8UI),we===r.UNSIGNED_SHORT&&(Ve=r.R16UI),we===r.UNSIGNED_INT&&(Ve=r.R32UI),we===r.BYTE&&(Ve=r.R8I),we===r.SHORT&&(Ve=r.R16I),we===r.INT&&(Ve=r.R32I)),G===r.RG&&(we===r.FLOAT&&(Ve=r.RG32F),we===r.HALF_FLOAT&&(Ve=r.RG16F),we===r.UNSIGNED_BYTE&&(Ve=r.RG8)),G===r.RGBA){const Mt=He?Om:Hn.getTransfer(We);we===r.FLOAT&&(Ve=r.RGBA32F),we===r.HALF_FLOAT&&(Ve=r.RGBA16F),we===r.UNSIGNED_BYTE&&(Ve=Mt===tr?r.SRGB8_ALPHA8:r.RGBA8),we===r.UNSIGNED_SHORT_4_4_4_4&&(Ve=r.RGBA4),we===r.UNSIGNED_SHORT_5_5_5_1&&(Ve=r.RGB5_A1)}return(Ve===r.R16F||Ve===r.R32F||Ve===r.RG16F||Ve===r.RG32F||Ve===r.RGBA16F||Ve===r.RGBA32F)&&e.get("EXT_color_buffer_float"),Ve}function N(X,G,we){return A(X,we)===!0||X.isFramebufferTexture&&X.minFilter!==Lr&&X.minFilter!==Dn?Math.log2(Math.max(G.width,G.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?G.mipmaps.length:1}function I(X){return X===Lr||X===sy||X===mm?r.NEAREST:r.LINEAR}function O(X){const G=X.target;G.removeEventListener("dispose",O),k(G),G.isVideoTexture&&f.delete(G)}function V(X){const G=X.target;G.removeEventListener("dispose",V),Q(G)}function k(X){const G=n.get(X);if(G.__webglInit===void 0)return;const we=X.source,We=g.get(we);if(We){const He=We[G.__cacheKey];He.usedTimes--,He.usedTimes===0&&F(X),Object.keys(We).length===0&&g.delete(we)}n.remove(X)}function F(X){const G=n.get(X);r.deleteTexture(G.__webglTexture);const we=X.source,We=g.get(we);delete We[G.__cacheKey],o.memory.textures--}function Q(X){const G=X.texture,we=n.get(X),We=n.get(G);if(We.__webglTexture!==void 0&&(r.deleteTexture(We.__webglTexture),o.memory.textures--),X.depthTexture&&X.depthTexture.dispose(),X.isWebGLCubeRenderTarget)for(let He=0;He<6;He++){if(Array.isArray(we.__webglFramebuffer[He]))for(let Ve=0;Ve<we.__webglFramebuffer[He].length;Ve++)r.deleteFramebuffer(we.__webglFramebuffer[He][Ve]);else r.deleteFramebuffer(we.__webglFramebuffer[He]);we.__webglDepthbuffer&&r.deleteRenderbuffer(we.__webglDepthbuffer[He])}else{if(Array.isArray(we.__webglFramebuffer))for(let He=0;He<we.__webglFramebuffer.length;He++)r.deleteFramebuffer(we.__webglFramebuffer[He]);else r.deleteFramebuffer(we.__webglFramebuffer);if(we.__webglDepthbuffer&&r.deleteRenderbuffer(we.__webglDepthbuffer),we.__webglMultisampledFramebuffer&&r.deleteFramebuffer(we.__webglMultisampledFramebuffer),we.__webglColorRenderbuffer)for(let He=0;He<we.__webglColorRenderbuffer.length;He++)we.__webglColorRenderbuffer[He]&&r.deleteRenderbuffer(we.__webglColorRenderbuffer[He]);we.__webglDepthRenderbuffer&&r.deleteRenderbuffer(we.__webglDepthRenderbuffer)}if(X.isWebGLMultipleRenderTargets)for(let He=0,Ve=G.length;He<Ve;He++){const Mt=n.get(G[He]);Mt.__webglTexture&&(r.deleteTexture(Mt.__webglTexture),o.memory.textures--),n.remove(G[He])}n.remove(G),n.remove(X)}let le=0;function _e(){le=0}function Y(){const X=le;return X>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+i.maxTextures),le+=1,X}function me(X){const G=[];return G.push(X.wrapS),G.push(X.wrapT),G.push(X.wrapR||0),G.push(X.magFilter),G.push(X.minFilter),G.push(X.anisotropy),G.push(X.internalFormat),G.push(X.format),G.push(X.type),G.push(X.generateMipmaps),G.push(X.premultiplyAlpha),G.push(X.flipY),G.push(X.unpackAlignment),G.push(X.colorSpace),G.join()}function ue(X,G){const we=n.get(X);if(X.isVideoTexture&&Rt(X),X.isRenderTargetTexture===!1&&X.version>0&&we.__version!==X.version){const We=X.image;if(We===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(We.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ke(we,X,G);return}}t.bindTexture(r.TEXTURE_2D,we.__webglTexture,r.TEXTURE0+G)}function Ee(X,G){const we=n.get(X);if(X.version>0&&we.__version!==X.version){ke(we,X,G);return}t.bindTexture(r.TEXTURE_2D_ARRAY,we.__webglTexture,r.TEXTURE0+G)}function Z(X,G){const we=n.get(X);if(X.version>0&&we.__version!==X.version){ke(we,X,G);return}t.bindTexture(r.TEXTURE_3D,we.__webglTexture,r.TEXTURE0+G)}function se(X,G){const we=n.get(X);if(X.version>0&&we.__version!==X.version){Re(we,X,G);return}t.bindTexture(r.TEXTURE_CUBE_MAP,we.__webglTexture,r.TEXTURE0+G)}const ee={[rh]:r.REPEAT,[rr]:r.CLAMP_TO_EDGE,[Lm]:r.MIRRORED_REPEAT},H={[Lr]:r.NEAREST,[sy]:r.NEAREST_MIPMAP_NEAREST,[mm]:r.NEAREST_MIPMAP_LINEAR,[Dn]:r.LINEAR,[PS]:r.LINEAR_MIPMAP_NEAREST,[Pc]:r.LINEAR_MIPMAP_LINEAR},ne={[sL]:r.NEVER,[hL]:r.ALWAYS,[oL]:r.LESS,[VS]:r.LEQUAL,[aL]:r.EQUAL,[uL]:r.GEQUAL,[lL]:r.GREATER,[cL]:r.NOTEQUAL};function ce(X,G,we){if(we?(r.texParameteri(X,r.TEXTURE_WRAP_S,ee[G.wrapS]),r.texParameteri(X,r.TEXTURE_WRAP_T,ee[G.wrapT]),(X===r.TEXTURE_3D||X===r.TEXTURE_2D_ARRAY)&&r.texParameteri(X,r.TEXTURE_WRAP_R,ee[G.wrapR]),r.texParameteri(X,r.TEXTURE_MAG_FILTER,H[G.magFilter]),r.texParameteri(X,r.TEXTURE_MIN_FILTER,H[G.minFilter])):(r.texParameteri(X,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(X,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(X===r.TEXTURE_3D||X===r.TEXTURE_2D_ARRAY)&&r.texParameteri(X,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),(G.wrapS!==rr||G.wrapT!==rr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(X,r.TEXTURE_MAG_FILTER,I(G.magFilter)),r.texParameteri(X,r.TEXTURE_MIN_FILTER,I(G.minFilter)),G.minFilter!==Lr&&G.minFilter!==Dn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),G.compareFunction&&(r.texParameteri(X,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(X,r.TEXTURE_COMPARE_FUNC,ne[G.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const We=e.get("EXT_texture_filter_anisotropic");if(G.magFilter===Lr||G.minFilter!==mm&&G.minFilter!==Pc||G.type===jr&&e.has("OES_texture_float_linear")===!1||a===!1&&G.type===di&&e.has("OES_texture_half_float_linear")===!1)return;(G.anisotropy>1||n.get(G).__currentAnisotropy)&&(r.texParameterf(X,We.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,i.getMaxAnisotropy())),n.get(G).__currentAnisotropy=G.anisotropy)}}function xe(X,G){let we=!1;X.__webglInit===void 0&&(X.__webglInit=!0,G.addEventListener("dispose",O));const We=G.source;let He=g.get(We);He===void 0&&(He={},g.set(We,He));const Ve=me(G);if(Ve!==X.__cacheKey){He[Ve]===void 0&&(He[Ve]={texture:r.createTexture(),usedTimes:0},o.memory.textures++,we=!0),He[Ve].usedTimes++;const Mt=He[X.__cacheKey];Mt!==void 0&&(He[X.__cacheKey].usedTimes--,Mt.usedTimes===0&&F(G)),X.__cacheKey=Ve,X.__webglTexture=He[Ve].texture}return we}function ke(X,G,we){let We=r.TEXTURE_2D;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(We=r.TEXTURE_2D_ARRAY),G.isData3DTexture&&(We=r.TEXTURE_3D);const He=xe(X,G),Ve=G.source;t.bindTexture(We,X.__webglTexture,r.TEXTURE0+we);const Mt=n.get(Ve);if(Ve.version!==Mt.__version||He===!0){t.activeTexture(r.TEXTURE0+we);const at=Hn.getPrimaries(Hn.workingColorSpace),vt=G.colorSpace===Fs?null:Hn.getPrimaries(G.colorSpace),It=G.colorSpace===Fs||at===vt?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,G.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,G.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,It);const Vt=x(G)&&E(G.image)===!1;let Ge=M(G.image,Vt,!1,i.maxTextureSize);Ge=dt(G,Ge);const tn=E(Ge)||a,en=s.convert(G.format,G.colorSpace);let Ft=s.convert(G.type),yt=R(G.internalFormat,en,Ft,G.colorSpace,G.isVideoTexture);ce(We,G,tn);let xt;const he=G.mipmaps,Ne=a&&G.isVideoTexture!==!0&&yt!==FS,tt=Mt.__version===void 0||He===!0,pt=N(G,Ge,tn);if(G.isDepthTexture)yt=r.DEPTH_COMPONENT,a?G.type===jr?yt=r.DEPTH_COMPONENT32F:G.type===la?yt=r.DEPTH_COMPONENT24:G.type===wc?yt=r.DEPTH24_STENCIL8:yt=r.DEPTH_COMPONENT16:G.type===jr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),G.format===Sc&&yt===r.DEPTH_COMPONENT&&G.type!==Iy&&G.type!==la&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),G.type=la,Ft=s.convert(G.type)),G.format===ih&&yt===r.DEPTH_COMPONENT&&(yt=r.DEPTH_STENCIL,G.type!==wc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),G.type=wc,Ft=s.convert(G.type))),tt&&(Ne?t.texStorage2D(r.TEXTURE_2D,1,yt,Ge.width,Ge.height):t.texImage2D(r.TEXTURE_2D,0,yt,Ge.width,Ge.height,0,en,Ft,null));else if(G.isDataTexture)if(he.length>0&&tn){Ne&&tt&&t.texStorage2D(r.TEXTURE_2D,pt,yt,he[0].width,he[0].height);for(let Se=0,de=he.length;Se<de;Se++)xt=he[Se],Ne?t.texSubImage2D(r.TEXTURE_2D,Se,0,0,xt.width,xt.height,en,Ft,xt.data):t.texImage2D(r.TEXTURE_2D,Se,yt,xt.width,xt.height,0,en,Ft,xt.data);G.generateMipmaps=!1}else Ne?(tt&&t.texStorage2D(r.TEXTURE_2D,pt,yt,Ge.width,Ge.height),t.texSubImage2D(r.TEXTURE_2D,0,0,0,Ge.width,Ge.height,en,Ft,Ge.data)):t.texImage2D(r.TEXTURE_2D,0,yt,Ge.width,Ge.height,0,en,Ft,Ge.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){Ne&&tt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,pt,yt,he[0].width,he[0].height,Ge.depth);for(let Se=0,de=he.length;Se<de;Se++)xt=he[Se],G.format!==Wr?en!==null?Ne?t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Se,0,0,0,xt.width,xt.height,Ge.depth,en,xt.data,0,0):t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Se,yt,xt.width,xt.height,Ge.depth,0,xt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ne?t.texSubImage3D(r.TEXTURE_2D_ARRAY,Se,0,0,0,xt.width,xt.height,Ge.depth,en,Ft,xt.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Se,yt,xt.width,xt.height,Ge.depth,0,en,Ft,xt.data)}else{Ne&&tt&&t.texStorage2D(r.TEXTURE_2D,pt,yt,he[0].width,he[0].height);for(let Se=0,de=he.length;Se<de;Se++)xt=he[Se],G.format!==Wr?en!==null?Ne?t.compressedTexSubImage2D(r.TEXTURE_2D,Se,0,0,xt.width,xt.height,en,xt.data):t.compressedTexImage2D(r.TEXTURE_2D,Se,yt,xt.width,xt.height,0,xt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ne?t.texSubImage2D(r.TEXTURE_2D,Se,0,0,xt.width,xt.height,en,Ft,xt.data):t.texImage2D(r.TEXTURE_2D,Se,yt,xt.width,xt.height,0,en,Ft,xt.data)}else if(G.isDataArrayTexture)Ne?(tt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,pt,yt,Ge.width,Ge.height,Ge.depth),t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,en,Ft,Ge.data)):t.texImage3D(r.TEXTURE_2D_ARRAY,0,yt,Ge.width,Ge.height,Ge.depth,0,en,Ft,Ge.data);else if(G.isData3DTexture)Ne?(tt&&t.texStorage3D(r.TEXTURE_3D,pt,yt,Ge.width,Ge.height,Ge.depth),t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,en,Ft,Ge.data)):t.texImage3D(r.TEXTURE_3D,0,yt,Ge.width,Ge.height,Ge.depth,0,en,Ft,Ge.data);else if(G.isFramebufferTexture){if(tt)if(Ne)t.texStorage2D(r.TEXTURE_2D,pt,yt,Ge.width,Ge.height);else{let Se=Ge.width,de=Ge.height;for(let et=0;et<pt;et++)t.texImage2D(r.TEXTURE_2D,et,yt,Se,de,0,en,Ft,null),Se>>=1,de>>=1}}else if(he.length>0&&tn){Ne&&tt&&t.texStorage2D(r.TEXTURE_2D,pt,yt,he[0].width,he[0].height);for(let Se=0,de=he.length;Se<de;Se++)xt=he[Se],Ne?t.texSubImage2D(r.TEXTURE_2D,Se,0,0,en,Ft,xt):t.texImage2D(r.TEXTURE_2D,Se,yt,en,Ft,xt);G.generateMipmaps=!1}else Ne?(tt&&t.texStorage2D(r.TEXTURE_2D,pt,yt,Ge.width,Ge.height),t.texSubImage2D(r.TEXTURE_2D,0,0,0,en,Ft,Ge)):t.texImage2D(r.TEXTURE_2D,0,yt,en,Ft,Ge);A(G,tn)&&b(We),Mt.__version=Ve.version,G.onUpdate&&G.onUpdate(G)}X.__version=G.version}function Re(X,G,we){if(G.image.length!==6)return;const We=xe(X,G),He=G.source;t.bindTexture(r.TEXTURE_CUBE_MAP,X.__webglTexture,r.TEXTURE0+we);const Ve=n.get(He);if(He.version!==Ve.__version||We===!0){t.activeTexture(r.TEXTURE0+we);const Mt=Hn.getPrimaries(Hn.workingColorSpace),at=G.colorSpace===Fs?null:Hn.getPrimaries(G.colorSpace),vt=G.colorSpace===Fs||Mt===at?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,G.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,G.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,vt);const It=G.isCompressedTexture||G.image[0].isCompressedTexture,Vt=G.image[0]&&G.image[0].isDataTexture,Ge=[];for(let Se=0;Se<6;Se++)!It&&!Vt?Ge[Se]=M(G.image[Se],!1,!0,i.maxCubemapSize):Ge[Se]=Vt?G.image[Se].image:G.image[Se],Ge[Se]=dt(G,Ge[Se]);const tn=Ge[0],en=E(tn)||a,Ft=s.convert(G.format,G.colorSpace),yt=s.convert(G.type),xt=R(G.internalFormat,Ft,yt,G.colorSpace),he=a&&G.isVideoTexture!==!0,Ne=Ve.__version===void 0||We===!0;let tt=N(G,tn,en);ce(r.TEXTURE_CUBE_MAP,G,en);let pt;if(It){he&&Ne&&t.texStorage2D(r.TEXTURE_CUBE_MAP,tt,xt,tn.width,tn.height);for(let Se=0;Se<6;Se++){pt=Ge[Se].mipmaps;for(let de=0;de<pt.length;de++){const et=pt[de];G.format!==Wr?Ft!==null?he?t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Se,de,0,0,et.width,et.height,Ft,et.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Se,de,xt,et.width,et.height,0,et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Se,de,0,0,et.width,et.height,Ft,yt,et.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Se,de,xt,et.width,et.height,0,Ft,yt,et.data)}}}else{pt=G.mipmaps,he&&Ne&&(pt.length>0&&tt++,t.texStorage2D(r.TEXTURE_CUBE_MAP,tt,xt,Ge[0].width,Ge[0].height));for(let Se=0;Se<6;Se++)if(Vt){he?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,0,0,Ge[Se].width,Ge[Se].height,Ft,yt,Ge[Se].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,xt,Ge[Se].width,Ge[Se].height,0,Ft,yt,Ge[Se].data);for(let de=0;de<pt.length;de++){const ct=pt[de].image[Se].image;he?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Se,de+1,0,0,ct.width,ct.height,Ft,yt,ct.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Se,de+1,xt,ct.width,ct.height,0,Ft,yt,ct.data)}}else{he?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,0,0,Ft,yt,Ge[Se]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,xt,Ft,yt,Ge[Se]);for(let de=0;de<pt.length;de++){const et=pt[de];he?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Se,de+1,0,0,Ft,yt,et.image[Se]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Se,de+1,xt,Ft,yt,et.image[Se])}}}A(G,en)&&b(r.TEXTURE_CUBE_MAP),Ve.__version=He.version,G.onUpdate&&G.onUpdate(G)}X.__version=G.version}function ze(X,G,we,We,He,Ve){const Mt=s.convert(we.format,we.colorSpace),at=s.convert(we.type),vt=R(we.internalFormat,Mt,at,we.colorSpace);if(!n.get(G).__hasExternalTextures){const Vt=Math.max(1,G.width>>Ve),Ge=Math.max(1,G.height>>Ve);He===r.TEXTURE_3D||He===r.TEXTURE_2D_ARRAY?t.texImage3D(He,Ve,vt,Vt,Ge,G.depth,0,Mt,at,null):t.texImage2D(He,Ve,vt,Vt,Ge,0,Mt,at,null)}t.bindFramebuffer(r.FRAMEBUFFER,X),Fe(G)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,We,He,n.get(we).__webglTexture,0,Je(G)):(He===r.TEXTURE_2D||He>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&He<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,We,He,n.get(we).__webglTexture,Ve),t.bindFramebuffer(r.FRAMEBUFFER,null)}function Ke(X,G,we){if(r.bindRenderbuffer(r.RENDERBUFFER,X),G.depthBuffer&&!G.stencilBuffer){let We=a===!0?r.DEPTH_COMPONENT24:r.DEPTH_COMPONENT16;if(we||Fe(G)){const He=G.depthTexture;He&&He.isDepthTexture&&(He.type===jr?We=r.DEPTH_COMPONENT32F:He.type===la&&(We=r.DEPTH_COMPONENT24));const Ve=Je(G);Fe(G)?c.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ve,We,G.width,G.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,Ve,We,G.width,G.height)}else r.renderbufferStorage(r.RENDERBUFFER,We,G.width,G.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,X)}else if(G.depthBuffer&&G.stencilBuffer){const We=Je(G);we&&Fe(G)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,We,r.DEPTH24_STENCIL8,G.width,G.height):Fe(G)?c.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,We,r.DEPTH24_STENCIL8,G.width,G.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,G.width,G.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,X)}else{const We=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let He=0;He<We.length;He++){const Ve=We[He],Mt=s.convert(Ve.format,Ve.colorSpace),at=s.convert(Ve.type),vt=R(Ve.internalFormat,Mt,at,Ve.colorSpace),It=Je(G);we&&Fe(G)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,It,vt,G.width,G.height):Fe(G)?c.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,It,vt,G.width,G.height):r.renderbufferStorage(r.RENDERBUFFER,vt,G.width,G.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function st(X,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,X),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(G.depthTexture).__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),ue(G.depthTexture,0);const We=n.get(G.depthTexture).__webglTexture,He=Je(G);if(G.depthTexture.format===Sc)Fe(G)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,We,0,He):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,We,0);else if(G.depthTexture.format===ih)Fe(G)?c.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,We,0,He):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,We,0);else throw new Error("Unknown depthTexture format")}function it(X){const G=n.get(X),we=X.isWebGLCubeRenderTarget===!0;if(X.depthTexture&&!G.__autoAllocateDepthBuffer){if(we)throw new Error("target.depthTexture not supported in Cube render targets");st(G.__webglFramebuffer,X)}else if(we){G.__webglDepthbuffer=[];for(let We=0;We<6;We++)t.bindFramebuffer(r.FRAMEBUFFER,G.__webglFramebuffer[We]),G.__webglDepthbuffer[We]=r.createRenderbuffer(),Ke(G.__webglDepthbuffer[We],X,!1)}else t.bindFramebuffer(r.FRAMEBUFFER,G.__webglFramebuffer),G.__webglDepthbuffer=r.createRenderbuffer(),Ke(G.__webglDepthbuffer,X,!1);t.bindFramebuffer(r.FRAMEBUFFER,null)}function ft(X,G,we){const We=n.get(X);G!==void 0&&ze(We.__webglFramebuffer,X,X.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),we!==void 0&&it(X)}function oe(X){const G=X.texture,we=n.get(X),We=n.get(G);X.addEventListener("dispose",V),X.isWebGLMultipleRenderTargets!==!0&&(We.__webglTexture===void 0&&(We.__webglTexture=r.createTexture()),We.__version=G.version,o.memory.textures++);const He=X.isWebGLCubeRenderTarget===!0,Ve=X.isWebGLMultipleRenderTargets===!0,Mt=E(X)||a;if(He){we.__webglFramebuffer=[];for(let at=0;at<6;at++)if(a&&G.mipmaps&&G.mipmaps.length>0){we.__webglFramebuffer[at]=[];for(let vt=0;vt<G.mipmaps.length;vt++)we.__webglFramebuffer[at][vt]=r.createFramebuffer()}else we.__webglFramebuffer[at]=r.createFramebuffer()}else{if(a&&G.mipmaps&&G.mipmaps.length>0){we.__webglFramebuffer=[];for(let at=0;at<G.mipmaps.length;at++)we.__webglFramebuffer[at]=r.createFramebuffer()}else we.__webglFramebuffer=r.createFramebuffer();if(Ve)if(i.drawBuffers){const at=X.texture;for(let vt=0,It=at.length;vt<It;vt++){const Vt=n.get(at[vt]);Vt.__webglTexture===void 0&&(Vt.__webglTexture=r.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&X.samples>0&&Fe(X)===!1){const at=Ve?G:[G];we.__webglMultisampledFramebuffer=r.createFramebuffer(),we.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,we.__webglMultisampledFramebuffer);for(let vt=0;vt<at.length;vt++){const It=at[vt];we.__webglColorRenderbuffer[vt]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,we.__webglColorRenderbuffer[vt]);const Vt=s.convert(It.format,It.colorSpace),Ge=s.convert(It.type),tn=R(It.internalFormat,Vt,Ge,It.colorSpace,X.isXRRenderTarget===!0),en=Je(X);r.renderbufferStorageMultisample(r.RENDERBUFFER,en,tn,X.width,X.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+vt,r.RENDERBUFFER,we.__webglColorRenderbuffer[vt])}r.bindRenderbuffer(r.RENDERBUFFER,null),X.depthBuffer&&(we.__webglDepthRenderbuffer=r.createRenderbuffer(),Ke(we.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(He){t.bindTexture(r.TEXTURE_CUBE_MAP,We.__webglTexture),ce(r.TEXTURE_CUBE_MAP,G,Mt);for(let at=0;at<6;at++)if(a&&G.mipmaps&&G.mipmaps.length>0)for(let vt=0;vt<G.mipmaps.length;vt++)ze(we.__webglFramebuffer[at][vt],X,G,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+at,vt);else ze(we.__webglFramebuffer[at],X,G,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+at,0);A(G,Mt)&&b(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ve){const at=X.texture;for(let vt=0,It=at.length;vt<It;vt++){const Vt=at[vt],Ge=n.get(Vt);t.bindTexture(r.TEXTURE_2D,Ge.__webglTexture),ce(r.TEXTURE_2D,Vt,Mt),ze(we.__webglFramebuffer,X,Vt,r.COLOR_ATTACHMENT0+vt,r.TEXTURE_2D,0),A(Vt,Mt)&&b(r.TEXTURE_2D)}t.unbindTexture()}else{let at=r.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(a?at=X.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(at,We.__webglTexture),ce(at,G,Mt),a&&G.mipmaps&&G.mipmaps.length>0)for(let vt=0;vt<G.mipmaps.length;vt++)ze(we.__webglFramebuffer[vt],X,G,r.COLOR_ATTACHMENT0,at,vt);else ze(we.__webglFramebuffer,X,G,r.COLOR_ATTACHMENT0,at,0);A(G,Mt)&&b(at),t.unbindTexture()}X.depthBuffer&&it(X)}function Xe(X){const G=E(X)||a,we=X.isWebGLMultipleRenderTargets===!0?X.texture:[X.texture];for(let We=0,He=we.length;We<He;We++){const Ve=we[We];if(A(Ve,G)){const Mt=X.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,at=n.get(Ve).__webglTexture;t.bindTexture(Mt,at),b(Mt),t.unbindTexture()}}}function Ue(X){if(a&&X.samples>0&&Fe(X)===!1){const G=X.isWebGLMultipleRenderTargets?X.texture:[X.texture],we=X.width,We=X.height;let He=r.COLOR_BUFFER_BIT;const Ve=[],Mt=X.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,at=n.get(X),vt=X.isWebGLMultipleRenderTargets===!0;if(vt)for(let It=0;It<G.length;It++)t.bindFramebuffer(r.FRAMEBUFFER,at.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+It,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,at.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+It,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,at.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,at.__webglFramebuffer);for(let It=0;It<G.length;It++){Ve.push(r.COLOR_ATTACHMENT0+It),X.depthBuffer&&Ve.push(Mt);const Vt=at.__ignoreDepthValues!==void 0?at.__ignoreDepthValues:!1;if(Vt===!1&&(X.depthBuffer&&(He|=r.DEPTH_BUFFER_BIT),X.stencilBuffer&&(He|=r.STENCIL_BUFFER_BIT)),vt&&r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,at.__webglColorRenderbuffer[It]),Vt===!0&&(r.invalidateFramebuffer(r.READ_FRAMEBUFFER,[Mt]),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[Mt])),vt){const Ge=n.get(G[It]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,Ge,0)}r.blitFramebuffer(0,0,we,We,0,0,we,We,He,r.NEAREST),h&&r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Ve)}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),vt)for(let It=0;It<G.length;It++){t.bindFramebuffer(r.FRAMEBUFFER,at.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+It,r.RENDERBUFFER,at.__webglColorRenderbuffer[It]);const Vt=n.get(G[It]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,at.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+It,r.TEXTURE_2D,Vt,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,at.__webglMultisampledFramebuffer)}}function Je(X){return Math.min(i.maxSamples,X.samples)}function Fe(X){const G=n.get(X);return a&&X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function Rt(X){const G=o.render.frame;f.get(X)!==G&&(f.set(X,G),X.update())}function dt(X,G){const we=X.colorSpace,We=X.format,He=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||X.format===oy||we!==Hs&&we!==Fs&&(Hn.getTransfer(we)===tr?a===!1?e.has("EXT_sRGB")===!0&&We===Wr?(X.format=oy,X.minFilter=Dn,X.generateMipmaps=!1):G=GS.sRGBToLinear(G):(We!==Wr||He!==Bs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",we)),G}this.allocateTextureUnit=Y,this.resetTextureUnits=_e,this.setTexture2D=ue,this.setTexture2DArray=Ee,this.setTexture3D=Z,this.setTextureCube=se,this.rebindTextures=ft,this.setupRenderTarget=oe,this.updateRenderTargetMipmap=Xe,this.updateMultisampleRenderTarget=Ue,this.setupDepthRenderbuffer=it,this.setupFrameBufferTexture=ze,this.useMultisampledRTT=Fe}function TL(r,e,t){const n=t.isWebGL2;function i(s,o=Fs){let a;const c=Hn.getTransfer(o);if(s===Bs)return r.UNSIGNED_BYTE;if(s===IS)return r.UNSIGNED_SHORT_4_4_4_4;if(s===kS)return r.UNSIGNED_SHORT_5_5_5_1;if(s===RS)return r.BYTE;if(s===LS)return r.SHORT;if(s===Iy)return r.UNSIGNED_SHORT;if(s===ky)return r.INT;if(s===la)return r.UNSIGNED_INT;if(s===jr)return r.FLOAT;if(s===di)return n?r.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===q2)return r.ALPHA;if(s===Wr)return r.RGBA;if(s===Y2)return r.LUMINANCE;if(s===Z2)return r.LUMINANCE_ALPHA;if(s===Sc)return r.DEPTH_COMPONENT;if(s===ih)return r.DEPTH_STENCIL;if(s===oy)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===DS)return r.RED;if(s===OS)return r.RED_INTEGER;if(s===K2)return r.RG;if(s===NS)return r.RG_INTEGER;if(s===US)return r.RGBA_INTEGER;if(s===Dv||s===Ov||s===Nv||s===Uv)if(c===tr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Dv)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Ov)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Nv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Uv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Dv)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Ov)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Nv)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Uv)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===n1||s===r1||s===i1||s===s1)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===n1)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===r1)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===i1)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===s1)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===FS)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===o1||s===a1)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===o1)return c===tr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===a1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===l1||s===c1||s===u1||s===h1||s===d1||s===f1||s===p1||s===m1||s===g1||s===v1||s===y1||s===_1||s===x1||s===w1)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===l1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===c1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===u1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===h1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===d1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===f1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===p1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===m1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===g1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===v1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===y1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===_1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===x1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===w1)return c===tr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Fv||s===S1||s===E1)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Fv)return c===tr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===S1)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===E1)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===J2||s===M1||s===T1||s===b1)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Fv)return a.COMPRESSED_RED_RGTC1_EXT;if(s===M1)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===T1)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===b1)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===wc?n?r.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):r[s]!==void 0?r[s]:null}return{convert:i}}class bL extends Mr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class vc extends bn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const rW={type:"move"};class Ox{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new vc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new vc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new vc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,o=null;const a=this._targetRay,c=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){o=!0;for(const M of e.hand.values()){const E=t.getJointPose(M,n),x=this._getHandJoint(h,M);E!==null&&(x.matrix.fromArray(E.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=E.radius),x.visible=E!==null}const f=h.joints["index-finger-tip"],m=h.joints["thumb-tip"],g=f.position.distanceTo(m.position),y=.02,_=.005;h.inputState.pinching&&g>y+_?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&g<=y-_&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(rW)))}return a!==null&&(a.visible=i!==null),c!==null&&(c.visible=s!==null),h!==null&&(h.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new vc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class iW extends _l{constructor(e,t){super();const n=this;let i=null,s=1,o=null,a="local-floor",c=1,h=null,f=null,m=null,g=null,y=null,_=null;const M=t.getContextAttributes();let E=null,x=null;const A=[],b=[],R=new Be;let N=null;const I=new Mr;I.layers.enable(1),I.viewport=new Ln;const O=new Mr;O.layers.enable(2),O.viewport=new Ln;const V=[I,O],k=new bL;k.layers.enable(1),k.layers.enable(2);let F=null,Q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ce){let xe=A[ce];return xe===void 0&&(xe=new Ox,A[ce]=xe),xe.getTargetRaySpace()},this.getControllerGrip=function(ce){let xe=A[ce];return xe===void 0&&(xe=new Ox,A[ce]=xe),xe.getGripSpace()},this.getHand=function(ce){let xe=A[ce];return xe===void 0&&(xe=new Ox,A[ce]=xe),xe.getHandSpace()};function le(ce){const xe=b.indexOf(ce.inputSource);if(xe===-1)return;const ke=A[xe];ke!==void 0&&(ke.update(ce.inputSource,ce.frame,h||o),ke.dispatchEvent({type:ce.type,data:ce.inputSource}))}function _e(){i.removeEventListener("select",le),i.removeEventListener("selectstart",le),i.removeEventListener("selectend",le),i.removeEventListener("squeeze",le),i.removeEventListener("squeezestart",le),i.removeEventListener("squeezeend",le),i.removeEventListener("end",_e),i.removeEventListener("inputsourceschange",Y);for(let ce=0;ce<A.length;ce++){const xe=b[ce];xe!==null&&(b[ce]=null,A[ce].disconnect(xe))}F=null,Q=null,e.setRenderTarget(E),y=null,g=null,m=null,i=null,x=null,ne.stop(),n.isPresenting=!1,e.setPixelRatio(N),e.setSize(R.width,R.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ce){s=ce,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ce){a=ce,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(ce){h=ce},this.getBaseLayer=function(){return g!==null?g:y},this.getBinding=function(){return m},this.getFrame=function(){return _},this.getSession=function(){return i},this.setSession=async function(ce){if(i=ce,i!==null){if(E=e.getRenderTarget(),i.addEventListener("select",le),i.addEventListener("selectstart",le),i.addEventListener("selectend",le),i.addEventListener("squeeze",le),i.addEventListener("squeezestart",le),i.addEventListener("squeezeend",le),i.addEventListener("end",_e),i.addEventListener("inputsourceschange",Y),M.xrCompatible!==!0&&await t.makeXRCompatible(),N=e.getPixelRatio(),e.getSize(R),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const xe={antialias:i.renderState.layers===void 0?M.antialias:!0,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(i,t,xe),i.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),x=new Gs(y.framebufferWidth,y.framebufferHeight,{format:Wr,type:Bs,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil})}else{let xe=null,ke=null,Re=null;M.depth&&(Re=M.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,xe=M.stencil?ih:Sc,ke=M.stencil?wc:la);const ze={colorFormat:t.RGBA8,depthFormat:Re,scaleFactor:s};m=new XRWebGLBinding(i,t),g=m.createProjectionLayer(ze),i.updateRenderState({layers:[g]}),e.setPixelRatio(1),e.setSize(g.textureWidth,g.textureHeight,!1),x=new Gs(g.textureWidth,g.textureHeight,{format:Wr,type:Bs,depthTexture:new qS(g.textureWidth,g.textureHeight,ke,void 0,void 0,void 0,void 0,void 0,void 0,xe),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0});const Ke=e.properties.get(x);Ke.__ignoreDepthValues=g.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(c),h=null,o=await i.requestReferenceSpace(a),ne.setContext(i),ne.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function Y(ce){for(let xe=0;xe<ce.removed.length;xe++){const ke=ce.removed[xe],Re=b.indexOf(ke);Re>=0&&(b[Re]=null,A[Re].disconnect(ke))}for(let xe=0;xe<ce.added.length;xe++){const ke=ce.added[xe];let Re=b.indexOf(ke);if(Re===-1){for(let Ke=0;Ke<A.length;Ke++)if(Ke>=b.length){b.push(ke),Re=Ke;break}else if(b[Ke]===null){b[Ke]=ke,Re=Ke;break}if(Re===-1)break}const ze=A[Re];ze&&ze.connect(ke)}}const me=new q,ue=new q;function Ee(ce,xe,ke){me.setFromMatrixPosition(xe.matrixWorld),ue.setFromMatrixPosition(ke.matrixWorld);const Re=me.distanceTo(ue),ze=xe.projectionMatrix.elements,Ke=ke.projectionMatrix.elements,st=ze[14]/(ze[10]-1),it=ze[14]/(ze[10]+1),ft=(ze[9]+1)/ze[5],oe=(ze[9]-1)/ze[5],Xe=(ze[8]-1)/ze[0],Ue=(Ke[8]+1)/Ke[0],Je=st*Xe,Fe=st*Ue,Rt=Re/(-Xe+Ue),dt=Rt*-Xe;xe.matrixWorld.decompose(ce.position,ce.quaternion,ce.scale),ce.translateX(dt),ce.translateZ(Rt),ce.matrixWorld.compose(ce.position,ce.quaternion,ce.scale),ce.matrixWorldInverse.copy(ce.matrixWorld).invert();const X=st+Rt,G=it+Rt,we=Je-dt,We=Fe+(Re-dt),He=ft*it/G*X,Ve=oe*it/G*X;ce.projectionMatrix.makePerspective(we,We,He,Ve,X,G),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert()}function Z(ce,xe){xe===null?ce.matrixWorld.copy(ce.matrix):ce.matrixWorld.multiplyMatrices(xe.matrixWorld,ce.matrix),ce.matrixWorldInverse.copy(ce.matrixWorld).invert()}this.updateCamera=function(ce){if(i===null)return;k.near=O.near=I.near=ce.near,k.far=O.far=I.far=ce.far,(F!==k.near||Q!==k.far)&&(i.updateRenderState({depthNear:k.near,depthFar:k.far}),F=k.near,Q=k.far);const xe=ce.parent,ke=k.cameras;Z(k,xe);for(let Re=0;Re<ke.length;Re++)Z(ke[Re],xe);ke.length===2?Ee(k,I,O):k.projectionMatrix.copy(I.projectionMatrix),se(ce,k,xe)};function se(ce,xe,ke){ke===null?ce.matrix.copy(xe.matrixWorld):(ce.matrix.copy(ke.matrixWorld),ce.matrix.invert(),ce.matrix.multiply(xe.matrixWorld)),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.updateMatrixWorld(!0),ce.projectionMatrix.copy(xe.projectionMatrix),ce.projectionMatrixInverse.copy(xe.projectionMatrixInverse),ce.isPerspectiveCamera&&(ce.fov=Sf*2*Math.atan(1/ce.projectionMatrix.elements[5]),ce.zoom=1)}this.getCamera=function(){return k},this.getFoveation=function(){if(!(g===null&&y===null))return c},this.setFoveation=function(ce){c=ce,g!==null&&(g.fixedFoveation=ce),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=ce)};let ee=null;function H(ce,xe){if(f=xe.getViewerPose(h||o),_=xe,f!==null){const ke=f.views;y!==null&&(e.setRenderTargetFramebuffer(x,y.framebuffer),e.setRenderTarget(x));let Re=!1;ke.length!==k.cameras.length&&(k.cameras.length=0,Re=!0);for(let ze=0;ze<ke.length;ze++){const Ke=ke[ze];let st=null;if(y!==null)st=y.getViewport(Ke);else{const ft=m.getViewSubImage(g,Ke);st=ft.viewport,ze===0&&(e.setRenderTargetTextures(x,ft.colorTexture,g.ignoreDepthValues?void 0:ft.depthStencilTexture),e.setRenderTarget(x))}let it=V[ze];it===void 0&&(it=new Mr,it.layers.enable(ze),it.viewport=new Ln,V[ze]=it),it.matrix.fromArray(Ke.transform.matrix),it.matrix.decompose(it.position,it.quaternion,it.scale),it.projectionMatrix.fromArray(Ke.projectionMatrix),it.projectionMatrixInverse.copy(it.projectionMatrix).invert(),it.viewport.set(st.x,st.y,st.width,st.height),ze===0&&(k.matrix.copy(it.matrix),k.matrix.decompose(k.position,k.quaternion,k.scale)),Re===!0&&k.cameras.push(it)}}for(let ke=0;ke<A.length;ke++){const Re=b[ke],ze=A[ke];Re!==null&&ze!==void 0&&ze.update(Re,xe,h||o)}ee&&ee(ce,xe),xe.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:xe}),_=null}const ne=new _L;ne.setAnimationLoop(H),this.setAnimationLoop=function(ce){ee=ce},this.dispose=function(){}}}function sW(r,e){function t(E,x){E.matrixAutoUpdate===!0&&E.updateMatrix(),x.value.copy(E.matrix)}function n(E,x){x.color.getRGB(E.fogColor.value,gL(r)),x.isFog?(E.fogNear.value=x.near,E.fogFar.value=x.far):x.isFogExp2&&(E.fogDensity.value=x.density)}function i(E,x,A,b,R){x.isMeshBasicMaterial||x.isMeshLambertMaterial?s(E,x):x.isMeshToonMaterial?(s(E,x),m(E,x)):x.isMeshPhongMaterial?(s(E,x),f(E,x)):x.isMeshStandardMaterial?(s(E,x),g(E,x),x.isMeshPhysicalMaterial&&y(E,x,R)):x.isMeshMatcapMaterial?(s(E,x),_(E,x)):x.isMeshDepthMaterial?s(E,x):x.isMeshDistanceMaterial?(s(E,x),M(E,x)):x.isMeshNormalMaterial?s(E,x):x.isLineBasicMaterial?(o(E,x),x.isLineDashedMaterial&&a(E,x)):x.isPointsMaterial?c(E,x,A,b):x.isSpriteMaterial?h(E,x):x.isShadowMaterial?(E.color.value.copy(x.color),E.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function s(E,x){E.opacity.value=x.opacity,x.color&&E.diffuse.value.copy(x.color),x.emissive&&E.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(E.map.value=x.map,t(x.map,E.mapTransform)),x.alphaMap&&(E.alphaMap.value=x.alphaMap,t(x.alphaMap,E.alphaMapTransform)),x.bumpMap&&(E.bumpMap.value=x.bumpMap,t(x.bumpMap,E.bumpMapTransform),E.bumpScale.value=x.bumpScale,x.side===ts&&(E.bumpScale.value*=-1)),x.normalMap&&(E.normalMap.value=x.normalMap,t(x.normalMap,E.normalMapTransform),E.normalScale.value.copy(x.normalScale),x.side===ts&&E.normalScale.value.negate()),x.displacementMap&&(E.displacementMap.value=x.displacementMap,t(x.displacementMap,E.displacementMapTransform),E.displacementScale.value=x.displacementScale,E.displacementBias.value=x.displacementBias),x.emissiveMap&&(E.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,E.emissiveMapTransform)),x.specularMap&&(E.specularMap.value=x.specularMap,t(x.specularMap,E.specularMapTransform)),x.alphaTest>0&&(E.alphaTest.value=x.alphaTest);const A=e.get(x).envMap;if(A&&(E.envMap.value=A,E.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=x.reflectivity,E.ior.value=x.ior,E.refractionRatio.value=x.refractionRatio),x.lightMap){E.lightMap.value=x.lightMap;const b=r._useLegacyLights===!0?Math.PI:1;E.lightMapIntensity.value=x.lightMapIntensity*b,t(x.lightMap,E.lightMapTransform)}x.aoMap&&(E.aoMap.value=x.aoMap,E.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,E.aoMapTransform))}function o(E,x){E.diffuse.value.copy(x.color),E.opacity.value=x.opacity,x.map&&(E.map.value=x.map,t(x.map,E.mapTransform))}function a(E,x){E.dashSize.value=x.dashSize,E.totalSize.value=x.dashSize+x.gapSize,E.scale.value=x.scale}function c(E,x,A,b){E.diffuse.value.copy(x.color),E.opacity.value=x.opacity,E.size.value=x.size*A,E.scale.value=b*.5,x.map&&(E.map.value=x.map,t(x.map,E.uvTransform)),x.alphaMap&&(E.alphaMap.value=x.alphaMap,t(x.alphaMap,E.alphaMapTransform)),x.alphaTest>0&&(E.alphaTest.value=x.alphaTest)}function h(E,x){E.diffuse.value.copy(x.color),E.opacity.value=x.opacity,E.rotation.value=x.rotation,x.map&&(E.map.value=x.map,t(x.map,E.mapTransform)),x.alphaMap&&(E.alphaMap.value=x.alphaMap,t(x.alphaMap,E.alphaMapTransform)),x.alphaTest>0&&(E.alphaTest.value=x.alphaTest)}function f(E,x){E.specular.value.copy(x.specular),E.shininess.value=Math.max(x.shininess,1e-4)}function m(E,x){x.gradientMap&&(E.gradientMap.value=x.gradientMap)}function g(E,x){E.metalness.value=x.metalness,x.metalnessMap&&(E.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,E.metalnessMapTransform)),E.roughness.value=x.roughness,x.roughnessMap&&(E.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,E.roughnessMapTransform)),e.get(x).envMap&&(E.envMapIntensity.value=x.envMapIntensity)}function y(E,x,A){E.ior.value=x.ior,x.sheen>0&&(E.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),E.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(E.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,E.sheenColorMapTransform)),x.sheenRoughnessMap&&(E.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,E.sheenRoughnessMapTransform))),x.clearcoat>0&&(E.clearcoat.value=x.clearcoat,E.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(E.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,E.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(E.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===ts&&E.clearcoatNormalScale.value.negate())),x.iridescence>0&&(E.iridescence.value=x.iridescence,E.iridescenceIOR.value=x.iridescenceIOR,E.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(E.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,E.iridescenceMapTransform)),x.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),x.transmission>0&&(E.transmission.value=x.transmission,E.transmissionSamplerMap.value=A.texture,E.transmissionSamplerSize.value.set(A.width,A.height),x.transmissionMap&&(E.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,E.transmissionMapTransform)),E.thickness.value=x.thickness,x.thicknessMap&&(E.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=x.attenuationDistance,E.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(E.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(E.anisotropyMap.value=x.anisotropyMap,t(x.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=x.specularIntensity,E.specularColor.value.copy(x.specularColor),x.specularColorMap&&(E.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,E.specularColorMapTransform)),x.specularIntensityMap&&(E.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,E.specularIntensityMapTransform))}function _(E,x){x.matcap&&(E.matcap.value=x.matcap)}function M(E,x){const A=e.get(x).light;E.referencePosition.value.setFromMatrixPosition(A.matrixWorld),E.nearDistance.value=A.shadow.camera.near,E.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function oW(r,e,t,n){let i={},s={},o=[];const a=t.isWebGL2?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0;function c(A,b){const R=b.program;n.uniformBlockBinding(A,R)}function h(A,b){let R=i[A.id];R===void 0&&(_(A),R=f(A),i[A.id]=R,A.addEventListener("dispose",E));const N=b.program;n.updateUBOMapping(A,N);const I=e.render.frame;s[A.id]!==I&&(g(A),s[A.id]=I)}function f(A){const b=m();A.__bindingPointIndex=b;const R=r.createBuffer(),N=A.__size,I=A.usage;return r.bindBuffer(r.UNIFORM_BUFFER,R),r.bufferData(r.UNIFORM_BUFFER,N,I),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,b,R),R}function m(){for(let A=0;A<a;A++)if(o.indexOf(A)===-1)return o.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(A){const b=i[A.id],R=A.uniforms,N=A.__cache;r.bindBuffer(r.UNIFORM_BUFFER,b);for(let I=0,O=R.length;I<O;I++){const V=Array.isArray(R[I])?R[I]:[R[I]];for(let k=0,F=V.length;k<F;k++){const Q=V[k];if(y(Q,I,k,N)===!0){const le=Q.__offset,_e=Array.isArray(Q.value)?Q.value:[Q.value];let Y=0;for(let me=0;me<_e.length;me++){const ue=_e[me],Ee=M(ue);typeof ue=="number"||typeof ue=="boolean"?(Q.__data[0]=ue,r.bufferSubData(r.UNIFORM_BUFFER,le+Y,Q.__data)):ue.isMatrix3?(Q.__data[0]=ue.elements[0],Q.__data[1]=ue.elements[1],Q.__data[2]=ue.elements[2],Q.__data[3]=0,Q.__data[4]=ue.elements[3],Q.__data[5]=ue.elements[4],Q.__data[6]=ue.elements[5],Q.__data[7]=0,Q.__data[8]=ue.elements[6],Q.__data[9]=ue.elements[7],Q.__data[10]=ue.elements[8],Q.__data[11]=0):(ue.toArray(Q.__data,Y),Y+=Ee.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,le,Q.__data)}}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function y(A,b,R,N){const I=A.value,O=b+"_"+R;if(N[O]===void 0)return typeof I=="number"||typeof I=="boolean"?N[O]=I:N[O]=I.clone(),!0;{const V=N[O];if(typeof I=="number"||typeof I=="boolean"){if(V!==I)return N[O]=I,!0}else if(V.equals(I)===!1)return V.copy(I),!0}return!1}function _(A){const b=A.uniforms;let R=0;const N=16;for(let O=0,V=b.length;O<V;O++){const k=Array.isArray(b[O])?b[O]:[b[O]];for(let F=0,Q=k.length;F<Q;F++){const le=k[F],_e=Array.isArray(le.value)?le.value:[le.value];for(let Y=0,me=_e.length;Y<me;Y++){const ue=_e[Y],Ee=M(ue),Z=R%N;Z!==0&&N-Z<Ee.boundary&&(R+=N-Z),le.__data=new Float32Array(Ee.storage/Float32Array.BYTES_PER_ELEMENT),le.__offset=R,R+=Ee.storage}}}const I=R%N;return I>0&&(R+=N-I),A.__size=R,A.__cache={},this}function M(A){const b={boundary:0,storage:0};return typeof A=="number"||typeof A=="boolean"?(b.boundary=4,b.storage=4):A.isVector2?(b.boundary=8,b.storage=8):A.isVector3||A.isColor?(b.boundary=16,b.storage=12):A.isVector4?(b.boundary=16,b.storage=16):A.isMatrix3?(b.boundary=48,b.storage=48):A.isMatrix4?(b.boundary=64,b.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),b}function E(A){const b=A.target;b.removeEventListener("dispose",E);const R=o.indexOf(b.__bindingPointIndex);o.splice(R,1),r.deleteBuffer(i[b.id]),delete i[b.id],delete s[b.id]}function x(){for(const A in i)r.deleteBuffer(i[A]);o=[],i={},s={}}return{bind:c,update:h,dispose:x}}class By{constructor(e={}){const{canvas:t=fL(),context:n=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:h=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:m=!1}=e;this.isWebGLRenderer=!0;let g;n!==null?g=n.getContextAttributes().alpha:g=o;const y=new Uint32Array(4),_=new Int32Array(4);let M=null,E=null;const x=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Hr,this._useLegacyLights=!1,this.toneMapping=da,this.toneMappingExposure=1;const b=this;let R=!1,N=0,I=0,O=null,V=-1,k=null;const F=new Ln,Q=new Ln;let le=null;const _e=new gt(0);let Y=0,me=t.width,ue=t.height,Ee=1,Z=null,se=null;const ee=new Ln(0,0,me,ue),H=new Ln(0,0,me,ue);let ne=!1;const ce=new ug;let xe=!1,ke=!1,Re=null;const ze=new bt,Ke=new Be,st=new q,it={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ft(){return O===null?Ee:1}let oe=n;function Xe(U,$){for(let J=0;J<U.length;J++){const ae=U[J],ie=t.getContext(ae,$);if(ie!==null)return ie}return null}try{const U={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:f,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${sg}`),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",de,!1),t.addEventListener("webglcontextcreationerror",et,!1),oe===null){const $=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&$.shift(),oe=Xe($,U),oe===null)throw Xe($)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&oe instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),oe.getShaderPrecisionFormat===void 0&&(oe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let Ue,Je,Fe,Rt,dt,X,G,we,We,He,Ve,Mt,at,vt,It,Vt,Ge,tn,en,Ft,yt,xt,he,Ne;function tt(){Ue=new x8(oe),Je=new p8(oe,Ue,e),Ue.init(Je),xt=new TL(oe,Ue,Je),Fe=new tW(oe,Ue,Je),Rt=new E8(oe),dt=new GG,X=new nW(oe,Ue,Fe,dt,Je,xt,Rt),G=new g8(b),we=new _8(b),We=new LV(oe,Je),he=new d8(oe,Ue,We,Je),He=new w8(oe,We,Rt,he),Ve=new A8(oe,He,We,Rt),en=new b8(oe,Je,X),Vt=new m8(dt),Mt=new HG(b,G,we,Ue,Je,he,Vt),at=new sW(b,dt),vt=new jG,It=new KG(Ue,Je),tn=new h8(b,G,we,Fe,Ve,g,c),Ge=new eW(b,Ve,Je),Ne=new oW(oe,Rt,Je,Fe),Ft=new f8(oe,Ue,Rt,Je),yt=new S8(oe,Ue,Rt,Je),Rt.programs=Mt.programs,b.capabilities=Je,b.extensions=Ue,b.properties=dt,b.renderLists=vt,b.shadowMap=Ge,b.state=Fe,b.info=Rt}tt();const pt=new iW(b,oe);this.xr=pt,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){const U=Ue.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=Ue.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return Ee},this.setPixelRatio=function(U){U!==void 0&&(Ee=U,this.setSize(me,ue,!1))},this.getSize=function(U){return U.set(me,ue)},this.setSize=function(U,$,J=!0){if(pt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}me=U,ue=$,t.width=Math.floor(U*Ee),t.height=Math.floor($*Ee),J===!0&&(t.style.width=U+"px",t.style.height=$+"px"),this.setViewport(0,0,U,$)},this.getDrawingBufferSize=function(U){return U.set(me*Ee,ue*Ee).floor()},this.setDrawingBufferSize=function(U,$,J){me=U,ue=$,Ee=J,t.width=Math.floor(U*J),t.height=Math.floor($*J),this.setViewport(0,0,U,$)},this.getCurrentViewport=function(U){return U.copy(F)},this.getViewport=function(U){return U.copy(ee)},this.setViewport=function(U,$,J,ae){U.isVector4?ee.set(U.x,U.y,U.z,U.w):ee.set(U,$,J,ae),Fe.viewport(F.copy(ee).multiplyScalar(Ee).floor())},this.getScissor=function(U){return U.copy(H)},this.setScissor=function(U,$,J,ae){U.isVector4?H.set(U.x,U.y,U.z,U.w):H.set(U,$,J,ae),Fe.scissor(Q.copy(H).multiplyScalar(Ee).floor())},this.getScissorTest=function(){return ne},this.setScissorTest=function(U){Fe.setScissorTest(ne=U)},this.setOpaqueSort=function(U){Z=U},this.setTransparentSort=function(U){se=U},this.getClearColor=function(U){return U.copy(tn.getClearColor())},this.setClearColor=function(){tn.setClearColor.apply(tn,arguments)},this.getClearAlpha=function(){return tn.getClearAlpha()},this.setClearAlpha=function(){tn.setClearAlpha.apply(tn,arguments)},this.clear=function(U=!0,$=!0,J=!0){let ae=0;if(U){let ie=!1;if(O!==null){const Ce=O.texture.format;ie=Ce===US||Ce===NS||Ce===OS}if(ie){const Ce=O.texture.type,Le=Ce===Bs||Ce===la||Ce===Iy||Ce===wc||Ce===IS||Ce===kS,De=tn.getClearColor(),be=tn.getClearAlpha(),wt=De.r,je=De.g,Ye=De.b;Le?(y[0]=wt,y[1]=je,y[2]=Ye,y[3]=be,oe.clearBufferuiv(oe.COLOR,0,y)):(_[0]=wt,_[1]=je,_[2]=Ye,_[3]=be,oe.clearBufferiv(oe.COLOR,0,_))}else ae|=oe.COLOR_BUFFER_BIT}$&&(ae|=oe.DEPTH_BUFFER_BIT),J&&(ae|=oe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),oe.clear(ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",de,!1),t.removeEventListener("webglcontextcreationerror",et,!1),vt.dispose(),It.dispose(),dt.dispose(),G.dispose(),we.dispose(),Ve.dispose(),he.dispose(),Ne.dispose(),Mt.dispose(),pt.dispose(),pt.removeEventListener("sessionstart",Fn),pt.removeEventListener("sessionend",hn),Re&&(Re.dispose(),Re=null),fr.stop()};function Se(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function de(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;const U=Rt.autoReset,$=Ge.enabled,J=Ge.autoUpdate,ae=Ge.needsUpdate,ie=Ge.type;tt(),Rt.autoReset=U,Ge.enabled=$,Ge.autoUpdate=J,Ge.needsUpdate=ae,Ge.type=ie}function et(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function ct(U){const $=U.target;$.removeEventListener("dispose",ct),Ut($)}function Ut(U){At(U),dt.remove(U)}function At(U){const $=dt.get(U).programs;$!==void 0&&($.forEach(function(J){Mt.releaseProgram(J)}),U.isShaderMaterial&&Mt.releaseShaderCache(U))}this.renderBufferDirect=function(U,$,J,ae,ie,Ce){$===null&&($=it);const Le=ie.isMesh&&ie.matrixWorld.determinant()<0,De=B(U,$,J,ae,ie);Fe.setMaterial(ae,Le);let be=J.index,wt=1;if(ae.wireframe===!0){if(be=He.getWireframeAttribute(J),be===void 0)return;wt=2}const je=J.drawRange,Ye=J.attributes.position;let St=je.start*wt,Nt=(je.start+je.count)*wt;Ce!==null&&(St=Math.max(St,Ce.start*wt),Nt=Math.min(Nt,(Ce.start+Ce.count)*wt)),be!==null?(St=Math.max(St,0),Nt=Math.min(Nt,be.count)):Ye!=null&&(St=Math.max(St,0),Nt=Math.min(Nt,Ye.count));const Bt=Nt-St;if(Bt<0||Bt===1/0)return;he.setup(ie,ae,De,J,be);let $t,ut=Ft;if(be!==null&&($t=We.get(be),ut=yt,ut.setIndex($t)),ie.isMesh)ae.wireframe===!0?(Fe.setLineWidth(ae.wireframeLinewidth*ft()),ut.setMode(oe.LINES)):ut.setMode(oe.TRIANGLES);else if(ie.isLine){let lt=ae.linewidth;lt===void 0&&(lt=1),Fe.setLineWidth(lt*ft()),ie.isLineSegments?ut.setMode(oe.LINES):ie.isLineLoop?ut.setMode(oe.LINE_LOOP):ut.setMode(oe.LINE_STRIP)}else ie.isPoints?ut.setMode(oe.POINTS):ie.isSprite&&ut.setMode(oe.TRIANGLES);if(ie.isBatchedMesh)ut.renderMultiDraw(ie._multiDrawStarts,ie._multiDrawCounts,ie._multiDrawCount);else if(ie.isInstancedMesh)ut.renderInstances(St,Bt,ie.count);else if(J.isInstancedBufferGeometry){const lt=J._maxInstanceCount!==void 0?J._maxInstanceCount:1/0,Xt=Math.min(J.instanceCount,lt);ut.renderInstances(St,Bt,Xt)}else ut.render(St,Bt)};function on(U,$,J){U.transparent===!0&&U.side===Go&&U.forceSinglePass===!1?(U.side=ts,U.needsUpdate=!0,Kt(U,$,J),U.side=gl,U.needsUpdate=!0,Kt(U,$,J),U.side=Go):Kt(U,$,J)}this.compile=function(U,$,J=null){J===null&&(J=U),E=It.get(J),E.init(),A.push(E),J.traverseVisible(function(ie){ie.isLight&&ie.layers.test($.layers)&&(E.pushLight(ie),ie.castShadow&&E.pushShadow(ie))}),U!==J&&U.traverseVisible(function(ie){ie.isLight&&ie.layers.test($.layers)&&(E.pushLight(ie),ie.castShadow&&E.pushShadow(ie))}),E.setupLights(b._useLegacyLights);const ae=new Set;return U.traverse(function(ie){const Ce=ie.material;if(Ce)if(Array.isArray(Ce))for(let Le=0;Le<Ce.length;Le++){const De=Ce[Le];on(De,J,ie),ae.add(De)}else on(Ce,J,ie),ae.add(Ce)}),A.pop(),E=null,ae},this.compileAsync=function(U,$,J=null){const ae=this.compile(U,$,J);return new Promise(ie=>{function Ce(){if(ae.forEach(function(Le){dt.get(Le).currentProgram.isReady()&&ae.delete(Le)}),ae.size===0){ie(U);return}setTimeout(Ce,10)}Ue.get("KHR_parallel_shader_compile")!==null?Ce():setTimeout(Ce,10)})};let gn=null;function Pn(U){gn&&gn(U)}function Fn(){fr.stop()}function hn(){fr.start()}const fr=new _L;fr.setAnimationLoop(Pn),typeof self<"u"&&fr.setContext(self),this.setAnimationLoop=function(U){gn=U,pt.setAnimationLoop(U),U===null?fr.stop():fr.start()},pt.addEventListener("sessionstart",Fn),pt.addEventListener("sessionend",hn),this.render=function(U,$){if($!==void 0&&$.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),$.parent===null&&$.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),pt.enabled===!0&&pt.isPresenting===!0&&(pt.cameraAutoUpdate===!0&&pt.updateCamera($),$=pt.getCamera()),U.isScene===!0&&U.onBeforeRender(b,U,$,O),E=It.get(U,A.length),E.init(),A.push(E),ze.multiplyMatrices($.projectionMatrix,$.matrixWorldInverse),ce.setFromProjectionMatrix(ze),ke=this.localClippingEnabled,xe=Vt.init(this.clippingPlanes,ke),M=vt.get(U,x.length),M.init(),x.push(M),kr(U,$,0,b.sortObjects),M.finish(),b.sortObjects===!0&&M.sort(Z,se),this.info.render.frame++,xe===!0&&Vt.beginShadows();const J=E.state.shadowsArray;if(Ge.render(J,U,$),xe===!0&&Vt.endShadows(),this.info.autoReset===!0&&this.info.reset(),tn.render(M,U),E.setupLights(b._useLegacyLights),$.isArrayCamera){const ae=$.cameras;for(let ie=0,Ce=ae.length;ie<Ce;ie++){const Le=ae[ie];js(M,U,Le,Le.viewport)}}else js(M,U,$);O!==null&&(X.updateMultisampleRenderTarget(O),X.updateRenderTargetMipmap(O)),U.isScene===!0&&U.onAfterRender(b,U,$),he.resetDefaultState(),V=-1,k=null,A.pop(),A.length>0?E=A[A.length-1]:E=null,x.pop(),x.length>0?M=x[x.length-1]:M=null};function kr(U,$,J,ae){if(U.visible===!1)return;if(U.layers.test($.layers)){if(U.isGroup)J=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update($);else if(U.isLight)E.pushLight(U),U.castShadow&&E.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||ce.intersectsSprite(U)){ae&&st.setFromMatrixPosition(U.matrixWorld).applyMatrix4(ze);const Le=Ve.update(U),De=U.material;De.visible&&M.push(U,Le,De,J,st.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||ce.intersectsObject(U))){const Le=Ve.update(U),De=U.material;if(ae&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),st.copy(U.boundingSphere.center)):(Le.boundingSphere===null&&Le.computeBoundingSphere(),st.copy(Le.boundingSphere.center)),st.applyMatrix4(U.matrixWorld).applyMatrix4(ze)),Array.isArray(De)){const be=Le.groups;for(let wt=0,je=be.length;wt<je;wt++){const Ye=be[wt],St=De[Ye.materialIndex];St&&St.visible&&M.push(U,Le,St,J,st.z,Ye)}}else De.visible&&M.push(U,Le,De,J,st.z,null)}}const Ce=U.children;for(let Le=0,De=Ce.length;Le<De;Le++)kr(Ce[Le],$,J,ae)}function js(U,$,J,ae){const ie=U.opaque,Ce=U.transmissive,Le=U.transparent;E.setupLightsView(J),xe===!0&&Vt.setGlobalState(b.clippingPlanes,J),Ce.length>0&&Es(ie,Ce,$,J),ae&&Fe.viewport(F.copy(ae)),ie.length>0&&pi(ie,$,J),Ce.length>0&&pi(Ce,$,J),Le.length>0&&pi(Le,$,J),Fe.buffers.depth.setTest(!0),Fe.buffers.depth.setMask(!0),Fe.buffers.color.setMask(!0),Fe.setPolygonOffset(!1)}function Es(U,$,J,ae){if((J.isScene===!0?J.overrideMaterial:null)!==null)return;const Ce=Je.isWebGL2;Re===null&&(Re=new Gs(1,1,{generateMipmaps:!0,type:Ue.has("EXT_color_buffer_half_float")?di:Bs,minFilter:Pc,samples:Ce?4:0})),b.getDrawingBufferSize(Ke),Ce?Re.setSize(Ke.x,Ke.y):Re.setSize(ay(Ke.x),ay(Ke.y));const Le=b.getRenderTarget();b.setRenderTarget(Re),b.getClearColor(_e),Y=b.getClearAlpha(),Y<1&&b.setClearColor(16777215,.5),b.clear();const De=b.toneMapping;b.toneMapping=da,pi(U,J,ae),X.updateMultisampleRenderTarget(Re),X.updateRenderTargetMipmap(Re);let be=!1;for(let wt=0,je=$.length;wt<je;wt++){const Ye=$[wt],St=Ye.object,Nt=Ye.geometry,Bt=Ye.material,$t=Ye.group;if(Bt.side===Go&&St.layers.test(ae.layers)){const ut=Bt.side;Bt.side=ts,Bt.needsUpdate=!0,$r(St,J,ae,Nt,Bt,$t),Bt.side=ut,Bt.needsUpdate=!0,be=!0}}be===!0&&(X.updateMultisampleRenderTarget(Re),X.updateRenderTargetMipmap(Re)),b.setRenderTarget(Le),b.setClearColor(_e,Y),b.toneMapping=De}function pi(U,$,J){const ae=$.isScene===!0?$.overrideMaterial:null;for(let ie=0,Ce=U.length;ie<Ce;ie++){const Le=U[ie],De=Le.object,be=Le.geometry,wt=ae===null?Le.material:ae,je=Le.group;De.layers.test(J.layers)&&$r(De,$,J,be,wt,je)}}function $r(U,$,J,ae,ie,Ce){U.onBeforeRender(b,$,J,ae,ie,Ce),U.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),ie.onBeforeRender(b,$,J,ae,U,Ce),ie.transparent===!0&&ie.side===Go&&ie.forceSinglePass===!1?(ie.side=ts,ie.needsUpdate=!0,b.renderBufferDirect(J,$,ae,ie,U,Ce),ie.side=gl,ie.needsUpdate=!0,b.renderBufferDirect(J,$,ae,ie,U,Ce),ie.side=Go):b.renderBufferDirect(J,$,ae,ie,U,Ce),U.onAfterRender(b,$,J,ae,ie,Ce)}function Kt(U,$,J){$.isScene!==!0&&($=it);const ae=dt.get(U),ie=E.state.lights,Ce=E.state.shadowsArray,Le=ie.state.version,De=Mt.getParameters(U,ie.state,Ce,$,J),be=Mt.getProgramCacheKey(De);let wt=ae.programs;ae.environment=U.isMeshStandardMaterial?$.environment:null,ae.fog=$.fog,ae.envMap=(U.isMeshStandardMaterial?we:G).get(U.envMap||ae.environment),wt===void 0&&(U.addEventListener("dispose",ct),wt=new Map,ae.programs=wt);let je=wt.get(be);if(je!==void 0){if(ae.currentProgram===je&&ae.lightsStateVersion===Le)return wl(U,De),je}else De.uniforms=Mt.getUniforms(U),U.onBuild(J,De,b),U.onBeforeCompile(De,b),je=Mt.acquireProgram(De,be),wt.set(be,je),ae.uniforms=De.uniforms;const Ye=ae.uniforms;return(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(Ye.clippingPlanes=Vt.uniform),wl(U,De),ae.needsLights=fe(U),ae.lightsStateVersion=Le,ae.needsLights&&(Ye.ambientLightColor.value=ie.state.ambient,Ye.lightProbe.value=ie.state.probe,Ye.directionalLights.value=ie.state.directional,Ye.directionalLightShadows.value=ie.state.directionalShadow,Ye.spotLights.value=ie.state.spot,Ye.spotLightShadows.value=ie.state.spotShadow,Ye.rectAreaLights.value=ie.state.rectArea,Ye.ltc_1.value=ie.state.rectAreaLTC1,Ye.ltc_2.value=ie.state.rectAreaLTC2,Ye.pointLights.value=ie.state.point,Ye.pointLightShadows.value=ie.state.pointShadow,Ye.hemisphereLights.value=ie.state.hemi,Ye.directionalShadowMap.value=ie.state.directionalShadowMap,Ye.directionalShadowMatrix.value=ie.state.directionalShadowMatrix,Ye.spotShadowMap.value=ie.state.spotShadowMap,Ye.spotLightMatrix.value=ie.state.spotLightMatrix,Ye.spotLightMap.value=ie.state.spotLightMap,Ye.pointShadowMap.value=ie.state.pointShadowMap,Ye.pointShadowMatrix.value=ie.state.pointShadowMatrix),ae.currentProgram=je,ae.uniformsList=null,je}function _a(U){if(U.uniformsList===null){const $=U.currentProgram.getUniforms();U.uniformsList=zv.seqWithValue($.seq,U.uniforms)}return U.uniformsList}function wl(U,$){const J=dt.get(U);J.outputColorSpace=$.outputColorSpace,J.batching=$.batching,J.instancing=$.instancing,J.instancingColor=$.instancingColor,J.skinning=$.skinning,J.morphTargets=$.morphTargets,J.morphNormals=$.morphNormals,J.morphColors=$.morphColors,J.morphTargetsCount=$.morphTargetsCount,J.numClippingPlanes=$.numClippingPlanes,J.numIntersection=$.numClipIntersection,J.vertexAlphas=$.vertexAlphas,J.vertexTangents=$.vertexTangents,J.toneMapping=$.toneMapping}function B(U,$,J,ae,ie){$.isScene!==!0&&($=it),X.resetTextureUnits();const Ce=$.fog,Le=ae.isMeshStandardMaterial?$.environment:null,De=O===null?b.outputColorSpace:O.isXRRenderTarget===!0?O.texture.colorSpace:Hs,be=(ae.isMeshStandardMaterial?we:G).get(ae.envMap||Le),wt=ae.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,je=!!J.attributes.tangent&&(!!ae.normalMap||ae.anisotropy>0),Ye=!!J.morphAttributes.position,St=!!J.morphAttributes.normal,Nt=!!J.morphAttributes.color;let Bt=da;ae.toneMapped&&(O===null||O.isXRRenderTarget===!0)&&(Bt=b.toneMapping);const $t=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,ut=$t!==void 0?$t.length:0,lt=dt.get(ae),Xt=E.state.lights;if(xe===!0&&(ke===!0||U!==k)){const nn=U===k&&ae.id===V;Vt.setState(ae,U,nn)}let Ht=!1;ae.version===lt.__version?(lt.needsLights&&lt.lightsStateVersion!==Xt.state.version||lt.outputColorSpace!==De||ie.isBatchedMesh&&lt.batching===!1||!ie.isBatchedMesh&&lt.batching===!0||ie.isInstancedMesh&&lt.instancing===!1||!ie.isInstancedMesh&&lt.instancing===!0||ie.isSkinnedMesh&&lt.skinning===!1||!ie.isSkinnedMesh&&lt.skinning===!0||ie.isInstancedMesh&&lt.instancingColor===!0&&ie.instanceColor===null||ie.isInstancedMesh&&lt.instancingColor===!1&&ie.instanceColor!==null||lt.envMap!==be||ae.fog===!0&&lt.fog!==Ce||lt.numClippingPlanes!==void 0&&(lt.numClippingPlanes!==Vt.numPlanes||lt.numIntersection!==Vt.numIntersection)||lt.vertexAlphas!==wt||lt.vertexTangents!==je||lt.morphTargets!==Ye||lt.morphNormals!==St||lt.morphColors!==Nt||lt.toneMapping!==Bt||Je.isWebGL2===!0&&lt.morphTargetsCount!==ut)&&(Ht=!0):(Ht=!0,lt.__version=ae.version);let qt=lt.currentProgram;Ht===!0&&(qt=Kt(ae,$,ie));let kn=!1,Yn=!1,Bn=!1;const vn=qt.getUniforms(),an=lt.uniforms;if(Fe.useProgram(qt.program)&&(kn=!0,Yn=!0,Bn=!0),ae.id!==V&&(V=ae.id,Yn=!0),kn||k!==U){vn.setValue(oe,"projectionMatrix",U.projectionMatrix),vn.setValue(oe,"viewMatrix",U.matrixWorldInverse);const nn=vn.map.cameraPosition;nn!==void 0&&nn.setValue(oe,st.setFromMatrixPosition(U.matrixWorld)),Je.logarithmicDepthBuffer&&vn.setValue(oe,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),(ae.isMeshPhongMaterial||ae.isMeshToonMaterial||ae.isMeshLambertMaterial||ae.isMeshBasicMaterial||ae.isMeshStandardMaterial||ae.isShaderMaterial)&&vn.setValue(oe,"isOrthographic",U.isOrthographicCamera===!0),k!==U&&(k=U,Yn=!0,Bn=!0)}if(ie.isSkinnedMesh){vn.setOptional(oe,ie,"bindMatrix"),vn.setOptional(oe,ie,"bindMatrixInverse");const nn=ie.skeleton;nn&&(Je.floatVertexTextures?(nn.boneTexture===null&&nn.computeBoneTexture(),vn.setValue(oe,"boneTexture",nn.boneTexture,X)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}ie.isBatchedMesh&&(vn.setOptional(oe,ie,"batchingTexture"),vn.setValue(oe,"batchingTexture",ie._matricesTexture,X));const sr=J.morphAttributes;if((sr.position!==void 0||sr.normal!==void 0||sr.color!==void 0&&Je.isWebGL2===!0)&&en.update(ie,J,qt),(Yn||lt.receiveShadow!==ie.receiveShadow)&&(lt.receiveShadow=ie.receiveShadow,vn.setValue(oe,"receiveShadow",ie.receiveShadow)),ae.isMeshGouraudMaterial&&ae.envMap!==null&&(an.envMap.value=be,an.flipEnvMap.value=be.isCubeTexture&&be.isRenderTargetTexture===!1?-1:1),Yn&&(vn.setValue(oe,"toneMappingExposure",b.toneMappingExposure),lt.needsLights&&W(an,Bn),Ce&&ae.fog===!0&&at.refreshFogUniforms(an,Ce),at.refreshMaterialUniforms(an,ae,Ee,ue,Re),zv.upload(oe,_a(lt),an,X)),ae.isShaderMaterial&&ae.uniformsNeedUpdate===!0&&(zv.upload(oe,_a(lt),an,X),ae.uniformsNeedUpdate=!1),ae.isSpriteMaterial&&vn.setValue(oe,"center",ie.center),vn.setValue(oe,"modelViewMatrix",ie.modelViewMatrix),vn.setValue(oe,"normalMatrix",ie.normalMatrix),vn.setValue(oe,"modelMatrix",ie.matrixWorld),ae.isShaderMaterial||ae.isRawShaderMaterial){const nn=ae.uniformsGroups;for(let yn=0,zn=nn.length;yn<zn;yn++)if(Je.isWebGL2){const Mi=nn[yn];Ne.update(Mi,qt),Ne.bind(Mi,qt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return qt}function W(U,$){U.ambientLightColor.needsUpdate=$,U.lightProbe.needsUpdate=$,U.directionalLights.needsUpdate=$,U.directionalLightShadows.needsUpdate=$,U.pointLights.needsUpdate=$,U.pointLightShadows.needsUpdate=$,U.spotLights.needsUpdate=$,U.spotLightShadows.needsUpdate=$,U.rectAreaLights.needsUpdate=$,U.hemisphereLights.needsUpdate=$}function fe(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return O},this.setRenderTargetTextures=function(U,$,J){dt.get(U.texture).__webglTexture=$,dt.get(U.depthTexture).__webglTexture=J;const ae=dt.get(U);ae.__hasExternalTextures=!0,ae.__hasExternalTextures&&(ae.__autoAllocateDepthBuffer=J===void 0,ae.__autoAllocateDepthBuffer||Ue.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ae.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,$){const J=dt.get(U);J.__webglFramebuffer=$,J.__useDefaultFramebuffer=$===void 0},this.setRenderTarget=function(U,$=0,J=0){O=U,N=$,I=J;let ae=!0,ie=null,Ce=!1,Le=!1;if(U){const be=dt.get(U);be.__useDefaultFramebuffer!==void 0?(Fe.bindFramebuffer(oe.FRAMEBUFFER,null),ae=!1):be.__webglFramebuffer===void 0?X.setupRenderTarget(U):be.__hasExternalTextures&&X.rebindTextures(U,dt.get(U.texture).__webglTexture,dt.get(U.depthTexture).__webglTexture);const wt=U.texture;(wt.isData3DTexture||wt.isDataArrayTexture||wt.isCompressedArrayTexture)&&(Le=!0);const je=dt.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(je[$])?ie=je[$][J]:ie=je[$],Ce=!0):Je.isWebGL2&&U.samples>0&&X.useMultisampledRTT(U)===!1?ie=dt.get(U).__webglMultisampledFramebuffer:Array.isArray(je)?ie=je[J]:ie=je,F.copy(U.viewport),Q.copy(U.scissor),le=U.scissorTest}else F.copy(ee).multiplyScalar(Ee).floor(),Q.copy(H).multiplyScalar(Ee).floor(),le=ne;if(Fe.bindFramebuffer(oe.FRAMEBUFFER,ie)&&Je.drawBuffers&&ae&&Fe.drawBuffers(U,ie),Fe.viewport(F),Fe.scissor(Q),Fe.setScissorTest(le),Ce){const be=dt.get(U.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_CUBE_MAP_POSITIVE_X+$,be.__webglTexture,J)}else if(Le){const be=dt.get(U.texture),wt=$||0;oe.framebufferTextureLayer(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,be.__webglTexture,J||0,wt)}V=-1},this.readRenderTargetPixels=function(U,$,J,ae,ie,Ce,Le){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let De=dt.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Le!==void 0&&(De=De[Le]),De){Fe.bindFramebuffer(oe.FRAMEBUFFER,De);try{const be=U.texture,wt=be.format,je=be.type;if(wt!==Wr&&xt.convert(wt)!==oe.getParameter(oe.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ye=je===di&&(Ue.has("EXT_color_buffer_half_float")||Je.isWebGL2&&Ue.has("EXT_color_buffer_float"));if(je!==Bs&&xt.convert(je)!==oe.getParameter(oe.IMPLEMENTATION_COLOR_READ_TYPE)&&!(je===jr&&(Je.isWebGL2||Ue.has("OES_texture_float")||Ue.has("WEBGL_color_buffer_float")))&&!Ye){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}$>=0&&$<=U.width-ae&&J>=0&&J<=U.height-ie&&oe.readPixels($,J,ae,ie,xt.convert(wt),xt.convert(je),Ce)}finally{const be=O!==null?dt.get(O).__webglFramebuffer:null;Fe.bindFramebuffer(oe.FRAMEBUFFER,be)}}},this.copyFramebufferToTexture=function(U,$,J=0){const ae=Math.pow(2,-J),ie=Math.floor($.image.width*ae),Ce=Math.floor($.image.height*ae);X.setTexture2D($,0),oe.copyTexSubImage2D(oe.TEXTURE_2D,J,0,0,U.x,U.y,ie,Ce),Fe.unbindTexture()},this.copyTextureToTexture=function(U,$,J,ae=0){const ie=$.image.width,Ce=$.image.height,Le=xt.convert(J.format),De=xt.convert(J.type);X.setTexture2D(J,0),oe.pixelStorei(oe.UNPACK_FLIP_Y_WEBGL,J.flipY),oe.pixelStorei(oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),oe.pixelStorei(oe.UNPACK_ALIGNMENT,J.unpackAlignment),$.isDataTexture?oe.texSubImage2D(oe.TEXTURE_2D,ae,U.x,U.y,ie,Ce,Le,De,$.image.data):$.isCompressedTexture?oe.compressedTexSubImage2D(oe.TEXTURE_2D,ae,U.x,U.y,$.mipmaps[0].width,$.mipmaps[0].height,Le,$.mipmaps[0].data):oe.texSubImage2D(oe.TEXTURE_2D,ae,U.x,U.y,Le,De,$.image),ae===0&&J.generateMipmaps&&oe.generateMipmap(oe.TEXTURE_2D),Fe.unbindTexture()},this.copyTextureToTexture3D=function(U,$,J,ae,ie=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ce=U.max.x-U.min.x+1,Le=U.max.y-U.min.y+1,De=U.max.z-U.min.z+1,be=xt.convert(ae.format),wt=xt.convert(ae.type);let je;if(ae.isData3DTexture)X.setTexture3D(ae,0),je=oe.TEXTURE_3D;else if(ae.isDataArrayTexture||ae.isCompressedArrayTexture)X.setTexture2DArray(ae,0),je=oe.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}oe.pixelStorei(oe.UNPACK_FLIP_Y_WEBGL,ae.flipY),oe.pixelStorei(oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ae.premultiplyAlpha),oe.pixelStorei(oe.UNPACK_ALIGNMENT,ae.unpackAlignment);const Ye=oe.getParameter(oe.UNPACK_ROW_LENGTH),St=oe.getParameter(oe.UNPACK_IMAGE_HEIGHT),Nt=oe.getParameter(oe.UNPACK_SKIP_PIXELS),Bt=oe.getParameter(oe.UNPACK_SKIP_ROWS),$t=oe.getParameter(oe.UNPACK_SKIP_IMAGES),ut=J.isCompressedTexture?J.mipmaps[ie]:J.image;oe.pixelStorei(oe.UNPACK_ROW_LENGTH,ut.width),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,ut.height),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,U.min.x),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,U.min.y),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,U.min.z),J.isDataTexture||J.isData3DTexture?oe.texSubImage3D(je,ie,$.x,$.y,$.z,Ce,Le,De,be,wt,ut.data):J.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),oe.compressedTexSubImage3D(je,ie,$.x,$.y,$.z,Ce,Le,De,be,ut.data)):oe.texSubImage3D(je,ie,$.x,$.y,$.z,Ce,Le,De,be,wt,ut),oe.pixelStorei(oe.UNPACK_ROW_LENGTH,Ye),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,St),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,Nt),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,Bt),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,$t),ie===0&&ae.generateMipmaps&&oe.generateMipmap(je),Fe.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?X.setTextureCube(U,0):U.isData3DTexture?X.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?X.setTexture2DArray(U,0):X.setTexture2D(U,0),Fe.unbindTexture()},this.resetState=function(){N=0,I=0,O=null,Fe.reset(),he.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return jo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Oy?"display-p3":"srgb",t.unpackColorSpace=Hn.workingColorSpace===ag?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Hr?Ec:zS}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ec?Hr:Hs}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class AL extends By{}AL.prototype.isWebGL1Renderer=!0;class zy{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new gt(e),this.density=t}clone(){return new zy(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Vy{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new gt(e),this.near=t,this.far=n}clone(){return new Vy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class hg extends bn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Hy{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Fm,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=zs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=zs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=zs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ji=new q;class sh{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ji.fromBufferAttribute(this,t),Ji.applyMatrix4(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ji.fromBufferAttribute(this,t),Ji.applyNormalMatrix(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ji.fromBufferAttribute(this,t),Ji.transformDirection(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}setX(e,t){return this.normalized&&(t=mn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=_s(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=_s(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=_s(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=_s(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array),i=mn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array),i=mn(i,this.array),s=mn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Wn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new sh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class KS extends Bi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Bd;const Hp=new q,zd=new q,Vd=new q,Hd=new Be,Gp=new Be,CL=new bt,Z0=new q,Wp=new q,K0=new q,sA=new Be,Nx=new Be,oA=new Be;class PL extends bn{constructor(e=new KS){if(super(),this.isSprite=!0,this.type="Sprite",Bd===void 0){Bd=new sn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Hy(t,5);Bd.setIndex([0,1,2,0,2,3]),Bd.setAttribute("position",new sh(n,3,0,!1)),Bd.setAttribute("uv",new sh(n,2,3,!1))}this.geometry=Bd,this.material=e,this.center=new Be(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),zd.setFromMatrixScale(this.matrixWorld),CL.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Vd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&zd.multiplyScalar(-Vd.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const o=this.center;J0(Z0.set(-.5,-.5,0),Vd,o,zd,i,s),J0(Wp.set(.5,-.5,0),Vd,o,zd,i,s),J0(K0.set(.5,.5,0),Vd,o,zd,i,s),sA.set(0,0),Nx.set(1,0),oA.set(1,1);let a=e.ray.intersectTriangle(Z0,Wp,K0,!1,Hp);if(a===null&&(J0(Wp.set(-.5,.5,0),Vd,o,zd,i,s),Nx.set(0,1),a=e.ray.intersectTriangle(Z0,K0,Wp,!1,Hp),a===null))return;const c=e.ray.origin.distanceTo(Hp);c<e.near||c>e.far||t.push({distance:c,point:Hp.clone(),uv:ys.getInterpolation(Hp,Z0,Wp,K0,sA,Nx,oA,new Be),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function J0(r,e,t,n,i,s){Hd.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(Gp.x=s*Hd.x-i*Hd.y,Gp.y=i*Hd.x+s*Hd.y):Gp.copy(Hd),r.copy(e),r.x+=Gp.x,r.y+=Gp.y,r.applyMatrix4(CL)}const Q0=new q,aA=new q;class RL extends bn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Q0.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Q0);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Q0.setFromMatrixPosition(e.matrixWorld),aA.setFromMatrixPosition(this.matrixWorld);const n=Q0.distanceTo(aA)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),n>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const lA=new q,cA=new Ln,uA=new Ln,aW=new q,hA=new bt,ev=new q,Ux=new Fi,dA=new bt,Fx=new hh;class JS extends qn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=e1,this.bindMatrix=new bt,this.bindMatrixInverse=new bt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ns),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,ev),this.boundingBox.expandByPoint(ev)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Fi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,ev),this.boundingSphere.expandByPoint(ev)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ux.copy(this.boundingSphere),Ux.applyMatrix4(i),e.ray.intersectsSphere(Ux)!==!1&&(dA.copy(i).invert(),Fx.copy(e.ray).applyMatrix4(dA),!(this.boundingBox!==null&&Fx.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Fx)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ln,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===e1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===$2?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;cA.fromBufferAttribute(i.attributes.skinIndex,e),uA.fromBufferAttribute(i.attributes.skinWeight,e),lA.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=uA.getComponent(s);if(o!==0){const a=cA.getComponent(s);hA.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector(aW.copy(lA).applyMatrix4(hA),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class zm extends bn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Mc extends Gn{constructor(e=null,t=1,n=1,i,s,o,a,c,h=Lr,f=Lr,m,g){super(null,o,a,c,h,f,i,s,m,g),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const fA=new bt,lW=new bt;class dg{constructor(e=[],t=[]){this.uuid=zs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new bt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new bt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:lW;fA.multiplyMatrices(a,t[s]),fA.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new dg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Mc(t,e,e,Wr,jr);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new zm),this.bones.push(o),this.boneInverses.push(new bt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=n[i];e.boneInverses.push(a.toArray())}return e}}class Mf extends Wn{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Gd=new bt,pA=new bt,tv=[],mA=new ns,cW=new bt,jp=new qn,Xp=new Fi;class LL extends qn{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Mf(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,cW)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ns),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Gd),mA.copy(e.boundingBox).applyMatrix4(Gd),this.boundingBox.union(mA)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Fi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Gd),Xp.copy(e.boundingSphere).applyMatrix4(Gd),this.boundingSphere.union(Xp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(jp.geometry=this.geometry,jp.material=this.material,jp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Xp.copy(this.boundingSphere),Xp.applyMatrix4(n),e.ray.intersectsSphere(Xp)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Gd),pA.multiplyMatrices(n,Gd),jp.matrixWorld=pA,jp.raycast(e,tv);for(let o=0,a=tv.length;o<a;o++){const c=tv[o];c.instanceId=s,c.object=this,t.push(c)}tv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Mf(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function uW(r,e){return r.z-e.z}function hW(r,e){return e.z-r.z}class dW{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const n=this.pool,i=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1});const s=n[this.index];i.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Wd="batchId",sc=new bt,gA=new bt,fW=new bt,vA=new bt,Bx=new ug,nv=new ns,bu=new Fi,$p=new q,zx=new dW,Di=new qn,rv=[];function pW(r,e,t=0){const n=e.itemSize;if(r.isInterleavedBufferAttribute||r.array.constructor!==e.array.constructor){const i=r.count;for(let s=0;s<i;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,r.getComponent(s,o))}else e.array.set(r.array,t*n);e.needsUpdate=!0}class IL extends qn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,n=t*2,i){super(new sn,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Mc(t,e,e,Wr,jr);this._matricesTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const c=e.getAttribute(a),{array:h,itemSize:f,normalized:m}=c,g=new h.constructor(n*f),y=new c.constructor(g,f,m);y.setUsage(c.usage),t.setAttribute(a,y)}if(e.getIndex()!==null){const a=n>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Wn(a,1))}const o=i>65536?new Uint32Array(n):new Uint16Array(n);t.setAttribute(Wd,new Wn(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Wd))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Wd}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(n===Wd)continue;if(!e.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),s=t.getAttribute(n);if(i.itemSize!==s.itemSize||i.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ns);const e=this._geometryCount,t=this.boundingBox,n=this._active;t.makeEmpty();for(let i=0;i<e;i++)n[i]!==!1&&(this.getMatrixAt(i,sc),this.getBoundingBoxAt(i,nv).applyMatrix4(sc),t.union(nv))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Fi);const e=this._geometryCount,t=this.boundingSphere,n=this._active;t.makeEmpty();for(let i=0;i<e;i++)n[i]!==!1&&(this.getMatrixAt(i,sc),this.getBoundingSphereAt(i,bu).applyMatrix4(sc),t.union(bu))}addGeometry(e,t=-1,n=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const i={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,c=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?i.vertexCount=e.getAttribute("position").count:i.vertexCount=t,s===null?i.vertexStart=0:i.vertexStart=s.vertexStart+s.vertexCount;const h=e.getIndex(),f=h!==null;if(f&&(n===-1?i.indexCount=h.count:i.indexCount=n,s===null?i.indexStart=0:i.indexStart=s.indexStart+s.indexCount),i.indexStart!==-1&&i.indexStart+i.indexCount>this._maxIndexCount||i.vertexStart+i.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const m=this._visibility,g=this._active,y=this._matricesTexture,_=this._matricesTexture.image.data;m.push(!0),g.push(!0);const M=this._geometryCount;this._geometryCount++,fW.toArray(_,M*16),y.needsUpdate=!0,o.push(i),a.push({start:f?i.indexStart:i.vertexStart,count:-1}),c.push({boxInitialized:!1,box:new ns,sphereInitialized:!1,sphere:new Fi});const E=this.geometry.getAttribute(Wd);for(let x=0;x<i.vertexCount;x++)E.setX(i.vertexStart+x,M);return E.needsUpdate=!0,this.setGeometryAt(M,e),M}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(i&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const c=a.vertexStart,h=a.vertexCount;for(const y in n.attributes){if(y===Wd)continue;const _=t.getAttribute(y),M=n.getAttribute(y);pW(_,M,c);const E=_.itemSize;for(let x=_.count,A=h;x<A;x++){const b=c+x;for(let R=0;R<E;R++)M.setComponent(b,R,0)}M.needsUpdate=!0}if(i){const y=a.indexStart;for(let _=0;_<o.count;_++)s.setX(y+_,c+o.getX(_));for(let _=o.count,M=a.indexCount;_<M;_++)s.setX(y+_,c);s.needsUpdate=!0}const f=this._bounds[e];t.boundingBox!==null?(f.box.copy(t.boundingBox),f.boxInitialized=!0):f.boxInitialized=!1,t.boundingSphere!==null?(f.sphere.copy(t.boundingSphere),f.sphereInitialized=!0):f.sphereInitialized=!1;const m=this._drawRanges[e],g=t.getAttribute("position");return m.count=i?o.count:g.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const a=o.index,c=o.attributes.position,h=this._drawRanges[e];for(let f=h.start,m=h.start+h.count;f<m;f++){let g=f;a&&(g=a.getX(g)),s.expandByPoint($p.fromBufferAttribute(c,g))}i.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return this;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,nv),nv.getCenter(s.center);const a=o.index,c=o.attributes.position,h=this._drawRanges[e];let f=0;for(let m=h.start,g=h.start+h.count;m<g;m++){let y=m;a&&(y=a.getX(y)),$p.fromBufferAttribute(c,y),f=Math.max(f,s.center.distanceToSquared($p))}s.radius=Math.sqrt(f),i.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const n=this._active,i=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||n[e]===!1?this:(t.toArray(s,e*16),i.needsUpdate=!0,this)}getMatrixAt(e,t){const n=this._active,i=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||n[e]===!1?null:t.fromArray(i,e*16)}setVisibleAt(e,t){const n=this._visibility,i=this._active,s=this._geometryCount;return e>=s||i[e]===!1||n[e]===t?this:(n[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,n=this._active,i=this._geometryCount;return e>=i||n[e]===!1?!1:t[e]}raycast(e,t){const n=this._visibility,i=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,c=this.geometry;Di.material=this.material,Di.geometry.index=c.index,Di.geometry.attributes=c.attributes,Di.geometry.boundingBox===null&&(Di.geometry.boundingBox=new ns),Di.geometry.boundingSphere===null&&(Di.geometry.boundingSphere=new Fi);for(let h=0;h<o;h++){if(!n[h]||!i[h])continue;const f=s[h];Di.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(h,Di.matrixWorld).premultiply(a),this.getBoundingBoxAt(h,Di.geometry.boundingBox),this.getBoundingSphereAt(h,Di.geometry.boundingSphere),Di.raycast(e,rv);for(let m=0,g=rv.length;m<g;m++){const y=rv[m];y.object=this,y.batchId=h,t.push(y)}rv.length=0}Di.material=null,Di.geometry.index=null,Di.geometry.attributes={},Di.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,n,i,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=i.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,c=this._visibility,h=this._multiDrawStarts,f=this._multiDrawCounts,m=this._drawRanges,g=this.perObjectFrustumCulled;g&&(vA.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),Bx.setFromProjectionMatrix(vA,e.isWebGPURenderer?wf:jo));let y=0;if(this.sortObjects){gA.copy(this.matrixWorld).invert(),$p.setFromMatrixPosition(n.matrixWorld).applyMatrix4(gA);for(let E=0,x=c.length;E<x;E++)if(c[E]){this.getMatrixAt(E,sc),this.getBoundingSphereAt(E,bu).applyMatrix4(sc);let A=!1;if(g&&(A=!Bx.intersectsSphere(bu)),!A){const b=$p.distanceTo(bu.center);zx.push(m[E],b)}}const _=zx.list,M=this.customSort;M===null?_.sort(s.transparent?hW:uW):M.call(this,_,n);for(let E=0,x=_.length;E<x;E++){const A=_[E];h[y]=A.start*a,f[y]=A.count,y++}zx.reset()}else for(let _=0,M=c.length;_<M;_++)if(c[_]){let E=!1;if(g&&(this.getMatrixAt(_,sc),this.getBoundingSphereAt(_,bu).applyMatrix4(sc),E=!Bx.intersectsSphere(bu)),!E){const x=m[_];h[y]=x.start*a,f[y]=x.count,y++}}this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,s,o){this.onBeforeRender(e,null,i,s,o)}}class zi extends Bi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new gt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const yA=new q,_A=new q,xA=new bt,Vx=new hh,iv=new Fi;class vl extends bn{constructor(e=new sn,t=new zi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)yA.fromBufferAttribute(t,i-1),_A.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=yA.distanceTo(_A);e.setAttribute("lineDistance",new Ct(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),iv.copy(n.boundingSphere),iv.applyMatrix4(i),iv.radius+=s,e.ray.intersectsSphere(iv)===!1)return;xA.copy(i).invert(),Vx.copy(e.ray).applyMatrix4(xA);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,h=new q,f=new q,m=new q,g=new q,y=this.isLineSegments?2:1,_=n.index,E=n.attributes.position;if(_!==null){const x=Math.max(0,o.start),A=Math.min(_.count,o.start+o.count);for(let b=x,R=A-1;b<R;b+=y){const N=_.getX(b),I=_.getX(b+1);if(h.fromBufferAttribute(E,N),f.fromBufferAttribute(E,I),Vx.distanceSqToSegment(h,f,g,m)>c)continue;g.applyMatrix4(this.matrixWorld);const V=e.ray.origin.distanceTo(g);V<e.near||V>e.far||t.push({distance:V,point:m.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const x=Math.max(0,o.start),A=Math.min(E.count,o.start+o.count);for(let b=x,R=A-1;b<R;b+=y){if(h.fromBufferAttribute(E,b),f.fromBufferAttribute(E,b+1),Vx.distanceSqToSegment(h,f,g,m)>c)continue;g.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(g);I<e.near||I>e.far||t.push({distance:I,point:m.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const wA=new q,SA=new q;class ya extends vl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)wA.fromBufferAttribute(t,i),SA.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+wA.distanceTo(SA);e.setAttribute("lineDistance",new Ct(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class kL extends vl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class QS extends Bi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new gt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const EA=new bt,I1=new hh,sv=new Fi,ov=new q;class DL extends bn{constructor(e=new sn,t=new QS){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),sv.copy(n.boundingSphere),sv.applyMatrix4(i),sv.radius+=s,e.ray.intersectsSphere(sv)===!1)return;EA.copy(i).invert(),I1.copy(e.ray).applyMatrix4(EA);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,h=n.index,m=n.attributes.position;if(h!==null){const g=Math.max(0,o.start),y=Math.min(h.count,o.start+o.count);for(let _=g,M=y;_<M;_++){const E=h.getX(_);ov.fromBufferAttribute(m,E),MA(ov,E,c,i,e,t,this)}}else{const g=Math.max(0,o.start),y=Math.min(m.count,o.start+o.count);for(let _=g,M=y;_<M;_++)ov.fromBufferAttribute(m,_),MA(ov,_,c,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function MA(r,e,t,n,i,s,o){const a=I1.distanceSqToPoint(r);if(a<t){const c=new q;I1.closestPointToPoint(r,c),c.applyMatrix4(n);const h=i.ray.origin.distanceTo(c);if(h<i.near||h>i.far)return;s.push({distance:h,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,object:o})}}class mW extends Gn{constructor(e,t,n,i,s,o,a,c,h){super(e,t,n,i,s,o,a,c,h),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Dn,this.magFilter=s!==void 0?s:Dn,this.generateMipmaps=!1;const f=this;function m(){f.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class gW extends Gn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Lr,this.minFilter=Lr,this.generateMipmaps=!1,this.needsUpdate=!0}}class Gy extends Gn{constructor(e,t,n,i,s,o,a,c,h,f,m,g){super(null,o,a,c,h,f,i,s,m,g),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class vW extends Gy{constructor(e,t,n,i,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=rr}}class yW extends Gy{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,ga),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class _W extends Gn{constructor(e,t,n,i,s,o,a,c,h){super(e,t,n,i,s,o,a,c,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class co{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let a=0,c=s-1,h;for(;a<=c;)if(i=Math.floor(a+(c-a)/2),h=n[i]-o,h<0)a=i+1;else if(h>0)c=i-1;else{c=i;break}if(i=c,n[i]===o)return i/(s-1);const f=n[i],g=n[i+1]-f,y=(o-f)/g;return(i+y)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),c=t||(o.isVector2?new Be:new q);return c.copy(a).sub(o).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new q,i=[],s=[],o=[],a=new q,c=new bt;for(let y=0;y<=e;y++){const _=y/e;i[y]=this.getTangentAt(_,new q)}s[0]=new q,o[0]=new q;let h=Number.MAX_VALUE;const f=Math.abs(i[0].x),m=Math.abs(i[0].y),g=Math.abs(i[0].z);f<=h&&(h=f,n.set(1,0,0)),m<=h&&(h=m,n.set(0,1,0)),g<=h&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),o[y]=o[y-1].clone(),a.crossVectors(i[y-1],i[y]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos(Er(i[y-1].dot(i[y]),-1,1));s[y].applyMatrix4(c.makeRotationAxis(a,_))}o[y].crossVectors(i[y],s[y])}if(t===!0){let y=Math.acos(Er(s[0].dot(s[e]),-1,1));y/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(y=-y);for(let _=1;_<=e;_++)s[_].applyMatrix4(c.makeRotationAxis(i[_],y*_)),o[_].crossVectors(i[_],s[_])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Wy extends co{constructor(e=0,t=0,n=1,i=1,s=0,o=Math.PI*2,a=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=c}getPoint(e,t){const n=t||new Be,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(a),h=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),m=Math.sin(this.aRotation),g=c-this.aX,y=h-this.aY;c=g*f-y*m+this.aX,h=g*m+y*f+this.aY}return n.set(c,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class OL extends Wy{constructor(e,t,n,i,s,o){super(e,t,n,n,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function eE(){let r=0,e=0,t=0,n=0;function i(s,o,a,c){r=s,e=a,t=-3*s+3*o-2*a-c,n=2*s-2*o+a+c}return{initCatmullRom:function(s,o,a,c,h){i(o,a,h*(a-s),h*(c-o))},initNonuniformCatmullRom:function(s,o,a,c,h,f,m){let g=(o-s)/h-(a-s)/(h+f)+(a-o)/f,y=(a-o)/f-(c-o)/(f+m)+(c-a)/m;g*=f,y*=f,i(o,a,g,y)},calc:function(s){const o=s*s,a=o*s;return r+e*s+t*o+n*a}}}const av=new q,Hx=new eE,Gx=new eE,Wx=new eE;class NL extends co{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new q){const n=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),c=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:c===0&&a===s-1&&(a=s-2,c=1);let h,f;this.closed||a>0?h=i[(a-1)%s]:(av.subVectors(i[0],i[1]).add(i[0]),h=av);const m=i[a%s],g=i[(a+1)%s];if(this.closed||a+2<s?f=i[(a+2)%s]:(av.subVectors(i[s-1],i[s-2]).add(i[s-1]),f=av),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let _=Math.pow(h.distanceToSquared(m),y),M=Math.pow(m.distanceToSquared(g),y),E=Math.pow(g.distanceToSquared(f),y);M<1e-4&&(M=1),_<1e-4&&(_=M),E<1e-4&&(E=M),Hx.initNonuniformCatmullRom(h.x,m.x,g.x,f.x,_,M,E),Gx.initNonuniformCatmullRom(h.y,m.y,g.y,f.y,_,M,E),Wx.initNonuniformCatmullRom(h.z,m.z,g.z,f.z,_,M,E)}else this.curveType==="catmullrom"&&(Hx.initCatmullRom(h.x,m.x,g.x,f.x,this.tension),Gx.initCatmullRom(h.y,m.y,g.y,f.y,this.tension),Wx.initCatmullRom(h.z,m.z,g.z,f.z,this.tension));return n.set(Hx.calc(c),Gx.calc(c),Wx.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new q().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function TA(r,e,t,n,i){const s=(n-e)*.5,o=(i-t)*.5,a=r*r,c=r*a;return(2*t-2*n+s+o)*c+(-3*t+3*n-2*s-o)*a+s*r+t}function xW(r,e){const t=1-r;return t*t*e}function wW(r,e){return 2*(1-r)*r*e}function SW(r,e){return r*r*e}function ym(r,e,t,n){return xW(r,e)+wW(r,t)+SW(r,n)}function EW(r,e){const t=1-r;return t*t*t*e}function MW(r,e){const t=1-r;return 3*t*t*r*e}function TW(r,e){return 3*(1-r)*r*r*e}function bW(r,e){return r*r*r*e}function _m(r,e,t,n,i){return EW(r,e)+MW(r,t)+TW(r,n)+bW(r,i)}class tE extends co{constructor(e=new Be,t=new Be,n=new Be,i=new Be){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Be){const n=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(_m(e,i.x,s.x,o.x,a.x),_m(e,i.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class UL extends co{constructor(e=new q,t=new q,n=new q,i=new q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new q){const n=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(_m(e,i.x,s.x,o.x,a.x),_m(e,i.y,s.y,o.y,a.y),_m(e,i.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class nE extends co{constructor(e=new Be,t=new Be){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Be){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Be){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class FL extends co{constructor(e=new q,t=new q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new q){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new q){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rE extends co{constructor(e=new Be,t=new Be,n=new Be){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Be){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(ym(e,i.x,s.x,o.x),ym(e,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iE extends co{constructor(e=new q,t=new q,n=new q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new q){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(ym(e,i.x,s.x,o.x),ym(e,i.y,s.y,o.y),ym(e,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sE extends co{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Be){const n=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,c=i[o===0?o:o-1],h=i[o],f=i[o>i.length-2?i.length-1:o+1],m=i[o>i.length-3?i.length-1:o+2];return n.set(TA(a,c.x,h.x,f.x,m.x),TA(a,c.y,h.y,f.y,m.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Be().fromArray(i))}return this}}var ly=Object.freeze({__proto__:null,ArcCurve:OL,CatmullRomCurve3:NL,CubicBezierCurve:tE,CubicBezierCurve3:UL,EllipseCurve:Wy,LineCurve:nE,LineCurve3:FL,QuadraticBezierCurve:rE,QuadraticBezierCurve3:iE,SplineCurve:sE});class BL extends co{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new ly[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const o=i[s]-n,a=this.curves[s],c=a.getLength(),h=c===0?0:1-o/c;return a.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,c=o.getPoints(a);for(let h=0;h<c.length;h++){const f=c[h];n&&n.equals(f)||(t.push(f),n=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new ly[i.type]().fromJSON(i))}return this}}class Vm extends BL{constructor(e){super(),this.type="Path",this.currentPoint=new Be,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new nE(this.currentPoint.clone(),new Be(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new rE(this.currentPoint.clone(),new Be(e,t),new Be(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,o){const a=new tE(this.currentPoint.clone(),new Be(e,t),new Be(n,i),new Be(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new sE(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,o){const a=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+a,t+c,n,i,s,o),this}absarc(e,t,n,i,s,o){return this.absellipse(e,t,n,n,i,s,o),this}ellipse(e,t,n,i,s,o,a,c){const h=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+h,t+f,n,i,s,o,a,c),this}absellipse(e,t,n,i,s,o,a,c){const h=new Wy(e,t,n,i,s,o,a,c);if(this.curves.length>0){const m=h.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(h);const f=h.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class fg extends sn{constructor(e=[new Be(0,-.5),new Be(.5,0),new Be(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=Er(i,0,Math.PI*2);const s=[],o=[],a=[],c=[],h=[],f=1/t,m=new q,g=new Be,y=new q,_=new q,M=new q;let E=0,x=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:E=e[A+1].x-e[A].x,x=e[A+1].y-e[A].y,y.x=x*1,y.y=-E,y.z=x*0,M.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case e.length-1:c.push(M.x,M.y,M.z);break;default:E=e[A+1].x-e[A].x,x=e[A+1].y-e[A].y,y.x=x*1,y.y=-E,y.z=x*0,_.copy(y),y.x+=M.x,y.y+=M.y,y.z+=M.z,y.normalize(),c.push(y.x,y.y,y.z),M.copy(_)}for(let A=0;A<=t;A++){const b=n+A*f*i,R=Math.sin(b),N=Math.cos(b);for(let I=0;I<=e.length-1;I++){m.x=e[I].x*R,m.y=e[I].y,m.z=e[I].x*N,o.push(m.x,m.y,m.z),g.x=A/t,g.y=I/(e.length-1),a.push(g.x,g.y);const O=c[3*I+0]*R,V=c[3*I+1],k=c[3*I+0]*N;h.push(O,V,k)}}for(let A=0;A<t;A++)for(let b=0;b<e.length-1;b++){const R=b+A*e.length,N=R,I=R+e.length,O=R+e.length+1,V=R+1;s.push(N,I,V),s.push(O,V,I)}this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("uv",new Ct(a,2)),this.setAttribute("normal",new Ct(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fg(e.points,e.segments,e.phiStart,e.phiLength)}}class jy extends fg{constructor(e=1,t=1,n=4,i=8){const s=new Vm;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new jy(e.radius,e.length,e.capSegments,e.radialSegments)}}class Xy extends sn{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],c=[],h=new q,f=new Be;o.push(0,0,0),a.push(0,0,1),c.push(.5,.5);for(let m=0,g=3;m<=t;m++,g+=3){const y=n+m/t*i;h.x=e*Math.cos(y),h.y=e*Math.sin(y),o.push(h.x,h.y,h.z),a.push(0,0,1),f.x=(o[g]/e+1)/2,f.y=(o[g+1]/e+1)/2,c.push(f.x,f.y)}for(let m=1;m<=t;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new Ct(o,3)),this.setAttribute("normal",new Ct(a,3)),this.setAttribute("uv",new Ct(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xy(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Nf extends sn{constructor(e=1,t=1,n=1,i=32,s=1,o=!1,a=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:c};const h=this;i=Math.floor(i),s=Math.floor(s);const f=[],m=[],g=[],y=[];let _=0;const M=[],E=n/2;let x=0;A(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(f),this.setAttribute("position",new Ct(m,3)),this.setAttribute("normal",new Ct(g,3)),this.setAttribute("uv",new Ct(y,2));function A(){const R=new q,N=new q;let I=0;const O=(t-e)/n;for(let V=0;V<=s;V++){const k=[],F=V/s,Q=F*(t-e)+e;for(let le=0;le<=i;le++){const _e=le/i,Y=_e*c+a,me=Math.sin(Y),ue=Math.cos(Y);N.x=Q*me,N.y=-F*n+E,N.z=Q*ue,m.push(N.x,N.y,N.z),R.set(me,O,ue).normalize(),g.push(R.x,R.y,R.z),y.push(_e,1-F),k.push(_++)}M.push(k)}for(let V=0;V<i;V++)for(let k=0;k<s;k++){const F=M[k][V],Q=M[k+1][V],le=M[k+1][V+1],_e=M[k][V+1];f.push(F,Q,_e),f.push(Q,le,_e),I+=6}h.addGroup(x,I,0),x+=I}function b(R){const N=_,I=new Be,O=new q;let V=0;const k=R===!0?e:t,F=R===!0?1:-1;for(let le=1;le<=i;le++)m.push(0,E*F,0),g.push(0,F,0),y.push(.5,.5),_++;const Q=_;for(let le=0;le<=i;le++){const Y=le/i*c+a,me=Math.cos(Y),ue=Math.sin(Y);O.x=k*ue,O.y=E*F,O.z=k*me,m.push(O.x,O.y,O.z),g.push(0,F,0),I.x=me*.5+.5,I.y=ue*.5*F+.5,y.push(I.x,I.y),_++}for(let le=0;le<i;le++){const _e=N+le,Y=Q+le;R===!0?f.push(Y,Y+1,_e):f.push(Y+1,Y,_e),V+=3}h.addGroup(x,V,R===!0?1:2),x+=V}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class $y extends Nf{constructor(e=1,t=1,n=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,n,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new $y(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class kc extends sn{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],o=[];a(i),h(n),f(),this.setAttribute("position",new Ct(s,3)),this.setAttribute("normal",new Ct(s.slice(),3)),this.setAttribute("uv",new Ct(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(A){const b=new q,R=new q,N=new q;for(let I=0;I<t.length;I+=3)y(t[I+0],b),y(t[I+1],R),y(t[I+2],N),c(b,R,N,A)}function c(A,b,R,N){const I=N+1,O=[];for(let V=0;V<=I;V++){O[V]=[];const k=A.clone().lerp(R,V/I),F=b.clone().lerp(R,V/I),Q=I-V;for(let le=0;le<=Q;le++)le===0&&V===I?O[V][le]=k:O[V][le]=k.clone().lerp(F,le/Q)}for(let V=0;V<I;V++)for(let k=0;k<2*(I-V)-1;k++){const F=Math.floor(k/2);k%2===0?(g(O[V][F+1]),g(O[V+1][F]),g(O[V][F])):(g(O[V][F+1]),g(O[V+1][F+1]),g(O[V+1][F]))}}function h(A){const b=new q;for(let R=0;R<s.length;R+=3)b.x=s[R+0],b.y=s[R+1],b.z=s[R+2],b.normalize().multiplyScalar(A),s[R+0]=b.x,s[R+1]=b.y,s[R+2]=b.z}function f(){const A=new q;for(let b=0;b<s.length;b+=3){A.x=s[b+0],A.y=s[b+1],A.z=s[b+2];const R=E(A)/2/Math.PI+.5,N=x(A)/Math.PI+.5;o.push(R,1-N)}_(),m()}function m(){for(let A=0;A<o.length;A+=6){const b=o[A+0],R=o[A+2],N=o[A+4],I=Math.max(b,R,N),O=Math.min(b,R,N);I>.9&&O<.1&&(b<.2&&(o[A+0]+=1),R<.2&&(o[A+2]+=1),N<.2&&(o[A+4]+=1))}}function g(A){s.push(A.x,A.y,A.z)}function y(A,b){const R=A*3;b.x=e[R+0],b.y=e[R+1],b.z=e[R+2]}function _(){const A=new q,b=new q,R=new q,N=new q,I=new Be,O=new Be,V=new Be;for(let k=0,F=0;k<s.length;k+=9,F+=6){A.set(s[k+0],s[k+1],s[k+2]),b.set(s[k+3],s[k+4],s[k+5]),R.set(s[k+6],s[k+7],s[k+8]),I.set(o[F+0],o[F+1]),O.set(o[F+2],o[F+3]),V.set(o[F+4],o[F+5]),N.copy(A).add(b).add(R).divideScalar(3);const Q=E(N);M(I,F+0,A,Q),M(O,F+2,b,Q),M(V,F+4,R,Q)}}function M(A,b,R,N){N<0&&A.x===1&&(o[b]=A.x-1),R.x===0&&R.z===0&&(o[b]=N/2/Math.PI+.5)}function E(A){return Math.atan2(A.z,-A.x)}function x(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kc(e.vertices,e.indices,e.radius,e.details)}}class qy extends kc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qy(e.radius,e.detail)}}const lv=new q,cv=new q,jx=new q,uv=new ys;class zL extends sn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Qu*t),o=e.getIndex(),a=e.getAttribute("position"),c=o?o.count:a.count,h=[0,0,0],f=["a","b","c"],m=new Array(3),g={},y=[];for(let _=0;_<c;_+=3){o?(h[0]=o.getX(_),h[1]=o.getX(_+1),h[2]=o.getX(_+2)):(h[0]=_,h[1]=_+1,h[2]=_+2);const{a:M,b:E,c:x}=uv;if(M.fromBufferAttribute(a,h[0]),E.fromBufferAttribute(a,h[1]),x.fromBufferAttribute(a,h[2]),uv.getNormal(jx),m[0]=`${Math.round(M.x*i)},${Math.round(M.y*i)},${Math.round(M.z*i)}`,m[1]=`${Math.round(E.x*i)},${Math.round(E.y*i)},${Math.round(E.z*i)}`,m[2]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let A=0;A<3;A++){const b=(A+1)%3,R=m[A],N=m[b],I=uv[f[A]],O=uv[f[b]],V=`${R}_${N}`,k=`${N}_${R}`;k in g&&g[k]?(jx.dot(g[k].normal)<=s&&(y.push(I.x,I.y,I.z),y.push(O.x,O.y,O.z)),g[k]=null):V in g||(g[V]={index0:h[A],index1:h[b],normal:jx.clone()})}}for(const _ in g)if(g[_]){const{index0:M,index1:E}=g[_];lv.fromBufferAttribute(a,M),cv.fromBufferAttribute(a,E),y.push(lv.x,lv.y,lv.z),y.push(cv.x,cv.y,cv.z)}this.setAttribute("position",new Ct(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class th extends Vm{constructor(e){super(e),this.uuid=zs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new Vm().fromJSON(i))}return this}}const AW={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=VL(r,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,h,f,m,g,y;if(n&&(s=IW(r,e,s,t)),r.length>80*t){a=h=r[0],c=f=r[1];for(let _=t;_<i;_+=t)m=r[_],g=r[_+1],m<a&&(a=m),g<c&&(c=g),m>h&&(h=m),g>f&&(f=g);y=Math.max(h-a,f-c),y=y!==0?32767/y:0}return Hm(s,o,t,a,c,y,0),o}};function VL(r,e,t,n,i){let s,o;if(i===GW(r,e,t,n)>0)for(s=e;s<t;s+=n)o=bA(s,r[s],r[s+1],o);else for(s=t-n;s>=e;s-=n)o=bA(s,r[s],r[s+1],o);return o&&Yy(o,o.next)&&(Wm(o),o=o.next),o}function oh(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(Yy(t,t.next)||vr(t.prev,t,t.next)===0)){if(Wm(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Hm(r,e,t,n,i,s,o){if(!r)return;!o&&s&&UW(r,n,i,s);let a=r,c,h;for(;r.prev!==r.next;){if(c=r.prev,h=r.next,s?PW(r,n,i,s):CW(r)){e.push(c.i/t|0),e.push(r.i/t|0),e.push(h.i/t|0),Wm(r),r=h.next,a=h.next;continue}if(r=h,r===a){o?o===1?(r=RW(oh(r),e,t),Hm(r,e,t,n,i,s,2)):o===2&&LW(r,e,t,n,i,s):Hm(oh(r),e,t,n,i,s,1);break}}}function CW(r){const e=r.prev,t=r,n=r.next;if(vr(e,t,n)>=0)return!1;const i=e.x,s=t.x,o=n.x,a=e.y,c=t.y,h=n.y,f=i<s?i<o?i:o:s<o?s:o,m=a<c?a<h?a:h:c<h?c:h,g=i>s?i>o?i:o:s>o?s:o,y=a>c?a>h?a:h:c>h?c:h;let _=n.next;for(;_!==e;){if(_.x>=f&&_.x<=g&&_.y>=m&&_.y<=y&&cf(i,a,s,c,o,h,_.x,_.y)&&vr(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function PW(r,e,t,n){const i=r.prev,s=r,o=r.next;if(vr(i,s,o)>=0)return!1;const a=i.x,c=s.x,h=o.x,f=i.y,m=s.y,g=o.y,y=a<c?a<h?a:h:c<h?c:h,_=f<m?f<g?f:g:m<g?m:g,M=a>c?a>h?a:h:c>h?c:h,E=f>m?f>g?f:g:m>g?m:g,x=k1(y,_,e,t,n),A=k1(M,E,e,t,n);let b=r.prevZ,R=r.nextZ;for(;b&&b.z>=x&&R&&R.z<=A;){if(b.x>=y&&b.x<=M&&b.y>=_&&b.y<=E&&b!==i&&b!==o&&cf(a,f,c,m,h,g,b.x,b.y)&&vr(b.prev,b,b.next)>=0||(b=b.prevZ,R.x>=y&&R.x<=M&&R.y>=_&&R.y<=E&&R!==i&&R!==o&&cf(a,f,c,m,h,g,R.x,R.y)&&vr(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;b&&b.z>=x;){if(b.x>=y&&b.x<=M&&b.y>=_&&b.y<=E&&b!==i&&b!==o&&cf(a,f,c,m,h,g,b.x,b.y)&&vr(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;R&&R.z<=A;){if(R.x>=y&&R.x<=M&&R.y>=_&&R.y<=E&&R!==i&&R!==o&&cf(a,f,c,m,h,g,R.x,R.y)&&vr(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function RW(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!Yy(i,s)&&HL(i,n,n.next,s)&&Gm(i,s)&&Gm(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),Wm(n),Wm(n.next),n=r=s),n=n.next}while(n!==r);return oh(n)}function LW(r,e,t,n,i,s){let o=r;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&zW(o,a)){let c=GL(o,a);o=oh(o,o.next),c=oh(c,c.next),Hm(o,e,t,n,i,s,0),Hm(c,e,t,n,i,s,0);return}a=a.next}o=o.next}while(o!==r)}function IW(r,e,t,n){const i=[];let s,o,a,c,h;for(s=0,o=e.length;s<o;s++)a=e[s]*n,c=s<o-1?e[s+1]*n:r.length,h=VL(r,a,c,n,!1),h===h.next&&(h.steiner=!0),i.push(BW(h));for(i.sort(kW),s=0;s<i.length;s++)t=DW(i[s],t);return t}function kW(r,e){return r.x-e.x}function DW(r,e){const t=OW(r,e);if(!t)return e;const n=GL(t,r);return oh(n,n.next),oh(t,t.next)}function OW(r,e){let t=e,n=-1/0,i;const s=r.x,o=r.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const g=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=s&&g>n&&(n=g,i=t.x<t.next.x?t:t.next,g===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,c=i.x,h=i.y;let f=1/0,m;t=i;do s>=t.x&&t.x>=c&&s!==t.x&&cf(o<h?s:n,o,c,h,o<h?n:s,o,t.x,t.y)&&(m=Math.abs(o-t.y)/(s-t.x),Gm(t,r)&&(m<f||m===f&&(t.x>i.x||t.x===i.x&&NW(i,t)))&&(i=t,f=m)),t=t.next;while(t!==a);return i}function NW(r,e){return vr(r.prev,r,e.prev)<0&&vr(e.next,r,r.next)<0}function UW(r,e,t,n){let i=r;do i.z===0&&(i.z=k1(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,FW(i)}function FW(r){let e,t,n,i,s,o,a,c,h=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<h&&(a++,n=n.nextZ,!!n);e++);for(c=h;a>0||c>0&&n;)a!==0&&(c===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,a--):(i=n,n=n.nextZ,c--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,h*=2}while(o>1);return r}function k1(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function BW(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function cf(r,e,t,n,i,s,o,a){return(i-o)*(e-a)>=(r-o)*(s-a)&&(r-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(n-a)}function zW(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!VW(r,e)&&(Gm(r,e)&&Gm(e,r)&&HW(r,e)&&(vr(r.prev,r,e.prev)||vr(r,e.prev,e))||Yy(r,e)&&vr(r.prev,r,r.next)>0&&vr(e.prev,e,e.next)>0)}function vr(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Yy(r,e){return r.x===e.x&&r.y===e.y}function HL(r,e,t,n){const i=dv(vr(r,e,t)),s=dv(vr(r,e,n)),o=dv(vr(t,n,r)),a=dv(vr(t,n,e));return!!(i!==s&&o!==a||i===0&&hv(r,t,e)||s===0&&hv(r,n,e)||o===0&&hv(t,r,n)||a===0&&hv(t,e,n))}function hv(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function dv(r){return r>0?1:r<0?-1:0}function VW(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&HL(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Gm(r,e){return vr(r.prev,r,r.next)<0?vr(r,e,r.next)>=0&&vr(r,r.prev,e)>=0:vr(r,e,r.prev)<0||vr(r,r.next,e)<0}function HW(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function GL(r,e){const t=new D1(r.i,r.x,r.y),n=new D1(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function bA(r,e,t,n){const i=new D1(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Wm(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function D1(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function GW(r,e,t,n){let i=0;for(let s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i}class pa{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return pa.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];AA(e),CA(n,e);let o=e.length;t.forEach(AA);for(let c=0;c<t.length;c++)i.push(o),o+=t[c].length,CA(n,t[c]);const a=AW.triangulate(n,i);for(let c=0;c<a.length;c+=3)s.push(a.slice(c,c+3));return s}}function AA(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function CA(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class Zy extends sn{constructor(e=new th([new Be(.5,.5),new Be(-.5,.5),new Be(-.5,-.5),new Be(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let a=0,c=e.length;a<c;a++){const h=e[a];o(h)}this.setAttribute("position",new Ct(i,3)),this.setAttribute("uv",new Ct(s,2)),this.computeVertexNormals();function o(a){const c=[],h=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let g=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,_=t.bevelSize!==void 0?t.bevelSize:y-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,E=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:WW;let b,R=!1,N,I,O,V;x&&(b=x.getSpacedPoints(f),R=!0,g=!1,N=x.computeFrenetFrames(f,!1),I=new q,O=new q,V=new q),g||(E=0,y=0,_=0,M=0);const k=a.extractPoints(h);let F=k.shape;const Q=k.holes;if(!pa.isClockWise(F)){F=F.reverse();for(let oe=0,Xe=Q.length;oe<Xe;oe++){const Ue=Q[oe];pa.isClockWise(Ue)&&(Q[oe]=Ue.reverse())}}const _e=pa.triangulateShape(F,Q),Y=F;for(let oe=0,Xe=Q.length;oe<Xe;oe++){const Ue=Q[oe];F=F.concat(Ue)}function me(oe,Xe,Ue){return Xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),oe.clone().addScaledVector(Xe,Ue)}const ue=F.length,Ee=_e.length;function Z(oe,Xe,Ue){let Je,Fe,Rt;const dt=oe.x-Xe.x,X=oe.y-Xe.y,G=Ue.x-oe.x,we=Ue.y-oe.y,We=dt*dt+X*X,He=dt*we-X*G;if(Math.abs(He)>Number.EPSILON){const Ve=Math.sqrt(We),Mt=Math.sqrt(G*G+we*we),at=Xe.x-X/Ve,vt=Xe.y+dt/Ve,It=Ue.x-we/Mt,Vt=Ue.y+G/Mt,Ge=((It-at)*we-(Vt-vt)*G)/(dt*we-X*G);Je=at+dt*Ge-oe.x,Fe=vt+X*Ge-oe.y;const tn=Je*Je+Fe*Fe;if(tn<=2)return new Be(Je,Fe);Rt=Math.sqrt(tn/2)}else{let Ve=!1;dt>Number.EPSILON?G>Number.EPSILON&&(Ve=!0):dt<-Number.EPSILON?G<-Number.EPSILON&&(Ve=!0):Math.sign(X)===Math.sign(we)&&(Ve=!0),Ve?(Je=-X,Fe=dt,Rt=Math.sqrt(We)):(Je=dt,Fe=X,Rt=Math.sqrt(We/2))}return new Be(Je/Rt,Fe/Rt)}const se=[];for(let oe=0,Xe=Y.length,Ue=Xe-1,Je=oe+1;oe<Xe;oe++,Ue++,Je++)Ue===Xe&&(Ue=0),Je===Xe&&(Je=0),se[oe]=Z(Y[oe],Y[Ue],Y[Je]);const ee=[];let H,ne=se.concat();for(let oe=0,Xe=Q.length;oe<Xe;oe++){const Ue=Q[oe];H=[];for(let Je=0,Fe=Ue.length,Rt=Fe-1,dt=Je+1;Je<Fe;Je++,Rt++,dt++)Rt===Fe&&(Rt=0),dt===Fe&&(dt=0),H[Je]=Z(Ue[Je],Ue[Rt],Ue[dt]);ee.push(H),ne=ne.concat(H)}for(let oe=0;oe<E;oe++){const Xe=oe/E,Ue=y*Math.cos(Xe*Math.PI/2),Je=_*Math.sin(Xe*Math.PI/2)+M;for(let Fe=0,Rt=Y.length;Fe<Rt;Fe++){const dt=me(Y[Fe],se[Fe],Je);ze(dt.x,dt.y,-Ue)}for(let Fe=0,Rt=Q.length;Fe<Rt;Fe++){const dt=Q[Fe];H=ee[Fe];for(let X=0,G=dt.length;X<G;X++){const we=me(dt[X],H[X],Je);ze(we.x,we.y,-Ue)}}}const ce=_+M;for(let oe=0;oe<ue;oe++){const Xe=g?me(F[oe],ne[oe],ce):F[oe];R?(O.copy(N.normals[0]).multiplyScalar(Xe.x),I.copy(N.binormals[0]).multiplyScalar(Xe.y),V.copy(b[0]).add(O).add(I),ze(V.x,V.y,V.z)):ze(Xe.x,Xe.y,0)}for(let oe=1;oe<=f;oe++)for(let Xe=0;Xe<ue;Xe++){const Ue=g?me(F[Xe],ne[Xe],ce):F[Xe];R?(O.copy(N.normals[oe]).multiplyScalar(Ue.x),I.copy(N.binormals[oe]).multiplyScalar(Ue.y),V.copy(b[oe]).add(O).add(I),ze(V.x,V.y,V.z)):ze(Ue.x,Ue.y,m/f*oe)}for(let oe=E-1;oe>=0;oe--){const Xe=oe/E,Ue=y*Math.cos(Xe*Math.PI/2),Je=_*Math.sin(Xe*Math.PI/2)+M;for(let Fe=0,Rt=Y.length;Fe<Rt;Fe++){const dt=me(Y[Fe],se[Fe],Je);ze(dt.x,dt.y,m+Ue)}for(let Fe=0,Rt=Q.length;Fe<Rt;Fe++){const dt=Q[Fe];H=ee[Fe];for(let X=0,G=dt.length;X<G;X++){const we=me(dt[X],H[X],Je);R?ze(we.x,we.y+b[f-1].y,b[f-1].x+Ue):ze(we.x,we.y,m+Ue)}}}xe(),ke();function xe(){const oe=i.length/3;if(g){let Xe=0,Ue=ue*Xe;for(let Je=0;Je<Ee;Je++){const Fe=_e[Je];Ke(Fe[2]+Ue,Fe[1]+Ue,Fe[0]+Ue)}Xe=f+E*2,Ue=ue*Xe;for(let Je=0;Je<Ee;Je++){const Fe=_e[Je];Ke(Fe[0]+Ue,Fe[1]+Ue,Fe[2]+Ue)}}else{for(let Xe=0;Xe<Ee;Xe++){const Ue=_e[Xe];Ke(Ue[2],Ue[1],Ue[0])}for(let Xe=0;Xe<Ee;Xe++){const Ue=_e[Xe];Ke(Ue[0]+ue*f,Ue[1]+ue*f,Ue[2]+ue*f)}}n.addGroup(oe,i.length/3-oe,0)}function ke(){const oe=i.length/3;let Xe=0;Re(Y,Xe),Xe+=Y.length;for(let Ue=0,Je=Q.length;Ue<Je;Ue++){const Fe=Q[Ue];Re(Fe,Xe),Xe+=Fe.length}n.addGroup(oe,i.length/3-oe,1)}function Re(oe,Xe){let Ue=oe.length;for(;--Ue>=0;){const Je=Ue;let Fe=Ue-1;Fe<0&&(Fe=oe.length-1);for(let Rt=0,dt=f+E*2;Rt<dt;Rt++){const X=ue*Rt,G=ue*(Rt+1),we=Xe+Je+X,We=Xe+Fe+X,He=Xe+Fe+G,Ve=Xe+Je+G;st(we,We,He,Ve)}}}function ze(oe,Xe,Ue){c.push(oe),c.push(Xe),c.push(Ue)}function Ke(oe,Xe,Ue){it(oe),it(Xe),it(Ue);const Je=i.length/3,Fe=A.generateTopUV(n,i,Je-3,Je-2,Je-1);ft(Fe[0]),ft(Fe[1]),ft(Fe[2])}function st(oe,Xe,Ue,Je){it(oe),it(Xe),it(Je),it(Xe),it(Ue),it(Je);const Fe=i.length/3,Rt=A.generateSideWallUV(n,i,Fe-6,Fe-3,Fe-2,Fe-1);ft(Rt[0]),ft(Rt[1]),ft(Rt[3]),ft(Rt[1]),ft(Rt[2]),ft(Rt[3])}function it(oe){i.push(c[oe*3+0]),i.push(c[oe*3+1]),i.push(c[oe*3+2])}function ft(oe){s.push(oe.x),s.push(oe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return jW(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];n.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new ly[i.type]().fromJSON(i)),new Zy(n,e.options)}}const WW={generateTopUV:function(r,e,t,n,i){const s=e[t*3],o=e[t*3+1],a=e[n*3],c=e[n*3+1],h=e[i*3],f=e[i*3+1];return[new Be(s,o),new Be(a,c),new Be(h,f)]},generateSideWallUV:function(r,e,t,n,i,s){const o=e[t*3],a=e[t*3+1],c=e[t*3+2],h=e[n*3],f=e[n*3+1],m=e[n*3+2],g=e[i*3],y=e[i*3+1],_=e[i*3+2],M=e[s*3],E=e[s*3+1],x=e[s*3+2];return Math.abs(a-f)<Math.abs(o-h)?[new Be(o,1-c),new Be(h,1-m),new Be(g,1-_),new Be(M,1-x)]:[new Be(a,1-c),new Be(f,1-m),new Be(y,1-_),new Be(E,1-x)]}};function jW(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class pg extends kc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new pg(e.radius,e.detail)}}class mg extends kc{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new mg(e.radius,e.detail)}}class Ky extends sn{constructor(e=.5,t=1,n=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:o},n=Math.max(3,n),i=Math.max(1,i);const a=[],c=[],h=[],f=[];let m=e;const g=(t-e)/i,y=new q,_=new Be;for(let M=0;M<=i;M++){for(let E=0;E<=n;E++){const x=s+E/n*o;y.x=m*Math.cos(x),y.y=m*Math.sin(x),c.push(y.x,y.y,y.z),h.push(0,0,1),_.x=(y.x/t+1)/2,_.y=(y.y/t+1)/2,f.push(_.x,_.y)}m+=g}for(let M=0;M<i;M++){const E=M*(n+1);for(let x=0;x<n;x++){const A=x+E,b=A,R=A+n+1,N=A+n+2,I=A+1;a.push(b,R,I),a.push(R,N,I)}}this.setIndex(a),this.setAttribute("position",new Ct(c,3)),this.setAttribute("normal",new Ct(h,3)),this.setAttribute("uv",new Ct(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ky(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Jy extends sn{constructor(e=new th([new Be(0,.5),new Be(-.5,-.5),new Be(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],o=[];let a=0,c=0;if(Array.isArray(e)===!1)h(e);else for(let f=0;f<e.length;f++)h(e[f]),this.addGroup(a,c,f),a+=c,c=0;this.setIndex(n),this.setAttribute("position",new Ct(i,3)),this.setAttribute("normal",new Ct(s,3)),this.setAttribute("uv",new Ct(o,2));function h(f){const m=i.length/3,g=f.extractPoints(t);let y=g.shape;const _=g.holes;pa.isClockWise(y)===!1&&(y=y.reverse());for(let E=0,x=_.length;E<x;E++){const A=_[E];pa.isClockWise(A)===!0&&(_[E]=A.reverse())}const M=pa.triangulateShape(y,_);for(let E=0,x=_.length;E<x;E++){const A=_[E];y=y.concat(A)}for(let E=0,x=y.length;E<x;E++){const A=y[E];i.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let E=0,x=M.length;E<x;E++){const A=M[E],b=A[0]+m,R=A[1]+m,N=A[2]+m;n.push(b,R,N),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return XW(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];n.push(o)}return new Jy(n,e.curveSegments)}}function XW(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class gg extends sn{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const c=Math.min(o+a,Math.PI);let h=0;const f=[],m=new q,g=new q,y=[],_=[],M=[],E=[];for(let x=0;x<=n;x++){const A=[],b=x/n;let R=0;x===0&&o===0?R=.5/t:x===n&&c===Math.PI&&(R=-.5/t);for(let N=0;N<=t;N++){const I=N/t;m.x=-e*Math.cos(i+I*s)*Math.sin(o+b*a),m.y=e*Math.cos(o+b*a),m.z=e*Math.sin(i+I*s)*Math.sin(o+b*a),_.push(m.x,m.y,m.z),g.copy(m).normalize(),M.push(g.x,g.y,g.z),E.push(I+R,1-b),A.push(h++)}f.push(A)}for(let x=0;x<n;x++)for(let A=0;A<t;A++){const b=f[x][A+1],R=f[x][A],N=f[x+1][A],I=f[x+1][A+1];(x!==0||o>0)&&y.push(b,R,I),(x!==n-1||c<Math.PI)&&y.push(R,N,I)}this.setIndex(y),this.setAttribute("position",new Ct(_,3)),this.setAttribute("normal",new Ct(M,3)),this.setAttribute("uv",new Ct(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Qy extends kc{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Qy(e.radius,e.detail)}}class e_ extends sn{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const o=[],a=[],c=[],h=[],f=new q,m=new q,g=new q;for(let y=0;y<=n;y++)for(let _=0;_<=i;_++){const M=_/i*s,E=y/n*Math.PI*2;m.x=(e+t*Math.cos(E))*Math.cos(M),m.y=(e+t*Math.cos(E))*Math.sin(M),m.z=t*Math.sin(E),a.push(m.x,m.y,m.z),f.x=e*Math.cos(M),f.y=e*Math.sin(M),g.subVectors(m,f).normalize(),c.push(g.x,g.y,g.z),h.push(_/i),h.push(y/n)}for(let y=1;y<=n;y++)for(let _=1;_<=i;_++){const M=(i+1)*y+_-1,E=(i+1)*(y-1)+_-1,x=(i+1)*(y-1)+_,A=(i+1)*y+_;o.push(M,E,A),o.push(E,x,A)}this.setIndex(o),this.setAttribute("position",new Ct(a,3)),this.setAttribute("normal",new Ct(c,3)),this.setAttribute("uv",new Ct(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new e_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class t_ extends sn{constructor(e=1,t=.4,n=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:o},n=Math.floor(n),i=Math.floor(i);const a=[],c=[],h=[],f=[],m=new q,g=new q,y=new q,_=new q,M=new q,E=new q,x=new q;for(let b=0;b<=n;++b){const R=b/n*s*Math.PI*2;A(R,s,o,e,y),A(R+.01,s,o,e,_),E.subVectors(_,y),x.addVectors(_,y),M.crossVectors(E,x),x.crossVectors(M,E),M.normalize(),x.normalize();for(let N=0;N<=i;++N){const I=N/i*Math.PI*2,O=-t*Math.cos(I),V=t*Math.sin(I);m.x=y.x+(O*x.x+V*M.x),m.y=y.y+(O*x.y+V*M.y),m.z=y.z+(O*x.z+V*M.z),c.push(m.x,m.y,m.z),g.subVectors(m,y).normalize(),h.push(g.x,g.y,g.z),f.push(b/n),f.push(N/i)}}for(let b=1;b<=n;b++)for(let R=1;R<=i;R++){const N=(i+1)*(b-1)+(R-1),I=(i+1)*b+(R-1),O=(i+1)*b+R,V=(i+1)*(b-1)+R;a.push(N,I,V),a.push(I,O,V)}this.setIndex(a),this.setAttribute("position",new Ct(c,3)),this.setAttribute("normal",new Ct(h,3)),this.setAttribute("uv",new Ct(f,2));function A(b,R,N,I,O){const V=Math.cos(b),k=Math.sin(b),F=N/R*b,Q=Math.cos(F);O.x=I*(2+Q)*.5*V,O.y=I*(2+Q)*k*.5,O.z=I*Math.sin(F)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class n_ extends sn{constructor(e=new iE(new q(-1,-1,0),new q(-1,1,0),new q(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new q,c=new q,h=new Be;let f=new q;const m=[],g=[],y=[],_=[];M(),this.setIndex(_),this.setAttribute("position",new Ct(m,3)),this.setAttribute("normal",new Ct(g,3)),this.setAttribute("uv",new Ct(y,2));function M(){for(let b=0;b<t;b++)E(b);E(s===!1?t:0),A(),x()}function E(b){f=e.getPointAt(b/t,f);const R=o.normals[b],N=o.binormals[b];for(let I=0;I<=i;I++){const O=I/i*Math.PI*2,V=Math.sin(O),k=-Math.cos(O);c.x=k*R.x+V*N.x,c.y=k*R.y+V*N.y,c.z=k*R.z+V*N.z,c.normalize(),g.push(c.x,c.y,c.z),a.x=f.x+n*c.x,a.y=f.y+n*c.y,a.z=f.z+n*c.z,m.push(a.x,a.y,a.z)}}function x(){for(let b=1;b<=t;b++)for(let R=1;R<=i;R++){const N=(i+1)*(b-1)+(R-1),I=(i+1)*b+(R-1),O=(i+1)*b+R,V=(i+1)*(b-1)+R;_.push(N,I,V),_.push(I,O,V)}}function A(){for(let b=0;b<=t;b++)for(let R=0;R<=i;R++)h.x=b/t,h.y=R/i,y.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new n_(new ly[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class WL extends sn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new q,s=new q;if(e.index!==null){const o=e.attributes.position,a=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:a.count,materialIndex:0}]);for(let h=0,f=c.length;h<f;++h){const m=c[h],g=m.start,y=m.count;for(let _=g,M=g+y;_<M;_+=3)for(let E=0;E<3;E++){const x=a.getX(_+E),A=a.getX(_+(E+1)%3);i.fromBufferAttribute(o,x),s.fromBufferAttribute(o,A),PA(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,c=o.count/3;a<c;a++)for(let h=0;h<3;h++){const f=3*a+h,m=3*a+(h+1)%3;i.fromBufferAttribute(o,f),s.fromBufferAttribute(o,m),PA(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ct(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function PA(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var RA=Object.freeze({__proto__:null,BoxGeometry:dh,CapsuleGeometry:jy,CircleGeometry:Xy,ConeGeometry:$y,CylinderGeometry:Nf,DodecahedronGeometry:qy,EdgesGeometry:zL,ExtrudeGeometry:Zy,IcosahedronGeometry:pg,LatheGeometry:fg,OctahedronGeometry:mg,PlaneGeometry:fh,PolyhedronGeometry:kc,RingGeometry:Ky,ShapeGeometry:Jy,SphereGeometry:gg,TetrahedronGeometry:Qy,TorusGeometry:e_,TorusKnotGeometry:t_,TubeGeometry:n_,WireframeGeometry:WL});class jL extends Bi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new gt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class XL extends Ws{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class oE extends Bi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new gt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ic,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $L extends oE{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Be(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Er(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new gt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new gt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new gt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class xm extends Bi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new gt(16777215),this.specular=new gt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ic,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qL extends Bi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new gt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ic,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class YL extends Bi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ic,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class aE extends Bi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ic,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ZL extends Bi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new gt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ic,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class KL extends zi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function qu(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function JL(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function QL(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function O1(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let c=0;c!==e;++c)i[o++]=r[a+c]}return i}function lE(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=r[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=r[i++];while(s!==void 0)}function $W(r,e,t,n,i=30){const s=r.clone();s.name=e;const o=[];for(let c=0;c<s.tracks.length;++c){const h=s.tracks[c],f=h.getValueSize(),m=[],g=[];for(let y=0;y<h.times.length;++y){const _=h.times[y]*i;if(!(_<t||_>=n)){m.push(h.times[y]);for(let M=0;M<f;++M)g.push(h.values[y*f+M])}}m.length!==0&&(h.times=qu(m,h.times.constructor),h.values=qu(g,h.values.constructor),o.push(h))}s.tracks=o;let a=1/0;for(let c=0;c<s.tracks.length;++c)a>s.tracks[c].times[0]&&(a=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*a);return s.resetDuration(),s}function qW(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let o=0;o<i;++o){const a=t.tracks[o],c=a.ValueTypeName;if(c==="bool"||c==="string")continue;const h=r.tracks.find(function(x){return x.name===a.name&&x.ValueTypeName===c});if(h===void 0)continue;let f=0;const m=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=m/3);let g=0;const y=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=y/3);const _=a.times.length-1;let M;if(s<=a.times[0]){const x=f,A=m-f;M=a.values.slice(x,A)}else if(s>=a.times[_]){const x=_*m+f,A=x+m-f;M=a.values.slice(x,A)}else{const x=a.createInterpolant(),A=f,b=m-f;x.evaluate(s),M=x.resultBuffer.slice(A,b)}c==="quaternion"&&new Xr().fromArray(M).normalize().conjugate().toArray(M);const E=h.times.length;for(let x=0;x<E;++x){const A=x*y+g;if(c==="quaternion")Xr.multiplyQuaternionsFlat(h.values,A,M,0,h.values,A);else{const b=y-g*2;for(let R=0;R<b;++R)h.values[A+R]-=M[R]}}}return r.blendMode=BS,r}const YW={convertArray:qu,isTypedArray:JL,getKeyframeOrder:QL,sortedArray:O1,flattenJSON:lE,subclip:$W,makeClipAdditive:qW};class vg{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=n+2;;){if(i===void 0){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=i,i=t[++n],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(n=2,s=a);for(let c=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(i=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class eI extends vg{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Wu,endingEnd:Wu}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],c=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case ju:s=e,a=2*t-n;break;case Dm:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=n}if(c===void 0)switch(this.getSettings_().endingEnd){case ju:o=e,c=2*n-t;break;case Dm:o=1,c=n+i[1]-i[0];break;default:o=e-1,c=t}const h=(n-t)*.5,f=this.valueSize;this._weightPrev=h/(t-a),this._weightNext=h/(c-n),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,h=c-a,f=this._offsetPrev,m=this._offsetNext,g=this._weightPrev,y=this._weightNext,_=(n-t)/(i-t),M=_*_,E=M*_,x=-g*E+2*g*M-g*_,A=(1+g)*E+(-1.5-2*g)*M+(-.5+g)*_+1,b=(-1-y)*E+(1.5+y)*M+.5*_,R=y*E-y*M;for(let N=0;N!==a;++N)s[N]=x*o[f+N]+A*o[h+N]+b*o[c+N]+R*o[m+N];return s}}class cE extends vg{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=e*a,h=c-a,f=(n-t)/(i-t),m=1-f;for(let g=0;g!==a;++g)s[g]=o[h+g]*m+o[c+g]*f;return s}}class tI extends vg{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class $o{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qu(t,this.TimeBufferType),this.values=qu(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:qu(e.times,Array),values:qu(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new tI(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new eI(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Im:t=this.InterpolantFactoryMethodDiscrete;break;case km:t=this.InterpolantFactoryMethodLinear;break;case Bv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Im;case this.InterpolantFactoryMethodLinear:return km;case this.InterpolantFactoryMethodSmooth:return Bv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,o=i-1;for(;s!==i&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const c=n[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,o),e=!1;break}o=c}if(i!==void 0&&JL(i))for(let a=0,c=i.length;a!==c;++a){const h=i[a];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===Bv,s=e.length-1;let o=1;for(let a=1;a<s;++a){let c=!1;const h=e[a],f=e[a+1];if(h!==f&&(a!==1||h!==e[0]))if(i)c=!0;else{const m=a*n,g=m-n,y=m+n;for(let _=0;_!==n;++_){const M=t[m+_];if(M!==t[g+_]||M!==t[y+_]){c=!0;break}}}if(c){if(a!==o){e[o]=e[a];const m=a*n,g=o*n;for(let y=0;y!==n;++y)t[g+y]=t[m+y]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,c=o*n,h=0;h!==n;++h)t[c+h]=t[a+h];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}$o.prototype.TimeBufferType=Float32Array;$o.prototype.ValueBufferType=Float32Array;$o.prototype.DefaultInterpolation=km;class ph extends $o{}ph.prototype.ValueTypeName="bool";ph.prototype.ValueBufferType=Array;ph.prototype.DefaultInterpolation=Im;ph.prototype.InterpolantFactoryMethodLinear=void 0;ph.prototype.InterpolantFactoryMethodSmooth=void 0;class uE extends $o{}uE.prototype.ValueTypeName="color";class Tf extends $o{}Tf.prototype.ValueTypeName="number";class nI extends vg{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,c=(n-t)/(i-t);let h=e*a;for(let f=h+a;h!==f;h+=4)Xr.slerpFlat(s,0,o,h-a,o,h,c);return s}}class mh extends $o{InterpolantFactoryMethodLinear(e){return new nI(this.times,this.values,this.getValueSize(),e)}}mh.prototype.ValueTypeName="quaternion";mh.prototype.DefaultInterpolation=km;mh.prototype.InterpolantFactoryMethodSmooth=void 0;class gh extends $o{}gh.prototype.ValueTypeName="string";gh.prototype.ValueBufferType=Array;gh.prototype.DefaultInterpolation=Im;gh.prototype.InterpolantFactoryMethodLinear=void 0;gh.prototype.InterpolantFactoryMethodSmooth=void 0;class bf extends $o{}bf.prototype.ValueTypeName="vector";class Af{constructor(e,t=-1,n,i=Dy){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=zs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(KW(n[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push($o.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,o=[];for(let a=0;a<s;a++){let c=[],h=[];c.push((a+s-1)%s,a,(a+1)%s),h.push(0,1,0);const f=QL(c);c=O1(c,1,f),h=O1(h,1,f),!i&&c[0]===0&&(c.push(s),h.push(h[0])),o.push(new Tf(".morphTargetInfluences["+t[a].name+"]",c,h).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){const h=e[a],f=h.name.match(s);if(f&&f.length>1){const m=f[1];let g=i[m];g||(i[m]=g=[]),g.push(h)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(m,g,y,_,M){if(y.length!==0){const E=[],x=[];lE(y,E,x,_),E.length!==0&&M.push(new m(g,E,x))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let c=e.length||-1;const h=e.hierarchy||[];for(let m=0;m<h.length;m++){const g=h[m].keys;if(!(!g||g.length===0))if(g[0].morphTargets){const y={};let _;for(_=0;_<g.length;_++)if(g[_].morphTargets)for(let M=0;M<g[_].morphTargets.length;M++)y[g[_].morphTargets[M]]=-1;for(const M in y){const E=[],x=[];for(let A=0;A!==g[_].morphTargets.length;++A){const b=g[_];E.push(b.time),x.push(b.morphTarget===M?1:0)}i.push(new Tf(".morphTargetInfluence["+M+"]",E,x))}c=y.length*o}else{const y=".bones["+t[m].name+"]";n(bf,y+".position",g,"pos",i),n(mh,y+".quaternion",g,"rot",i),n(bf,y+".scale",g,"scl",i)}}return i.length===0?null:new this(s,c,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ZW(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Tf;case"vector":case"vector2":case"vector3":case"vector4":return bf;case"color":return uE;case"quaternion":return mh;case"bool":case"boolean":return ph;case"string":return gh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function KW(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=ZW(r.type);if(r.times===void 0){const t=[],n=[];lE(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const ul={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class r_{constructor(e,t,n){const i=this;let s=!1,o=0,a=0,c;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(f){a++,s===!1&&i.onStart!==void 0&&i.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,i.onProgress!==void 0&&i.onProgress(f,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(f){i.onError!==void 0&&i.onError(f)},this.resolveURL=function(f){return c?c(f):f},this.setURLModifier=function(f){return c=f,this},this.addHandler=function(f,m){return h.push(f,m),this},this.removeHandler=function(f){const m=h.indexOf(f);return m!==-1&&h.splice(m,2),this},this.getHandler=function(f){for(let m=0,g=h.length;m<g;m+=2){const y=h[m],_=h[m+1];if(y.global&&(y.lastIndex=0),y.test(f))return _}return null}}}const rI=new r_;class Vi{constructor(e){this.manager=e!==void 0?e:rI,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Vi.DEFAULT_MATERIAL_NAME="__DEFAULT";const rl={};class JW extends Error{constructor(e,t){super(e),this.response=t}}class xs extends Vi{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=ul.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(rl[e]!==void 0){rl[e].push({onLoad:t,onProgress:n,onError:i});return}rl[e]=[],rl[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,c=this.responseType;fetch(o).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const f=rl[e],m=h.body.getReader(),g=h.headers.get("Content-Length")||h.headers.get("X-File-Size"),y=g?parseInt(g):0,_=y!==0;let M=0;const E=new ReadableStream({start(x){A();function A(){m.read().then(({done:b,value:R})=>{if(b)x.close();else{M+=R.byteLength;const N=new ProgressEvent("progress",{lengthComputable:_,loaded:M,total:y});for(let I=0,O=f.length;I<O;I++){const V=f[I];V.onProgress&&V.onProgress(N)}x.enqueue(R),A()}})}}});return new Response(E)}else throw new JW(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(c){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return h.json();default:if(a===void 0)return h.text();{const m=/charset="?([^;"\s]*)"?/i.exec(a),g=m&&m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(g);return h.arrayBuffer().then(_=>y.decode(_))}}}).then(h=>{ul.add(e,h);const f=rl[e];delete rl[e];for(let m=0,g=f.length;m<g;m++){const y=f[m];y.onLoad&&y.onLoad(h)}}).catch(h=>{const f=rl[e];if(f===void 0)throw this.manager.itemError(e),h;delete rl[e];for(let m=0,g=f.length;m<g;m++){const y=f[m];y.onError&&y.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class QW extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new xs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Af.parse(e[n]);t.push(i)}return t}}class ej extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=this,o=[],a=new Gy,c=new xs(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let h=0;function f(m){c.load(e[m],function(g){const y=s.parse(g,!0);o[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},h+=1,h===6&&(y.mipmapCount===1&&(a.minFilter=Dn),a.image=o,a.format=y.format,a.needsUpdate=!0,t&&t(a))},n,i)}if(Array.isArray(e))for(let m=0,g=e.length;m<g;++m)f(m);else c.load(e,function(m){const g=s.parse(m,!0);if(g.isCubemap){const y=g.mipmaps.length/g.mipmapCount;for(let _=0;_<y;_++){o[_]={mipmaps:[]};for(let M=0;M<g.mipmapCount;M++)o[_].mipmaps.push(g.mipmaps[_*g.mipmapCount+M]),o[_].format=g.format,o[_].width=g.width,o[_].height=g.height}a.image=o}else a.image.width=g.width,a.image.height=g.height,a.mipmaps=g.mipmaps;g.mipmapCount===1&&(a.minFilter=Dn),a.format=g.format,a.needsUpdate=!0,t&&t(a)},n,i);return a}}class jm extends Vi{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ul.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Bm("img");function c(){f(),ul.add(e,this),t&&t(this),s.manager.itemEnd(e)}function h(m){f(),i&&i(m),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",c,!1),a.removeEventListener("error",h,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class iI extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=new cg;s.colorSpace=Hr;const o=new jm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function c(h){o.load(e[h],function(f){s.images[h]=f,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let h=0;h<e.length;++h)c(h);return s}}class hE extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new Mc,a=new xs(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(c){let h;try{h=s.parse(c)}catch(f){if(i!==void 0)i(f);else{console.error(f);return}}h.image!==void 0?o.image=h.image:h.data!==void 0&&(o.image.width=h.width,o.image.height=h.height,o.image.data=h.data),o.wrapS=h.wrapS!==void 0?h.wrapS:rr,o.wrapT=h.wrapT!==void 0?h.wrapT:rr,o.magFilter=h.magFilter!==void 0?h.magFilter:Dn,o.minFilter=h.minFilter!==void 0?h.minFilter:Dn,o.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0?o.colorSpace=h.colorSpace:h.encoding!==void 0&&(o.encoding=h.encoding),h.flipY!==void 0&&(o.flipY=h.flipY),h.format!==void 0&&(o.format=h.format),h.type!==void 0&&(o.type=h.type),h.mipmaps!==void 0&&(o.mipmaps=h.mipmaps,o.minFilter=Pc),h.mipmapCount===1&&(o.minFilter=Dn),h.generateMipmaps!==void 0&&(o.generateMipmaps=h.generateMipmaps),o.needsUpdate=!0,t&&t(o,h)},n,i),o}}class sI extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=new Gn,o=new jm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class Dc extends bn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new gt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class oI extends Dc{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(bn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new gt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Xx=new bt,LA=new q,IA=new q;class dE{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Be(512,512),this.map=null,this.mapPass=null,this.matrix=new bt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ug,this._frameExtents=new Be(1,1),this._viewportCount=1,this._viewports=[new Ln(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;LA.setFromMatrixPosition(e.matrixWorld),t.position.copy(LA),IA.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(IA),t.updateMatrixWorld(),Xx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Xx),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Xx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class tj extends dE{constructor(){super(new Mr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Sf*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class fE extends Dc{constructor(e,t,n=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(bn.DEFAULT_UP),this.updateMatrix(),this.target=new bn,this.distance=n,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new tj}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const kA=new bt,qp=new q,$x=new q;class nj extends dE{constructor(){super(new Mr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Be(4,2),this._viewportCount=6,this._viewports=[new Ln(2,1,1,1),new Ln(0,1,1,1),new Ln(3,1,1,1),new Ln(1,1,1,1),new Ln(3,0,1,1),new Ln(1,0,1,1)],this._cubeDirections=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)],this._cubeUps=[new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),qp.setFromMatrixPosition(e.matrixWorld),n.position.copy(qp),$x.copy(n.position),$x.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt($x),n.updateMatrixWorld(),i.makeTranslation(-qp.x,-qp.y,-qp.z),kA.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kA)}}class cy extends Dc{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new nj}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class rj extends dE{constructor(){super(new fa(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class pE extends Dc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(bn.DEFAULT_UP),this.updateMatrix(),this.target=new bn,this.shadow=new rj}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class mE extends Dc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class aI extends Dc{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class lI{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new q)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class cI extends Dc{constructor(e=new lI,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class i_ extends Vi{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,o=new xs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=i_.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new gt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=n(o.value);break;case"c":i.uniforms[s].value=new gt().setHex(o.value);break;case"v2":i.uniforms[s].value=new Be().fromArray(o.value);break;case"v3":i.uniforms[s].value=new q().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Ln().fromArray(o.value);break;case"m3":i.uniforms[s].value=new pn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new bt().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Be().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Be().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:jL,SpriteMaterial:KS,RawShaderMaterial:XL,ShaderMaterial:Ws,PointsMaterial:QS,MeshPhysicalMaterial:$L,MeshStandardMaterial:oE,MeshPhongMaterial:xm,MeshToonMaterial:qL,MeshNormalMaterial:YL,MeshLambertMaterial:aE,MeshDepthMaterial:YS,MeshDistanceMaterial:ZS,MeshBasicMaterial:xl,MeshMatcapMaterial:ZL,LineDashedMaterial:KL,LineBasicMaterial:zi,Material:Bi};return new t[e]}}class uy{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class uI extends sn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class hI extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new xs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(c){i?i(c):console.error(c),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(y,_){if(t[_]!==void 0)return t[_];const E=y.interleavedBuffers[_],x=s(y,E.buffer),A=of(E.type,x),b=new Hy(A,E.stride);return b.uuid=E.uuid,t[_]=b,b}function s(y,_){if(n[_]!==void 0)return n[_];const E=y.arrayBuffers[_],x=new Uint32Array(E).buffer;return n[_]=x,x}const o=e.isInstancedBufferGeometry?new uI:new sn,a=e.data.index;if(a!==void 0){const y=of(a.type,a.array);o.setIndex(new Wn(y,1))}const c=e.data.attributes;for(const y in c){const _=c[y];let M;if(_.isInterleavedBufferAttribute){const E=i(e.data,_.data);M=new sh(E,_.itemSize,_.offset,_.normalized)}else{const E=of(_.type,_.array),x=_.isInstancedBufferAttribute?Mf:Wn;M=new x(E,_.itemSize,_.normalized)}_.name!==void 0&&(M.name=_.name),_.usage!==void 0&&M.setUsage(_.usage),o.setAttribute(y,M)}const h=e.data.morphAttributes;if(h)for(const y in h){const _=h[y],M=[];for(let E=0,x=_.length;E<x;E++){const A=_[E];let b;if(A.isInterleavedBufferAttribute){const R=i(e.data,A.data);b=new sh(R,A.itemSize,A.offset,A.normalized)}else{const R=of(A.type,A.array);b=new Wn(R,A.itemSize,A.normalized)}A.name!==void 0&&(b.name=A.name),M.push(b)}o.morphAttributes[y]=M}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let y=0,_=m.length;y!==_;++y){const M=m[y];o.addGroup(M.start,M.count,M.materialIndex)}const g=e.data.boundingSphere;if(g!==void 0){const y=new q;g.center!==void 0&&y.fromArray(g.center),o.boundingSphere=new Fi(y,g.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class ij extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=this,o=this.path===""?uy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new xs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){let h=null;try{h=JSON.parse(c)}catch(m){i!==void 0&&i(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const f=h.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(h,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?uy.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new xs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),c=a.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(h)}),a=this.parseTextures(e.textures,o),c=this.parseMaterials(e.materials,a),h=this.parseObject(e.object,s,c,a,n),f=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,f),t!==void 0){let m=!1;for(const g in o)if(o[g].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,i,a,o,t),h=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,h),c}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new th().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new dg().fromJSON(e[s],i);n[a.uuid]=a}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new hI;for(let s=0,o=e.length;s<o;s++){let a;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(c);break;default:c.type in RA?a=RA[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}a.uuid=c.uuid,c.name!==void 0&&(a.name=c.name),c.userData!==void 0&&(a.userData=c.userData),n[c.uuid]=a}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new i_;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const c=e[o];n[c.uuid]===void 0&&(n[c.uuid]=s.parse(c)),i[c.uuid]=n[c.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=Af.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function o(c){return n.manager.itemStart(c),s.load(c,function(){n.manager.itemEnd(c)},void 0,function(){n.manager.itemError(c),n.manager.itemEnd(c)})}function a(c){if(typeof c=="string"){const h=c,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;return o(f)}else return c.data?{data:of(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new r_(t);s=new jm(c),s.setCrossOrigin(this.crossOrigin);for(let h=0,f=e.length;h<f;h++){const m=e[h],g=m.url;if(Array.isArray(g)){const y=[];for(let _=0,M=g.length;_<M;_++){const E=g[_],x=a(E);x!==null&&(x instanceof HTMLImageElement?y.push(x):y.push(new Mc(x.data,x.width,x.height)))}i[m.uuid]=new Xu(y)}else{const y=a(m.url);i[m.uuid]=new Xu(y)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(o){if(typeof o=="string"){const a=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(c)}else return o.data?{data:of(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new jm(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const c=e[o],h=c.url;if(Array.isArray(h)){const f=[];for(let m=0,g=h.length;m<g;m++){const y=h[m],_=await s(y);_!==null&&(_ instanceof HTMLImageElement?f.push(_):f.push(new Mc(_.data,_.width,_.height)))}n[c.uuid]=new Xu(f)}else{const f=await s(c.url);n[c.uuid]=new Xu(f)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const c=t[a.image],h=c.data;let f;Array.isArray(h)?(f=new cg,h.length===6&&(f.needsUpdate=!0)):(h&&h.data?f=new Mc:f=new Gn,h&&(f.needsUpdate=!0)),f.source=c,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=n(a.mapping,sj)),a.channel!==void 0&&(f.channel=a.channel),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=n(a.wrap[0],DA),f.wrapT=n(a.wrap[1],DA)),a.format!==void 0&&(f.format=a.format),a.internalFormat!==void 0&&(f.internalFormat=a.internalFormat),a.type!==void 0&&(f.type=a.type),a.colorSpace!==void 0&&(f.colorSpace=a.colorSpace),a.encoding!==void 0&&(f.encoding=a.encoding),a.minFilter!==void 0&&(f.minFilter=n(a.minFilter,OA)),a.magFilter!==void 0&&(f.magFilter=n(a.magFilter,OA)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.generateMipmaps!==void 0&&(f.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(f.compareFunction=a.compareFunction),a.userData!==void 0&&(f.userData=a.userData),i[a.uuid]=f}return i}parseObject(e,t,n,i,s){let o;function a(g){return t[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",g),t[g]}function c(g){if(g!==void 0){if(Array.isArray(g)){const y=[];for(let _=0,M=g.length;_<M;_++){const E=g[_];n[E]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",E),y.push(n[E])}return y}return n[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),n[g]}}function h(g){return i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",g),i[g]}let f,m;switch(e.type){case"Scene":o=new hg,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new gt(e.background):o.background=h(e.background)),e.environment!==void 0&&(o.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Vy(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new zy(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Mr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new fa(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new mE(e.color,e.intensity);break;case"DirectionalLight":o=new pE(e.color,e.intensity);break;case"PointLight":o=new cy(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new aI(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new fE(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new oI(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new cI().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),m=c(e.material),o=new JS(f,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),m=c(e.material),o=new qn(f,m);break;case"InstancedMesh":f=a(e.geometry),m=c(e.material);const g=e.count,y=e.instanceMatrix,_=e.instanceColor;o=new LL(f,m,g),o.instanceMatrix=new Mf(new Float32Array(y.array),16),_!==void 0&&(o.instanceColor=new Mf(new Float32Array(_.array),_.itemSize));break;case"BatchedMesh":f=a(e.geometry),m=c(e.material),o=new IL(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,m),o.geometry=f,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(M=>{const E=new ns;E.min.fromArray(M.boxMin),E.max.fromArray(M.boxMax);const x=new Fi;return x.radius=M.sphereRadius,x.center.fromArray(M.sphereCenter),{boxInitialized:M.boxInitialized,box:E,sphereInitialized:M.sphereInitialized,sphere:x}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=h(e.matricesTexture.uuid);break;case"LOD":o=new RL;break;case"Line":o=new vl(a(e.geometry),c(e.material));break;case"LineLoop":o=new kL(a(e.geometry),c(e.material));break;case"LineSegments":o=new ya(a(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new DL(a(e.geometry),c(e.material));break;case"Sprite":o=new PL(c(e.material));break;case"Group":o=new vc;break;case"Bone":o=new zm;break;default:o=new bn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const g=e.children;for(let y=0;y<g.length;y++)o.add(this.parseObject(g[y],t,n,i,s))}if(e.animations!==void 0){const g=e.animations;for(let y=0;y<g.length;y++){const _=g[y];o.animations.push(s[_])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const g=e.levels;for(let y=0;y<g.length;y++){const _=g[y],M=o.getObjectByProperty("uuid",_.object);M!==void 0&&o.addLevel(M,_.distance,_.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}}const sj={UVMapping:Ac,CubeReflectionMapping:ga,CubeRefractionMapping:Cc,EquirectangularReflectionMapping:nh,EquirectangularRefractionMapping:Rm,CubeUVReflectionMapping:Df},DA={RepeatWrapping:rh,ClampToEdgeWrapping:rr,MirroredRepeatWrapping:Lm},OA={NearestFilter:Lr,NearestMipmapNearestFilter:sy,NearestMipmapLinearFilter:mm,LinearFilter:Dn,LinearMipmapNearestFilter:PS,LinearMipmapLinearFilter:Pc};class oj extends Vi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=ul.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(h=>{t&&t(h),s.manager.itemEnd(e)}).catch(h=>{i&&i(h)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const c=fetch(e,a).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(h){return ul.add(e,h),t&&t(h),s.manager.itemEnd(e),h}).catch(function(h){i&&i(h),ul.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});ul.add(e,c),s.manager.itemStart(e)}}let fv;class gE{static getContext(){return fv===void 0&&(fv=new(window.AudioContext||window.webkitAudioContext)),fv}static setContext(e){fv=e}}class aj extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new xs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(c){try{const h=c.slice(0);gE.getContext().decodeAudioData(h,function(m){t(m)}).catch(a)}catch(h){a(h)}},n,i);function a(c){i?i(c):console.error(c),s.manager.itemError(e)}}}const NA=new bt,UA=new bt,Au=new bt;class lj{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Mr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Mr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Au.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Qu*t.fov*.5)/t.zoom;let a,c;UA.elements[12]=-i,NA.elements[12]=i,a=-o*t.aspect+s,c=o*t.aspect+s,Au.elements[0]=2*t.near/(c-a),Au.elements[8]=(c+a)/(c-a),this.cameraL.projectionMatrix.copy(Au),a=-o*t.aspect-s,c=o*t.aspect-s,Au.elements[0]=2*t.near/(c-a),Au.elements[8]=(c+a)/(c-a),this.cameraR.projectionMatrix.copy(Au)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(UA),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(NA)}}class vE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=FA(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=FA();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function FA(){return(typeof performance>"u"?Date:performance).now()}const Cu=new q,BA=new Xr,cj=new q,Pu=new q;class uj extends bn{constructor(){super(),this.type="AudioListener",this.context=gE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new vE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Cu,BA,cj),Pu.set(0,0,-1).applyQuaternion(BA),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Cu.x,i),t.positionY.linearRampToValueAtTime(Cu.y,i),t.positionZ.linearRampToValueAtTime(Cu.z,i),t.forwardX.linearRampToValueAtTime(Pu.x,i),t.forwardY.linearRampToValueAtTime(Pu.y,i),t.forwardZ.linearRampToValueAtTime(Pu.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition(Cu.x,Cu.y,Cu.z),t.setOrientation(Pu.x,Pu.y,Pu.z,n.x,n.y,n.z)}}class dI extends bn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ru=new q,zA=new Xr,hj=new q,Lu=new q;class dj extends dI{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ru,zA,hj),Lu.set(0,0,1).applyQuaternion(zA);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ru.x,n),t.positionY.linearRampToValueAtTime(Ru.y,n),t.positionZ.linearRampToValueAtTime(Ru.z,n),t.orientationX.linearRampToValueAtTime(Lu.x,n),t.orientationY.linearRampToValueAtTime(Lu.y,n),t.orientationZ.linearRampToValueAtTime(Lu.z,n)}else t.setPosition(Ru.x,Ru.y,Ru.z),t.setOrientation(Lu.x,Lu.y,Lu.z)}}class fj{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class fI{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)n[s+a]=n[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(n,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(n,i,c,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let c=t,h=t+t;c!==h;++c)if(n[c]!==n[c+t]){a.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,o=i;s!==o;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,i){Xr.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const o=this._workIndex*s;Xr.multiplyQuaternionsFlat(e,o,e,t,e,n),Xr.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,s){const o=1-i;for(let a=0;a!==s;++a){const c=t+a;e[c]=e[c]*o+e[n+a]*i}}_lerpAdditive(e,t,n,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*i}}}const yE="\\[\\]\\.:\\/",pj=new RegExp("["+yE+"]","g"),_E="[^"+yE+"]",mj="[^"+yE.replace("\\.","")+"]",gj=/((?:WC+[\/:])*)/.source.replace("WC",_E),vj=/(WCOD+)?/.source.replace("WCOD",mj),yj=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_E),_j=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_E),xj=new RegExp("^"+gj+vj+yj+_j+"$"),wj=["material","materials","bones","map"];class Sj{constructor(e,t,n){const i=n||En.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class En{constructor(e,t,n){this.path=t,this.parsedPath=n||En.parseTrackName(t),this.node=En.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new En.Composite(e,t,n):new En(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(pj,"")}static parseTrackName(e){const t=xj.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);wj.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const c=n(a.children);if(c)return c}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=En.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let h=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===h){h=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const o=e[i];if(o===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}En.Composite=Sj;En.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};En.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};En.prototype.GetterByBindingType=[En.prototype._getValue_direct,En.prototype._getValue_array,En.prototype._getValue_arrayElement,En.prototype._getValue_toArray];En.prototype.SetterByBindingTypeAndVersioning=[[En.prototype._setValue_direct,En.prototype._setValue_direct_setNeedsUpdate,En.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[En.prototype._setValue_array,En.prototype._setValue_array_setNeedsUpdate,En.prototype._setValue_array_setMatrixWorldNeedsUpdate],[En.prototype._setValue_arrayElement,En.prototype._setValue_arrayElement_setNeedsUpdate,En.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[En.prototype._setValue_fromArray,En.prototype._setValue_fromArray_setNeedsUpdate,En.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Ej{constructor(){this.isAnimationObjectGroup=!0,this.uuid=zs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,c=e.length,h=this.nCachedObjects_;for(let f=0,m=arguments.length;f!==m;++f){const g=arguments[f],y=g.uuid;let _=t[y];if(_===void 0){_=c++,t[y]=_,e.push(g);for(let M=0,E=o;M!==E;++M)s[M].push(new En(g,n[M],i[M]))}else if(_<h){a=e[_];const M=--h,E=e[M];t[E.uuid]=_,e[_]=E,t[y]=M,e[M]=g;for(let x=0,A=o;x!==A;++x){const b=s[x],R=b[M];let N=b[_];b[_]=R,N===void 0&&(N=new En(g,n[x],i[x])),b[M]=N}}else e[_]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const c=arguments[o],h=c.uuid,f=t[h];if(f!==void 0&&f>=s){const m=s++,g=e[m];t[g.uuid]=f,e[f]=g,t[h]=m,e[m]=c;for(let y=0,_=i;y!==_;++y){const M=n[y],E=M[m],x=M[f];M[f]=E,M[m]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,c=arguments.length;a!==c;++a){const h=arguments[a],f=h.uuid,m=t[f];if(m!==void 0)if(delete t[f],m<s){const g=--s,y=e[g],_=--o,M=e[_];t[y.uuid]=m,e[m]=y,t[M.uuid]=g,e[g]=M,e.pop();for(let E=0,x=i;E!==x;++E){const A=n[E],b=A[g],R=A[_];A[m]=b,A[g]=R,A.pop()}}else{const g=--o,y=e[g];g>0&&(t[y.uuid]=m),e[m]=y,e.pop();for(let _=0,M=i;_!==M;++_){const E=n[_];E[m]=E[g],E.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,c=this._objects,h=c.length,f=this.nCachedObjects_,m=new Array(h);i=s.length,n[e]=i,o.push(e),a.push(t),s.push(m);for(let g=f,y=c.length;g!==y;++g){const _=c[g];m[g]=new En(_,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,c=o[a],h=e[a];t[h]=n,o[n]=c,o.pop(),s[n]=s[a],s.pop(),i[n]=i[a],i.pop()}}}class pI{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),c={endingStart:Wu,endingEnd:Wu};for(let h=0;h!==o;++h){const f=s[h].createInterpolant(null);a[h]=f,f.settings=c}this._interpolantSettings=c,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=eL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const c=a.parameterPositions,h=a.sampleValues;return c[0]=s,c[1]=s+n,h[0]=e/o,h[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*n;c<0||n===0?t=0:(this._startTime=null,t=n*c)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const c=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case BS:for(let f=0,m=c.length;f!==m;++f)c[f].evaluate(o),h[f].accumulateAdditive(a);break;case Dy:default:for(let f=0,m=c.length;f!==m;++f)c[f].evaluate(o),h[f].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const o=n===tL;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(n===Q2){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const h=e<0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=ju,i.endingEnd=ju):(e?i.endingStart=this.zeroSlopeAtStart?ju:Wu:i.endingStart=Dm,t?i.endingEnd=this.zeroSlopeAtEnd?ju:Wu:i.endingEnd=Dm)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=s,c[0]=t,a[1]=s+e,c[1]=n,this}}const Mj=new Float32Array(1);class Tj extends _l{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,c=n.uuid,h=this._bindingsByRootAndName;let f=h[c];f===void 0&&(f={},h[c]=f);for(let m=0;m!==s;++m){const g=i[m],y=g.name;let _=f[y];if(_!==void 0)++_.referenceCount,o[m]=_;else{if(_=o[m],_!==void 0){_._cacheIndex===null&&(++_.referenceCount,this._addInactiveBinding(_,c,y));continue}const M=t&&t._propertyBindings[m].binding.parsedPath;_=new fI(En.create(n,y,M),g.ValueTypeName,g.getValueSize()),++_.referenceCount,this._addInactiveBinding(_,c,y),o[m]=_}a[m].resultBuffer=_.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],c=a.knownActions,h=c[c.length-1],f=e._byClipCacheIndex;h._byClipCacheIndex=f,c[f]=h,c.pop(),e._byClipCacheIndex=null;const m=a.actionByRoot,g=(e._localRoot||this._root).uuid;delete m[g],c.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[i],c=t[t.length-1],h=e._cacheIndex;c._cacheIndex=h,t[h]=c,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new cE(new Float32Array(2),new Float32Array(2),1,Mj),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Af.findByName(i,e):e;const a=o!==null?o.uuid:e,c=this._actionsByClip[a];let h=null;if(n===void 0&&(o!==null?n=o.blendMode:n=Dy),c!==void 0){const m=c.actionByRoot[s];if(m!==void 0&&m.blendMode===n)return m;h=c.knownActions[0],o===null&&(o=h._clip)}if(o===null)return null;const f=new pI(this,o,t,n);return this._bindAction(f,h),this._addInactiveAction(f,a,s),f}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?Af.findByName(n,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let h=0;h!==n;++h)t[h]._update(i,e,s,o);const a=this._bindings,c=this._nActiveBindings;for(let h=0;h!==c;++h)a[h].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const o=s.knownActions;for(let a=0,c=o.length;a!==c;++a){const h=o[a];this._deactivateAction(h);const f=h._cacheIndex,m=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,m._cacheIndex=f,t[f]=m,t.pop(),this._removeInactiveBindingsForAction(h)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const a=n[o].actionByRoot,c=a[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class xE{constructor(e){this.value=e}clone(){return new xE(this.value.clone===void 0?this.value:this.value.clone())}}let bj=0;class Aj extends _l{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:bj++}),this.name="",this.usage=Fm,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Cj extends Hy{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Pj{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class wE{constructor(e,t,n=0,i=1/0){this.ray=new hh(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new eh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return N1(e,this,n,t),n.sort(VA),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)N1(e[i],this,n,t);return n.sort(VA),n}}function VA(r,e){return r.distance-e.distance}function N1(r,e,t,n){if(r.layers.test(e.layers)&&r.raycast(e,t),n===!0){const i=r.children;for(let s=0,o=i.length;s<o;s++)N1(i[s],e,t,!0)}}class U1{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Er(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Rj{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const HA=new Be;class Lj{constructor(e=new Be(1/0,1/0),t=new Be(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=HA.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,HA).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const GA=new q,pv=new q;class Ij{constructor(e=new q,t=new q){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){GA.subVectors(e,this.start),pv.subVectors(this.end,this.start);const n=pv.dot(pv);let s=pv.dot(GA)/n;return t&&(s=Er(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const WA=new q;class kj extends bn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new sn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,c=32;o<c;o++,a++){const h=o/c*Math.PI*2,f=a/c*Math.PI*2;i.push(Math.cos(h),Math.sin(h),1,Math.cos(f),Math.sin(f),1)}n.setAttribute("position",new Ct(i,3));const s=new zi({fog:!1,toneMapped:!1});this.cone=new ya(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),WA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(WA),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const oc=new q,mv=new bt,qx=new bt;class Dj extends ya{constructor(e){const t=mI(e),n=new sn,i=[],s=[],o=new gt(0,0,1),a=new gt(0,1,0);for(let h=0;h<t.length;h++){const f=t[h];f.parent&&f.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}n.setAttribute("position",new Ct(i,3)),n.setAttribute("color",new Ct(s,3));const c=new zi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");qx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(mv.multiplyMatrices(qx,a.matrixWorld),oc.setFromMatrixPosition(mv),i.setXYZ(o,oc.x,oc.y,oc.z),mv.multiplyMatrices(qx,a.parent.matrixWorld),oc.setFromMatrixPosition(mv),i.setXYZ(o+1,oc.x,oc.y,oc.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function mI(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,mI(r.children[t]));return e}class Oj extends qn{constructor(e,t,n){const i=new gg(t,4,2),s=new xl({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Nj=new q,jA=new gt,XA=new gt;class Uj extends bn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new mg(t);i.rotateY(Math.PI*.5),this.material=new xl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Wn(o,3)),this.add(new qn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");jA.copy(this.light.color),XA.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?jA:XA;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Nj.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Fj extends ya{constructor(e=10,t=10,n=4473924,i=8947848){n=new gt(n),i=new gt(i);const s=t/2,o=e/t,a=e/2,c=[],h=[];for(let g=0,y=0,_=-a;g<=t;g++,_+=o){c.push(-a,0,_,a,0,_),c.push(_,0,-a,_,0,a);const M=g===s?n:i;M.toArray(h,y),y+=3,M.toArray(h,y),y+=3,M.toArray(h,y),y+=3,M.toArray(h,y),y+=3}const f=new sn;f.setAttribute("position",new Ct(c,3)),f.setAttribute("color",new Ct(h,3));const m=new zi({vertexColors:!0,toneMapped:!1});super(f,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Bj extends ya{constructor(e=10,t=16,n=8,i=64,s=4473924,o=8947848){s=new gt(s),o=new gt(o);const a=[],c=[];if(t>1)for(let m=0;m<t;m++){const g=m/t*(Math.PI*2),y=Math.sin(g)*e,_=Math.cos(g)*e;a.push(0,0,0),a.push(y,0,_);const M=m&1?s:o;c.push(M.r,M.g,M.b),c.push(M.r,M.g,M.b)}for(let m=0;m<n;m++){const g=m&1?s:o,y=e-e/n*m;for(let _=0;_<i;_++){let M=_/i*(Math.PI*2),E=Math.sin(M)*y,x=Math.cos(M)*y;a.push(E,0,x),c.push(g.r,g.g,g.b),M=(_+1)/i*(Math.PI*2),E=Math.sin(M)*y,x=Math.cos(M)*y,a.push(E,0,x),c.push(g.r,g.g,g.b)}}const h=new sn;h.setAttribute("position",new Ct(a,3)),h.setAttribute("color",new Ct(c,3));const f=new zi({vertexColors:!0,toneMapped:!1});super(h,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const $A=new q,gv=new q,qA=new q;class zj extends bn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new sn;i.setAttribute("position",new Ct([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new zi({fog:!1,toneMapped:!1});this.lightPlane=new vl(i,s),this.add(this.lightPlane),i=new sn,i.setAttribute("position",new Ct([0,0,0,0,0,1],3)),this.targetLine=new vl(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),$A.setFromMatrixPosition(this.light.matrixWorld),gv.setFromMatrixPosition(this.light.target.matrixWorld),qA.subVectors(gv,$A),this.lightPlane.lookAt(gv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(gv),this.targetLine.scale.z=qA.length()}}const vv=new q,Sr=new lg;class Vj extends ya{constructor(e){const t=new sn,n=new zi({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(_,M){c(_),c(M)}function c(_){i.push(0,0,0),s.push(0,0,0),o[_]===void 0&&(o[_]=[]),o[_].push(i.length/3-1)}t.setAttribute("position",new Ct(i,3)),t.setAttribute("color",new Ct(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const h=new gt(16755200),f=new gt(16711680),m=new gt(43775),g=new gt(16777215),y=new gt(3355443);this.setColors(h,f,m,g,y)}setColors(e,t,n,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;Sr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Pr("c",t,e,Sr,0,0,-1),Pr("t",t,e,Sr,0,0,1),Pr("n1",t,e,Sr,-n,-i,-1),Pr("n2",t,e,Sr,n,-i,-1),Pr("n3",t,e,Sr,-n,i,-1),Pr("n4",t,e,Sr,n,i,-1),Pr("f1",t,e,Sr,-n,-i,1),Pr("f2",t,e,Sr,n,-i,1),Pr("f3",t,e,Sr,-n,i,1),Pr("f4",t,e,Sr,n,i,1),Pr("u1",t,e,Sr,n*.7,i*1.1,-1),Pr("u2",t,e,Sr,-n*.7,i*1.1,-1),Pr("u3",t,e,Sr,0,i*2,-1),Pr("cf1",t,e,Sr,-n,0,1),Pr("cf2",t,e,Sr,n,0,1),Pr("cf3",t,e,Sr,0,-i,1),Pr("cf4",t,e,Sr,0,i,1),Pr("cn1",t,e,Sr,-n,0,-1),Pr("cn2",t,e,Sr,n,0,-1),Pr("cn3",t,e,Sr,0,-i,-1),Pr("cn4",t,e,Sr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Pr(r,e,t,n,i,s,o){vv.set(i,s,o).unproject(n);const a=e[r];if(a!==void 0){const c=t.getAttribute("position");for(let h=0,f=a.length;h<f;h++)c.setXYZ(a[h],vv.x,vv.y,vv.z)}}const yv=new ns;class Hj extends ya{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new sn;s.setIndex(new Wn(n,1)),s.setAttribute("position",new Wn(i,3)),super(s,new zi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&yv.setFromObject(this.object),yv.isEmpty())return;const t=yv.min,n=yv.max,i=this.geometry.attributes.position,s=i.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Gj extends ya{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new sn;s.setIndex(new Wn(n,1)),s.setAttribute("position",new Ct(i,3)),super(s,new zi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Wj extends vl{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new sn;o.setAttribute("position",new Ct(s,3)),o.computeBoundingSphere(),super(o,new zi({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new sn;c.setAttribute("position",new Ct(a,3)),c.computeBoundingSphere(),this.add(new qn(c,new xl({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const YA=new q;let _v,Yx;class jj extends bn{constructor(e=new q(0,0,1),t=new q(0,0,0),n=1,i=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",_v===void 0&&(_v=new sn,_v.setAttribute("position",new Ct([0,0,0,0,1,0],3)),Yx=new Nf(0,.5,1,5,1),Yx.translate(0,-.5,0)),this.position.copy(t),this.line=new vl(_v,new zi({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new qn(Yx,new xl({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{YA.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(YA,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Xj extends ya{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new sn;i.setAttribute("position",new Ct(t,3)),i.setAttribute("color",new Ct(n,3));const s=new zi({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new gt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class $j{constructor(){this.type="ShapePath",this.color=new gt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Vm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,o){return this.currentPath.bezierCurveTo(e,t,n,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const A=[];for(let b=0,R=x.length;b<R;b++){const N=x[b],I=new th;I.curves=N.curves,A.push(I)}return A}function n(x,A){const b=A.length;let R=!1;for(let N=b-1,I=0;I<b;N=I++){let O=A[N],V=A[I],k=V.x-O.x,F=V.y-O.y;if(Math.abs(F)>Number.EPSILON){if(F<0&&(O=A[I],k=-k,V=A[N],F=-F),x.y<O.y||x.y>V.y)continue;if(x.y===O.y){if(x.x===O.x)return!0}else{const Q=F*(x.x-O.x)-k*(x.y-O.y);if(Q===0)return!0;if(Q<0)continue;R=!R}}else{if(x.y!==O.y)continue;if(V.x<=x.x&&x.x<=O.x||O.x<=x.x&&x.x<=V.x)return!0}}return R}const i=pa.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,c;const h=[];if(s.length===1)return a=s[0],c=new th,c.curves=a.curves,h.push(c),h;let f=!i(s[0].getPoints());f=e?!f:f;const m=[],g=[];let y=[],_=0,M;g[_]=void 0,y[_]=[];for(let x=0,A=s.length;x<A;x++)a=s[x],M=a.getPoints(),o=i(M),o=e?!o:o,o?(!f&&g[_]&&_++,g[_]={s:new th,p:M},g[_].s.curves=a.curves,f&&_++,y[_]=[]):y[_].push({h:a,p:M[0]});if(!g[0])return t(s);if(g.length>1){let x=!1,A=0;for(let b=0,R=g.length;b<R;b++)m[b]=[];for(let b=0,R=g.length;b<R;b++){const N=y[b];for(let I=0;I<N.length;I++){const O=N[I];let V=!0;for(let k=0;k<g.length;k++)n(O.p,g[k].p)&&(b!==k&&A++,V?(V=!1,m[k].push(O)):x=!0);V&&m[b].push(O)}}A>0&&x===!1&&(y=m)}let E;for(let x=0,A=g.length;x<A;x++){c=g[x].s,h.push(c),E=y[x];for(let b=0,R=E.length;b<R;b++)c.holes.push(E[b].h)}return h}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:sg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=sg);const qj=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:CS,AddEquation:gc,AddOperation:V2,AdditiveAnimationBlendMode:BS,AdditiveBlending:Yw,AgXToneMapping:X2,AlphaFormat:q2,AlwaysCompare:hL,AlwaysDepth:D2,AlwaysStencilFunc:A1,AmbientLight:mE,AnimationAction:pI,AnimationClip:Af,AnimationLoader:QW,AnimationMixer:Tj,AnimationObjectGroup:Ej,AnimationUtils:YW,ArcCurve:OL,ArrayCamera:bL,ArrowHelper:jj,AttachedBindMode:e1,Audio:dI,AudioAnalyser:fj,AudioContext:gE,AudioListener:uj,AudioLoader:aj,AxesHelper:Xj,BackSide:ts,BasicDepthPacking:nL,BasicShadowMap:g2,BatchedMesh:IL,Bone:zm,BooleanKeyframeTrack:ph,Box2:Lj,Box3:ns,Box3Helper:Gj,BoxGeometry:dh,BoxHelper:Hj,BufferAttribute:Wn,BufferGeometry:sn,BufferGeometryLoader:hI,ByteType:RS,Cache:ul,Camera:lg,CameraHelper:Vj,CanvasTexture:_W,CapsuleGeometry:jy,CatmullRomCurve3:NL,CineonToneMapping:W2,CircleGeometry:Xy,ClampToEdgeWrapping:rr,Clock:vE,Color:gt,ColorKeyframeTrack:uE,ColorManagement:Hn,CompressedArrayTexture:vW,CompressedCubeTexture:yW,CompressedTexture:Gy,CompressedTextureLoader:ej,ConeGeometry:$y,ConstantAlphaFactor:L2,ConstantColorFactor:P2,CubeCamera:yL,CubeReflectionMapping:ga,CubeRefractionMapping:Cc,CubeTexture:cg,CubeTextureLoader:iI,CubeUVReflectionMapping:Df,CubicBezierCurve:tE,CubicBezierCurve3:UL,CubicInterpolant:eI,CullFaceBack:qw,CullFaceFront:m2,CullFaceFrontBack:c5,CullFaceNone:p2,Curve:co,CurvePath:BL,CustomBlending:v2,CustomToneMapping:j2,CylinderGeometry:Nf,Cylindrical:Rj,Data3DTexture:WS,DataArrayTexture:Ny,DataTexture:Mc,DataTextureLoader:hE,DataUtils:$u,DecrementStencilOp:x5,DecrementWrapStencilOp:S5,DefaultLoadingManager:rI,DepthFormat:Sc,DepthStencilFormat:ih,DepthTexture:qS,DetachedBindMode:$2,DirectionalLight:pE,DirectionalLightHelper:zj,DiscreteInterpolant:tI,DisplayP3ColorSpace:Oy,DodecahedronGeometry:qy,DoubleSide:Go,DstAlphaFactor:M2,DstColorFactor:b2,DynamicCopyUsage:U5,DynamicDrawUsage:L5,DynamicReadUsage:D5,EdgesGeometry:zL,EllipseCurve:Wy,EqualCompare:aL,EqualDepth:N2,EqualStencilFunc:b5,EquirectangularReflectionMapping:nh,EquirectangularRefractionMapping:Rm,Euler:ca,EventDispatcher:_l,ExtrudeGeometry:Zy,FileLoader:xs,Float16BufferAttribute:SV,Float32BufferAttribute:Ct,Float64BufferAttribute:EV,FloatType:jr,Fog:Vy,FogExp2:zy,FramebufferTexture:gW,FrontSide:gl,Frustum:ug,GLBufferAttribute:Pj,GLSL1:B5,GLSL3:C1,GreaterCompare:lL,GreaterDepth:F2,GreaterEqualCompare:uL,GreaterEqualDepth:U2,GreaterEqualStencilFunc:R5,GreaterStencilFunc:C5,GridHelper:Fj,Group:vc,HalfFloatType:di,HemisphereLight:oI,HemisphereLightHelper:Uj,IcosahedronGeometry:pg,ImageBitmapLoader:oj,ImageLoader:jm,ImageUtils:GS,IncrementStencilOp:_5,IncrementWrapStencilOp:w5,InstancedBufferAttribute:Mf,InstancedBufferGeometry:uI,InstancedInterleavedBuffer:Cj,InstancedMesh:LL,Int16BufferAttribute:xV,Int32BufferAttribute:wV,Int8BufferAttribute:vV,IntType:ky,InterleavedBuffer:Hy,InterleavedBufferAttribute:sh,Interpolant:vg,InterpolateDiscrete:Im,InterpolateLinear:km,InterpolateSmooth:Bv,InvertStencilOp:E5,KeepStencilOp:Fu,KeyframeTrack:$o,LOD:RL,LatheGeometry:fg,Layers:eh,LessCompare:oL,LessDepth:O2,LessEqualCompare:VS,LessEqualDepth:Pm,LessEqualStencilFunc:A5,LessStencilFunc:T5,Light:Dc,LightProbe:cI,Line:vl,Line3:Ij,LineBasicMaterial:zi,LineCurve:nE,LineCurve3:FL,LineDashedMaterial:KL,LineLoop:kL,LineSegments:ya,LinearDisplayP3ColorSpace:ag,LinearEncoding:zS,LinearFilter:Dn,LinearInterpolant:cE,LinearMipMapLinearFilter:t1,LinearMipMapNearestFilter:f5,LinearMipmapLinearFilter:Pc,LinearMipmapNearestFilter:PS,LinearSRGBColorSpace:Hs,LinearToneMapping:H2,LinearTransfer:Om,Loader:Vi,LoaderUtils:uy,LoadingManager:r_,LoopOnce:Q2,LoopPingPong:tL,LoopRepeat:eL,LuminanceAlphaFormat:Z2,LuminanceFormat:Y2,MOUSE:Nu,Material:Bi,MaterialLoader:i_,MathUtils:Wo,Matrix3:pn,Matrix4:bt,MaxEquation:Qw,Mesh:qn,MeshBasicMaterial:xl,MeshDepthMaterial:YS,MeshDistanceMaterial:ZS,MeshLambertMaterial:aE,MeshMatcapMaterial:ZL,MeshNormalMaterial:YL,MeshPhongMaterial:xm,MeshPhysicalMaterial:$L,MeshStandardMaterial:oE,MeshToonMaterial:qL,MinEquation:Jw,MirroredRepeatWrapping:Lm,MixOperation:z2,MultiplyBlending:Kw,MultiplyOperation:og,NearestFilter:Lr,NearestMipMapLinearFilter:d5,NearestMipMapNearestFilter:h5,NearestMipmapLinearFilter:mm,NearestMipmapNearestFilter:sy,NeverCompare:sL,NeverDepth:k2,NeverStencilFunc:M5,NoBlending:ha,NoColorSpace:Fs,NoToneMapping:da,NormalAnimationBlendMode:Dy,NormalBlending:Ju,NotEqualCompare:cL,NotEqualDepth:B2,NotEqualStencilFunc:P5,NumberKeyframeTrack:Tf,Object3D:bn,ObjectLoader:ij,ObjectSpaceNormalMap:iL,OctahedronGeometry:mg,OneFactor:w2,OneMinusConstantAlphaFactor:I2,OneMinusConstantColorFactor:R2,OneMinusDstAlphaFactor:T2,OneMinusDstColorFactor:A2,OneMinusSrcAlphaFactor:iy,OneMinusSrcColorFactor:E2,OrthographicCamera:fa,P3Primaries:Um,PCFShadowMap:Ly,PCFSoftShadowMap:pm,PMREMGenerator:R1,Path:Vm,PerspectiveCamera:Mr,Plane:al,PlaneGeometry:fh,PlaneHelper:Wj,PointLight:cy,PointLightHelper:Oj,Points:DL,PointsMaterial:QS,PolarGridHelper:Bj,PolyhedronGeometry:kc,PositionalAudio:dj,PropertyBinding:En,PropertyMixer:fI,QuadraticBezierCurve:rE,QuadraticBezierCurve3:iE,Quaternion:Xr,QuaternionKeyframeTrack:mh,QuaternionLinearInterpolant:nI,RED_GREEN_RGTC2_Format:T1,RED_RGTC1_Format:J2,REVISION:sg,RGBADepthPacking:rL,RGBAFormat:Wr,RGBAIntegerFormat:US,RGBA_ASTC_10x10_Format:_1,RGBA_ASTC_10x5_Format:g1,RGBA_ASTC_10x6_Format:v1,RGBA_ASTC_10x8_Format:y1,RGBA_ASTC_12x10_Format:x1,RGBA_ASTC_12x12_Format:w1,RGBA_ASTC_4x4_Format:l1,RGBA_ASTC_5x4_Format:c1,RGBA_ASTC_5x5_Format:u1,RGBA_ASTC_6x5_Format:h1,RGBA_ASTC_6x6_Format:d1,RGBA_ASTC_8x5_Format:f1,RGBA_ASTC_8x6_Format:p1,RGBA_ASTC_8x8_Format:m1,RGBA_BPTC_Format:Fv,RGBA_ETC2_EAC_Format:a1,RGBA_PVRTC_2BPPV1_Format:s1,RGBA_PVRTC_4BPPV1_Format:i1,RGBA_S3TC_DXT1_Format:Ov,RGBA_S3TC_DXT3_Format:Nv,RGBA_S3TC_DXT5_Format:Uv,RGB_BPTC_SIGNED_Format:S1,RGB_BPTC_UNSIGNED_Format:E1,RGB_ETC1_Format:FS,RGB_ETC2_Format:o1,RGB_PVRTC_2BPPV1_Format:r1,RGB_PVRTC_4BPPV1_Format:n1,RGB_S3TC_DXT1_Format:Dv,RGFormat:K2,RGIntegerFormat:NS,RawShaderMaterial:XL,Ray:hh,Raycaster:wE,Rec709Primaries:Nm,RectAreaLight:aI,RedFormat:DS,RedIntegerFormat:OS,ReinhardToneMapping:G2,RenderTarget:pL,RepeatWrapping:rh,ReplaceStencilOp:y5,ReverseSubtractEquation:_2,RingGeometry:Ky,SIGNED_RED_GREEN_RGTC2_Format:b1,SIGNED_RED_RGTC1_Format:M1,SRGBColorSpace:Hr,SRGBTransfer:tr,Scene:hg,ShaderChunk:fn,ShaderLib:Ho,ShaderMaterial:Ws,ShadowMaterial:jL,Shape:th,ShapeGeometry:Jy,ShapePath:$j,ShapeUtils:pa,ShortType:LS,Skeleton:dg,SkeletonHelper:Dj,SkinnedMesh:JS,Source:Xu,Sphere:Fi,SphereGeometry:gg,Spherical:U1,SphericalHarmonics3:lI,SplineCurve:sE,SpotLight:fE,SpotLightHelper:kj,Sprite:PL,SpriteMaterial:KS,SrcAlphaFactor:ry,SrcAlphaSaturateFactor:C2,SrcColorFactor:S2,StaticCopyUsage:N5,StaticDrawUsage:Fm,StaticReadUsage:k5,StereoCamera:lj,StreamCopyUsage:F5,StreamDrawUsage:I5,StreamReadUsage:O5,StringKeyframeTrack:gh,SubtractEquation:y2,SubtractiveBlending:Zw,TOUCH:Uu,TangentSpaceNormalMap:Ic,TetrahedronGeometry:Qy,Texture:Gn,TextureLoader:sI,TorusGeometry:e_,TorusKnotGeometry:t_,Triangle:ys,TriangleFanDrawMode:g5,TriangleStripDrawMode:m5,TrianglesDrawMode:p5,TubeGeometry:n_,TwoPassDoubleSide:u5,UVMapping:Ac,Uint16BufferAttribute:Uy,Uint32BufferAttribute:jS,Uint8BufferAttribute:yV,Uint8ClampedBufferAttribute:_V,Uniform:xE,UniformsGroup:Aj,UniformsLib:ht,UniformsUtils:vL,UnsignedByteType:Bs,UnsignedInt248Type:wc,UnsignedIntType:la,UnsignedShort4444Type:IS,UnsignedShort5551Type:kS,UnsignedShortType:Iy,VSMShadowMap:zo,Vector2:Be,Vector3:q,Vector4:Ln,VectorKeyframeTrack:bf,VideoTexture:mW,WebGL1Renderer:AL,WebGL3DRenderTarget:sV,WebGLArrayRenderTarget:iV,WebGLCoordinateSystem:jo,WebGLCubeRenderTarget:XS,WebGLMultipleRenderTargets:oV,WebGLRenderTarget:Gs,WebGLRenderer:By,WebGLUtils:TL,WebGPUCoordinateSystem:wf,WireframeGeometry:WL,WrapAroundEnding:Dm,ZeroCurvatureEnding:Wu,ZeroFactor:x2,ZeroSlopeEnding:ju,ZeroStencilOp:v5,_SRGBAFormat:oy,createCanvasElement:fL,sRGBEncoding:Ec},Symbol.toStringTag,{value:"Module"}));var Zx={exports:{}},ac={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZA;function Yj(){return ZA||(ZA=1,ac.ConcurrentRoot=1,ac.ContinuousEventPriority=4,ac.DefaultEventPriority=16,ac.DiscreteEventPriority=1,ac.IdleEventPriority=536870912,ac.LegacyRoot=0),ac}var KA;function Zj(){return KA||(KA=1,Zx.exports=Yj()),Zx.exports}var uf=Zj();function Kj(r){let e;const t=new Set,n=(h,f)=>{const m=typeof h=="function"?h(e):h;if(m!==e){const g=e;e=f?m:Object.assign({},e,m),t.forEach(y=>y(e,g))}},i=()=>e,s=(h,f=i,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let g=f(e);function y(){const _=f(e);if(!m(g,_)){const M=g;h(g=_,M)}}return t.add(y),()=>t.delete(y)},c={setState:n,getState:i,subscribe:(h,f,m)=>f||m?s(h,f,m):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=r(n,i,c),c}const Jj=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),JA=Jj?j.useEffect:j.useLayoutEffect;function gI(r){const e=typeof r=="function"?Kj(r):r,t=(n=e.getState,i=Object.is)=>{const[,s]=j.useReducer(E=>E+1,0),o=e.getState(),a=j.useRef(o),c=j.useRef(n),h=j.useRef(i),f=j.useRef(!1),m=j.useRef();m.current===void 0&&(m.current=n(o));let g,y=!1;(a.current!==o||c.current!==n||h.current!==i||f.current)&&(g=n(o),y=!i(m.current,g)),JA(()=>{y&&(m.current=g),a.current=o,c.current=n,h.current=i,f.current=!1});const _=j.useRef(o);JA(()=>{const E=()=>{try{const A=e.getState(),b=c.current(A);h.current(m.current,b)||(a.current=A,m.current=b,s())}catch{f.current=!0,s()}},x=e.subscribe(E);return e.getState()!==_.current&&E(),x},[]);const M=y?g:m.current;return j.useDebugValue(M),M};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}const Qj=r=>typeof r=="object"&&typeof r.then=="function",Yu=[];function vI(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e)return!1;const n=r.length;if(e.length!==n)return!1;for(let i=0;i<n;i++)if(!t(r[i],e[i]))return!1;return!0}function yI(r,e=null,t=!1,n={}){e===null&&(e=[r]);for(const s of Yu)if(vI(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:n.equal,remove:()=>{const s=Yu.indexOf(i);s!==-1&&Yu.splice(s,1)},promise:(Qj(r)?r:r(...e)).then(s=>{i.response=s,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(s=>i.error=s)};if(Yu.push(i),!t)throw i.promise}const e9=(r,e,t)=>yI(r,e,!1,t),t9=(r,e,t)=>void yI(r,e,!0,t),n9=r=>{if(r===void 0||r.length===0)Yu.splice(0,Yu.length);else{const e=Yu.find(t=>vI(r,t.keys,t.equal));e&&e.remove()}};var Kx={exports:{}},Jx={exports:{}},Qx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QA;function r9(){return QA||(QA=1,function(r){function e(Z,se){var ee=Z.length;Z.push(se);e:for(;0<ee;){var H=ee-1>>>1,ne=Z[H];if(0<i(ne,se))Z[H]=se,Z[ee]=ne,ee=H;else break e}}function t(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var se=Z[0],ee=Z.pop();if(ee!==se){Z[0]=ee;e:for(var H=0,ne=Z.length,ce=ne>>>1;H<ce;){var xe=2*(H+1)-1,ke=Z[xe],Re=xe+1,ze=Z[Re];if(0>i(ke,ee))Re<ne&&0>i(ze,ke)?(Z[H]=ze,Z[Re]=ee,H=Re):(Z[H]=ke,Z[xe]=ee,H=xe);else if(Re<ne&&0>i(ze,ee))Z[H]=ze,Z[Re]=ee,H=Re;else break e}}return se}function i(Z,se){var ee=Z.sortIndex-se.sortIndex;return ee!==0?ee:Z.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var c=[],h=[],f=1,m=null,g=3,y=!1,_=!1,M=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Z){for(var se=t(h);se!==null;){if(se.callback===null)n(h);else if(se.startTime<=Z)n(h),se.sortIndex=se.expirationTime,e(c,se);else break;se=t(h)}}function R(Z){if(M=!1,b(Z),!_)if(t(c)!==null)_=!0,ue(N);else{var se=t(h);se!==null&&Ee(R,se.startTime-Z)}}function N(Z,se){_=!1,M&&(M=!1,x(V),V=-1),y=!0;var ee=g;try{for(b(se),m=t(c);m!==null&&(!(m.expirationTime>se)||Z&&!Q());){var H=m.callback;if(typeof H=="function"){m.callback=null,g=m.priorityLevel;var ne=H(m.expirationTime<=se);se=r.unstable_now(),typeof ne=="function"?m.callback=ne:m===t(c)&&n(c),b(se)}else n(c);m=t(c)}if(m!==null)var ce=!0;else{var xe=t(h);xe!==null&&Ee(R,xe.startTime-se),ce=!1}return ce}finally{m=null,g=ee,y=!1}}var I=!1,O=null,V=-1,k=5,F=-1;function Q(){return!(r.unstable_now()-F<k)}function le(){if(O!==null){var Z=r.unstable_now();F=Z;var se=!0;try{se=O(!0,Z)}finally{se?_e():(I=!1,O=null)}}else I=!1}var _e;if(typeof A=="function")_e=function(){A(le)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,me=Y.port2;Y.port1.onmessage=le,_e=function(){me.postMessage(null)}}else _e=function(){E(le,0)};function ue(Z){O=Z,I||(I=!0,_e())}function Ee(Z,se){V=E(function(){Z(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_continueExecution=function(){_||y||(_=!0,ue(N))},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return g},r.unstable_getFirstCallbackNode=function(){return t(c)},r.unstable_next=function(Z){switch(g){case 1:case 2:case 3:var se=3;break;default:se=g}var ee=g;g=se;try{return Z()}finally{g=ee}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Z,se){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ee=g;g=Z;try{return se()}finally{g=ee}},r.unstable_scheduleCallback=function(Z,se,ee){var H=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?H+ee:H):ee=H,Z){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=ee+ne,Z={id:f++,callback:se,priorityLevel:Z,startTime:ee,expirationTime:ne,sortIndex:-1},ee>H?(Z.sortIndex=ee,e(h,Z),t(c)===null&&Z===t(h)&&(M?(x(V),V=-1):M=!0,Ee(R,ee-H))):(Z.sortIndex=ne,e(c,Z),_||y||(_=!0,ue(N))),Z},r.unstable_shouldYield=Q,r.unstable_wrapCallback=function(Z){var se=g;return function(){var ee=g;g=se;try{return Z.apply(this,arguments)}finally{g=ee}}}}(Qx)),Qx}var eC;function _I(){return eC||(eC=1,Jx.exports=r9()),Jx.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew,tC;function i9(){return tC||(tC=1,ew=function(e){var t={},n=fy(),i=_I(),s=Object.assign;function o(d){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+d,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),h=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),_=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),N=Symbol.iterator;function I(d){return d===null||typeof d!="object"?null:(d=N&&d[N]||d["@@iterator"],typeof d=="function"?d:null)}function O(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case f:return"Fragment";case h:return"Portal";case g:return"Profiler";case m:return"StrictMode";case E:return"Suspense";case x:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case _:return(d.displayName||"Context")+".Consumer";case y:return(d._context.displayName||"Context")+".Provider";case M:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case A:return p=d.displayName||null,p!==null?p:O(d.type)||"Memo";case b:p=d._payload,d=d._init;try{return O(d(p))}catch{}}return null}function V(d){var p=d.type;switch(d.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=p.render,d=d.displayName||d.name||"",p.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O(p);case 8:return p===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function k(d){var p=d,w=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(w=p.return),d=p.return;while(d)}return p.tag===3?w:null}function F(d){if(k(d)!==d)throw Error(o(188))}function Q(d){var p=d.alternate;if(!p){if(p=k(d),p===null)throw Error(o(188));return p!==d?null:d}for(var w=d,T=p;;){var P=w.return;if(P===null)break;var D=P.alternate;if(D===null){if(T=P.return,T!==null){w=T;continue}break}if(P.child===D.child){for(D=P.child;D;){if(D===w)return F(P),d;if(D===T)return F(P),p;D=D.sibling}throw Error(o(188))}if(w.return!==T.return)w=P,T=D;else{for(var te=!1,ve=P.child;ve;){if(ve===w){te=!0,w=P,T=D;break}if(ve===T){te=!0,T=P,w=D;break}ve=ve.sibling}if(!te){for(ve=D.child;ve;){if(ve===w){te=!0,w=D,T=P;break}if(ve===T){te=!0,T=D,w=P;break}ve=ve.sibling}if(!te)throw Error(o(189))}}if(w.alternate!==T)throw Error(o(190))}if(w.tag!==3)throw Error(o(188));return w.stateNode.current===w?d:p}function le(d){return d=Q(d),d!==null?_e(d):null}function _e(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var p=_e(d);if(p!==null)return p;d=d.sibling}return null}function Y(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var p=Y(d);if(p!==null)return p}d=d.sibling}return null}var me=Array.isArray,ue=e.getPublicInstance,Ee=e.getRootHostContext,Z=e.getChildHostContext,se=e.prepareForCommit,ee=e.resetAfterCommit,H=e.createInstance,ne=e.appendInitialChild,ce=e.finalizeInitialChildren,xe=e.prepareUpdate,ke=e.shouldSetTextContent,Re=e.createTextInstance,ze=e.scheduleTimeout,Ke=e.cancelTimeout,st=e.noTimeout,it=e.isPrimaryRenderer,ft=e.supportsMutation,oe=e.supportsPersistence,Xe=e.supportsHydration,Ue=e.getInstanceFromNode,Je=e.preparePortalMount,Fe=e.getCurrentEventPriority,Rt=e.detachDeletedInstance,dt=e.supportsMicrotasks,X=e.scheduleMicrotask,G=e.supportsTestSelectors,we=e.findFiberRoot,We=e.getBoundingRect,He=e.getTextContent,Ve=e.isHiddenSubtree,Mt=e.matchAccessibilityRole,at=e.setFocusIfFocusable,vt=e.setupIntersectionObserver,It=e.appendChild,Vt=e.appendChildToContainer,Ge=e.commitTextUpdate,tn=e.commitMount,en=e.commitUpdate,Ft=e.insertBefore,yt=e.insertInContainerBefore,xt=e.removeChild,he=e.removeChildFromContainer,Ne=e.resetTextContent,tt=e.hideInstance,pt=e.hideTextInstance,Se=e.unhideInstance,de=e.unhideTextInstance,et=e.clearContainer,ct=e.cloneInstance,Ut=e.createContainerChildSet,At=e.appendChildToContainerChildSet,on=e.finalizeContainerChildren,gn=e.replaceContainerChildren,Pn=e.cloneHiddenInstance,Fn=e.cloneHiddenTextInstance,hn=e.canHydrateInstance,fr=e.canHydrateTextInstance,kr=e.canHydrateSuspenseInstance,js=e.isSuspenseInstancePending,Es=e.isSuspenseInstanceFallback,pi=e.registerSuspenseInstanceRetry,$r=e.getNextHydratableSibling,Kt=e.getFirstHydratableChild,_a=e.getFirstHydratableChildWithinContainer,wl=e.getFirstHydratableChildWithinSuspenseInstance,B=e.hydrateInstance,W=e.hydrateTextInstance,fe=e.hydrateSuspenseInstance,U=e.getNextHydratableInstanceAfterSuspenseInstance,$=e.commitHydratedContainer,J=e.commitHydratedSuspenseInstance,ae=e.clearSuspenseBoundary,ie=e.clearSuspenseBoundaryFromContainer,Ce=e.shouldDeleteUnhydratedTailInstances,Le=e.didNotMatchHydratedContainerTextInstance,De=e.didNotMatchHydratedTextInstance,be;function wt(d){if(be===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);be=p&&p[1]||""}return`
`+be+d}var je=!1;function Ye(d,p){if(!d||je)return"";je=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(nt){var T=nt}Reflect.construct(d,[],p)}else{try{p.call()}catch(nt){T=nt}d.call(p.prototype)}else{try{throw Error()}catch(nt){T=nt}d()}}catch(nt){if(nt&&T&&typeof nt.stack=="string"){for(var P=nt.stack.split(`
`),D=T.stack.split(`
`),te=P.length-1,ve=D.length-1;1<=te&&0<=ve&&P[te]!==D[ve];)ve--;for(;1<=te&&0<=ve;te--,ve--)if(P[te]!==D[ve]){if(te!==1||ve!==1)do if(te--,ve--,0>ve||P[te]!==D[ve]){var Oe=`
`+P[te].replace(" at new "," at ");return d.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",d.displayName)),Oe}while(1<=te&&0<=ve);break}}}finally{je=!1,Error.prepareStackTrace=w}return(d=d?d.displayName||d.name:"")?wt(d):""}var St=Object.prototype.hasOwnProperty,Nt=[],Bt=-1;function $t(d){return{current:d}}function ut(d){0>Bt||(d.current=Nt[Bt],Nt[Bt]=null,Bt--)}function lt(d,p){Bt++,Nt[Bt]=d.current,d.current=p}var Xt={},Ht=$t(Xt),qt=$t(!1),kn=Xt;function Yn(d,p){var w=d.type.contextTypes;if(!w)return Xt;var T=d.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===p)return T.__reactInternalMemoizedMaskedChildContext;var P={},D;for(D in w)P[D]=p[D];return T&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=p,d.__reactInternalMemoizedMaskedChildContext=P),P}function Bn(d){return d=d.childContextTypes,d!=null}function vn(){ut(qt),ut(Ht)}function an(d,p,w){if(Ht.current!==Xt)throw Error(o(168));lt(Ht,p),lt(qt,w)}function sr(d,p,w){var T=d.stateNode;if(p=p.childContextTypes,typeof T.getChildContext!="function")return w;T=T.getChildContext();for(var P in T)if(!(P in p))throw Error(o(108,V(d)||"Unknown",P));return s({},w,T)}function nn(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Xt,kn=Ht.current,lt(Ht,d),lt(qt,qt.current),!0}function yn(d,p,w){var T=d.stateNode;if(!T)throw Error(o(169));w?(d=sr(d,p,kn),T.__reactInternalMemoizedMergedChildContext=d,ut(qt),ut(Ht),lt(Ht,d)):ut(qt),lt(qt,w)}var zn=Math.clz32?Math.clz32:Xs,Mi=Math.log,Tr=Math.LN2;function Xs(d){return d>>>=0,d===0?32:31-(Mi(d)/Tr|0)|0}var Sl=64,An=4194304;function El(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Oc(d,p){var w=d.pendingLanes;if(w===0)return 0;var T=0,P=d.suspendedLanes,D=d.pingedLanes,te=w&268435455;if(te!==0){var ve=te&~P;ve!==0?T=El(ve):(D&=te,D!==0&&(T=El(D)))}else te=w&~P,te!==0?T=El(te):D!==0&&(T=El(D));if(T===0)return 0;if(p!==0&&p!==T&&(p&P)===0&&(P=T&-T,D=p&-p,P>=D||P===16&&(D&4194240)!==0))return p;if((T&4)!==0&&(T|=w&16),p=d.entangledLanes,p!==0)for(d=d.entanglements,p&=T;0<p;)w=31-zn(p),P=1<<w,T|=d[w],p&=~P;return T}function Uf(d,p){switch(d){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wg(d,p){for(var w=d.suspendedLanes,T=d.pingedLanes,P=d.expirationTimes,D=d.pendingLanes;0<D;){var te=31-zn(D),ve=1<<te,Oe=P[te];Oe===-1?((ve&w)===0||(ve&T)!==0)&&(P[te]=Uf(ve,p)):Oe<=p&&(d.expiredLanes|=ve),D&=~ve}}function vh(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function yh(d){for(var p=[],w=0;31>w;w++)p.push(d);return p}function xa(d,p,w){d.pendingLanes|=p,p!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,p=31-zn(p),d[p]=w}function _h(d,p){var w=d.pendingLanes&~p;d.pendingLanes=p,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=p,d.mutableReadLanes&=p,d.entangledLanes&=p,p=d.entanglements;var T=d.eventTimes;for(d=d.expirationTimes;0<w;){var P=31-zn(w),D=1<<P;p[P]=0,T[P]=-1,d[P]=-1,w&=~D}}function $s(d,p){var w=d.entangledLanes|=p;for(d=d.entanglements;w;){var T=31-zn(w),P=1<<T;P&p|d[T]&p&&(d[T]|=p),w&=~P}}var dn=0;function uo(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var wa=i.unstable_scheduleCallback,Ml=i.unstable_cancelCallback,qo=i.unstable_shouldYield,o_=i.unstable_requestPaint,br=i.unstable_now,Sa=i.unstable_ImmediatePriority,a_=i.unstable_UserBlockingPriority,xh=i.unstable_NormalPriority,wh=i.unstable_IdlePriority,Nc=null,qs=null;function Uc(d){if(qs&&typeof qs.onCommitFiberRoot=="function")try{qs.onCommitFiberRoot(Nc,d,void 0,(d.current.flags&128)===128)}catch{}}function Fc(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var mi=typeof Object.is=="function"?Object.is:Fc,rs=null,Sh=!1,Ff=!1;function Eh(d){rs===null?rs=[d]:rs.push(d)}function Mh(d){Sh=!0,Eh(d)}function is(){if(!Ff&&rs!==null){Ff=!0;var d=0,p=dn;try{var w=rs;for(dn=1;d<w.length;d++){var T=w[d];do T=T(!0);while(T!==null)}rs=null,Sh=!1}catch(P){throw rs!==null&&(rs=rs.slice(d+1)),wa(Sa,is),P}finally{dn=p,Ff=!1}}return null}var Sg=a.ReactCurrentBatchConfig;function Ms(d,p){if(mi(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var w=Object.keys(d),T=Object.keys(p);if(w.length!==T.length)return!1;for(T=0;T<w.length;T++){var P=w[T];if(!St.call(p,P)||!mi(d[P],p[P]))return!1}return!0}function Bf(d){switch(d.tag){case 5:return wt(d.type);case 16:return wt("Lazy");case 13:return wt("Suspense");case 19:return wt("SuspenseList");case 0:case 2:case 15:return d=Ye(d.type,!1),d;case 11:return d=Ye(d.type.render,!1),d;case 1:return d=Ye(d.type,!0),d;default:return""}}function Ti(d,p){if(d&&d.defaultProps){p=s({},p),d=d.defaultProps;for(var w in d)p[w]===void 0&&(p[w]=d[w]);return p}return p}var Bc=$t(null),Ea=null,ho=null,Th=null;function gi(){Th=ho=Ea=null}function Ma(d,p,w){it?(lt(Bc,p._currentValue),p._currentValue=w):(lt(Bc,p._currentValue2),p._currentValue2=w)}function zc(d){var p=Bc.current;ut(Bc),it?d._currentValue=p:d._currentValue2=p}function Ta(d,p,w){for(;d!==null;){var T=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,T!==null&&(T.childLanes|=p)):T!==null&&(T.childLanes&p)!==p&&(T.childLanes|=p),d===w)break;d=d.return}}function Tl(d,p){Ea=d,Th=ho=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&p)!==0&&(Ur=!0),d.firstContext=null)}function bi(d){var p=it?d._currentValue:d._currentValue2;if(Th!==d)if(d={context:d,memoizedValue:p,next:null},ho===null){if(Ea===null)throw Error(o(308));ho=d,Ea.dependencies={lanes:0,firstContext:d}}else ho=ho.next=d;return p}var ss=null,os=!1;function bl(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zf(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function fo(d,p){return{eventTime:d,lane:p,tag:0,payload:null,callback:null,next:null}}function Yo(d,p){var w=d.updateQueue;w!==null&&(w=w.shared,mr!==null&&(d.mode&1)!==0&&(ln&2)===0?(d=w.interleaved,d===null?(p.next=p,ss===null?ss=[w]:ss.push(w)):(p.next=d.next,d.next=p),w.interleaved=p):(d=w.pending,d===null?p.next=p:(p.next=d.next,d.next=p),w.pending=p))}function bh(d,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var T=p.lanes;T&=d.pendingLanes,w|=T,p.lanes=w,$s(d,w)}}function Ah(d,p){var w=d.updateQueue,T=d.alternate;if(T!==null&&(T=T.updateQueue,w===T)){var P=null,D=null;if(w=w.firstBaseUpdate,w!==null){do{var te={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};D===null?P=D=te:D=D.next=te,w=w.next}while(w!==null);D===null?P=D=p:D=D.next=p}else P=D=p;w={baseState:T.baseState,firstBaseUpdate:P,lastBaseUpdate:D,shared:T.shared,effects:T.effects},d.updateQueue=w;return}d=w.lastBaseUpdate,d===null?w.firstBaseUpdate=p:d.next=p,w.lastBaseUpdate=p}function Ch(d,p,w,T){var P=d.updateQueue;os=!1;var D=P.firstBaseUpdate,te=P.lastBaseUpdate,ve=P.shared.pending;if(ve!==null){P.shared.pending=null;var Oe=ve,nt=Oe.next;Oe.next=null,te===null?D=nt:te.next=nt,te=Oe;var Tt=d.alternate;Tt!==null&&(Tt=Tt.updateQueue,ve=Tt.lastBaseUpdate,ve!==te&&(ve===null?Tt.firstBaseUpdate=nt:ve.next=nt,Tt.lastBaseUpdate=Oe))}if(D!==null){var Jt=P.baseState;te=0,Tt=nt=Oe=null,ve=D;do{var zt=ve.lane,cn=ve.eventTime;if((T&zt)===zt){Tt!==null&&(Tt=Tt.next={eventTime:cn,lane:0,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null});e:{var _t=d,Qr=ve;switch(zt=p,cn=w,Qr.tag){case 1:if(_t=Qr.payload,typeof _t=="function"){Jt=_t.call(cn,Jt,zt);break e}Jt=_t;break e;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=Qr.payload,zt=typeof _t=="function"?_t.call(cn,Jt,zt):_t,zt==null)break e;Jt=s({},Jt,zt);break e;case 2:os=!0}}ve.callback!==null&&ve.lane!==0&&(d.flags|=64,zt=P.effects,zt===null?P.effects=[ve]:zt.push(ve))}else cn={eventTime:cn,lane:zt,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},Tt===null?(nt=Tt=cn,Oe=Jt):Tt=Tt.next=cn,te|=zt;if(ve=ve.next,ve===null){if(ve=P.shared.pending,ve===null)break;zt=ve,ve=zt.next,zt.next=null,P.lastBaseUpdate=zt,P.shared.pending=null}}while(!0);if(Tt===null&&(Oe=Jt),P.baseState=Oe,P.firstBaseUpdate=nt,P.lastBaseUpdate=Tt,p=P.shared.interleaved,p!==null){P=p;do te|=P.lane,P=P.next;while(P!==p)}else D===null&&(P.shared.lanes=0);Js|=te,d.lanes=te,d.memoizedState=Jt}}function Eg(d,p,w){if(d=p.effects,p.effects=null,d!==null)for(p=0;p<d.length;p++){var T=d[p],P=T.callback;if(P!==null){if(T.callback=null,T=w,typeof P!="function")throw Error(o(191,P));P.call(T)}}}var Mg=new n.Component().refs;function Vf(d,p,w,T){p=d.memoizedState,w=w(T,p),w=w==null?p:s({},p,w),d.memoizedState=w,d.lanes===0&&(d.updateQueue.baseState=w)}var Ph={isMounted:function(d){return(d=d._reactInternals)?k(d)===d:!1},enqueueSetState:function(d,p,w){d=d._reactInternals;var T=Cn(),P=Ls(d),D=fo(T,P);D.payload=p,w!=null&&(D.callback=w),Yo(d,D),p=si(d,P,T),p!==null&&bh(p,d,P)},enqueueReplaceState:function(d,p,w){d=d._reactInternals;var T=Cn(),P=Ls(d),D=fo(T,P);D.tag=1,D.payload=p,w!=null&&(D.callback=w),Yo(d,D),p=si(d,P,T),p!==null&&bh(p,d,P)},enqueueForceUpdate:function(d,p){d=d._reactInternals;var w=Cn(),T=Ls(d),P=fo(w,T);P.tag=2,p!=null&&(P.callback=p),Yo(d,P),p=si(d,T,w),p!==null&&bh(p,d,T)}};function Hf(d,p,w,T,P,D,te){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(T,D,te):p.prototype&&p.prototype.isPureReactComponent?!Ms(w,T)||!Ms(P,D):!0}function Tg(d,p,w){var T=!1,P=Xt,D=p.contextType;return typeof D=="object"&&D!==null?D=bi(D):(P=Bn(p)?kn:Ht.current,T=p.contextTypes,D=(T=T!=null)?Yn(d,P):Xt),p=new p(w,D),d.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Ph,d.stateNode=p,p._reactInternals=d,T&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=P,d.__reactInternalMemoizedMaskedChildContext=D),p}function bg(d,p,w,T){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,T),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,T),p.state!==d&&Ph.enqueueReplaceState(p,p.state,null)}function Gf(d,p,w,T){var P=d.stateNode;P.props=w,P.state=d.memoizedState,P.refs=Mg,bl(d);var D=p.contextType;typeof D=="object"&&D!==null?P.context=bi(D):(D=Bn(p)?kn:Ht.current,P.context=Yn(d,D)),P.state=d.memoizedState,D=p.getDerivedStateFromProps,typeof D=="function"&&(Vf(d,p,D,w),P.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(p=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),p!==P.state&&Ph.enqueueReplaceState(P,P.state,null),Ch(d,w,P,T),P.state=d.memoizedState),typeof P.componentDidMount=="function"&&(d.flags|=4194308)}var Al=[],Zo=0,Rh=null,Lh=0,as=[],Hi=0,ba=null,po=1,mo="";function Aa(d,p){Al[Zo++]=Lh,Al[Zo++]=Rh,Rh=d,Lh=p}function Ag(d,p,w){as[Hi++]=po,as[Hi++]=mo,as[Hi++]=ba,ba=d;var T=po;d=mo;var P=32-zn(T)-1;T&=~(1<<P),w+=1;var D=32-zn(p)+P;if(30<D){var te=P-P%5;D=(T&(1<<te)-1).toString(32),T>>=te,P-=te,po=1<<32-zn(p)+P|w<<P|T,mo=D+d}else po=1<<D|w<<P|T,mo=d}function Wf(d){d.return!==null&&(Aa(d,1),Ag(d,1,0))}function jf(d){for(;d===Rh;)Rh=Al[--Zo],Al[Zo]=null,Lh=Al[--Zo],Al[Zo]=null;for(;d===ba;)ba=as[--Hi],as[Hi]=null,mo=as[--Hi],as[Hi]=null,po=as[--Hi],as[Hi]=null}var vi=null,qr=null,Jn=!1,Cl=!1,ls=null;function Xf(d,p){var w=Yi(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=d,p=d.deletions,p===null?(d.deletions=[w],d.flags|=16):p.push(w)}function $f(d,p){switch(d.tag){case 5:return p=hn(p,d.type,d.pendingProps),p!==null?(d.stateNode=p,vi=d,qr=Kt(p),!0):!1;case 6:return p=fr(p,d.pendingProps),p!==null?(d.stateNode=p,vi=d,qr=null,!0):!1;case 13:if(p=kr(p),p!==null){var w=ba!==null?{id:po,overflow:mo}:null;return d.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=Yi(18,null,null,0),w.stateNode=p,w.return=d,d.child=w,vi=d,qr=null,!0}return!1;default:return!1}}function Ih(d){return(d.mode&1)!==0&&(d.flags&128)===0}function Ko(d){if(Jn){var p=qr;if(p){var w=p;if(!$f(d,p)){if(Ih(d))throw Error(o(418));p=$r(w);var T=vi;p&&$f(d,p)?Xf(T,w):(d.flags=d.flags&-4097|2,Jn=!1,vi=d)}}else{if(Ih(d))throw Error(o(418));d.flags=d.flags&-4097|2,Jn=!1,vi=d}}}function Cg(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;vi=d}function Vc(d){if(!Xe||d!==vi)return!1;if(!Jn)return Cg(d),Jn=!0,!1;if(d.tag!==3&&(d.tag!==5||Ce(d.type)&&!ke(d.type,d.memoizedProps))){var p=qr;if(p){if(Ih(d)){for(d=qr;d;)d=$r(d);throw Error(o(418))}for(;p;)Xf(d,p),p=$r(p)}}if(Cg(d),d.tag===13){if(!Xe)throw Error(o(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));qr=U(d)}else qr=vi?$r(d.stateNode):null;return!0}function Pl(){Xe&&(qr=vi=null,Cl=Jn=!1)}function kh(d){ls===null?ls=[d]:ls.push(d)}function Rl(d,p,w){if(d=w.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(o(309));var T=w.stateNode}if(!T)throw Error(o(147,d));var P=T,D=""+d;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===D?p.ref:(p=function(te){var ve=P.refs;ve===Mg&&(ve=P.refs={}),te===null?delete ve[D]:ve[D]=te},p._stringRef=D,p)}if(typeof d!="string")throw Error(o(284));if(!w._owner)throw Error(o(290,d))}return d}function Jo(d,p){throw d=Object.prototype.toString.call(p),Error(o(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d))}function Ll(d){var p=d._init;return p(d._payload)}function Pg(d){function p(Ae,ye){if(d){var Ie=Ae.deletions;Ie===null?(Ae.deletions=[ye],Ae.flags|=16):Ie.push(ye)}}function w(Ae,ye){if(!d)return null;for(;ye!==null;)p(Ae,ye),ye=ye.sibling;return null}function T(Ae,ye){for(Ae=new Map;ye!==null;)ye.key!==null?Ae.set(ye.key,ye):Ae.set(ye.index,ye),ye=ye.sibling;return Ae}function P(Ae,ye){return Ae=Po(Ae,ye),Ae.index=0,Ae.sibling=null,Ae}function D(Ae,ye,Ie){return Ae.index=Ie,d?(Ie=Ae.alternate,Ie!==null?(Ie=Ie.index,Ie<ye?(Ae.flags|=2,ye):Ie):(Ae.flags|=2,ye)):(Ae.flags|=1048576,ye)}function te(Ae){return d&&Ae.alternate===null&&(Ae.flags|=2),Ae}function ve(Ae,ye,Ie,mt){return ye===null||ye.tag!==6?(ye=od(Ie,Ae.mode,mt),ye.return=Ae,ye):(ye=P(ye,Ie),ye.return=Ae,ye)}function Oe(Ae,ye,Ie,mt){var Dt=Ie.type;return Dt===f?Tt(Ae,ye,Ie.props.children,mt,Ie.key):ye!==null&&(ye.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===b&&Ll(Dt)===ye.type)?(mt=P(ye,Ie.props),mt.ref=Rl(Ae,ye,Ie),mt.return=Ae,mt):(mt=sd(Ie.type,Ie.key,Ie.props,null,Ae.mode,mt),mt.ref=Rl(Ae,ye,Ie),mt.return=Ae,mt)}function nt(Ae,ye,Ie,mt){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ie.containerInfo||ye.stateNode.implementation!==Ie.implementation?(ye=ad(Ie,Ae.mode,mt),ye.return=Ae,ye):(ye=P(ye,Ie.children||[]),ye.return=Ae,ye)}function Tt(Ae,ye,Ie,mt,Dt){return ye===null||ye.tag!==7?(ye=Ya(Ie,Ae.mode,mt,Dt),ye.return=Ae,ye):(ye=P(ye,Ie),ye.return=Ae,ye)}function Jt(Ae,ye,Ie){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ye=od(""+ye,Ae.mode,Ie),ye.return=Ae,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case c:return Ie=sd(ye.type,ye.key,ye.props,null,Ae.mode,Ie),Ie.ref=Rl(Ae,null,ye),Ie.return=Ae,Ie;case h:return ye=ad(ye,Ae.mode,Ie),ye.return=Ae,ye;case b:var mt=ye._init;return Jt(Ae,mt(ye._payload),Ie)}if(me(ye)||I(ye))return ye=Ya(ye,Ae.mode,Ie,null),ye.return=Ae,ye;Jo(Ae,ye)}return null}function zt(Ae,ye,Ie,mt){var Dt=ye!==null?ye.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Dt!==null?null:ve(Ae,ye,""+Ie,mt);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case c:return Ie.key===Dt?Oe(Ae,ye,Ie,mt):null;case h:return Ie.key===Dt?nt(Ae,ye,Ie,mt):null;case b:return Dt=Ie._init,zt(Ae,ye,Dt(Ie._payload),mt)}if(me(Ie)||I(Ie))return Dt!==null?null:Tt(Ae,ye,Ie,mt,null);Jo(Ae,Ie)}return null}function cn(Ae,ye,Ie,mt,Dt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return Ae=Ae.get(Ie)||null,ve(ye,Ae,""+mt,Dt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case c:return Ae=Ae.get(mt.key===null?Ie:mt.key)||null,Oe(ye,Ae,mt,Dt);case h:return Ae=Ae.get(mt.key===null?Ie:mt.key)||null,nt(ye,Ae,mt,Dt);case b:var rn=mt._init;return cn(Ae,ye,Ie,rn(mt._payload),Dt)}if(me(mt)||I(mt))return Ae=Ae.get(Ie)||null,Tt(ye,Ae,mt,Dt,null);Jo(ye,mt)}return null}function _t(Ae,ye,Ie,mt){for(var Dt=null,rn=null,Qt=ye,Tn=ye=0,xr=null;Qt!==null&&Tn<Ie.length;Tn++){Qt.index>Tn?(xr=Qt,Qt=null):xr=Qt.sibling;var Mn=zt(Ae,Qt,Ie[Tn],mt);if(Mn===null){Qt===null&&(Qt=xr);break}d&&Qt&&Mn.alternate===null&&p(Ae,Qt),ye=D(Mn,ye,Tn),rn===null?Dt=Mn:rn.sibling=Mn,rn=Mn,Qt=xr}if(Tn===Ie.length)return w(Ae,Qt),Jn&&Aa(Ae,Tn),Dt;if(Qt===null){for(;Tn<Ie.length;Tn++)Qt=Jt(Ae,Ie[Tn],mt),Qt!==null&&(ye=D(Qt,ye,Tn),rn===null?Dt=Qt:rn.sibling=Qt,rn=Qt);return Jn&&Aa(Ae,Tn),Dt}for(Qt=T(Ae,Qt);Tn<Ie.length;Tn++)xr=cn(Qt,Ae,Tn,Ie[Tn],mt),xr!==null&&(d&&xr.alternate!==null&&Qt.delete(xr.key===null?Tn:xr.key),ye=D(xr,ye,Tn),rn===null?Dt=xr:rn.sibling=xr,rn=xr);return d&&Qt.forEach(function(Ro){return p(Ae,Ro)}),Jn&&Aa(Ae,Tn),Dt}function Qr(Ae,ye,Ie,mt){var Dt=I(Ie);if(typeof Dt!="function")throw Error(o(150));if(Ie=Dt.call(Ie),Ie==null)throw Error(o(151));for(var rn=Dt=null,Qt=ye,Tn=ye=0,xr=null,Mn=Ie.next();Qt!==null&&!Mn.done;Tn++,Mn=Ie.next()){Qt.index>Tn?(xr=Qt,Qt=null):xr=Qt.sibling;var Ro=zt(Ae,Qt,Mn.value,mt);if(Ro===null){Qt===null&&(Qt=xr);break}d&&Qt&&Ro.alternate===null&&p(Ae,Qt),ye=D(Ro,ye,Tn),rn===null?Dt=Ro:rn.sibling=Ro,rn=Ro,Qt=xr}if(Mn.done)return w(Ae,Qt),Jn&&Aa(Ae,Tn),Dt;if(Qt===null){for(;!Mn.done;Tn++,Mn=Ie.next())Mn=Jt(Ae,Mn.value,mt),Mn!==null&&(ye=D(Mn,ye,Tn),rn===null?Dt=Mn:rn.sibling=Mn,rn=Mn);return Jn&&Aa(Ae,Tn),Dt}for(Qt=T(Ae,Qt);!Mn.done;Tn++,Mn=Ie.next())Mn=cn(Qt,Ae,Tn,Mn.value,mt),Mn!==null&&(d&&Mn.alternate!==null&&Qt.delete(Mn.key===null?Tn:Mn.key),ye=D(Mn,ye,Tn),rn===null?Dt=Mn:rn.sibling=Mn,rn=Mn);return d&&Qt.forEach(function(Mp){return p(Ae,Mp)}),Jn&&Aa(Ae,Tn),Dt}function Zi(Ae,ye,Ie,mt){if(typeof Ie=="object"&&Ie!==null&&Ie.type===f&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case c:e:{for(var Dt=Ie.key,rn=ye;rn!==null;){if(rn.key===Dt){if(Dt=Ie.type,Dt===f){if(rn.tag===7){w(Ae,rn.sibling),ye=P(rn,Ie.props.children),ye.return=Ae,Ae=ye;break e}}else if(rn.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===b&&Ll(Dt)===rn.type){w(Ae,rn.sibling),ye=P(rn,Ie.props),ye.ref=Rl(Ae,rn,Ie),ye.return=Ae,Ae=ye;break e}w(Ae,rn);break}else p(Ae,rn);rn=rn.sibling}Ie.type===f?(ye=Ya(Ie.props.children,Ae.mode,mt,Ie.key),ye.return=Ae,Ae=ye):(mt=sd(Ie.type,Ie.key,Ie.props,null,Ae.mode,mt),mt.ref=Rl(Ae,ye,Ie),mt.return=Ae,Ae=mt)}return te(Ae);case h:e:{for(rn=Ie.key;ye!==null;){if(ye.key===rn)if(ye.tag===4&&ye.stateNode.containerInfo===Ie.containerInfo&&ye.stateNode.implementation===Ie.implementation){w(Ae,ye.sibling),ye=P(ye,Ie.children||[]),ye.return=Ae,Ae=ye;break e}else{w(Ae,ye);break}else p(Ae,ye);ye=ye.sibling}ye=ad(Ie,Ae.mode,mt),ye.return=Ae,Ae=ye}return te(Ae);case b:return rn=Ie._init,Zi(Ae,ye,rn(Ie._payload),mt)}if(me(Ie))return _t(Ae,ye,Ie,mt);if(I(Ie))return Qr(Ae,ye,Ie,mt);Jo(Ae,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"?(Ie=""+Ie,ye!==null&&ye.tag===6?(w(Ae,ye.sibling),ye=P(ye,Ie),ye.return=Ae,Ae=ye):(w(Ae,ye),ye=od(Ie,Ae.mode,mt),ye.return=Ae,Ae=ye),te(Ae)):w(Ae,ye)}return Zi}var go=Pg(!0),Rg=Pg(!1),Il={},Ai=$t(Il),Ca=$t(Il),Pa=$t(Il);function Ts(d){if(d===Il)throw Error(o(174));return d}function Dh(d,p){lt(Pa,p),lt(Ca,d),lt(Ai,Il),d=Ee(p),ut(Ai),lt(Ai,d)}function kl(){ut(Ai),ut(Ca),ut(Pa)}function Lg(d){var p=Ts(Pa.current),w=Ts(Ai.current);p=Z(w,d.type,p),w!==p&&(lt(Ca,d),lt(Ai,p))}function qf(d){Ca.current===d&&(ut(Ai),ut(Ca))}var or=$t(0);function Oh(d){for(var p=d;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||js(w)||Es(w)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Gi=[];function Ra(){for(var d=0;d<Gi.length;d++){var p=Gi[d];it?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}Gi.length=0}var Hc=a.ReactCurrentDispatcher,Wi=a.ReactCurrentBatchConfig,La=0,ar=null,Dr=null,Or=null,Nh=!1,Ys=!1,Ia=0,Gc=0;function Nr(){throw Error(o(321))}function Uh(d,p){if(p===null)return!1;for(var w=0;w<p.length&&w<d.length;w++)if(!mi(d[w],p[w]))return!1;return!0}function Dl(d,p,w,T,P,D){if(La=D,ar=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Hc.current=d===null||d.memoizedState===null?ep:tp,d=w(T,P),Ys){D=0;do{if(Ys=!1,Ia=0,25<=D)throw Error(o(301));D+=1,Or=Dr=null,p.updateQueue=null,Hc.current=np,d=w(T,P)}while(Ys)}if(Hc.current=Fl,p=Dr!==null&&Dr.next!==null,La=0,Or=Dr=ar=null,Nh=!1,p)throw Error(o(300));return d}function Qo(){var d=Ia!==0;return Ia=0,d}function bs(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?ar.memoizedState=Or=d:Or=Or.next=d,Or}function As(){if(Dr===null){var d=ar.alternate;d=d!==null?d.memoizedState:null}else d=Dr.next;var p=Or===null?ar.memoizedState:Or.next;if(p!==null)Or=p,Dr=d;else{if(d===null)throw Error(o(310));Dr=d,d={memoizedState:Dr.memoizedState,baseState:Dr.baseState,baseQueue:Dr.baseQueue,queue:Dr.queue,next:null},Or===null?ar.memoizedState=Or=d:Or=Or.next=d}return Or}function Zs(d,p){return typeof p=="function"?p(d):p}function Wc(d){var p=As(),w=p.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=d;var T=Dr,P=T.baseQueue,D=w.pending;if(D!==null){if(P!==null){var te=P.next;P.next=D.next,D.next=te}T.baseQueue=P=D,w.pending=null}if(P!==null){D=P.next,T=T.baseState;var ve=te=null,Oe=null,nt=D;do{var Tt=nt.lane;if((La&Tt)===Tt)Oe!==null&&(Oe=Oe.next={lane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),T=nt.hasEagerState?nt.eagerState:d(T,nt.action);else{var Jt={lane:Tt,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null};Oe===null?(ve=Oe=Jt,te=T):Oe=Oe.next=Jt,ar.lanes|=Tt,Js|=Tt}nt=nt.next}while(nt!==null&&nt!==D);Oe===null?te=T:Oe.next=ve,mi(T,p.memoizedState)||(Ur=!0),p.memoizedState=T,p.baseState=te,p.baseQueue=Oe,w.lastRenderedState=T}if(d=w.interleaved,d!==null){P=d;do D=P.lane,ar.lanes|=D,Js|=D,P=P.next;while(P!==d)}else P===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function jc(d){var p=As(),w=p.queue;if(w===null)throw Error(o(311));w.lastRenderedReducer=d;var T=w.dispatch,P=w.pending,D=p.memoizedState;if(P!==null){w.pending=null;var te=P=P.next;do D=d(D,te.action),te=te.next;while(te!==P);mi(D,p.memoizedState)||(Ur=!0),p.memoizedState=D,p.baseQueue===null&&(p.baseState=D),w.lastRenderedState=D}return[D,T]}function Yf(){}function Zf(d,p){var w=ar,T=As(),P=p(),D=!mi(T.memoizedState,P);if(D&&(T.memoizedState=P,Ur=!0),T=T.queue,Ol(vo.bind(null,w,T,d),[d]),T.getSnapshot!==p||D||Or!==null&&Or.memoizedState.tag&1){if(w.flags|=2048,$c(9,Jf.bind(null,w,T,P,p),void 0,null),mr===null)throw Error(o(349));(La&30)!==0||Kf(w,p,P)}return P}function Kf(d,p,w){d.flags|=16384,d={getSnapshot:p,value:w},p=ar.updateQueue,p===null?(p={lastEffect:null,stores:null},ar.updateQueue=p,p.stores=[d]):(w=p.stores,w===null?p.stores=[d]:w.push(d))}function Jf(d,p,w,T){p.value=w,p.getSnapshot=T,Fh(p)&&si(d,1,-1)}function vo(d,p,w){return w(function(){Fh(p)&&si(d,1,-1)})}function Fh(d){var p=d.getSnapshot;d=d.value;try{var w=p();return!mi(d,w)}catch{return!0}}function Xc(d){var p=bs();return typeof d=="function"&&(d=d()),p.memoizedState=p.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zs,lastRenderedState:d},p.queue=d,d=d.dispatch=l_.bind(null,ar,d),[p.memoizedState,d]}function $c(d,p,w,T){return d={tag:d,create:p,destroy:w,deps:T,next:null},p=ar.updateQueue,p===null?(p={lastEffect:null,stores:null},ar.updateQueue=p,p.lastEffect=d.next=d):(w=p.lastEffect,w===null?p.lastEffect=d.next=d:(T=w.next,w.next=d,d.next=T,p.lastEffect=d)),d}function Ig(){return As().memoizedState}function ea(d,p,w,T){var P=bs();ar.flags|=d,P.memoizedState=$c(1|p,w,void 0,T===void 0?null:T)}function Bh(d,p,w,T){var P=As();T=T===void 0?null:T;var D=void 0;if(Dr!==null){var te=Dr.memoizedState;if(D=te.destroy,T!==null&&Uh(T,te.deps)){P.memoizedState=$c(p,w,D,T);return}}ar.flags|=d,P.memoizedState=$c(1|p,w,D,T)}function zh(d,p){return ea(8390656,8,d,p)}function Ol(d,p){return Bh(2048,8,d,p)}function jn(d,p){return Bh(4,2,d,p)}function Vh(d,p){return Bh(4,4,d,p)}function qc(d,p){if(typeof p=="function")return d=d(),p(d),function(){p(null)};if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function Nl(d,p,w){return w=w!=null?w.concat([d]):null,Bh(4,4,qc.bind(null,p,d),w)}function Hh(){}function Gh(d,p){var w=As();p=p===void 0?null:p;var T=w.memoizedState;return T!==null&&p!==null&&Uh(p,T[1])?T[0]:(w.memoizedState=[d,p],d)}function Ul(d,p){var w=As();p=p===void 0?null:p;var T=w.memoizedState;return T!==null&&p!==null&&Uh(p,T[1])?T[0]:(d=d(),w.memoizedState=[d,p],d)}function Wh(d,p){var w=dn;dn=w!==0&&4>w?w:4,d(!0);var T=Wi.transition;Wi.transition={};try{d(!1),p()}finally{dn=w,Wi.transition=T}}function ka(){return As().memoizedState}function kg(d,p,w){var T=Ls(d);w={lane:T,action:w,hasEagerState:!1,eagerState:null,next:null},Dg(d)?Qf(p,w):(Yc(d,p,w),w=Cn(),d=si(d,T,w),d!==null&&Zc(d,p,T))}function l_(d,p,w){var T=Ls(d),P={lane:T,action:w,hasEagerState:!1,eagerState:null,next:null};if(Dg(d))Qf(p,P);else{Yc(d,p,P);var D=d.alternate;if(d.lanes===0&&(D===null||D.lanes===0)&&(D=p.lastRenderedReducer,D!==null))try{var te=p.lastRenderedState,ve=D(te,w);if(P.hasEagerState=!0,P.eagerState=ve,mi(ve,te))return}catch{}finally{}w=Cn(),d=si(d,T,w),d!==null&&Zc(d,p,T)}}function Dg(d){var p=d.alternate;return d===ar||p!==null&&p===ar}function Qf(d,p){Ys=Nh=!0;var w=d.pending;w===null?p.next=p:(p.next=w.next,w.next=p),d.pending=p}function Yc(d,p,w){mr!==null&&(d.mode&1)!==0&&(ln&2)===0?(d=p.interleaved,d===null?(w.next=w,ss===null?ss=[p]:ss.push(p)):(w.next=d.next,d.next=w),p.interleaved=w):(d=p.pending,d===null?w.next=w:(w.next=d.next,d.next=w),p.pending=w)}function Zc(d,p,w){if((w&4194240)!==0){var T=p.lanes;T&=d.pendingLanes,w|=T,p.lanes=w,$s(d,w)}}var Fl={readContext:bi,useCallback:Nr,useContext:Nr,useEffect:Nr,useImperativeHandle:Nr,useInsertionEffect:Nr,useLayoutEffect:Nr,useMemo:Nr,useReducer:Nr,useRef:Nr,useState:Nr,useDebugValue:Nr,useDeferredValue:Nr,useTransition:Nr,useMutableSource:Nr,useSyncExternalStore:Nr,useId:Nr,unstable_isNewReconciler:!1},ep={readContext:bi,useCallback:function(d,p){return bs().memoizedState=[d,p===void 0?null:p],d},useContext:bi,useEffect:zh,useImperativeHandle:function(d,p,w){return w=w!=null?w.concat([d]):null,ea(4194308,4,qc.bind(null,p,d),w)},useLayoutEffect:function(d,p){return ea(4194308,4,d,p)},useInsertionEffect:function(d,p){return ea(4,2,d,p)},useMemo:function(d,p){var w=bs();return p=p===void 0?null:p,d=d(),w.memoizedState=[d,p],d},useReducer:function(d,p,w){var T=bs();return p=w!==void 0?w(p):p,T.memoizedState=T.baseState=p,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:p},T.queue=d,d=d.dispatch=kg.bind(null,ar,d),[T.memoizedState,d]},useRef:function(d){var p=bs();return d={current:d},p.memoizedState=d},useState:Xc,useDebugValue:Hh,useDeferredValue:function(d){var p=Xc(d),w=p[0],T=p[1];return zh(function(){var P=Wi.transition;Wi.transition={};try{T(d)}finally{Wi.transition=P}},[d]),w},useTransition:function(){var d=Xc(!1),p=d[0];return d=Wh.bind(null,d[1]),bs().memoizedState=d,[p,d]},useMutableSource:function(){},useSyncExternalStore:function(d,p,w){var T=ar,P=bs();if(Jn){if(w===void 0)throw Error(o(407));w=w()}else{if(w=p(),mr===null)throw Error(o(349));(La&30)!==0||Kf(T,p,w)}P.memoizedState=w;var D={value:w,getSnapshot:p};return P.queue=D,zh(vo.bind(null,T,D,d),[d]),T.flags|=2048,$c(9,Jf.bind(null,T,D,w,p),void 0,null),w},useId:function(){var d=bs(),p=mr.identifierPrefix;if(Jn){var w=mo,T=po;w=(T&~(1<<32-zn(T)-1)).toString(32)+w,p=":"+p+"R"+w,w=Ia++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=Gc++,p=":"+p+"r"+w.toString(32)+":";return d.memoizedState=p},unstable_isNewReconciler:!1},tp={readContext:bi,useCallback:Gh,useContext:bi,useEffect:Ol,useImperativeHandle:Nl,useInsertionEffect:jn,useLayoutEffect:Vh,useMemo:Ul,useReducer:Wc,useRef:Ig,useState:function(){return Wc(Zs)},useDebugValue:Hh,useDeferredValue:function(d){var p=Wc(Zs),w=p[0],T=p[1];return Ol(function(){var P=Wi.transition;Wi.transition={};try{T(d)}finally{Wi.transition=P}},[d]),w},useTransition:function(){var d=Wc(Zs)[0],p=As().memoizedState;return[d,p]},useMutableSource:Yf,useSyncExternalStore:Zf,useId:ka,unstable_isNewReconciler:!1},np={readContext:bi,useCallback:Gh,useContext:bi,useEffect:Ol,useImperativeHandle:Nl,useInsertionEffect:jn,useLayoutEffect:Vh,useMemo:Ul,useReducer:jc,useRef:Ig,useState:function(){return jc(Zs)},useDebugValue:Hh,useDeferredValue:function(d){var p=jc(Zs),w=p[0],T=p[1];return Ol(function(){var P=Wi.transition;Wi.transition={};try{T(d)}finally{Wi.transition=P}},[d]),w},useTransition:function(){var d=jc(Zs)[0],p=As().memoizedState;return[d,p]},useMutableSource:Yf,useSyncExternalStore:Zf,useId:ka,unstable_isNewReconciler:!1};function rp(d,p){try{var w="",T=p;do w+=Bf(T),T=T.return;while(T);var P=w}catch(D){P=`
Error generating stack: `+D.message+`
`+D.stack}return{value:d,source:p,stack:P}}function jh(d,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var c_=typeof WeakMap=="function"?WeakMap:Map;function Og(d,p,w){w=fo(-1,w),w.tag=3,w.payload={element:null};var T=p.value;return w.callback=function(){Wl||(Wl=!0,Kn=T),jh(d,p)},w}function Xh(d,p,w){w=fo(-1,w),w.tag=3;var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var P=p.value;w.payload=function(){return T(P)},w.callback=function(){jh(d,p)}}var D=d.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(w.callback=function(){jh(d,p),typeof T!="function"&&(Rs===null?Rs=new Set([this]):Rs.add(this));var te=p.stack;this.componentDidCatch(p.value,{componentStack:te!==null?te:""})}),w}function yo(d,p,w){var T=d.pingCache;if(T===null){T=d.pingCache=new c_;var P=new Set;T.set(p,P)}else P=T.get(p),P===void 0&&(P=new Set,T.set(p,P));P.has(w)||(P.add(w),d=wp.bind(null,d,p,w),p.then(d,d))}function ip(d){do{var p;if((p=d.tag===13)&&(p=d.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return d;d=d.return}while(d!==null);return null}function Da(d,p,w,T,P){return(d.mode&1)===0?(d===p?d.flags|=65536:(d.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=fo(-1,1),p.tag=2,Yo(w,p))),w.lanes|=1),d):(d.flags|=65536,d.lanes=P,d)}function Ar(d){d.flags|=4}function Bl(d,p){if(d!==null&&d.child===p.child)return!0;if((p.flags&16)!==0)return!1;for(d=p.child;d!==null;){if((d.flags&12854)!==0||(d.subtreeFlags&12854)!==0)return!1;d=d.sibling}return!0}var ji,Oa,$h,qh;if(ft)ji=function(d,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)ne(d,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Oa=function(){},$h=function(d,p,w,T,P){if(d=d.memoizedProps,d!==T){var D=p.stateNode,te=Ts(Ai.current);w=xe(D,w,d,T,P,te),(p.updateQueue=w)&&Ar(p)}},qh=function(d,p,w,T){w!==T&&Ar(p)};else if(oe){ji=function(d,p,w,T){for(var P=p.child;P!==null;){if(P.tag===5){var D=P.stateNode;w&&T&&(D=Pn(D,P.type,P.memoizedProps,P)),ne(d,D)}else if(P.tag===6)D=P.stateNode,w&&T&&(D=Fn(D,P.memoizedProps,P)),ne(d,D);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)D=P.child,D!==null&&(D.return=P),ji(d,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var ta=function(d,p,w,T){for(var P=p.child;P!==null;){if(P.tag===5){var D=P.stateNode;w&&T&&(D=Pn(D,P.type,P.memoizedProps,P)),At(d,D)}else if(P.tag===6)D=P.stateNode,w&&T&&(D=Fn(D,P.memoizedProps,P)),At(d,D);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)D=P.child,D!==null&&(D.return=P),ta(d,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};Oa=function(d,p){var w=p.stateNode;if(!Bl(d,p)){d=w.containerInfo;var T=Ut(d);ta(T,p,!1,!1),w.pendingChildren=T,Ar(p),on(d,T)}},$h=function(d,p,w,T,P){var D=d.stateNode,te=d.memoizedProps;if((d=Bl(d,p))&&te===T)p.stateNode=D;else{var ve=p.stateNode,Oe=Ts(Ai.current),nt=null;te!==T&&(nt=xe(ve,w,te,T,P,Oe)),d&&nt===null?p.stateNode=D:(D=ct(D,nt,w,te,T,p,d,ve),ce(D,w,T,P,Oe)&&Ar(p),p.stateNode=D,d?Ar(p):ji(D,p,!1,!1))}},qh=function(d,p,w,T){w!==T?(d=Ts(Pa.current),w=Ts(Ai.current),p.stateNode=Re(T,d,w,p),Ar(p)):p.stateNode=d.stateNode}}else Oa=function(){},$h=function(){},qh=function(){};function _o(d,p){if(!Jn)switch(d.tailMode){case"hidden":p=d.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?d.tail=null:w.sibling=null;break;case"collapsed":w=d.tail;for(var T=null;w!==null;)w.alternate!==null&&(T=w),w=w.sibling;T===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:T.sibling=null}}function pr(d){var p=d.alternate!==null&&d.alternate.child===d.child,w=0,T=0;if(p)for(var P=d.child;P!==null;)w|=P.lanes|P.childLanes,T|=P.subtreeFlags&14680064,T|=P.flags&14680064,P.return=d,P=P.sibling;else for(P=d.child;P!==null;)w|=P.lanes|P.childLanes,T|=P.subtreeFlags,T|=P.flags,P.return=d,P=P.sibling;return d.subtreeFlags|=T,d.childLanes=w,p}function Yh(d,p,w){var T=p.pendingProps;switch(jf(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(p),null;case 1:return Bn(p.type)&&vn(),pr(p),null;case 3:return T=p.stateNode,kl(),ut(qt),ut(Ht),Ra(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(d===null||d.child===null)&&(Vc(p)?Ar(p):d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,ls!==null&&(cu(ls),ls=null))),Oa(d,p),pr(p),null;case 5:qf(p),w=Ts(Pa.current);var P=p.type;if(d!==null&&p.stateNode!=null)$h(d,p,P,T,w),d.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!T){if(p.stateNode===null)throw Error(o(166));return pr(p),null}if(d=Ts(Ai.current),Vc(p)){if(!Xe)throw Error(o(175));d=B(p.stateNode,p.type,p.memoizedProps,w,d,p,!Cl),p.updateQueue=d,d!==null&&Ar(p)}else{var D=H(P,T,w,d,p);ji(D,p,!1,!1),p.stateNode=D,ce(D,P,T,w,d)&&Ar(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return pr(p),null;case 6:if(d&&p.stateNode!=null)qh(d,p,d.memoizedProps,T);else{if(typeof T!="string"&&p.stateNode===null)throw Error(o(166));if(d=Ts(Pa.current),w=Ts(Ai.current),Vc(p)){if(!Xe)throw Error(o(176));if(d=p.stateNode,T=p.memoizedProps,(w=W(d,T,p,!Cl))&&(P=vi,P!==null))switch(D=(P.mode&1)!==0,P.tag){case 3:Le(P.stateNode.containerInfo,d,T,D);break;case 5:De(P.type,P.memoizedProps,P.stateNode,d,T,D)}w&&Ar(p)}else p.stateNode=Re(T,d,w,p)}return pr(p),null;case 13:if(ut(or),T=p.memoizedState,Jn&&qr!==null&&(p.mode&1)!==0&&(p.flags&128)===0){for(d=qr;d;)d=$r(d);return Pl(),p.flags|=98560,p}if(T!==null&&T.dehydrated!==null){if(T=Vc(p),d===null){if(!T)throw Error(o(318));if(!Xe)throw Error(o(344));if(d=p.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));fe(d,p)}else Pl(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;return pr(p),null}return ls!==null&&(cu(ls),ls=null),(p.flags&128)!==0?(p.lanes=w,p):(T=T!==null,w=!1,d===null?Vc(p):w=d.memoizedState!==null,T&&!w&&(p.child.flags|=8192,(p.mode&1)!==0&&(d===null||(or.current&1)!==0?hr===0&&(hr=3):nd())),p.updateQueue!==null&&(p.flags|=4),pr(p),null);case 4:return kl(),Oa(d,p),d===null&&Je(p.stateNode.containerInfo),pr(p),null;case 10:return zc(p.type._context),pr(p),null;case 17:return Bn(p.type)&&vn(),pr(p),null;case 19:if(ut(or),P=p.memoizedState,P===null)return pr(p),null;if(T=(p.flags&128)!==0,D=P.rendering,D===null)if(T)_o(P,!1);else{if(hr!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(D=Oh(d),D!==null){for(p.flags|=128,_o(P,!1),d=D.updateQueue,d!==null&&(p.updateQueue=d,p.flags|=4),p.subtreeFlags=0,d=w,T=p.child;T!==null;)w=T,P=d,w.flags&=14680066,D=w.alternate,D===null?(w.childLanes=0,w.lanes=P,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=D.childLanes,w.lanes=D.lanes,w.child=D.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=D.memoizedProps,w.memoizedState=D.memoizedState,w.updateQueue=D.updateQueue,w.type=D.type,P=D.dependencies,w.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),T=T.sibling;return lt(or,or.current&1|2),p.child}d=d.sibling}P.tail!==null&&br()>ia&&(p.flags|=128,T=!0,_o(P,!1),p.lanes=4194304)}else{if(!T)if(d=Oh(D),d!==null){if(p.flags|=128,T=!0,d=d.updateQueue,d!==null&&(p.updateQueue=d,p.flags|=4),_o(P,!0),P.tail===null&&P.tailMode==="hidden"&&!D.alternate&&!Jn)return pr(p),null}else 2*br()-P.renderingStartTime>ia&&w!==1073741824&&(p.flags|=128,T=!0,_o(P,!1),p.lanes=4194304);P.isBackwards?(D.sibling=p.child,p.child=D):(d=P.last,d!==null?d.sibling=D:p.child=D,P.last=D)}return P.tail!==null?(p=P.tail,P.rendering=p,P.tail=p.sibling,P.renderingStartTime=br(),p.sibling=null,d=or.current,lt(or,T?d&1|2:d&1),p):(pr(p),null);case 22:case 23:return uu(),T=p.memoizedState!==null,d!==null&&d.memoizedState!==null!==T&&(p.flags|=8192),T&&(p.mode&1)!==0?(ii&1073741824)!==0&&(pr(p),ft&&p.subtreeFlags&6&&(p.flags|=8192)):pr(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var sp=a.ReactCurrentOwner,Ur=!1;function ur(d,p,w,T){p.child=d===null?Rg(p,null,w,T):go(p,d.child,w,T)}function Xn(d,p,w,T,P){w=w.render;var D=p.ref;return Tl(p,P),T=Dl(d,p,w,T,D,P),w=Qo(),d!==null&&!Ur?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~P,Ci(d,p,P)):(Jn&&w&&Wf(p),p.flags|=1,ur(d,p,T,P),p.child)}function Vn(d,p,w,T,P){if(d===null){var D=w.type;return typeof D=="function"&&!id(D)&&D.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=D,xo(d,p,D,T,P)):(d=sd(w.type,null,T,p,p.mode,P),d.ref=p.ref,d.return=p,p.child=d)}if(D=d.child,(d.lanes&P)===0){var te=D.memoizedProps;if(w=w.compare,w=w!==null?w:Ms,w(te,T)&&d.ref===p.ref)return Ci(d,p,P)}return p.flags|=1,d=Po(D,T),d.ref=p.ref,d.return=p,p.child=d}function xo(d,p,w,T,P){if(d!==null&&Ms(d.memoizedProps,T)&&d.ref===p.ref)if(Ur=!1,(d.lanes&P)!==0)(d.flags&131072)!==0&&(Ur=!0);else return p.lanes=d.lanes,Ci(d,p,P);return wo(d,p,w,T,P)}function Yr(d,p,w){var T=p.pendingProps,P=T.children,D=d!==null?d.memoizedState:null;if(T.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null},lt(Wa,ii),ii|=w;else if((w&1073741824)!==0)p.memoizedState={baseLanes:0,cachePool:null},T=D!==null?D.baseLanes:w,lt(Wa,ii),ii|=T;else return d=D!==null?D.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:d,cachePool:null},p.updateQueue=null,lt(Wa,ii),ii|=d,null;else D!==null?(T=D.baseLanes|w,p.memoizedState=null):T=w,lt(Wa,ii),ii|=T;return ur(d,p,P,w),p.child}function yi(d,p){var w=p.ref;(d===null&&w!==null||d!==null&&d.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function wo(d,p,w,T,P){var D=Bn(w)?kn:Ht.current;return D=Yn(p,D),Tl(p,P),w=Dl(d,p,w,T,D,P),T=Qo(),d!==null&&!Ur?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~P,Ci(d,p,P)):(Jn&&T&&Wf(p),p.flags|=1,ur(d,p,w,P),p.child)}function Na(d,p,w,T,P){if(Bn(w)){var D=!0;nn(p)}else D=!1;if(Tl(p,P),p.stateNode===null)d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),Tg(p,w,T),Gf(p,w,T,P),T=!0;else if(d===null){var te=p.stateNode,ve=p.memoizedProps;te.props=ve;var Oe=te.context,nt=w.contextType;typeof nt=="object"&&nt!==null?nt=bi(nt):(nt=Bn(w)?kn:Ht.current,nt=Yn(p,nt));var Tt=w.getDerivedStateFromProps,Jt=typeof Tt=="function"||typeof te.getSnapshotBeforeUpdate=="function";Jt||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(ve!==T||Oe!==nt)&&bg(p,te,T,nt),os=!1;var zt=p.memoizedState;te.state=zt,Ch(p,T,te,P),Oe=p.memoizedState,ve!==T||zt!==Oe||qt.current||os?(typeof Tt=="function"&&(Vf(p,w,Tt,T),Oe=p.memoizedState),(ve=os||Hf(p,w,ve,T,zt,Oe,nt))?(Jt||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount()),typeof te.componentDidMount=="function"&&(p.flags|=4194308)):(typeof te.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=T,p.memoizedState=Oe),te.props=T,te.state=Oe,te.context=nt,T=ve):(typeof te.componentDidMount=="function"&&(p.flags|=4194308),T=!1)}else{te=p.stateNode,zf(d,p),ve=p.memoizedProps,nt=p.type===p.elementType?ve:Ti(p.type,ve),te.props=nt,Jt=p.pendingProps,zt=te.context,Oe=w.contextType,typeof Oe=="object"&&Oe!==null?Oe=bi(Oe):(Oe=Bn(w)?kn:Ht.current,Oe=Yn(p,Oe));var cn=w.getDerivedStateFromProps;(Tt=typeof cn=="function"||typeof te.getSnapshotBeforeUpdate=="function")||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(ve!==Jt||zt!==Oe)&&bg(p,te,T,Oe),os=!1,zt=p.memoizedState,te.state=zt,Ch(p,T,te,P);var _t=p.memoizedState;ve!==Jt||zt!==_t||qt.current||os?(typeof cn=="function"&&(Vf(p,w,cn,T),_t=p.memoizedState),(nt=os||Hf(p,w,nt,T,zt,_t,Oe)||!1)?(Tt||typeof te.UNSAFE_componentWillUpdate!="function"&&typeof te.componentWillUpdate!="function"||(typeof te.componentWillUpdate=="function"&&te.componentWillUpdate(T,_t,Oe),typeof te.UNSAFE_componentWillUpdate=="function"&&te.UNSAFE_componentWillUpdate(T,_t,Oe)),typeof te.componentDidUpdate=="function"&&(p.flags|=4),typeof te.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof te.componentDidUpdate!="function"||ve===d.memoizedProps&&zt===d.memoizedState||(p.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||ve===d.memoizedProps&&zt===d.memoizedState||(p.flags|=1024),p.memoizedProps=T,p.memoizedState=_t),te.props=T,te.state=_t,te.context=Oe,T=nt):(typeof te.componentDidUpdate!="function"||ve===d.memoizedProps&&zt===d.memoizedState||(p.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||ve===d.memoizedProps&&zt===d.memoizedState||(p.flags|=1024),T=!1)}return ri(d,p,w,T,D,P)}function ri(d,p,w,T,P,D){yi(d,p);var te=(p.flags&128)!==0;if(!T&&!te)return P&&yn(p,w,!1),Ci(d,p,D);T=p.stateNode,sp.current=p;var ve=te&&typeof w.getDerivedStateFromError!="function"?null:T.render();return p.flags|=1,d!==null&&te?(p.child=go(p,d.child,null,D),p.child=go(p,null,ve,D)):ur(d,p,ve,D),p.memoizedState=T.state,P&&yn(p,w,!0),p.child}function Kc(d){var p=d.stateNode;p.pendingContext?an(d,p.pendingContext,p.pendingContext!==p.context):p.context&&an(d,p.context,!1),Dh(d,p.containerInfo)}function op(d,p,w,T,P){return Pl(),kh(P),p.flags|=256,ur(d,p,w,T),p.child}var Jc={dehydrated:null,treeContext:null,retryLane:0};function Ua(d){return{baseLanes:d,cachePool:null}}function ap(d,p,w){var T=p.pendingProps,P=or.current,D=!1,te=(p.flags&128)!==0,ve;if((ve=te)||(ve=d!==null&&d.memoizedState===null?!1:(P&2)!==0),ve?(D=!0,p.flags&=-129):(d===null||d.memoizedState!==null)&&(P|=1),lt(or,P&1),d===null)return Ko(p),d=p.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((p.mode&1)===0?p.lanes=1:Es(d)?p.lanes=8:p.lanes=1073741824,null):(P=T.children,d=T.fallback,D?(T=p.mode,D=p.child,P={mode:"hidden",children:P},(T&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=P):D=fu(P,T,0,null),d=Ya(d,T,w,null),D.return=p,d.return=p,D.sibling=d,p.child=D,p.child.memoizedState=Ua(w),p.memoizedState=Jc,d):Cs(p,P));if(P=d.memoizedState,P!==null){if(ve=P.dehydrated,ve!==null){if(te)return p.flags&256?(p.flags&=-257,eu(d,p,w,Error(o(422)))):p.memoizedState!==null?(p.child=d.child,p.flags|=128,null):(D=T.fallback,P=p.mode,T=fu({mode:"visible",children:T.children},P,0,null),D=Ya(D,P,w,null),D.flags|=2,T.return=p,D.return=p,T.sibling=D,p.child=T,(p.mode&1)!==0&&go(p,d.child,null,w),p.child.memoizedState=Ua(w),p.memoizedState=Jc,D);if((p.mode&1)===0)p=eu(d,p,w,null);else if(Es(ve))p=eu(d,p,w,Error(o(419)));else if(T=(w&d.childLanes)!==0,Ur||T){if(T=mr,T!==null){switch(w&-w){case 4:D=2;break;case 16:D=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:D=32;break;case 536870912:D=268435456;break;default:D=0}T=(D&(T.suspendedLanes|w))!==0?0:D,T!==0&&T!==P.retryLane&&(P.retryLane=T,si(d,T,-1))}nd(),p=eu(d,p,w,Error(o(421)))}else js(ve)?(p.flags|=128,p.child=d.child,p=zg.bind(null,d),pi(ve,p),p=null):(w=P.treeContext,Xe&&(qr=wl(ve),vi=p,Jn=!0,ls=null,Cl=!1,w!==null&&(as[Hi++]=po,as[Hi++]=mo,as[Hi++]=ba,po=w.id,mo=w.overflow,ba=p)),p=Cs(p,p.pendingProps.children),p.flags|=4096);return p}return D?(T=Zh(d,p,T.children,T.fallback,w),D=p.child,P=d.child.memoizedState,D.memoizedState=P===null?Ua(w):{baseLanes:P.baseLanes|w,cachePool:null},D.childLanes=d.childLanes&~w,p.memoizedState=Jc,T):(w=Qc(d,p,T.children,w),p.memoizedState=null,w)}return D?(T=Zh(d,p,T.children,T.fallback,w),D=p.child,P=d.child.memoizedState,D.memoizedState=P===null?Ua(w):{baseLanes:P.baseLanes|w,cachePool:null},D.childLanes=d.childLanes&~w,p.memoizedState=Jc,T):(w=Qc(d,p,T.children,w),p.memoizedState=null,w)}function Cs(d,p){return p=fu({mode:"visible",children:p},d.mode,0,null),p.return=d,d.child=p}function Qc(d,p,w,T){var P=d.child;return d=P.sibling,w=Po(P,{mode:"visible",children:w}),(p.mode&1)===0&&(w.lanes=T),w.return=p,w.sibling=null,d!==null&&(T=p.deletions,T===null?(p.deletions=[d],p.flags|=16):T.push(d)),p.child=w}function Zh(d,p,w,T,P){var D=p.mode;d=d.child;var te=d.sibling,ve={mode:"hidden",children:w};return(D&1)===0&&p.child!==d?(w=p.child,w.childLanes=0,w.pendingProps=ve,p.deletions=null):(w=Po(d,ve),w.subtreeFlags=d.subtreeFlags&14680064),te!==null?T=Po(te,T):(T=Ya(T,D,P,null),T.flags|=2),T.return=p,w.return=p,w.sibling=T,p.child=w,T}function eu(d,p,w,T){return T!==null&&kh(T),go(p,d.child,null,w),d=Cs(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function Ng(d,p,w){d.lanes|=p;var T=d.alternate;T!==null&&(T.lanes|=p),Ta(d.return,p,w)}function Ks(d,p,w,T,P){var D=d.memoizedState;D===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:T,tail:w,tailMode:P}:(D.isBackwards=p,D.rendering=null,D.renderingStartTime=0,D.last=T,D.tail=w,D.tailMode=P)}function Fa(d,p,w){var T=p.pendingProps,P=T.revealOrder,D=T.tail;if(ur(d,p,T.children,w),T=or.current,(T&2)!==0)T=T&1|2,p.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&Ng(d,w,p);else if(d.tag===19)Ng(d,w,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}T&=1}if(lt(or,T),(p.mode&1)===0)p.memoizedState=null;else switch(P){case"forwards":for(w=p.child,P=null;w!==null;)d=w.alternate,d!==null&&Oh(d)===null&&(P=w),w=w.sibling;w=P,w===null?(P=p.child,p.child=null):(P=w.sibling,w.sibling=null),Ks(p,!1,P,w,D);break;case"backwards":for(w=null,P=p.child,p.child=null;P!==null;){if(d=P.alternate,d!==null&&Oh(d)===null){p.child=P;break}d=P.sibling,P.sibling=w,w=P,P=d}Ks(p,!0,w,null,D);break;case"together":Ks(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Ci(d,p,w){if(d!==null&&(p.dependencies=d.dependencies),Js|=p.lanes,(w&p.childLanes)===0)return null;if(d!==null&&p.child!==d.child)throw Error(o(153));if(p.child!==null){for(d=p.child,w=Po(d,d.pendingProps),p.child=w,w.return=p;d.sibling!==null;)d=d.sibling,w=w.sibling=Po(d,d.pendingProps),w.return=p;w.sibling=null}return p.child}function Kh(d,p,w){switch(p.tag){case 3:Kc(p),Pl();break;case 5:Lg(p);break;case 1:Bn(p.type)&&nn(p);break;case 4:Dh(p,p.stateNode.containerInfo);break;case 10:Ma(p,p.type._context,p.memoizedProps.value);break;case 13:var T=p.memoizedState;if(T!==null)return T.dehydrated!==null?(lt(or,or.current&1),p.flags|=128,null):(w&p.child.childLanes)!==0?ap(d,p,w):(lt(or,or.current&1),d=Ci(d,p,w),d!==null?d.sibling:null);lt(or,or.current&1);break;case 19:if(T=(w&p.childLanes)!==0,(d.flags&128)!==0){if(T)return Fa(d,p,w);p.flags|=128}var P=p.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),lt(or,or.current),T)break;return null;case 22:case 23:return p.lanes=0,Yr(d,p,w)}return Ci(d,p,w)}function Jh(d,p){switch(jf(p),p.tag){case 1:return Bn(p.type)&&vn(),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return kl(),ut(qt),ut(Ht),Ra(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 5:return qf(p),null;case 13:if(ut(or),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(o(340));Pl()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return ut(or),null;case 4:return kl(),null;case 10:return zc(p.type._context),null;case 22:case 23:return uu(),null;case 24:return null;default:return null}}var _i=!1,Fr=!1,Ba=typeof WeakSet=="function"?WeakSet:Set,ot=null;function cs(d,p){var w=d.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(T){wi(d,p,T)}else w.current=null}function So(d,p,w){try{w()}catch(T){wi(d,p,T)}}var lp=!1;function cp(d,p){for(se(d.containerInfo),ot=p;ot!==null;)if(d=ot,p=d.child,(d.subtreeFlags&1028)!==0&&p!==null)p.return=d,ot=p;else for(;ot!==null;){d=ot;try{var w=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var T=w.memoizedProps,P=w.memoizedState,D=d.stateNode,te=D.getSnapshotBeforeUpdate(d.elementType===d.type?T:Ti(d.type,T),P);D.__reactInternalSnapshotBeforeUpdate=te}break;case 3:ft&&et(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ve){wi(d,d.return,ve)}if(p=d.sibling,p!==null){p.return=d.return,ot=p;break}ot=d.return}return w=lp,lp=!1,w}function Eo(d,p,w){var T=p.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var P=T=T.next;do{if((P.tag&d)===d){var D=P.destroy;P.destroy=void 0,D!==void 0&&So(p,w,D)}P=P.next}while(P!==T)}}function Zr(d,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&d)===d){var T=w.create;w.destroy=T()}w=w.next}while(w!==p)}}function xi(d){var p=d.ref;if(p!==null){var w=d.stateNode;switch(d.tag){case 5:d=ue(w);break;default:d=w}typeof p=="function"?p(d):p.current=d}}function Zn(d,p,w){if(qs&&typeof qs.onCommitFiberUnmount=="function")try{qs.onCommitFiberUnmount(Nc,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(d=p.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var T=d=d.next;do{var P=T,D=P.destroy;P=P.tag,D!==void 0&&((P&2)!==0||(P&4)!==0)&&So(p,w,D),T=T.next}while(T!==d)}break;case 1:if(cs(p,w),d=p.stateNode,typeof d.componentWillUnmount=="function")try{d.props=p.memoizedProps,d.state=p.memoizedState,d.componentWillUnmount()}catch(te){wi(p,w,te)}break;case 5:cs(p,w);break;case 4:ft?dp(d,p,w):oe&&oe&&(p=p.stateNode.containerInfo,w=Ut(p),gn(p,w))}}function us(d,p,w){for(var T=p;;)if(Zn(d,T,w),T.child===null||ft&&T.tag===4){if(T===p)break;for(;T.sibling===null;){if(T.return===null||T.return===p)return;T=T.return}T.sibling.return=T.return,T=T.sibling}else T.child.return=T,T=T.child}function up(d){var p=d.alternate;p!==null&&(d.alternate=null,up(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&Rt(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function hp(d){return d.tag===5||d.tag===3||d.tag===4}function Qh(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||hp(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function ed(d){if(ft){e:{for(var p=d.return;p!==null;){if(hp(p))break e;p=p.return}throw Error(o(160))}var w=p;switch(w.tag){case 5:p=w.stateNode,w.flags&32&&(Ne(p),w.flags&=-33),w=Qh(d),zl(d,w,p);break;case 3:case 4:p=w.stateNode.containerInfo,w=Qh(d),td(d,w,p);break;default:throw Error(o(161))}}}function td(d,p,w){var T=d.tag;if(T===5||T===6)d=d.stateNode,p?yt(w,d,p):Vt(w,d);else if(T!==4&&(d=d.child,d!==null))for(td(d,p,w),d=d.sibling;d!==null;)td(d,p,w),d=d.sibling}function zl(d,p,w){var T=d.tag;if(T===5||T===6)d=d.stateNode,p?Ft(w,d,p):It(w,d);else if(T!==4&&(d=d.child,d!==null))for(zl(d,p,w),d=d.sibling;d!==null;)zl(d,p,w),d=d.sibling}function dp(d,p,w){for(var T=p,P=!1,D,te;;){if(!P){P=T.return;e:for(;;){if(P===null)throw Error(o(160));switch(D=P.stateNode,P.tag){case 5:te=!1;break e;case 3:D=D.containerInfo,te=!0;break e;case 4:D=D.containerInfo,te=!0;break e}P=P.return}P=!0}if(T.tag===5||T.tag===6)us(d,T,w),te?he(D,T.stateNode):xt(D,T.stateNode);else if(T.tag===18)te?ie(D,T.stateNode):ae(D,T.stateNode);else if(T.tag===4){if(T.child!==null){D=T.stateNode.containerInfo,te=!0,T.child.return=T,T=T.child;continue}}else if(Zn(d,T,w),T.child!==null){T.child.return=T,T=T.child;continue}if(T===p)break;for(;T.sibling===null;){if(T.return===null||T.return===p)return;T=T.return,T.tag===4&&(P=!1)}T.sibling.return=T.return,T=T.sibling}}function na(d,p){if(ft){switch(p.tag){case 0:case 11:case 14:case 15:Eo(3,p,p.return),Zr(3,p),Eo(5,p,p.return);return;case 1:return;case 5:var w=p.stateNode;if(w!=null){var T=p.memoizedProps;d=d!==null?d.memoizedProps:T;var P=p.type,D=p.updateQueue;p.updateQueue=null,D!==null&&en(w,D,P,d,T,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));w=p.memoizedProps,Ge(p.stateNode,d!==null?d.memoizedProps:w,w);return;case 3:Xe&&d!==null&&d.memoizedState.isDehydrated&&$(p.stateNode.containerInfo);return;case 12:return;case 13:Vl(p);return;case 19:Vl(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:Eo(3,p,p.return),Zr(3,p),Eo(5,p,p.return);return;case 12:return;case 13:Vl(p);return;case 19:Vl(p);return;case 3:Xe&&d!==null&&d.memoizedState.isDehydrated&&$(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(oe){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,gn(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function Vl(d){var p=d.updateQueue;if(p!==null){d.updateQueue=null;var w=d.stateNode;w===null&&(w=d.stateNode=new Ba),p.forEach(function(T){var P=Vg.bind(null,d,T);w.has(T)||(w.add(T),T.then(P,P))})}}function u_(d,p){for(ot=p;ot!==null;){p=ot;var w=p.deletions;if(w!==null)for(var T=0;T<w.length;T++){var P=w[T];try{var D=d;ft?dp(D,P,p):us(D,P,p);var te=P.alternate;te!==null&&(te.return=null),P.return=null}catch(Dt){wi(P,p,Dt)}}if(w=p.child,(p.subtreeFlags&12854)!==0&&w!==null)w.return=p,ot=w;else for(;ot!==null;){p=ot;try{var ve=p.flags;if(ve&32&&ft&&Ne(p.stateNode),ve&512){var Oe=p.alternate;if(Oe!==null){var nt=Oe.ref;nt!==null&&(typeof nt=="function"?nt(null):nt.current=null)}}if(ve&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var Tt=p.alternate;(Tt===null||Tt.memoizedState===null)&&(au=br())}break;case 22:var Jt=p.memoizedState!==null,zt=p.alternate,cn=zt!==null&&zt.memoizedState!==null;if(w=p,ft){e:if(T=w,P=Jt,D=null,ft)for(var _t=T;;){if(_t.tag===5){if(D===null){D=_t;var Qr=_t.stateNode;P?tt(Qr):Se(_t.stateNode,_t.memoizedProps)}}else if(_t.tag===6){if(D===null){var Zi=_t.stateNode;P?pt(Zi):de(Zi,_t.memoizedProps)}}else if((_t.tag!==22&&_t.tag!==23||_t.memoizedState===null||_t===T)&&_t.child!==null){_t.child.return=_t,_t=_t.child;continue}if(_t===T)break;for(;_t.sibling===null;){if(_t.return===null||_t.return===T)break e;D===_t&&(D=null),_t=_t.return}D===_t&&(D=null),_t.sibling.return=_t.return,_t=_t.sibling}}if(Jt&&!cn&&(w.mode&1)!==0){ot=w;for(var Ae=w.child;Ae!==null;){for(w=ot=Ae;ot!==null;){T=ot;var ye=T.child;switch(T.tag){case 0:case 11:case 14:case 15:Eo(4,T,T.return);break;case 1:cs(T,T.return);var Ie=T.stateNode;if(typeof Ie.componentWillUnmount=="function"){var mt=T.return;try{Ie.props=T.memoizedProps,Ie.state=T.memoizedState,Ie.componentWillUnmount()}catch(Dt){wi(T,mt,Dt)}}break;case 5:cs(T,T.return);break;case 22:if(T.memoizedState!==null){pp(w);continue}}ye!==null?(ye.return=T,ot=ye):pp(w)}Ae=Ae.sibling}}}switch(ve&4102){case 2:ed(p),p.flags&=-3;break;case 6:ed(p),p.flags&=-3,na(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,na(p.alternate,p);break;case 4:na(p.alternate,p)}}catch(Dt){wi(p,p.return,Dt)}if(w=p.sibling,w!==null){w.return=p.return,ot=w;break}ot=p.return}}}function tu(d,p,w){ot=d,nu(d)}function nu(d,p,w){for(var T=(d.mode&1)!==0;ot!==null;){var P=ot,D=P.child;if(P.tag===22&&T){var te=P.memoizedState!==null||_i;if(!te){var ve=P.alternate,Oe=ve!==null&&ve.memoizedState!==null||Fr;ve=_i;var nt=Fr;if(_i=te,(Fr=Oe)&&!nt)for(ot=P;ot!==null;)te=ot,Oe=te.child,te.tag===22&&te.memoizedState!==null?za(P):Oe!==null?(Oe.return=te,ot=Oe):za(P);for(;D!==null;)ot=D,nu(D),D=D.sibling;ot=P,_i=ve,Fr=nt}fp(d)}else(P.subtreeFlags&8772)!==0&&D!==null?(D.return=P,ot=D):fp(d)}}function fp(d){for(;ot!==null;){var p=ot;if((p.flags&8772)!==0){var w=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Fr||Zr(5,p);break;case 1:var T=p.stateNode;if(p.flags&4&&!Fr)if(w===null)T.componentDidMount();else{var P=p.elementType===p.type?w.memoizedProps:Ti(p.type,w.memoizedProps);T.componentDidUpdate(P,w.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var D=p.updateQueue;D!==null&&Eg(p,D,T);break;case 3:var te=p.updateQueue;if(te!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=ue(p.child.stateNode);break;case 1:w=p.child.stateNode}Eg(p,te,w)}break;case 5:var ve=p.stateNode;w===null&&p.flags&4&&tn(ve,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(Xe&&p.memoizedState===null){var Oe=p.alternate;if(Oe!==null){var nt=Oe.memoizedState;if(nt!==null){var Tt=nt.dehydrated;Tt!==null&&J(Tt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Fr||p.flags&512&&xi(p)}catch(Jt){wi(p,p.return,Jt)}}if(p===d){ot=null;break}if(w=p.sibling,w!==null){w.return=p.return,ot=w;break}ot=p.return}}function pp(d){for(;ot!==null;){var p=ot;if(p===d){ot=null;break}var w=p.sibling;if(w!==null){w.return=p.return,ot=w;break}ot=p.return}}function za(d){for(;ot!==null;){var p=ot;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{Zr(4,p)}catch(Oe){wi(p,w,Oe)}break;case 1:var T=p.stateNode;if(typeof T.componentDidMount=="function"){var P=p.return;try{T.componentDidMount()}catch(Oe){wi(p,P,Oe)}}var D=p.return;try{xi(p)}catch(Oe){wi(p,D,Oe)}break;case 5:var te=p.return;try{xi(p)}catch(Oe){wi(p,te,Oe)}}}catch(Oe){wi(p,p.return,Oe)}if(p===d){ot=null;break}var ve=p.sibling;if(ve!==null){ve.return=p.return,ot=ve;break}ot=p.return}}var ru=0,Va=1,Ha=2,Mo=3,Hl=4;if(typeof Symbol=="function"&&Symbol.for){var Ga=Symbol.for;ru=Ga("selector.component"),Va=Ga("selector.has_pseudo_class"),Ha=Ga("selector.role"),Mo=Ga("selector.test_id"),Hl=Ga("selector.text")}function iu(d){var p=Ue(d);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(d=we(d),d===null)throw Error(o(362));return d.stateNode.current}function su(d,p){switch(p.$$typeof){case ru:if(d.type===p.value)return!0;break;case Va:e:{p=p.value,d=[d,0];for(var w=0;w<d.length;){var T=d[w++],P=d[w++],D=p[P];if(T.tag!==5||!Ve(T)){for(;D!=null&&su(T,D);)P++,D=p[P];if(P===p.length){p=!0;break e}else for(T=T.child;T!==null;)d.push(T,P),T=T.sibling}}p=!1}return p;case Ha:if(d.tag===5&&Mt(d.stateNode,p.value))return!0;break;case Hl:if((d.tag===5||d.tag===6)&&(d=He(d),d!==null&&0<=d.indexOf(p.value)))return!0;break;case Mo:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function ra(d){switch(d.$$typeof){case ru:return"<"+(O(d.value)||"Unknown")+">";case Va:return":has("+(ra(d)||"")+")";case Ha:return'[role="'+d.value+'"]';case Hl:return'"'+d.value+'"';case Mo:return'[data-testname="'+d.value+'"]';default:throw Error(o(365))}}function Xi(d,p){var w=[];d=[d,0];for(var T=0;T<d.length;){var P=d[T++],D=d[T++],te=p[D];if(P.tag!==5||!Ve(P)){for(;te!=null&&su(P,te);)D++,te=p[D];if(D===p.length)w.push(P);else for(P=P.child;P!==null;)d.push(P,D),P=P.sibling}}return w}function To(d,p){if(!G)throw Error(o(363));d=iu(d),d=Xi(d,p),p=[],d=Array.from(d);for(var w=0;w<d.length;){var T=d[w++];if(T.tag===5)Ve(T)||p.push(T.stateNode);else for(T=T.child;T!==null;)d.push(T),T=T.sibling}return p}var mp=Math.ceil,ou=a.ReactCurrentDispatcher,Ps=a.ReactCurrentOwner,On=a.ReactCurrentBatchConfig,ln=0,mr=null,Nn=null,Qn=0,ii=0,Wa=$t(0),hr=0,Gl=null,Js=0,$i=0,ja=0,bo=null,_r=null,au=0,ia=1/0;function Xa(){ia=br()+500}var Wl=!1,Kn=null,Rs=null,jl=!1,Qs=null,$a=0,qa=0,Ao=null,$n=-1,dr=0;function Cn(){return(ln&6)!==0?br():$n!==-1?$n:$n=br()}function Ls(d){return(d.mode&1)===0?1:(ln&2)!==0&&Qn!==0?Qn&-Qn:Sg.transition!==null?(dr===0&&(d=Sl,Sl<<=1,(Sl&4194240)===0&&(Sl=64),dr=d),dr):(d=dn,d!==0?d:Fe())}function si(d,p,w){if(50<qa)throw qa=0,Ao=null,Error(o(185));var T=sa(d,p);return T===null?null:(xa(T,p,w),((ln&2)===0||T!==mr)&&(T===mr&&((ln&2)===0&&($i|=p),hr===4&&Jr(T,Qn)),Pi(T,w),p===1&&ln===0&&(d.mode&1)===0&&(Xa(),Sh&&is())),T)}function sa(d,p){d.lanes|=p;var w=d.alternate;for(w!==null&&(w.lanes|=p),w=d,d=d.return;d!==null;)d.childLanes|=p,w=d.alternate,w!==null&&(w.childLanes|=p),w=d,d=d.return;return w.tag===3?w.stateNode:null}function Pi(d,p){var w=d.callbackNode;wg(d,p);var T=Oc(d,d===mr?Qn:0);if(T===0)w!==null&&Ml(w),d.callbackNode=null,d.callbackPriority=0;else if(p=T&-T,d.callbackPriority!==p){if(w!=null&&Ml(w),p===1)d.tag===0?Mh(qi.bind(null,d)):Eh(qi.bind(null,d)),dt?X(function(){ln===0&&is()}):wa(Sa,is),w=null;else{switch(uo(T)){case 1:w=Sa;break;case 4:w=a_;break;case 16:w=xh;break;case 536870912:w=wh;break;default:w=xh}w=rd(w,Kr.bind(null,d))}d.callbackPriority=p,d.callbackNode=w}}function Kr(d,p){if($n=-1,dr=0,(ln&6)!==0)throw Error(o(327));var w=d.callbackNode;if(eo()&&d.callbackNode!==w)return null;var T=Oc(d,d===mr?Qn:0);if(T===0)return null;if((T&30)!==0||(T&d.expiredLanes)!==0||p)p=hu(d,T);else{p=T;var P=ln;ln|=2;var D=yp();(mr!==d||Qn!==p)&&(Xa(),Co(d,p));do try{Fg();break}catch(ve){vp(d,ve)}while(!0);gi(),ou.current=D,ln=P,Nn!==null?p=0:(mr=null,Qn=0,p=hr)}if(p!==0){if(p===2&&(P=vh(d),P!==0&&(T=P,p=lu(d,P))),p===1)throw w=Gl,Co(d,0),Jr(d,T),Pi(d,br()),w;if(p===6)Jr(d,T);else{if(P=d.current.alternate,(T&30)===0&&!gp(P)&&(p=hu(d,T),p===2&&(D=vh(d),D!==0&&(T=D,p=lu(d,D))),p===1))throw w=Gl,Co(d,0),Jr(d,T),Pi(d,br()),w;switch(d.finishedWork=P,d.finishedLanes=T,p){case 0:case 1:throw Error(o(345));case 2:Is(d,_r);break;case 3:if(Jr(d,T),(T&130023424)===T&&(p=au+500-br(),10<p)){if(Oc(d,0)!==0)break;if(P=d.suspendedLanes,(P&T)!==T){Cn(),d.pingedLanes|=d.suspendedLanes&P;break}d.timeoutHandle=ze(Is.bind(null,d,_r),p);break}Is(d,_r);break;case 4:if(Jr(d,T),(T&4194240)===T)break;for(p=d.eventTimes,P=-1;0<T;){var te=31-zn(T);D=1<<te,te=p[te],te>P&&(P=te),T&=~D}if(T=P,T=br()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*mp(T/1960))-T,10<T){d.timeoutHandle=ze(Is.bind(null,d,_r),T);break}Is(d,_r);break;case 5:Is(d,_r);break;default:throw Error(o(329))}}}return Pi(d,br()),d.callbackNode===w?Kr.bind(null,d):null}function lu(d,p){var w=bo;return d.current.memoizedState.isDehydrated&&(Co(d,p).flags|=256),d=hu(d,p),d!==2&&(p=_r,_r=w,p!==null&&cu(p)),d}function cu(d){_r===null?_r=d:_r.push.apply(_r,d)}function gp(d){for(var p=d;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var T=0;T<w.length;T++){var P=w[T],D=P.getSnapshot;P=P.value;try{if(!mi(D(),P))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Jr(d,p){for(p&=~ja,p&=~$i,d.suspendedLanes|=p,d.pingedLanes&=~p,d=d.expirationTimes;0<p;){var w=31-zn(p),T=1<<w;d[w]=-1,p&=~T}}function qi(d){if((ln&6)!==0)throw Error(o(327));eo();var p=Oc(d,0);if((p&1)===0)return Pi(d,br()),null;var w=hu(d,p);if(d.tag!==0&&w===2){var T=vh(d);T!==0&&(p=T,w=lu(d,T))}if(w===1)throw w=Gl,Co(d,0),Jr(d,p),Pi(d,br()),w;if(w===6)throw Error(o(345));return d.finishedWork=d.current.alternate,d.finishedLanes=p,Is(d,_r),Pi(d,br()),null}function Xl(d){Qs!==null&&Qs.tag===0&&(ln&6)===0&&eo();var p=ln;ln|=1;var w=On.transition,T=dn;try{if(On.transition=null,dn=1,d)return d()}finally{dn=T,On.transition=w,ln=p,(ln&6)===0&&is()}}function uu(){ii=Wa.current,ut(Wa)}function Co(d,p){d.finishedWork=null,d.finishedLanes=0;var w=d.timeoutHandle;if(w!==st&&(d.timeoutHandle=st,Ke(w)),Nn!==null)for(w=Nn.return;w!==null;){var T=w;switch(jf(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&vn();break;case 3:kl(),ut(qt),ut(Ht),Ra();break;case 5:qf(T);break;case 4:kl();break;case 13:ut(or);break;case 19:ut(or);break;case 10:zc(T.type._context);break;case 22:case 23:uu()}w=w.return}if(mr=d,Nn=d=Po(d.current,null),Qn=ii=p,hr=0,Gl=null,ja=$i=Js=0,_r=bo=null,ss!==null){for(p=0;p<ss.length;p++)if(w=ss[p],T=w.interleaved,T!==null){w.interleaved=null;var P=T.next,D=w.pending;if(D!==null){var te=D.next;D.next=P,T.next=te}w.pending=T}ss=null}return d}function vp(d,p){do{var w=Nn;try{if(gi(),Hc.current=Fl,Nh){for(var T=ar.memoizedState;T!==null;){var P=T.queue;P!==null&&(P.pending=null),T=T.next}Nh=!1}if(La=0,Or=Dr=ar=null,Ys=!1,Ia=0,Ps.current=null,w===null||w.return===null){hr=1,Gl=p,Nn=null;break}e:{var D=d,te=w.return,ve=w,Oe=p;if(p=Qn,ve.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var nt=Oe,Tt=ve,Jt=Tt.tag;if((Tt.mode&1)===0&&(Jt===0||Jt===11||Jt===15)){var zt=Tt.alternate;zt?(Tt.updateQueue=zt.updateQueue,Tt.memoizedState=zt.memoizedState,Tt.lanes=zt.lanes):(Tt.updateQueue=null,Tt.memoizedState=null)}var cn=ip(te);if(cn!==null){cn.flags&=-257,Da(cn,te,ve,D,p),cn.mode&1&&yo(D,nt,p),p=cn,Oe=nt;var _t=p.updateQueue;if(_t===null){var Qr=new Set;Qr.add(Oe),p.updateQueue=Qr}else _t.add(Oe);break e}else{if((p&1)===0){yo(D,nt,p),nd();break e}Oe=Error(o(426))}}else if(Jn&&ve.mode&1){var Zi=ip(te);if(Zi!==null){(Zi.flags&65536)===0&&(Zi.flags|=256),Da(Zi,te,ve,D,p),kh(Oe);break e}}D=Oe,hr!==4&&(hr=2),bo===null?bo=[D]:bo.push(D),Oe=rp(Oe,ve),ve=te;do{switch(ve.tag){case 3:ve.flags|=65536,p&=-p,ve.lanes|=p;var Ae=Og(ve,Oe,p);Ah(ve,Ae);break e;case 1:D=Oe;var ye=ve.type,Ie=ve.stateNode;if((ve.flags&128)===0&&(typeof ye.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(Rs===null||!Rs.has(Ie)))){ve.flags|=65536,p&=-p,ve.lanes|=p;var mt=Xh(ve,D,p);Ah(ve,mt);break e}}ve=ve.return}while(ve!==null)}xp(w)}catch(Dt){p=Dt,Nn===w&&w!==null&&(Nn=w=w.return);continue}break}while(!0)}function yp(){var d=ou.current;return ou.current=Fl,d===null?Fl:d}function nd(){(hr===0||hr===3||hr===2)&&(hr=4),mr===null||(Js&268435455)===0&&($i&268435455)===0||Jr(mr,Qn)}function hu(d,p){var w=ln;ln|=2;var T=yp();mr===d&&Qn===p||Co(d,p);do try{Ug();break}catch(P){vp(d,P)}while(!0);if(gi(),ln=w,ou.current=T,Nn!==null)throw Error(o(261));return mr=null,Qn=0,hr}function Ug(){for(;Nn!==null;)_p(Nn)}function Fg(){for(;Nn!==null&&!qo();)_p(Nn)}function _p(d){var p=Ep(d.alternate,d,ii);d.memoizedProps=d.pendingProps,p===null?xp(d):Nn=p,Ps.current=null}function xp(d){var p=d;do{var w=p.alternate;if(d=p.return,(p.flags&32768)===0){if(w=Yh(w,p,ii),w!==null){Nn=w;return}}else{if(w=Jh(w,p),w!==null){w.flags&=32767,Nn=w;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{hr=6,Nn=null;return}}if(p=p.sibling,p!==null){Nn=p;return}Nn=p=d}while(p!==null);hr===0&&(hr=5)}function Is(d,p){var w=dn,T=On.transition;try{On.transition=null,dn=1,Bg(d,p,w)}finally{On.transition=T,dn=w}return null}function Bg(d,p,w){do eo();while(Qs!==null);if((ln&6)!==0)throw Error(o(327));var T=d.finishedWork,P=d.finishedLanes;if(T===null)return null;if(d.finishedWork=null,d.finishedLanes=0,T===d.current)throw Error(o(177));d.callbackNode=null,d.callbackPriority=0;var D=T.lanes|T.childLanes;if(_h(d,D),d===mr&&(Nn=mr=null,Qn=0),(T.subtreeFlags&2064)===0&&(T.flags&2064)===0||jl||(jl=!0,rd(xh,function(){return eo(),null})),D=(T.flags&15990)!==0,(T.subtreeFlags&15990)!==0||D){D=On.transition,On.transition=null;var te=dn;dn=1;var ve=ln;ln|=4,Ps.current=null,cp(d,T),u_(d,T),ee(d.containerInfo),d.current=T,tu(T),o_(),ln=ve,dn=te,On.transition=D}else d.current=T;if(jl&&(jl=!1,Qs=d,$a=P),D=d.pendingLanes,D===0&&(Rs=null),Uc(T.stateNode),Pi(d,br()),p!==null)for(w=d.onRecoverableError,T=0;T<p.length;T++)w(p[T]);if(Wl)throw Wl=!1,d=Kn,Kn=null,d;return($a&1)!==0&&d.tag!==0&&eo(),D=d.pendingLanes,(D&1)!==0?d===Ao?qa++:(qa=0,Ao=d):qa=0,is(),null}function eo(){if(Qs!==null){var d=uo($a),p=On.transition,w=dn;try{if(On.transition=null,dn=16>d?16:d,Qs===null)var T=!1;else{if(d=Qs,Qs=null,$a=0,(ln&6)!==0)throw Error(o(331));var P=ln;for(ln|=4,ot=d.current;ot!==null;){var D=ot,te=D.child;if((ot.flags&16)!==0){var ve=D.deletions;if(ve!==null){for(var Oe=0;Oe<ve.length;Oe++){var nt=ve[Oe];for(ot=nt;ot!==null;){var Tt=ot;switch(Tt.tag){case 0:case 11:case 15:Eo(8,Tt,D)}var Jt=Tt.child;if(Jt!==null)Jt.return=Tt,ot=Jt;else for(;ot!==null;){Tt=ot;var zt=Tt.sibling,cn=Tt.return;if(up(Tt),Tt===nt){ot=null;break}if(zt!==null){zt.return=cn,ot=zt;break}ot=cn}}}var _t=D.alternate;if(_t!==null){var Qr=_t.child;if(Qr!==null){_t.child=null;do{var Zi=Qr.sibling;Qr.sibling=null,Qr=Zi}while(Qr!==null)}}ot=D}}if((D.subtreeFlags&2064)!==0&&te!==null)te.return=D,ot=te;else e:for(;ot!==null;){if(D=ot,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:Eo(9,D,D.return)}var Ae=D.sibling;if(Ae!==null){Ae.return=D.return,ot=Ae;break e}ot=D.return}}var ye=d.current;for(ot=ye;ot!==null;){te=ot;var Ie=te.child;if((te.subtreeFlags&2064)!==0&&Ie!==null)Ie.return=te,ot=Ie;else e:for(te=ye;ot!==null;){if(ve=ot,(ve.flags&2048)!==0)try{switch(ve.tag){case 0:case 11:case 15:Zr(9,ve)}}catch(Dt){wi(ve,ve.return,Dt)}if(ve===te){ot=null;break e}var mt=ve.sibling;if(mt!==null){mt.return=ve.return,ot=mt;break e}ot=ve.return}}if(ln=P,is(),qs&&typeof qs.onPostCommitFiberRoot=="function")try{qs.onPostCommitFiberRoot(Nc,d)}catch{}T=!0}return T}finally{dn=w,On.transition=p}}return!1}function du(d,p,w){p=rp(w,p),p=Og(d,p,1),Yo(d,p),p=Cn(),d=sa(d,1),d!==null&&(xa(d,1,p),Pi(d,p))}function wi(d,p,w){if(d.tag===3)du(d,d,w);else for(;p!==null;){if(p.tag===3){du(p,d,w);break}else if(p.tag===1){var T=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(Rs===null||!Rs.has(T))){d=rp(w,d),d=Xh(p,d,1),Yo(p,d),d=Cn(),p=sa(p,1),p!==null&&(xa(p,1,d),Pi(p,d));break}}p=p.return}}function wp(d,p,w){var T=d.pingCache;T!==null&&T.delete(p),p=Cn(),d.pingedLanes|=d.suspendedLanes&w,mr===d&&(Qn&w)===w&&(hr===4||hr===3&&(Qn&130023424)===Qn&&500>br()-au?Co(d,0):ja|=w),Pi(d,p)}function Sp(d,p){p===0&&((d.mode&1)===0?p=1:(p=An,An<<=1,(An&130023424)===0&&(An=4194304)));var w=Cn();d=sa(d,p),d!==null&&(xa(d,p,w),Pi(d,w))}function zg(d){var p=d.memoizedState,w=0;p!==null&&(w=p.retryLane),Sp(d,w)}function Vg(d,p){var w=0;switch(d.tag){case 13:var T=d.stateNode,P=d.memoizedState;P!==null&&(w=P.retryLane);break;case 19:T=d.stateNode;break;default:throw Error(o(314))}T!==null&&T.delete(p),Sp(d,w)}var Ep;Ep=function(d,p,w){if(d!==null)if(d.memoizedProps!==p.pendingProps||qt.current)Ur=!0;else{if((d.lanes&w)===0&&(p.flags&128)===0)return Ur=!1,Kh(d,p,w);Ur=(d.flags&131072)!==0}else Ur=!1,Jn&&(p.flags&1048576)!==0&&Ag(p,Lh,p.index);switch(p.lanes=0,p.tag){case 2:var T=p.type;d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),d=p.pendingProps;var P=Yn(p,Ht.current);Tl(p,w),P=Dl(null,p,T,d,P,w);var D=Qo();return p.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Bn(T)?(D=!0,nn(p)):D=!1,p.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,bl(p),P.updater=Ph,p.stateNode=P,P._reactInternals=p,Gf(p,T,d,w),p=ri(null,p,T,!0,D,w)):(p.tag=0,Jn&&D&&Wf(p),ur(null,p,P,w),p=p.child),p;case 16:T=p.elementType;e:{switch(d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),d=p.pendingProps,P=T._init,T=P(T._payload),p.type=T,P=p.tag=h_(T),d=Ti(T,d),P){case 0:p=wo(null,p,T,d,w);break e;case 1:p=Na(null,p,T,d,w);break e;case 11:p=Xn(null,p,T,d,w);break e;case 14:p=Vn(null,p,T,Ti(T.type,d),w);break e}throw Error(o(306,T,""))}return p;case 0:return T=p.type,P=p.pendingProps,P=p.elementType===T?P:Ti(T,P),wo(d,p,T,P,w);case 1:return T=p.type,P=p.pendingProps,P=p.elementType===T?P:Ti(T,P),Na(d,p,T,P,w);case 3:e:{if(Kc(p),d===null)throw Error(o(387));T=p.pendingProps,D=p.memoizedState,P=D.element,zf(d,p),Ch(p,T,null,w);var te=p.memoizedState;if(T=te.element,Xe&&D.isDehydrated)if(D={element:T,isDehydrated:!1,cache:te.cache,transitions:te.transitions},p.updateQueue.baseState=D,p.memoizedState=D,p.flags&256){P=Error(o(423)),p=op(d,p,T,w,P);break e}else if(T!==P){P=Error(o(424)),p=op(d,p,T,w,P);break e}else for(Xe&&(qr=_a(p.stateNode.containerInfo),vi=p,Jn=!0,ls=null,Cl=!1),w=Rg(p,null,T,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Pl(),T===P){p=Ci(d,p,w);break e}ur(d,p,T,w)}p=p.child}return p;case 5:return Lg(p),d===null&&Ko(p),T=p.type,P=p.pendingProps,D=d!==null?d.memoizedProps:null,te=P.children,ke(T,P)?te=null:D!==null&&ke(T,D)&&(p.flags|=32),yi(d,p),ur(d,p,te,w),p.child;case 6:return d===null&&Ko(p),null;case 13:return ap(d,p,w);case 4:return Dh(p,p.stateNode.containerInfo),T=p.pendingProps,d===null?p.child=go(p,null,T,w):ur(d,p,T,w),p.child;case 11:return T=p.type,P=p.pendingProps,P=p.elementType===T?P:Ti(T,P),Xn(d,p,T,P,w);case 7:return ur(d,p,p.pendingProps,w),p.child;case 8:return ur(d,p,p.pendingProps.children,w),p.child;case 12:return ur(d,p,p.pendingProps.children,w),p.child;case 10:e:{if(T=p.type._context,P=p.pendingProps,D=p.memoizedProps,te=P.value,Ma(p,T,te),D!==null)if(mi(D.value,te)){if(D.children===P.children&&!qt.current){p=Ci(d,p,w);break e}}else for(D=p.child,D!==null&&(D.return=p);D!==null;){var ve=D.dependencies;if(ve!==null){te=D.child;for(var Oe=ve.firstContext;Oe!==null;){if(Oe.context===T){if(D.tag===1){Oe=fo(-1,w&-w),Oe.tag=2;var nt=D.updateQueue;if(nt!==null){nt=nt.shared;var Tt=nt.pending;Tt===null?Oe.next=Oe:(Oe.next=Tt.next,Tt.next=Oe),nt.pending=Oe}}D.lanes|=w,Oe=D.alternate,Oe!==null&&(Oe.lanes|=w),Ta(D.return,w,p),ve.lanes|=w;break}Oe=Oe.next}}else if(D.tag===10)te=D.type===p.type?null:D.child;else if(D.tag===18){if(te=D.return,te===null)throw Error(o(341));te.lanes|=w,ve=te.alternate,ve!==null&&(ve.lanes|=w),Ta(te,w,p),te=D.sibling}else te=D.child;if(te!==null)te.return=D;else for(te=D;te!==null;){if(te===p){te=null;break}if(D=te.sibling,D!==null){D.return=te.return,te=D;break}te=te.return}D=te}ur(d,p,P.children,w),p=p.child}return p;case 9:return P=p.type,T=p.pendingProps.children,Tl(p,w),P=bi(P),T=T(P),p.flags|=1,ur(d,p,T,w),p.child;case 14:return T=p.type,P=Ti(T,p.pendingProps),P=Ti(T.type,P),Vn(d,p,T,P,w);case 15:return xo(d,p,p.type,p.pendingProps,w);case 17:return T=p.type,P=p.pendingProps,P=p.elementType===T?P:Ti(T,P),d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,Bn(T)?(d=!0,nn(p)):d=!1,Tl(p,w),Tg(p,T,P),Gf(p,T,P,w),ri(null,p,T,!0,d,w);case 19:return Fa(d,p,w);case 22:return Yr(d,p,w)}throw Error(o(156,p.tag))};function rd(d,p){return wa(d,p)}function Hg(d,p,w,T){this.tag=d,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(d,p,w,T){return new Hg(d,p,w,T)}function id(d){return d=d.prototype,!(!d||!d.isReactComponent)}function h_(d){if(typeof d=="function")return id(d)?1:0;if(d!=null){if(d=d.$$typeof,d===M)return 11;if(d===A)return 14}return 2}function Po(d,p){var w=d.alternate;return w===null?(w=Yi(d.tag,p,d.key,d.mode),w.elementType=d.elementType,w.type=d.type,w.stateNode=d.stateNode,w.alternate=d,d.alternate=w):(w.pendingProps=p,w.type=d.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=d.flags&14680064,w.childLanes=d.childLanes,w.lanes=d.lanes,w.child=d.child,w.memoizedProps=d.memoizedProps,w.memoizedState=d.memoizedState,w.updateQueue=d.updateQueue,p=d.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=d.sibling,w.index=d.index,w.ref=d.ref,w}function sd(d,p,w,T,P,D){var te=2;if(T=d,typeof d=="function")id(d)&&(te=1);else if(typeof d=="string")te=5;else e:switch(d){case f:return Ya(w.children,P,D,p);case m:te=8,P|=8;break;case g:return d=Yi(12,w,p,P|2),d.elementType=g,d.lanes=D,d;case E:return d=Yi(13,w,p,P),d.elementType=E,d.lanes=D,d;case x:return d=Yi(19,w,p,P),d.elementType=x,d.lanes=D,d;case R:return fu(w,P,D,p);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case y:te=10;break e;case _:te=9;break e;case M:te=11;break e;case A:te=14;break e;case b:te=16,T=null;break e}throw Error(o(130,d==null?d:typeof d,""))}return p=Yi(te,w,p,P),p.elementType=d,p.type=T,p.lanes=D,p}function Ya(d,p,w,T){return d=Yi(7,d,T,p),d.lanes=w,d}function fu(d,p,w,T){return d=Yi(22,d,T,p),d.elementType=R,d.lanes=w,d.stateNode={},d}function od(d,p,w){return d=Yi(6,d,null,p),d.lanes=w,d}function ad(d,p,w){return p=Yi(4,d.children!==null?d.children:[],d.key,p),p.lanes=w,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}function ld(d,p,w,T,P){this.tag=p,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=st,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yh(0),this.expirationTimes=yh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yh(0),this.identifierPrefix=T,this.onRecoverableError=P,Xe&&(this.mutableSourceEagerHydrationData=null)}function Gg(d,p,w,T,P,D,te,ve,Oe){return d=new ld(d,p,w,ve,Oe),p===1?(p=1,D===!0&&(p|=8)):p=0,D=Yi(3,null,null,p),d.current=D,D.stateNode=d,D.memoizedState={element:T,isDehydrated:w,cache:null,transitions:null},bl(D),d}function Wg(d){if(!d)return Xt;d=d._reactInternals;e:{if(k(d)!==d||d.tag!==1)throw Error(o(170));var p=d;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Bn(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(d.tag===1){var w=d.type;if(Bn(w))return sr(d,w,p)}return p}function jg(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(o(188)):(d=Object.keys(d).join(","),Error(o(268,d)));return d=le(p),d===null?null:d.stateNode}function hs(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var w=d.retryLane;d.retryLane=w!==0&&w<p?w:p}}function pu(d,p){hs(d,p),(d=d.alternate)&&hs(d,p)}function cd(d){return d=le(d),d===null?null:d.stateNode}function Xg(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var p=Cn();si(d,134217728,p),pu(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var p=Cn(),w=Ls(d);si(d,w,p),pu(d,w)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var p=d.stateNode;if(p.current.memoizedState.isDehydrated){var w=El(p.pendingLanes);w!==0&&($s(p,w|1),Pi(p,br()),(ln&6)===0&&(Xa(),is()))}break;case 13:var T=Cn();Xl(function(){return si(d,1,T)}),pu(d,1)}},t.batchedUpdates=function(d,p){var w=ln;ln|=1;try{return d(p)}finally{ln=w,ln===0&&(Xa(),Sh&&is())}},t.createComponentSelector=function(d){return{$$typeof:ru,value:d}},t.createContainer=function(d,p,w,T,P,D,te){return Gg(d,p,!1,null,w,T,P,D,te)},t.createHasPseudoClassSelector=function(d){return{$$typeof:Va,value:d}},t.createHydrationContainer=function(d,p,w,T,P,D,te,ve,Oe){return d=Gg(w,T,!0,d,P,D,te,ve,Oe),d.context=Wg(null),w=d.current,T=Cn(),P=Ls(w),D=fo(T,P),D.callback=p??null,Yo(w,D),d.current.lanes=P,xa(d,P,T),Pi(d,T),d},t.createPortal=function(d,p,w){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:T==null?null:""+T,children:d,containerInfo:p,implementation:w}},t.createRoleSelector=function(d){return{$$typeof:Ha,value:d}},t.createTestNameSelector=function(d){return{$$typeof:Mo,value:d}},t.createTextSelector=function(d){return{$$typeof:Hl,value:d}},t.deferredUpdates=function(d){var p=dn,w=On.transition;try{return On.transition=null,dn=16,d()}finally{dn=p,On.transition=w}},t.discreteUpdates=function(d,p,w,T,P){var D=dn,te=On.transition;try{return On.transition=null,dn=1,d(p,w,T,P)}finally{dn=D,On.transition=te,ln===0&&Xa()}},t.findAllNodes=To,t.findBoundingRects=function(d,p){if(!G)throw Error(o(363));p=To(d,p),d=[];for(var w=0;w<p.length;w++)d.push(We(p[w]));for(p=d.length-1;0<p;p--){w=d[p];for(var T=w.x,P=T+w.width,D=w.y,te=D+w.height,ve=p-1;0<=ve;ve--)if(p!==ve){var Oe=d[ve],nt=Oe.x,Tt=nt+Oe.width,Jt=Oe.y,zt=Jt+Oe.height;if(T>=nt&&D>=Jt&&P<=Tt&&te<=zt){d.splice(p,1);break}else if(T!==nt||w.width!==Oe.width||zt<D||Jt>te){if(!(D!==Jt||w.height!==Oe.height||Tt<T||nt>P)){nt>T&&(Oe.width+=nt-T,Oe.x=T),Tt<P&&(Oe.width=P-nt),d.splice(p,1);break}}else{Jt>D&&(Oe.height+=Jt-D,Oe.y=D),zt<te&&(Oe.height=te-Jt),d.splice(p,1);break}}}return d},t.findHostInstance=jg,t.findHostInstanceWithNoPortals=function(d){return d=Q(d),d=d!==null?Y(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return jg(d)},t.flushControlled=function(d){var p=ln;ln|=1;var w=On.transition,T=dn;try{On.transition=null,dn=1,d()}finally{dn=T,On.transition=w,ln=p,ln===0&&(Xa(),is())}},t.flushPassiveEffects=eo,t.flushSync=Xl,t.focusWithin=function(d,p){if(!G)throw Error(o(363));for(d=iu(d),p=Xi(d,p),p=Array.from(p),d=0;d<p.length;){var w=p[d++];if(!Ve(w)){if(w.tag===5&&at(w.stateNode))return!0;for(w=w.child;w!==null;)p.push(w),w=w.sibling}}return!1},t.getCurrentUpdatePriority=function(){return dn},t.getFindAllNodesFailureDescription=function(d,p){if(!G)throw Error(o(363));var w=0,T=[];d=[iu(d),0];for(var P=0;P<d.length;){var D=d[P++],te=d[P++],ve=p[te];if((D.tag!==5||!Ve(D))&&(su(D,ve)&&(T.push(ra(ve)),te++,te>w&&(w=te)),te<p.length))for(D=D.child;D!==null;)d.push(D,te),D=D.sibling}if(w<p.length){for(d=[];w<p.length;w++)d.push(ra(p[w]));return`findAllNodes was able to match part of the selector:
  `+(T.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return ue(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:cd,findFiberByHostInstance:d.findFiberByHostInstance||Xg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)d=!0;else{try{Nc=p.inject(d),qs=p}catch{}d=!!p.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,p,w,T){if(!G)throw Error(o(363));d=To(d,p);var P=vt(d,w,T).disconnect;return{disconnect:function(){P()}}},t.registerMutableSourceForHydration=function(d,p){var w=p._getVersion;w=w(p._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[p,w]:d.mutableSourceEagerHydrationData.push(p,w)},t.runWithPriority=function(d,p){var w=dn;try{return dn=d,p()}finally{dn=w}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,p,w,T){var P=p.current,D=Cn(),te=Ls(P);return w=Wg(w),p.context===null?p.context=w:p.pendingContext=w,p=fo(D,te),p.payload={element:d},T=T===void 0?null:T,T!==null&&(p.callback=T),Yo(P,p),d=si(P,te,D),d!==null&&bh(d,P,te),te},t}),ew}var nC;function s9(){return nC||(nC=1,Kx.exports=i9()),Kx.exports}var o9=s9();const a9=dy(o9);var rC=_I();const SE={},xI=r=>void Object.assign(SE,r);function l9(r,e){function t(f,{args:m=[],attach:g,...y},_){let M=`${f[0].toUpperCase()}${f.slice(1)}`,E;if(f==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=y.object;E=Jd(x,{type:f,root:_,attach:g,primitive:!0})}else{const x=SE[M];if(!x)throw new Error(`R3F: ${M} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");E=Jd(new x(...m),{type:f,root:_,attach:g,memoizedProps:{args:m}})}return E.__r3f.attach===void 0&&(E.isBufferGeometry?E.__r3f.attach="geometry":E.isMaterial&&(E.__r3f.attach="material")),M!=="inject"&&rw(E,y),E}function n(f,m){let g=!1;if(m){var y,_;(y=m.__r3f)!=null&&y.attach?nw(f,m,m.__r3f.attach):m.isObject3D&&f.isObject3D&&(f.add(m),g=!0),g||(_=f.__r3f)==null||_.objects.push(m),m.__r3f||Jd(m,{}),m.__r3f.parent=f,B1(m),Qd(m)}}function i(f,m,g){let y=!1;if(m){var _,M;if((_=m.__r3f)!=null&&_.attach)nw(f,m,m.__r3f.attach);else if(m.isObject3D&&f.isObject3D){m.parent=f,m.dispatchEvent({type:"added"}),f.dispatchEvent({type:"childadded",child:m});const E=f.children.filter(A=>A!==m),x=E.indexOf(g);f.children=[...E.slice(0,x),m,...E.slice(x)],y=!0}y||(M=f.__r3f)==null||M.objects.push(m),m.__r3f||Jd(m,{}),m.__r3f.parent=f,B1(m),Qd(m)}}function s(f,m,g=!1){f&&[...f].forEach(y=>o(m,y,g))}function o(f,m,g){if(m){var y,_,M;if(m.__r3f&&(m.__r3f.parent=null),(y=f.__r3f)!=null&&y.objects&&(f.__r3f.objects=f.__r3f.objects.filter(R=>R!==m)),(_=m.__r3f)!=null&&_.attach)lC(f,m,m.__r3f.attach);else if(m.isObject3D&&f.isObject3D){var E;f.remove(m),(E=m.__r3f)!=null&&E.root&&m9(Vv(m),m)}const A=(M=m.__r3f)==null?void 0:M.primitive,b=!A&&(g===void 0?m.dispose!==null:g);if(!A){var x;s((x=m.__r3f)==null?void 0:x.objects,m,b),s(m.children,m,b)}if(delete m.__r3f,b&&m.dispose&&m.type!=="Scene"){const R=()=>{try{m.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?rC.unstable_scheduleCallback(rC.unstable_IdlePriority,R):R()}Qd(f)}}function a(f,m,g,y){var _;const M=(_=f.__r3f)==null?void 0:_.parent;if(!M)return;const E=t(m,g,f.__r3f.root);if(f.children){for(const x of f.children)x.__r3f&&n(E,x);f.children=f.children.filter(x=>!x.__r3f)}f.__r3f.objects.forEach(x=>n(E,x)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||o(M,f),E.parent&&(E.__r3f.autoRemovedBeforeAppend=!0),n(M,E),E.raycast&&E.__r3f.eventCount&&Vv(E).getState().internal.interaction.push(E),[y,y.alternate].forEach(x=>{x!==null&&(x.stateNode=E,x.ref&&(typeof x.ref=="function"?x.ref(E):x.ref.current=E))})}const c=()=>{};return{reconciler:a9({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,m)=>{if(!m)return;const g=f.getState().scene;g.__r3f&&(g.__r3f.root=f,n(g,m))},removeChildFromContainer:(f,m)=>{m&&o(f.getState().scene,m)},insertInContainerBefore:(f,m,g)=>{if(!m||!g)return;const y=f.getState().scene;y.__r3f&&i(y,m,g)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var m;return!!((m=f?.__r3f)!=null?m:{}).handlers},prepareUpdate(f,m,g,y){var _;if(((_=f?.__r3f)!=null?_:{}).primitive&&y.object&&y.object!==f)return[!0];{const{args:E=[],children:x,...A}=y,{args:b=[],children:R,...N}=g;if(!Array.isArray(E))throw new Error("R3F: the args prop must be an array!");if(E.some((O,V)=>O!==b[V]))return[!0];const I=AI(f,A,N,!0);return I.changes.length?[!1,I]:null}},commitUpdate(f,[m,g],y,_,M,E){m?a(f,y,M,E):rw(f,g)},commitMount(f,m,g,y){var _;const M=(_=f.__r3f)!=null?_:{};f.raycast&&M.handlers&&M.eventCount&&Vv(f).getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>Jd(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var m;const{attach:g,parent:y}=(m=f.__r3f)!=null?m:{};g&&y&&lC(y,f,g),f.isObject3D&&(f.visible=!1),Qd(f)},unhideInstance(f,m){var g;const{attach:y,parent:_}=(g=f.__r3f)!=null?g:{};y&&_&&nw(_,f,y),(f.isObject3D&&m.visible==null||m.visible)&&(f.visible=!0),Qd(f)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():uf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&nr.fun(performance.now)?performance.now:nr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:nr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:nr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:rw}}var iC,sC;const tw=r=>"colorSpace"in r||"outputColorSpace"in r,wI=()=>{var r;return(r=SE.ColorManagement)!=null?r:null},SI=r=>r&&r.isOrthographicCamera,c9=r=>r&&r.hasOwnProperty("current"),yg=typeof window<"u"&&((iC=window.document)!=null&&iC.createElement||((sC=window.navigator)==null?void 0:sC.product)==="ReactNative")?j.useLayoutEffect:j.useEffect;function EI(r){const e=j.useRef(r);return yg(()=>void(e.current=r),[r]),e}function u9({set:r}){return yg(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}class MI extends j.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}MI.getDerivedStateFromError=()=>({error:!0});const TI="__default",oC=new Map,h9=r=>r&&!!r.memoized&&!!r.changes;function bI(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}const Yp=r=>{var e;return(e=r.__r3f)==null?void 0:e.root.getState()};function Vv(r){let e=r.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const nr={obj:r=>r===Object(r)&&!nr.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(nr.str(r)||nr.num(r)||nr.boo(r))return r===e;const s=nr.obj(r);if(s&&n==="reference")return r===e;const o=nr.arr(r);if(o&&t==="reference")return r===e;if((o||s)&&r===e)return!0;let a;for(a in r)if(!(a in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(a in i?e:r)if(!nr.equ(r[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:r)if(r[a]!==e[a])return!1;if(nr.und(a)){if(o&&r.length===0&&e.length===0||s&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function d9(r){const e={nodes:{},materials:{}};return r&&r.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function f9(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const e in r)e.dispose==null||e.dispose(),delete r[e]}function Jd(r,e){const t=r;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},r}function F1(r,e){let t=r;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((s,o)=>s[o],r),{target:t,key:i}}else return{target:t,key:e}}const aC=/-\d+$/;function nw(r,e,t){if(nr.str(t)){if(aC.test(t)){const s=t.replace(aC,""),{target:o,key:a}=F1(r,s);Array.isArray(o[a])||(o[a]=[])}const{target:n,key:i}=F1(r,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(r,e)}function lC(r,e,t){var n,i;if(nr.str(t)){const{target:s,key:o}=F1(r,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(r,e);(i=e.__r3f)==null||delete i.previousAttach}function AI(r,{children:e,key:t,ref:n,...i},{children:s,key:o,ref:a,...c}={},h=!1){const f=r.__r3f,m=Object.entries(i),g=[];if(h){const _=Object.keys(c);for(let M=0;M<_.length;M++)i.hasOwnProperty(_[M])||m.unshift([_[M],TI+"remove"])}m.forEach(([_,M])=>{var E;if((E=r.__r3f)!=null&&E.primitive&&_==="object"||nr.equ(M,c[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return g.push([_,M,!0,[]]);let x=[];_.includes("-")&&(x=_.split("-")),g.push([_,M,!1,x]);for(const A in i){const b=i[A];A.startsWith(`${_}-`)&&g.push([A,b,!1,A.split("-")])}});const y={...i};return f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.args&&(y.args=f.memoizedProps.args),f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.attach&&(y.attach=f.memoizedProps.attach),{memoized:y,changes:g}}function rw(r,e){var t;const n=r.__r3f,i=n?.root,s=i==null||i.getState==null?void 0:i.getState(),{memoized:o,changes:a}=h9(e)?e:AI(r,e),c=n?.eventCount;r.__r3f&&(r.__r3f.memoizedProps=o);for(let g=0;g<a.length;g++){let[y,_,M,E]=a[g];if(tw(r)){const R="srgb",N="srgb-linear";y==="encoding"?(y="colorSpace",_=_===3001?R:N):y==="outputEncoding"&&(y="outputColorSpace",_=_===3001?R:N)}let x=r,A=x[y];if(E.length&&(A=E.reduce((b,R)=>b[R],r),!(A&&A.set))){const[b,...R]=E.reverse();x=R.reverse().reduce((N,I)=>N[I],r),y=b}if(_===TI+"remove")if(x.constructor){let b=oC.get(x.constructor);b||(b=new x.constructor,oC.set(x.constructor,b)),_=b[y]}else _=0;if(M&&n)_?n.handlers[y]=_:delete n.handlers[y],n.eventCount=Object.keys(n.handlers).length;else if(A&&A.set&&(A.copy||A instanceof eh)){if(Array.isArray(_))A.fromArray?A.fromArray(_):A.set(..._);else if(A.copy&&_&&_.constructor&&A.constructor===_.constructor)A.copy(_);else if(_!==void 0){var h;const b=(h=A)==null?void 0:h.isColor;!b&&A.setScalar?A.setScalar(_):A instanceof eh&&_ instanceof eh?A.mask=_.mask:A.set(_),!wI()&&s&&!s.linear&&b&&A.convertSRGBToLinear()}}else{var f;if(x[y]=_,(f=x[y])!=null&&f.isTexture&&x[y].format===Wr&&x[y].type===Bs&&s){const b=x[y];tw(b)&&tw(s.gl)?b.colorSpace=s.gl.outputColorSpace:b.encoding=s.gl.outputEncoding}}Qd(r)}if(n&&n.parent&&r.raycast&&c!==n.eventCount){const g=Vv(r).getState().internal,y=g.interaction.indexOf(r);y>-1&&g.interaction.splice(y,1),n.eventCount&&g.interaction.push(r)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=r.__r3f)!=null&&t.parent&&B1(r),r}function Qd(r){var e,t;const n=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function B1(r){r.onUpdate==null||r.onUpdate(r)}function CI(r,e){r.manual||(SI(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function xv(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function p9(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return uf.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return uf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return uf.ContinuousEventPriority;default:return uf.DefaultEventPriority}}function PI(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function m9(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{PI(t.capturedMap,e,n,i)})}function g9(r){function e(c){const{internal:h}=r.getState(),f=c.offsetX-h.initialClick[0],m=c.offsetY-h.initialClick[1];return Math.round(Math.sqrt(f*f+m*m))}function t(c){return c.filter(h=>["Move","Over","Enter","Out","Leave"].some(f=>{var m;return(m=h.__r3f)==null?void 0:m.handlers["onPointer"+f]}))}function n(c,h){const f=r.getState(),m=new Set,g=[],y=h?h(f.internal.interaction):f.internal.interaction;for(let x=0;x<y.length;x++){const A=Yp(y[x]);A&&(A.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(c,f);function _(x){const A=Yp(x);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var b;A.events.compute==null||A.events.compute(c,A,(b=A.previousRoot)==null?void 0:b.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(x,!0):[]}let M=y.flatMap(_).sort((x,A)=>{const b=Yp(x.object),R=Yp(A.object);return!b||!R?x.distance-A.distance:R.events.priority-b.events.priority||x.distance-A.distance}).filter(x=>{const A=xv(x);return m.has(A)?!1:(m.add(A),!0)});f.events.filter&&(M=f.events.filter(M,f));for(const x of M){let A=x.object;for(;A;){var E;(E=A.__r3f)!=null&&E.eventCount&&g.push({...x,eventObject:A}),A=A.parent}}if("pointerId"in c&&f.internal.capturedMap.has(c.pointerId))for(let x of f.internal.capturedMap.get(c.pointerId).values())m.has(xv(x.intersection))||g.push(x.intersection);return g}function i(c,h,f,m){const g=r.getState();if(c.length){const y={stopped:!1};for(const _ of c){const M=Yp(_.object)||g,{raycaster:E,pointer:x,camera:A,internal:b}=M,R=new q(x.x,x.y,0).unproject(A),N=F=>{var Q,le;return(Q=(le=b.capturedMap.get(F))==null?void 0:le.has(_.eventObject))!=null?Q:!1},I=F=>{const Q={intersection:_,target:h.target};b.capturedMap.has(F)?b.capturedMap.get(F).set(_.eventObject,Q):b.capturedMap.set(F,new Map([[_.eventObject,Q]])),h.target.setPointerCapture(F)},O=F=>{const Q=b.capturedMap.get(F);Q&&PI(b.capturedMap,_.eventObject,Q,F)};let V={};for(let F in h){let Q=h[F];typeof Q!="function"&&(V[F]=Q)}let k={..._,...V,pointer:x,intersections:c,stopped:y.stopped,delta:f,unprojectedPoint:R,ray:E.ray,camera:A,stopPropagation(){const F="pointerId"in h&&b.capturedMap.get(h.pointerId);if((!F||F.has(_.eventObject))&&(k.stopped=y.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find(Q=>Q.eventObject===_.eventObject))){const Q=c.slice(0,c.indexOf(_));s([...Q,_])}},target:{hasPointerCapture:N,setPointerCapture:I,releasePointerCapture:O},currentTarget:{hasPointerCapture:N,setPointerCapture:I,releasePointerCapture:O},nativeEvent:h};if(m(k),y.stopped===!0)break}}return c}function s(c){const{internal:h}=r.getState();for(const f of h.hovered.values())if(!c.length||!c.find(m=>m.object===f.object&&m.index===f.index&&m.instanceId===f.instanceId)){const g=f.eventObject.__r3f,y=g?.handlers;if(h.hovered.delete(xv(f)),g!=null&&g.eventCount){const _={...f,intersections:c};y.onPointerOut==null||y.onPointerOut(_),y.onPointerLeave==null||y.onPointerLeave(_)}}}function o(c,h){for(let f=0;f<h.length;f++){const m=h[f].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(c)}}function a(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return h=>{const{internal:f}=r.getState();"pointerId"in h&&f.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(h.pointerId)&&(f.capturedMap.delete(h.pointerId),s([]))})}}return function(f){const{onPointerMissed:m,internal:g}=r.getState();g.lastEvent.current=f;const y=c==="onPointerMove",_=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",E=n(f,y?t:void 0),x=_?e(f):0;c==="onPointerDown"&&(g.initialClick=[f.offsetX,f.offsetY],g.initialHits=E.map(b=>b.eventObject)),_&&!E.length&&x<=2&&(o(f,g.interaction),m&&m(f)),y&&s(E);function A(b){const R=b.eventObject,N=R.__r3f,I=N?.handlers;if(N!=null&&N.eventCount)if(y){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const O=xv(b),V=g.hovered.get(O);V?V.stopped&&b.stopPropagation():(g.hovered.set(O,b),I.onPointerOver==null||I.onPointerOver(b),I.onPointerEnter==null||I.onPointerEnter(b))}I.onPointerMove==null||I.onPointerMove(b)}else{const O=I[c];O?(!_||g.initialHits.includes(R))&&(o(f,g.interaction.filter(V=>!g.initialHits.includes(V))),O(b)):_&&g.initialHits.includes(R)&&o(f,g.interaction.filter(V=>!g.initialHits.includes(V)))}}i(E,f,x,A)}}return{handlePointer:a}}const v9=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],RI=r=>!!(r!=null&&r.render),EE=j.createContext(null),y9=(r,e)=>{const t=gI((a,c)=>{const h=new q,f=new q,m=new q;function g(x=c().camera,A=f,b=c().size){const{width:R,height:N,top:I,left:O}=b,V=R/N;A.isVector3?m.copy(A):m.set(...A);const k=x.getWorldPosition(h).distanceTo(m);if(SI(x))return{width:R/x.zoom,height:N/x.zoom,top:I,left:O,factor:1,distance:k,aspect:V};{const F=x.fov*Math.PI/180,Q=2*Math.tan(F/2)*k,le=Q*(R/N);return{width:le,height:Q,top:I,left:O,factor:R/le,distance:k,aspect:V}}}let y;const _=x=>a(A=>({performance:{...A.performance,current:x}})),M=new Be;return{set:a,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(x=1)=>r(c(),x),advance:(x,A)=>e(x,A,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new vE,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=c();y&&clearTimeout(y),x.performance.current!==x.performance.min&&_(x.performance.min),y=setTimeout(()=>_(c().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:x=>a(A=>({...A,events:{...A.events,...x}})),setSize:(x,A,b,R,N)=>{const I=c().camera,O={width:x,height:A,top:R||0,left:N||0,updateStyle:b};a(V=>({size:O,viewport:{...V.viewport,...g(I,f,O)}}))},setDpr:x=>a(A=>{const b=bI(x);return{viewport:{...A.viewport,dpr:b,initialDpr:A.viewport.initialDpr||b}}}),setFrameloop:(x="always")=>{const A=c().clock;A.stop(),A.elapsedTime=0,x!=="never"&&(A.start(),A.elapsedTime=0),a(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:j.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,A,b)=>{const R=c().internal;return R.priority=R.priority+(A>0?1:0),R.subscribers.push({ref:x,priority:A,store:b}),R.subscribers=R.subscribers.sort((N,I)=>N.priority-I.priority),()=>{const N=c().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(A>0?1:0),N.subscribers=N.subscribers.filter(I=>I.ref!==x))}}}}}),n=t.getState();let i=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:a,size:c,viewport:h,gl:f,set:m}=t.getState();if(c.width!==i.width||c.height!==i.height||h.dpr!==s){var g;i=c,s=h.dpr,CI(a,c),f.setPixelRatio(h.dpr);const y=(g=c.updateStyle)!=null?g:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(c.width,c.height,y)}a!==o&&(o=a,m(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>r(a)),t};let wv,_9=new Set,x9=new Set,w9=new Set;function iw(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function Zp(r,e){switch(r){case"before":return iw(_9,e);case"after":return iw(x9,e);case"tail":return iw(w9,e)}}let sw,ow;function aw(r,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),sw=e.internal.subscribers,wv=0;wv<sw.length;wv++)ow=sw[wv],ow.ref.current(ow.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function S9(r){let e=!1,t=!1,n,i,s;function o(h){i=requestAnimationFrame(o),e=!0,n=0,Zp("before",h),t=!0;for(const m of r.values()){var f;s=m.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((f=s.gl.xr)!=null&&f.isPresenting)&&(n+=aw(h,s))}if(t=!1,Zp("after",h),n===0)return Zp("tail",h),e=!1,cancelAnimationFrame(i)}function a(h,f=1){var m;if(!h)return r.forEach(g=>a(g.store.getState(),f));(m=h.gl.xr)!=null&&m.isPresenting||!h.internal.active||h.frameloop==="never"||(f>1?h.internal.frames=Math.min(60,h.internal.frames+f):t?h.internal.frames=2:h.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function c(h,f=!0,m,g){if(f&&Zp("before",h),m)aw(h,m,g);else for(const y of r.values())aw(h,y.store.getState());f&&Zp("after",h)}return{loop:o,invalidate:a,advance:c}}function ME(){const r=j.useContext(EE);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Us(r=t=>t,e){return ME()(r,e)}function TE(r,e=0){const t=ME(),n=t.getState().internal.subscribe,i=EI(r);return yg(()=>n(i,e,t),[e,n,t]),null}const cC=new WeakMap;function LI(r,e){return function(t,...n){let i=cC.get(t);return i||(i=new t,cC.set(t,i)),r&&r(i),Promise.all(n.map(s=>new Promise((o,a)=>i.load(s,c=>{c.scene&&Object.assign(c,d9(c.scene)),o(c)},e,c=>a(new Error(`Could not load ${s}: ${c?.message}`))))))}}function Cf(r,e,t,n){const i=Array.isArray(e)?e:[e],s=e9(LI(t,n),[r,...i],{equal:nr.equ});return Array.isArray(e)?s:s[0]}Cf.preload=function(r,e,t){const n=Array.isArray(e)?e:[e];return t9(LI(t),[r,...n])};Cf.clear=function(r,e){const t=Array.isArray(e)?e:[e];return n9([r,...t])};const Pf=new Map,{invalidate:uC,advance:hC}=S9(Pf),{reconciler:Xm,applyProps:pc}=l9(Pf,p9),jd={objects:"shallow",strict:!1},E9=(r,e)=>{const t=typeof r=="function"?r(e):r;return RI(t)?t:new By({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...r})};function M9(r,e){const t=typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement;if(e){const{width:n,height:i,top:s,left:o,updateStyle:a=t}=e;return{width:n,height:i,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:n,height:i,top:s,left:o}=r.parentElement.getBoundingClientRect();return{width:n,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function T9(r){const e=Pf.get(r),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=n||y9(uC,hC),o=t||Xm.createContainer(s,uf.ConcurrentRoot,null,!1,null,"",i,null);e||Pf.set(r,{fiber:o,store:s});let a,c=!1,h;return{configure(f={}){let{gl:m,size:g,scene:y,events:_,onCreated:M,shadows:E=!1,linear:x=!1,flat:A=!1,legacy:b=!1,orthographic:R=!1,frameloop:N="always",dpr:I=[1,2],performance:O,raycaster:V,camera:k,onPointerMissed:F}=f,Q=s.getState(),le=Q.gl;Q.gl||Q.set({gl:le=E9(m,r)});let _e=Q.raycaster;_e||Q.set({raycaster:_e=new wE});const{params:Y,...me}=V||{};if(nr.equ(me,_e,jd)||pc(_e,{...me}),nr.equ(Y,_e.params,jd)||pc(_e,{params:{..._e.params,...Y}}),!Q.camera||Q.camera===h&&!nr.equ(h,k,jd)){h=k;const ee=k instanceof lg,H=ee?k:R?new fa(0,0,0,0,.1,1e3):new Mr(75,0,.1,1e3);ee||(H.position.z=5,k&&(pc(H,k),("aspect"in k||"left"in k||"right"in k||"bottom"in k||"top"in k)&&(H.manual=!0,H.updateProjectionMatrix())),!Q.camera&&!(k!=null&&k.rotation)&&H.lookAt(0,0,0)),Q.set({camera:H}),_e.camera=H}if(!Q.scene){let ee;y!=null&&y.isScene?ee=y:(ee=new hg,y&&pc(ee,y)),Q.set({scene:Jd(ee)})}if(!Q.xr){var ue;const ee=(ce,xe)=>{const ke=s.getState();ke.frameloop!=="never"&&hC(ce,!0,ke,xe)},H=()=>{const ce=s.getState();ce.gl.xr.enabled=ce.gl.xr.isPresenting,ce.gl.xr.setAnimationLoop(ce.gl.xr.isPresenting?ee:null),ce.gl.xr.isPresenting||uC(ce)},ne={connect(){const ce=s.getState().gl;ce.xr.addEventListener("sessionstart",H),ce.xr.addEventListener("sessionend",H)},disconnect(){const ce=s.getState().gl;ce.xr.removeEventListener("sessionstart",H),ce.xr.removeEventListener("sessionend",H)}};typeof((ue=le.xr)==null?void 0:ue.addEventListener)=="function"&&ne.connect(),Q.set({xr:ne})}if(le.shadowMap){const ee=le.shadowMap.enabled,H=le.shadowMap.type;if(le.shadowMap.enabled=!!E,nr.boo(E))le.shadowMap.type=pm;else if(nr.str(E)){var Ee;const ne={basic:g2,percentage:Ly,soft:pm,variance:zo};le.shadowMap.type=(Ee=ne[E])!=null?Ee:pm}else nr.obj(E)&&Object.assign(le.shadowMap,E);(ee!==le.shadowMap.enabled||H!==le.shadowMap.type)&&(le.shadowMap.needsUpdate=!0)}const Z=wI();Z&&("enabled"in Z?Z.enabled=!b:"legacyMode"in Z&&(Z.legacyMode=b)),c||pc(le,{outputEncoding:x?3e3:3001,toneMapping:A?da:CS}),Q.legacy!==b&&Q.set(()=>({legacy:b})),Q.linear!==x&&Q.set(()=>({linear:x})),Q.flat!==A&&Q.set(()=>({flat:A})),m&&!nr.fun(m)&&!RI(m)&&!nr.equ(m,le,jd)&&pc(le,m),_&&!Q.events.handlers&&Q.set({events:_(s)});const se=M9(r,g);return nr.equ(se,Q.size,jd)||Q.setSize(se.width,se.height,se.updateStyle,se.top,se.left),I&&Q.viewport.dpr!==bI(I)&&Q.setDpr(I),Q.frameloop!==N&&Q.setFrameloop(N),Q.onPointerMissed||Q.set({onPointerMissed:F}),O&&!nr.equ(O,Q.performance,jd)&&Q.set(ee=>({performance:{...ee.performance,...O}})),a=M,c=!0,this},render(f){return c||this.configure(),Xm.updateContainer(K.jsx(b9,{store:s,children:f,onCreated:a,rootElement:r}),o,null,()=>{}),s},unmount(){II(r)}}}function b9({store:r,children:e,onCreated:t,rootElement:n}){return yg(()=>{const i=r.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),K.jsx(EE.Provider,{value:r,children:e})}function II(r,e){const t=Pf.get(r),n=t?.fiber;if(n){const i=t?.store.getState();i&&(i.internal.active=!1),Xm.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var s,o,a,c;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(c=i.gl)!=null&&c.xr&&i.xr.disconnect(),f9(i),Pf.delete(r)}catch{}},500)})}}function A9(r,e,t){return K.jsx(C9,{children:r,container:e,state:t},e.uuid)}function C9({state:r={},children:e,container:t}){const{events:n,size:i,...s}=r,o=ME(),[a]=j.useState(()=>new wE),[c]=j.useState(()=>new Be),h=j.useCallback((m,g)=>{const y={...m};Object.keys(m).forEach(M=>{(v9.includes(M)||m[M]!==g[M]&&g[M])&&delete y[M]});let _;if(g&&i){const M=g.camera;_=m.viewport.getCurrentViewport(M,new q,i),M!==m.camera&&CI(M,i)}return{...y,scene:t,raycaster:a,pointer:c,mouse:c,previousRoot:o,events:{...m.events,...g?.events,...n},size:{...m.size,...i},viewport:{...m.viewport,..._},...s}},[r]),[f]=j.useState(()=>{const m=o.getState();return gI((y,_)=>({...m,scene:t,raycaster:a,pointer:c,mouse:c,previousRoot:o,events:{...m.events,...n},size:{...m.size,...i},...s,set:y,get:_,setEvents:M=>y(E=>({...E,events:{...E.events,...M}}))}))});return j.useEffect(()=>{const m=o.subscribe(g=>f.setState(y=>h(g,y)));return()=>{m()}},[h]),j.useEffect(()=>{f.setState(m=>h(o.getState(),m))},[h]),j.useEffect(()=>()=>{f.destroy()},[]),K.jsx(K.Fragment,{children:Xm.createPortal(K.jsx(EE.Provider,{value:f,children:e}),f,null)})}Xm.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:j.version});const lw={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function P9(r){const{handlePointer:e}=g9(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(lw).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:s}=r.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([o,a])=>{const[c,h]=lw[o];t.addEventListener(c,a,{passive:h})})},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([s,o])=>{if(n&&n.connected instanceof HTMLElement){const[a]=lw[s];n.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function dC(r,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...n),e)}}function R9({debounce:r,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=j.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=j.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=r?typeof r=="number"?r:r.scroll:null,h=r?typeof r=="number"?r:r.resize:null,f=j.useRef(!1);j.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[m,g,y]=j.useMemo(()=>{const x=()=>{if(!a.current.element)return;const{left:A,top:b,width:R,height:N,bottom:I,right:O,x:V,y:k}=a.current.element.getBoundingClientRect(),F={left:A,top:b,width:R,height:N,bottom:I,right:O,x:V,y:k};a.current.element instanceof HTMLElement&&n&&(F.height=a.current.element.offsetHeight,F.width=a.current.element.offsetWidth),Object.freeze(F),f.current&&!D9(a.current.lastBounds,F)&&o(a.current.lastBounds=F)};return[x,h?dC(x,h):x,c?dC(x,c):x]},[o,n,c,h]);function _(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",y,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function M(){a.current.element&&(a.current.resizeObserver=new i(y),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(x=>x.addEventListener("scroll",y,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const E=x=>{!x||x===a.current.element||(_(),a.current.element=x,a.current.scrollContainers=kI(x),M())};return I9(y,!!e),L9(g),j.useEffect(()=>{_(),M()},[e,y,g]),j.useEffect(()=>_,[]),[E,s,m]}function L9(r){j.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function I9(r,e){j.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function kI(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(s=>s==="auto"||s==="scroll")&&e.push(r),[...e,...kI(r.parentElement)]}const k9=["x","y","top","bottom","left","right","width","height"],D9=(r,e)=>k9.every(t=>r[t]===e[t]);var O9=Object.defineProperty,N9=Object.defineProperties,U9=Object.getOwnPropertyDescriptors,fC=Object.getOwnPropertySymbols,F9=Object.prototype.hasOwnProperty,B9=Object.prototype.propertyIsEnumerable,pC=(r,e,t)=>e in r?O9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,mC=(r,e)=>{for(var t in e||(e={}))F9.call(e,t)&&pC(r,t,e[t]);if(fC)for(var t of fC(e))B9.call(e,t)&&pC(r,t,e[t]);return r},z9=(r,e)=>N9(r,U9(e)),gC,vC;typeof window<"u"&&((gC=window.document)!=null&&gC.createElement||((vC=window.navigator)==null?void 0:vC.product)==="ReactNative")?j.useLayoutEffect:j.useEffect;function DI(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=r.child;for(;n;){const i=DI(n,e,t);if(i)return i;n=n.sibling}}function OI(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const yC=console.error;console.error=function(){const r=[...arguments].join("");if(r?.startsWith("Warning:")&&r.includes("useContext")){console.error=yC;return}return yC.apply(this,arguments)};const bE=OI(j.createContext(null));class NI extends j.Component{render(){return j.createElement(bE.Provider,{value:this._reactInternals},this.props.children)}}function V9(){const r=j.useContext(bE);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=j.useId();return j.useMemo(()=>{for(const n of[r,r?.alternate]){if(!n)continue;const i=DI(n,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[r,e])}function H9(){const r=V9(),[e]=j.useState(()=>new Map);e.clear();let t=r;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==bE&&!e.has(i)&&e.set(i,j.useContext(OI(i)))}t=t.return}return e}function G9(){const r=H9();return j.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>j.createElement(e,null,j.createElement(t.Provider,z9(mC({},n),{value:r.get(t)}))),e=>j.createElement(NI,mC({},e))),[r])}const W9=j.forwardRef(function({children:e,fallback:t,resize:n,style:i,gl:s,events:o=P9,eventSource:a,eventPrefix:c,shadows:h,linear:f,flat:m,legacy:g,orthographic:y,frameloop:_,dpr:M,performance:E,raycaster:x,camera:A,scene:b,onPointerMissed:R,onCreated:N,...I},O){j.useMemo(()=>xI(qj),[]);const V=G9(),[k,F]=R9({scroll:!0,debounce:{scroll:50,resize:0},...n}),Q=j.useRef(null),le=j.useRef(null);j.useImperativeHandle(O,()=>Q.current);const _e=EI(R),[Y,me]=j.useState(!1),[ue,Ee]=j.useState(!1);if(Y)throw Y;if(ue)throw ue;const Z=j.useRef(null);yg(()=>{const ee=Q.current;F.width>0&&F.height>0&&ee&&(Z.current||(Z.current=T9(ee)),Z.current.configure({gl:s,events:o,shadows:h,linear:f,flat:m,legacy:g,orthographic:y,frameloop:_,dpr:M,performance:E,raycaster:x,camera:A,scene:b,size:F,onPointerMissed:(...H)=>_e.current==null?void 0:_e.current(...H),onCreated:H=>{H.events.connect==null||H.events.connect(a?c9(a)?a.current:a:le.current),c&&H.setEvents({compute:(ne,ce)=>{const xe=ne[c+"X"],ke=ne[c+"Y"];ce.pointer.set(xe/ce.size.width*2-1,-(ke/ce.size.height)*2+1),ce.raycaster.setFromCamera(ce.pointer,ce.camera)}}),N?.(H)}}),Z.current.render(K.jsx(V,{children:K.jsx(MI,{set:Ee,children:K.jsx(j.Suspense,{fallback:K.jsx(u9,{set:me}),children:e??null})})})))}),j.useEffect(()=>{const ee=Q.current;if(ee)return()=>II(ee)},[]);const se=a?"none":"auto";return K.jsx("div",{ref:le,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:se,...i},...I,children:K.jsx("div",{ref:k,style:{width:"100%",height:"100%"},children:K.jsx("canvas",{ref:Q,style:{display:"block"},children:t})})})}),UI=j.forwardRef(function(e,t){return K.jsx(NI,{children:K.jsx(W9,{...e,ref:t})})});function hy(){return hy=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},hy.apply(null,arguments)}const AE=parseInt(sg.replace(/\D+/g,"")),j9=AE>=125?"uv1":"uv2";var oo=Uint8Array,yc=Uint16Array,z1=Uint32Array,FI=new oo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),BI=new oo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),X9=new oo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zI=function(r,e){for(var t=new yc(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new z1(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return[t,i]},VI=zI(FI,2),HI=VI[0],$9=VI[1];HI[28]=258,$9[258]=28;var q9=zI(BI,0),Y9=q9[0],V1=new yc(32768);for(var cr=0;cr<32768;++cr){var lc=(cr&43690)>>>1|(cr&21845)<<1;lc=(lc&52428)>>>2|(lc&13107)<<2,lc=(lc&61680)>>>4|(lc&3855)<<4,V1[cr]=((lc&65280)>>>8|(lc&255)<<8)>>>1}var wm=function(r,e,t){for(var n=r.length,i=0,s=new yc(e);i<n;++i)++s[r[i]-1];var o=new yc(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new yc(1<<e);var c=15-e;for(i=0;i<n;++i)if(r[i])for(var h=i<<4|r[i],f=e-r[i],m=o[r[i]-1]++<<f,g=m|(1<<f)-1;m<=g;++m)a[V1[m]>>>c]=h}else for(a=new yc(n),i=0;i<n;++i)r[i]&&(a[i]=V1[o[r[i]-1]++]>>>15-r[i]);return a},_g=new oo(288);for(var cr=0;cr<144;++cr)_g[cr]=8;for(var cr=144;cr<256;++cr)_g[cr]=9;for(var cr=256;cr<280;++cr)_g[cr]=7;for(var cr=280;cr<288;++cr)_g[cr]=8;var GI=new oo(32);for(var cr=0;cr<32;++cr)GI[cr]=5;var Z9=wm(_g,9,1),K9=wm(GI,5,1),cw=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},Fo=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},uw=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},J9=function(r){return(r/8|0)+(r&7&&1)},Q9=function(r,e,t){(t==null||t>r.length)&&(t=r.length);var n=new(r instanceof yc?yc:r instanceof z1?z1:oo)(t-e);return n.set(r.subarray(e,t)),n},e7=function(r,e,t){var n=r.length;if(!n||t&&!t.l&&n<5)return e||new oo(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new oo(n*3));var o=function(Re){var ze=e.length;if(Re>ze){var Ke=new oo(Math.max(ze*2,Re));Ke.set(e),e=Ke}},a=t.f||0,c=t.p||0,h=t.b||0,f=t.l,m=t.d,g=t.m,y=t.n,_=n*8;do{if(!f){t.f=a=Fo(r,c,1);var M=Fo(r,c+1,3);if(c+=3,M)if(M==1)f=Z9,m=K9,g=9,y=5;else if(M==2){var b=Fo(r,c,31)+257,R=Fo(r,c+10,15)+4,N=b+Fo(r,c+5,31)+1;c+=14;for(var I=new oo(N),O=new oo(19),V=0;V<R;++V)O[X9[V]]=Fo(r,c+V*3,7);c+=R*3;for(var k=cw(O),F=(1<<k)-1,Q=wm(O,k,1),V=0;V<N;){var le=Q[Fo(r,c,F)];c+=le&15;var E=le>>>4;if(E<16)I[V++]=E;else{var _e=0,Y=0;for(E==16?(Y=3+Fo(r,c,3),c+=2,_e=I[V-1]):E==17?(Y=3+Fo(r,c,7),c+=3):E==18&&(Y=11+Fo(r,c,127),c+=7);Y--;)I[V++]=_e}}var me=I.subarray(0,b),ue=I.subarray(b);g=cw(me),y=cw(ue),f=wm(me,g,1),m=wm(ue,y,1)}else throw"invalid block type";else{var E=J9(c)+4,x=r[E-4]|r[E-3]<<8,A=E+x;if(A>n){if(s)throw"unexpected EOF";break}i&&o(h+x),e.set(r.subarray(E,A),h),t.b=h+=x,t.p=c=A*8;continue}if(c>_){if(s)throw"unexpected EOF";break}}i&&o(h+131072);for(var Ee=(1<<g)-1,Z=(1<<y)-1,se=c;;se=c){var _e=f[uw(r,c)&Ee],ee=_e>>>4;if(c+=_e&15,c>_){if(s)throw"unexpected EOF";break}if(!_e)throw"invalid length/literal";if(ee<256)e[h++]=ee;else if(ee==256){se=c,f=null;break}else{var H=ee-254;if(ee>264){var V=ee-257,ne=FI[V];H=Fo(r,c,(1<<ne)-1)+HI[V],c+=ne}var ce=m[uw(r,c)&Z],xe=ce>>>4;if(!ce)throw"invalid distance";c+=ce&15;var ue=Y9[xe];if(xe>3){var ne=BI[xe];ue+=uw(r,c)&(1<<ne)-1,c+=ne}if(c>_){if(s)throw"unexpected EOF";break}i&&o(h+131072);for(var ke=h+H;h<ke;h+=4)e[h]=e[h-ue],e[h+1]=e[h+1-ue],e[h+2]=e[h+2-ue],e[h+3]=e[h+3-ue];h=ke}}t.l=f,t.p=se,t.b=h,f&&(a=1,t.m=g,t.d=m,t.n=y)}while(!a);return h==e.length?e:Q9(e,0,h)},t7=new oo(0),n7=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function rm(r,e){return e7((n7(r),r.subarray(2,-4)),e)}var r7=typeof TextDecoder<"u"&&new TextDecoder,i7=0;try{r7.decode(t7,{stream:!0}),i7=1}catch{}const s7=r=>r&&r.isCubeTexture;class o7 extends qn{constructor(e,t){var n,i;const s=s7(e),a=((i=s?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?i:1024)/4,c=Math.floor(Math.log2(a)),h=Math.pow(2,c),f=3*Math.max(h,16*7),m=4*h,g=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/f}`,`#define CUBEUV_TEXEL_HEIGHT ${1/m}`,`#define CUBEUV_MAX_MIP ${c}.0`],y=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,_=g.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${AE>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,M={map:{value:e},height:{value:t?.height||15},radius:{value:t?.radius||100}},E=new pg(1,16),x=new Ws({uniforms:M,fragmentShader:_,vertexShader:y,side:Go});super(E,x)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var a7=Object.defineProperty,l7=(r,e,t)=>e in r?a7(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,c7=(r,e,t)=>(l7(r,e+"",t),t);class u7{constructor(){c7(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var h7=Object.defineProperty,d7=(r,e,t)=>e in r?h7(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,jt=(r,e,t)=>(d7(r,typeof e!="symbol"?e+"":e,t),t);const Sv=new hh,_C=new al,f7=Math.cos(70*(Math.PI/180)),xC=(r,e)=>(r%e+e)%e;let p7=class extends u7{constructor(e,t){super(),jt(this,"object"),jt(this,"domElement"),jt(this,"enabled",!0),jt(this,"target",new q),jt(this,"minDistance",0),jt(this,"maxDistance",1/0),jt(this,"minZoom",0),jt(this,"maxZoom",1/0),jt(this,"minPolarAngle",0),jt(this,"maxPolarAngle",Math.PI),jt(this,"minAzimuthAngle",-1/0),jt(this,"maxAzimuthAngle",1/0),jt(this,"enableDamping",!1),jt(this,"dampingFactor",.05),jt(this,"enableZoom",!0),jt(this,"zoomSpeed",1),jt(this,"enableRotate",!0),jt(this,"rotateSpeed",1),jt(this,"enablePan",!0),jt(this,"panSpeed",1),jt(this,"screenSpacePanning",!0),jt(this,"keyPanSpeed",7),jt(this,"zoomToCursor",!1),jt(this,"autoRotate",!1),jt(this,"autoRotateSpeed",2),jt(this,"reverseOrbit",!1),jt(this,"reverseHorizontalOrbit",!1),jt(this,"reverseVerticalOrbit",!1),jt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),jt(this,"mouseButtons",{LEFT:Nu.ROTATE,MIDDLE:Nu.DOLLY,RIGHT:Nu.PAN}),jt(this,"touches",{ONE:Uu.ROTATE,TWO:Uu.DOLLY_PAN}),jt(this,"target0"),jt(this,"position0"),jt(this,"zoom0"),jt(this,"_domElementKeyEvents",null),jt(this,"getPolarAngle"),jt(this,"getAzimuthalAngle"),jt(this,"setPolarAngle"),jt(this,"setAzimuthalAngle"),jt(this,"getDistance"),jt(this,"getZoomScale"),jt(this,"listenToKeyEvents"),jt(this,"stopListenToKeyEvents"),jt(this,"saveState"),jt(this,"reset"),jt(this,"update"),jt(this,"connect"),jt(this,"dispose"),jt(this,"dollyIn"),jt(this,"dollyOut"),jt(this,"getScale"),jt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>f.phi,this.getAzimuthalAngle=()=>f.theta,this.setPolarAngle=he=>{let Ne=xC(he,2*Math.PI),tt=f.phi;tt<0&&(tt+=2*Math.PI),Ne<0&&(Ne+=2*Math.PI);let pt=Math.abs(Ne-tt);2*Math.PI-pt<pt&&(Ne<tt?Ne+=2*Math.PI:tt+=2*Math.PI),m.phi=Ne-tt,n.update()},this.setAzimuthalAngle=he=>{let Ne=xC(he,2*Math.PI),tt=f.theta;tt<0&&(tt+=2*Math.PI),Ne<0&&(Ne+=2*Math.PI);let pt=Math.abs(Ne-tt);2*Math.PI-pt<pt&&(Ne<tt?Ne+=2*Math.PI:tt+=2*Math.PI),m.theta=Ne-tt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=he=>{he.addEventListener("keydown",It),this._domElementKeyEvents=he},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",It),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),c=a.NONE},this.update=(()=>{const he=new q,Ne=new q(0,1,0),tt=new Xr().setFromUnitVectors(e.up,Ne),pt=tt.clone().invert(),Se=new q,de=new Xr,et=2*Math.PI;return function(){const Ut=n.object.position;tt.setFromUnitVectors(e.up,Ne),pt.copy(tt).invert(),he.copy(Ut).sub(n.target),he.applyQuaternion(tt),f.setFromVector3(he),n.autoRotate&&c===a.NONE&&Y(le()),n.enableDamping?(f.theta+=m.theta*n.dampingFactor,f.phi+=m.phi*n.dampingFactor):(f.theta+=m.theta,f.phi+=m.phi);let At=n.minAzimuthAngle,on=n.maxAzimuthAngle;isFinite(At)&&isFinite(on)&&(At<-Math.PI?At+=et:At>Math.PI&&(At-=et),on<-Math.PI?on+=et:on>Math.PI&&(on-=et),At<=on?f.theta=Math.max(At,Math.min(on,f.theta)):f.theta=f.theta>(At+on)/2?Math.max(At,f.theta):Math.min(on,f.theta)),f.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,f.phi)),f.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&k||n.object.isOrthographicCamera?f.radius=ce(f.radius):f.radius=ce(f.radius*g),he.setFromSpherical(f),he.applyQuaternion(pt),Ut.copy(n.target).add(he),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(m.theta*=1-n.dampingFactor,m.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(m.set(0,0,0),y.set(0,0,0));let gn=!1;if(n.zoomToCursor&&k){let Pn=null;if(n.object instanceof Mr&&n.object.isPerspectiveCamera){const Fn=he.length();Pn=ce(Fn*g);const hn=Fn-Pn;n.object.position.addScaledVector(O,hn),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Fn=new q(V.x,V.y,0);Fn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/g)),n.object.updateProjectionMatrix(),gn=!0;const hn=new q(V.x,V.y,0);hn.unproject(n.object),n.object.position.sub(hn).add(Fn),n.object.updateMatrixWorld(),Pn=he.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Pn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Pn).add(n.object.position):(Sv.origin.copy(n.object.position),Sv.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Sv.direction))<f7?e.lookAt(n.target):(_C.setFromNormalAndCoplanarPoint(n.object.up,n.target),Sv.intersectPlane(_C,n.target))))}else n.object instanceof fa&&n.object.isOrthographicCamera&&(gn=g!==1,gn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/g)),n.object.updateProjectionMatrix()));return g=1,k=!1,gn||Se.distanceToSquared(n.object.position)>h||8*(1-de.dot(n.object.quaternion))>h?(n.dispatchEvent(i),Se.copy(n.object.position),de.copy(n.object.quaternion),gn=!1,!0):!1}})(),this.connect=he=>{n.domElement=he,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",tn),n.domElement.addEventListener("pointerdown",We),n.domElement.addEventListener("pointercancel",Ve),n.domElement.addEventListener("wheel",vt)},this.dispose=()=>{var he,Ne,tt,pt,Se,de;n.domElement&&(n.domElement.style.touchAction="auto"),(he=n.domElement)==null||he.removeEventListener("contextmenu",tn),(Ne=n.domElement)==null||Ne.removeEventListener("pointerdown",We),(tt=n.domElement)==null||tt.removeEventListener("pointercancel",Ve),(pt=n.domElement)==null||pt.removeEventListener("wheel",vt),(Se=n.domElement)==null||Se.ownerDocument.removeEventListener("pointermove",He),(de=n.domElement)==null||de.ownerDocument.removeEventListener("pointerup",Ve),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",It)};const n=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=a.NONE;const h=1e-6,f=new U1,m=new U1;let g=1;const y=new q,_=new Be,M=new Be,E=new Be,x=new Be,A=new Be,b=new Be,R=new Be,N=new Be,I=new Be,O=new q,V=new Be;let k=!1;const F=[],Q={};function le(){return 2*Math.PI/60/60*n.autoRotateSpeed}function _e(){return Math.pow(.95,n.zoomSpeed)}function Y(he){n.reverseOrbit||n.reverseHorizontalOrbit?m.theta+=he:m.theta-=he}function me(he){n.reverseOrbit||n.reverseVerticalOrbit?m.phi+=he:m.phi-=he}const ue=(()=>{const he=new q;return function(tt,pt){he.setFromMatrixColumn(pt,0),he.multiplyScalar(-tt),y.add(he)}})(),Ee=(()=>{const he=new q;return function(tt,pt){n.screenSpacePanning===!0?he.setFromMatrixColumn(pt,1):(he.setFromMatrixColumn(pt,0),he.crossVectors(n.object.up,he)),he.multiplyScalar(tt),y.add(he)}})(),Z=(()=>{const he=new q;return function(tt,pt){const Se=n.domElement;if(Se&&n.object instanceof Mr&&n.object.isPerspectiveCamera){const de=n.object.position;he.copy(de).sub(n.target);let et=he.length();et*=Math.tan(n.object.fov/2*Math.PI/180),ue(2*tt*et/Se.clientHeight,n.object.matrix),Ee(2*pt*et/Se.clientHeight,n.object.matrix)}else Se&&n.object instanceof fa&&n.object.isOrthographicCamera?(ue(tt*(n.object.right-n.object.left)/n.object.zoom/Se.clientWidth,n.object.matrix),Ee(pt*(n.object.top-n.object.bottom)/n.object.zoom/Se.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function se(he){n.object instanceof Mr&&n.object.isPerspectiveCamera||n.object instanceof fa&&n.object.isOrthographicCamera?g=he:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ee(he){se(g/he)}function H(he){se(g*he)}function ne(he){if(!n.zoomToCursor||!n.domElement)return;k=!0;const Ne=n.domElement.getBoundingClientRect(),tt=he.clientX-Ne.left,pt=he.clientY-Ne.top,Se=Ne.width,de=Ne.height;V.x=tt/Se*2-1,V.y=-(pt/de)*2+1,O.set(V.x,V.y,1).unproject(n.object).sub(n.object.position).normalize()}function ce(he){return Math.max(n.minDistance,Math.min(n.maxDistance,he))}function xe(he){_.set(he.clientX,he.clientY)}function ke(he){ne(he),R.set(he.clientX,he.clientY)}function Re(he){x.set(he.clientX,he.clientY)}function ze(he){M.set(he.clientX,he.clientY),E.subVectors(M,_).multiplyScalar(n.rotateSpeed);const Ne=n.domElement;Ne&&(Y(2*Math.PI*E.x/Ne.clientHeight),me(2*Math.PI*E.y/Ne.clientHeight)),_.copy(M),n.update()}function Ke(he){N.set(he.clientX,he.clientY),I.subVectors(N,R),I.y>0?ee(_e()):I.y<0&&H(_e()),R.copy(N),n.update()}function st(he){A.set(he.clientX,he.clientY),b.subVectors(A,x).multiplyScalar(n.panSpeed),Z(b.x,b.y),x.copy(A),n.update()}function it(he){ne(he),he.deltaY<0?H(_e()):he.deltaY>0&&ee(_e()),n.update()}function ft(he){let Ne=!1;switch(he.code){case n.keys.UP:Z(0,n.keyPanSpeed),Ne=!0;break;case n.keys.BOTTOM:Z(0,-n.keyPanSpeed),Ne=!0;break;case n.keys.LEFT:Z(n.keyPanSpeed,0),Ne=!0;break;case n.keys.RIGHT:Z(-n.keyPanSpeed,0),Ne=!0;break}Ne&&(he.preventDefault(),n.update())}function oe(){if(F.length==1)_.set(F[0].pageX,F[0].pageY);else{const he=.5*(F[0].pageX+F[1].pageX),Ne=.5*(F[0].pageY+F[1].pageY);_.set(he,Ne)}}function Xe(){if(F.length==1)x.set(F[0].pageX,F[0].pageY);else{const he=.5*(F[0].pageX+F[1].pageX),Ne=.5*(F[0].pageY+F[1].pageY);x.set(he,Ne)}}function Ue(){const he=F[0].pageX-F[1].pageX,Ne=F[0].pageY-F[1].pageY,tt=Math.sqrt(he*he+Ne*Ne);R.set(0,tt)}function Je(){n.enableZoom&&Ue(),n.enablePan&&Xe()}function Fe(){n.enableZoom&&Ue(),n.enableRotate&&oe()}function Rt(he){if(F.length==1)M.set(he.pageX,he.pageY);else{const tt=xt(he),pt=.5*(he.pageX+tt.x),Se=.5*(he.pageY+tt.y);M.set(pt,Se)}E.subVectors(M,_).multiplyScalar(n.rotateSpeed);const Ne=n.domElement;Ne&&(Y(2*Math.PI*E.x/Ne.clientHeight),me(2*Math.PI*E.y/Ne.clientHeight)),_.copy(M)}function dt(he){if(F.length==1)A.set(he.pageX,he.pageY);else{const Ne=xt(he),tt=.5*(he.pageX+Ne.x),pt=.5*(he.pageY+Ne.y);A.set(tt,pt)}b.subVectors(A,x).multiplyScalar(n.panSpeed),Z(b.x,b.y),x.copy(A)}function X(he){const Ne=xt(he),tt=he.pageX-Ne.x,pt=he.pageY-Ne.y,Se=Math.sqrt(tt*tt+pt*pt);N.set(0,Se),I.set(0,Math.pow(N.y/R.y,n.zoomSpeed)),ee(I.y),R.copy(N)}function G(he){n.enableZoom&&X(he),n.enablePan&&dt(he)}function we(he){n.enableZoom&&X(he),n.enableRotate&&Rt(he)}function We(he){var Ne,tt;n.enabled!==!1&&(F.length===0&&((Ne=n.domElement)==null||Ne.ownerDocument.addEventListener("pointermove",He),(tt=n.domElement)==null||tt.ownerDocument.addEventListener("pointerup",Ve)),en(he),he.pointerType==="touch"?Vt(he):Mt(he))}function He(he){n.enabled!==!1&&(he.pointerType==="touch"?Ge(he):at(he))}function Ve(he){var Ne,tt,pt;Ft(he),F.length===0&&((Ne=n.domElement)==null||Ne.releasePointerCapture(he.pointerId),(tt=n.domElement)==null||tt.ownerDocument.removeEventListener("pointermove",He),(pt=n.domElement)==null||pt.ownerDocument.removeEventListener("pointerup",Ve)),n.dispatchEvent(o),c=a.NONE}function Mt(he){let Ne;switch(he.button){case 0:Ne=n.mouseButtons.LEFT;break;case 1:Ne=n.mouseButtons.MIDDLE;break;case 2:Ne=n.mouseButtons.RIGHT;break;default:Ne=-1}switch(Ne){case Nu.DOLLY:if(n.enableZoom===!1)return;ke(he),c=a.DOLLY;break;case Nu.ROTATE:if(he.ctrlKey||he.metaKey||he.shiftKey){if(n.enablePan===!1)return;Re(he),c=a.PAN}else{if(n.enableRotate===!1)return;xe(he),c=a.ROTATE}break;case Nu.PAN:if(he.ctrlKey||he.metaKey||he.shiftKey){if(n.enableRotate===!1)return;xe(he),c=a.ROTATE}else{if(n.enablePan===!1)return;Re(he),c=a.PAN}break;default:c=a.NONE}c!==a.NONE&&n.dispatchEvent(s)}function at(he){if(n.enabled!==!1)switch(c){case a.ROTATE:if(n.enableRotate===!1)return;ze(he);break;case a.DOLLY:if(n.enableZoom===!1)return;Ke(he);break;case a.PAN:if(n.enablePan===!1)return;st(he);break}}function vt(he){n.enabled===!1||n.enableZoom===!1||c!==a.NONE&&c!==a.ROTATE||(he.preventDefault(),n.dispatchEvent(s),it(he),n.dispatchEvent(o))}function It(he){n.enabled===!1||n.enablePan===!1||ft(he)}function Vt(he){switch(yt(he),F.length){case 1:switch(n.touches.ONE){case Uu.ROTATE:if(n.enableRotate===!1)return;oe(),c=a.TOUCH_ROTATE;break;case Uu.PAN:if(n.enablePan===!1)return;Xe(),c=a.TOUCH_PAN;break;default:c=a.NONE}break;case 2:switch(n.touches.TWO){case Uu.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Je(),c=a.TOUCH_DOLLY_PAN;break;case Uu.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Fe(),c=a.TOUCH_DOLLY_ROTATE;break;default:c=a.NONE}break;default:c=a.NONE}c!==a.NONE&&n.dispatchEvent(s)}function Ge(he){switch(yt(he),c){case a.TOUCH_ROTATE:if(n.enableRotate===!1)return;Rt(he),n.update();break;case a.TOUCH_PAN:if(n.enablePan===!1)return;dt(he),n.update();break;case a.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;G(he),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;we(he),n.update();break;default:c=a.NONE}}function tn(he){n.enabled!==!1&&he.preventDefault()}function en(he){F.push(he)}function Ft(he){delete Q[he.pointerId];for(let Ne=0;Ne<F.length;Ne++)if(F[Ne].pointerId==he.pointerId){F.splice(Ne,1);return}}function yt(he){let Ne=Q[he.pointerId];Ne===void 0&&(Ne=new Be,Q[he.pointerId]=Ne),Ne.set(he.pageX,he.pageY)}function xt(he){const Ne=he.pointerId===F[0].pointerId?F[1]:F[0];return Q[Ne.pointerId]}this.dollyIn=(he=_e())=>{H(he),n.update()},this.dollyOut=(he=_e())=>{ee(he),n.update()},this.getScale=()=>g,this.setScale=he=>{se(he),n.update()},this.getZoomScale=()=>_e(),t!==void 0&&this.connect(t),this.update()}};function WI(r){if(typeof TextDecoder<"u")return new TextDecoder().decode(r);let e="";for(let t=0,n=r.length;t<n;t++)e+=String.fromCharCode(r[t]);try{return decodeURIComponent(escape(e))}catch{return e}}function jI(r,e,t){const n=t.length-r-1;if(e>=t[n])return n-1;if(e<=t[r])return r;let i=r,s=n,o=Math.floor((i+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:i=o,o=Math.floor((i+s)/2);return o}function m7(r,e,t,n){const i=[],s=[],o=[];i[0]=1;for(let a=1;a<=t;++a){s[a]=e-n[r+1-a],o[a]=n[r+a]-e;let c=0;for(let h=0;h<a;++h){const f=o[h+1],m=s[a-h],g=i[h]/(f+m);i[h]=c+f*g,c=m*g}i[a]=c}return i}function g7(r,e,t,n){const i=jI(r,n,e),s=m7(i,n,r,e),o=new Ln(0,0,0,0);for(let a=0;a<=r;++a){const c=t[i-r+a],h=s[a],f=c.w*h;o.x+=c.x*f,o.y+=c.y*f,o.z+=c.z*f,o.w+=c.w*h}return o}function v7(r,e,t,n,i){const s=[];for(let m=0;m<=t;++m)s[m]=0;const o=[];for(let m=0;m<=n;++m)o[m]=s.slice(0);const a=[];for(let m=0;m<=t;++m)a[m]=s.slice(0);a[0][0]=1;const c=s.slice(0),h=s.slice(0);for(let m=1;m<=t;++m){c[m]=e-i[r+1-m],h[m]=i[r+m]-e;let g=0;for(let y=0;y<m;++y){const _=h[y+1],M=c[m-y];a[m][y]=_+M;const E=a[y][m-1]/a[m][y];a[y][m]=g+_*E,g=M*E}a[m][m]=g}for(let m=0;m<=t;++m)o[0][m]=a[m][t];for(let m=0;m<=t;++m){let g=0,y=1;const _=[];for(let M=0;M<=t;++M)_[M]=s.slice(0);_[0][0]=1;for(let M=1;M<=n;++M){let E=0;const x=m-M,A=t-M;m>=M&&(_[y][0]=_[g][0]/a[A+1][x],E=_[y][0]*a[x][A]);const b=x>=-1?1:-x,R=m-1<=A?M-1:t-m;for(let I=b;I<=R;++I)_[y][I]=(_[g][I]-_[g][I-1])/a[A+1][x+I],E+=_[y][I]*a[x+I][A];m<=A&&(_[y][M]=-_[g][M-1]/a[A+1][m],E+=_[y][M]*a[m][A]),o[M][m]=E;const N=g;g=y,y=N}}let f=t;for(let m=1;m<=n;++m){for(let g=0;g<=t;++g)o[m][g]*=f;f*=t-m}return o}function y7(r,e,t,n,i){const s=i<r?i:r,o=[],a=jI(r,n,e),c=v7(a,n,r,s,e),h=[];for(let f=0;f<t.length;++f){const m=t[f].clone(),g=m.w;m.x*=g,m.y*=g,m.z*=g,h[f]=m}for(let f=0;f<=s;++f){const m=h[a-r].clone().multiplyScalar(c[f][0]);for(let g=1;g<=r;++g)m.add(h[a-r+g].clone().multiplyScalar(c[f][g]));o[f]=m}for(let f=s+1;f<=i+1;++f)o[f]=new Ln(0,0,0);return o}function _7(r,e){let t=1;for(let i=2;i<=r;++i)t*=i;let n=1;for(let i=2;i<=e;++i)n*=i;for(let i=2;i<=r-e;++i)n*=i;return t/n}function x7(r){const e=r.length,t=[],n=[];for(let s=0;s<e;++s){const o=r[s];t[s]=new q(o.x,o.y,o.z),n[s]=o.w}const i=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(i[s-a].clone().multiplyScalar(_7(s,a)*n[a]));i[s]=o.divideScalar(n[0])}return i}function w7(r,e,t,n,i){const s=y7(r,e,t,n,i);return x7(s)}class wC extends co{constructor(e,t,n,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<n.length;++o){const a=n[o];this.controlPoints[o]=new Ln(a.x,a.y,a.z,a.w)}}getPoint(e,t){const n=t||new q,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=g7(this.degree,this.knots,this.controlPoints,i);return s.w!=1&&s.divideScalar(s.w),n.set(s.x,s.y,s.z)}getTangent(e,t){const n=t||new q,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=w7(this.degree,this.knots,this.controlPoints,i,1);return n.copy(s[1]).normalize(),n}}let Sn,Rr,vs;class xg extends Vi{constructor(e){super(e)}load(e,t,n,i){const s=this,o=s.path===""?uy.extractUrlBase(e):s.path,a=new xs(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(c){try{t(s.parse(c,o))}catch(h){i?i(h):console.error(h),s.manager.itemError(e)}},n,i)}parse(e,t){if(A7(e))Sn=new b7().parse(e);else{const i=YI(e);if(!C7(i))throw new Error("THREE.FBXLoader: Unknown format.");if(EC(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+EC(i));Sn=new T7().parse(i)}const n=new sI(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new S7(n,this.manager).parse(Sn)}}class S7{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Rr=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),i=this.parseDeformers(),s=new E7().parse(i);return this.parseScene(i,s,n),vs}parseConnections(){const e=new Map;return"Connections"in Sn&&Sn.Connections.connections.forEach(function(n){const i=n[0],s=n[1],o=n[2];e.has(i)||e.set(i,{parents:[],children:[]});const a={ID:s,relationship:o};e.get(i).parents.push(a),e.has(s)||e.set(s,{parents:[],children:[]});const c={ID:i,relationship:o};e.get(s).children.push(c)}),e}parseImages(){const e={},t={};if("Video"in Sn.Objects){const n=Sn.Objects.Video;for(const i in n){const s=n[i],o=parseInt(i);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,c=typeof s.Content=="string"&&s.Content!=="";if(a||c){const h=this.parseImage(n[i]);t[s.RelativeFilename||s.Filename]=h}}}}for(const n in e){const i=e[n];t[i]!==void 0?e[n]=t[i]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,i=n.slice(n.lastIndexOf(".")+1).toLowerCase();let s;switch(i){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",n),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in Sn.Objects){const n=Sn.Objects.Texture;for(const i in n){const s=this.parseTexture(n[i],e);t.set(parseInt(i),s)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,o=i!==void 0?i.value:0,a=s!==void 0?s.value:0;if(n.wrapS=o===0?rh:rr,n.wrapT=a===0?rh:rr,"Scaling"in e){const c=e.Scaling.value;n.repeat.x=c[0],n.repeat.y=c[1]}return n}loadTexture(e,t){let n;const i=this.textureLoader.path,s=Rr.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(n=t[s[0].ID],(n.indexOf("blob:")===0||n.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const c=this.manager.getHandler(".tga");c===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new Gn):(c.setPath(this.textureLoader.path),o=c.load(n))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new Gn):o=this.textureLoader.load(n);return this.textureLoader.setPath(i),o}parseMaterials(e){const t=new Map;if("Material"in Sn.Objects){const n=Sn.Objects.Material;for(const i in n){const s=this.parseMaterial(n[i],e);s!==null&&t.set(parseInt(i),s)}}return t}parseMaterial(e,t){const n=e.id,i=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Rr.has(n))return null;const o=this.parseParameters(e,t,n);let a;switch(s.toLowerCase()){case"phong":a=new xm;break;case"lambert":a=new aE;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new xm;break}return a.setValues(o),a.name=i,a}parseParameters(e,t,n){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new gt().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new gt().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new gt().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new gt().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new gt().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new gt().fromArray(e.SpecularColor.value));const s=this;return Rr.get(n).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":i.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,o.ID),i.map!==void 0&&("colorSpace"in i.map?i.map.colorSpace="srgb":i.map.encoding=3001);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,o.ID),i.emissiveMap!==void 0&&("colorSpace"in i.emissiveMap?i.emissiveMap.colorSpace="srgb":i.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,o.ID),i.envMap!==void 0&&(i.envMap.mapping=nh,"colorSpace"in i.envMap?i.envMap.colorSpace="srgb":i.envMap.encoding=3001);break;case"SpecularColor":i.specularMap=s.getTexture(t,o.ID),i.specularMap!==void 0&&("colorSpace"in i.specularMap?i.specularMap.colorSpace="srgb":i.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,o.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),i}getTexture(e,t){return"LayeredTexture"in Sn.Objects&&t in Sn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Rr.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Sn.Objects){const n=Sn.Objects.Deformer;for(const i in n){const s=n[i],o=Rr.get(parseInt(i));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,n);a.ID=i,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[i]=a}else if(s.attrType==="BlendShape"){const a={id:i};a.rawTargets=this.parseMorphTargets(o,n),a.id=i,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach(function(i){const s=t[i.ID];if(s.attrType!=="Cluster")return;const o={ID:i.ID,indices:[],weights:[],transformLink:new bt().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),n.push(o)}),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let i=0;i<e.children.length;i++){const s=e.children[i],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=Rr.get(parseInt(s.ID)).children.filter(function(c){return c.relationship===void 0})[0].ID,n.push(a)}return n}parseScene(e,t,n){vs=new vc;const i=this.parseModels(e.skeletons,t,n),s=Sn.Objects.Model,o=this;i.forEach(function(c){const h=s[c.ID];o.setLookAtProperties(c,h),Rr.get(c.ID).parents.forEach(function(m){const g=i.get(m.ID);g!==void 0&&g.add(c)}),c.parent===null&&vs.add(c)}),this.bindSkeleton(e.skeletons,t,i),this.createAmbientLight(),vs.traverse(function(c){if(c.userData.transformData){c.parent&&(c.userData.transformData.parentMatrix=c.parent.matrix,c.userData.transformData.parentMatrixWorld=c.parent.matrixWorld);const h=$I(c.userData.transformData);c.applyMatrix4(h),c.updateWorldMatrix()}});const a=new M7().parse();vs.children.length===1&&vs.children[0].isGroup&&(vs.children[0].animations=a,vs=vs.children[0]),vs.animations=a}parseModels(e,t,n){const i=new Map,s=Sn.Objects.Model;for(const o in s){const a=parseInt(o),c=s[o],h=Rr.get(a);let f=this.buildSkeleton(h,e,a,c.attrName);if(!f){switch(c.attrType){case"Camera":f=this.createCamera(h);break;case"Light":f=this.createLight(h);break;case"Mesh":f=this.createMesh(h,t,n);break;case"NurbsCurve":f=this.createCurve(h,t);break;case"LimbNode":case"Root":f=new zm;break;case"Null":default:f=new vc;break}f.name=c.attrName?En.sanitizeNodeName(c.attrName):"",f.ID=a}this.getTransformData(f,c),i.set(a,f)}return i}buildSkeleton(e,t,n,i){let s=null;return e.parents.forEach(function(o){for(const a in t){const c=t[a];c.rawBones.forEach(function(h,f){if(h.ID===o.ID){const m=s;s=new zm,s.matrixWorld.copy(h.transformLink),s.name=i?En.sanitizeNodeName(i):"",s.ID=n,c.bones[f]=s,m!==null&&s.add(m)}})}}),s}createCamera(e){let t,n;if(e.children.forEach(function(i){const s=Sn.Objects.NodeAttribute[i.ID];s!==void 0&&(n=s)}),n===void 0)t=new bn;else{let i=0;n.CameraProjectionType!==void 0&&n.CameraProjectionType.value===1&&(i=1);let s=1;n.NearPlane!==void 0&&(s=n.NearPlane.value/1e3);let o=1e3;n.FarPlane!==void 0&&(o=n.FarPlane.value/1e3);let a=window.innerWidth,c=window.innerHeight;n.AspectWidth!==void 0&&n.AspectHeight!==void 0&&(a=n.AspectWidth.value,c=n.AspectHeight.value);const h=a/c;let f=45;n.FieldOfView!==void 0&&(f=n.FieldOfView.value);const m=n.FocalLength?n.FocalLength.value:null;switch(i){case 0:t=new Mr(f,h,s,o),m!==null&&t.setFocalLength(m);break;case 1:t=new fa(-a/2,a/2,c/2,-c/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new bn;break}}return t}createLight(e){let t,n;if(e.children.forEach(function(i){const s=Sn.Objects.NodeAttribute[i.ID];s!==void 0&&(n=s)}),n===void 0)t=new bn;else{let i;n.LightType===void 0?i=0:i=n.LightType.value;let s=16777215;n.Color!==void 0&&(s=new gt().fromArray(n.Color.value));let o=n.Intensity===void 0?1:n.Intensity.value/100;n.CastLightOnObject!==void 0&&n.CastLightOnObject.value===0&&(o=0);let a=0;n.FarAttenuationEnd!==void 0&&(n.EnableFarAttenuation!==void 0&&n.EnableFarAttenuation.value===0?a=0:a=n.FarAttenuationEnd.value);const c=1;switch(i){case 0:t=new cy(s,o,a,c);break;case 1:t=new pE(s,o);break;case 2:let h=Math.PI/3;n.InnerAngle!==void 0&&(h=Wo.degToRad(n.InnerAngle.value));let f=0;n.OuterAngle!==void 0&&(f=Wo.degToRad(n.OuterAngle.value),f=Math.max(f,1)),t=new fE(s,o,a,h,f,c);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new cy(s,o);break}n.CastShadows!==void 0&&n.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,n){let i,s=null,o=null;const a=[];return e.children.forEach(function(c){t.has(c.ID)&&(s=t.get(c.ID)),n.has(c.ID)&&a.push(n.get(c.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new xm({color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(c){c.vertexColors=!0}),s.FBX_Deformer?(i=new JS(s,o),i.normalizeSkinWeights()):i=new qn(s,o),i}createCurve(e,t){const n=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),i=new zi({color:3342591,linewidth:1});return new vl(n,i)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?n.eulerOrder=qI(t.RotationOrder.value):n.eulerOrder="ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&Rr.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const s=Sn.Objects.Model[i.ID];if("Lcl_Translation"in s){const o=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(o),vs.add(e.target)):e.lookAt(new q().fromArray(o))}}})}bindSkeleton(e,t,n){const i=this.parsePoseNodes();for(const s in e){const o=e[s];Rr.get(parseInt(o.ID)).parents.forEach(function(c){if(t.has(c.ID)){const h=c.ID;Rr.get(h).parents.forEach(function(m){n.has(m.ID)&&n.get(m.ID).bind(new dg(o.bones),i[m.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Sn.Objects){const t=Sn.Objects.Pose;for(const n in t)if(t[n].attrType==="BindPose"&&t[n].NbPoseNodes>0){const i=t[n].PoseNode;Array.isArray(i)?i.forEach(function(s){e[s.Node]=new bt().fromArray(s.Matrix.a)}):e[i.Node]=new bt().fromArray(i.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Sn&&"AmbientColor"in Sn.GlobalSettings){const e=Sn.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],i=e[2];if(t!==0||n!==0||i!==0){const s=new gt(t,n,i);vs.add(new mE(s,1))}}}}class E7{parse(e){const t=new Map;if("Geometry"in Sn.Objects){const n=Sn.Objects.Geometry;for(const i in n){const s=Rr.get(parseInt(i)),o=this.parseGeometry(s,n[i],e);t.set(parseInt(i),o)}}return t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const i=n.skeletons,s=[],o=e.parents.map(function(m){return Sn.Objects.Model[m.ID]});if(o.length===0)return;const a=e.children.reduce(function(m,g){return i[g.ID]!==void 0&&(m=i[g.ID]),m},null);e.children.forEach(function(m){n.morphTargets[m.ID]!==void 0&&s.push(n.morphTargets[m.ID])});const c=o[0],h={};"RotationOrder"in c&&(h.eulerOrder=qI(c.RotationOrder.value)),"InheritType"in c&&(h.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(h.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(h.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(h.scale=c.GeometricScaling.value);const f=$I(h);return this.genGeometry(t,a,s,f)}genGeometry(e,t,n,i){const s=new sn;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),c=new Ct(a.vertex,3);if(c.applyMatrix4(i),s.setAttribute("position",c),a.colors.length>0&&s.setAttribute("color",new Ct(a.colors,3)),t&&(s.setAttribute("skinIndex",new Uy(a.weightsIndices,4)),s.setAttribute("skinWeight",new Ct(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const h=new pn().getNormalMatrix(i),f=new Ct(a.normal,3);f.applyNormalMatrix(h),s.setAttribute("normal",f)}if(a.uvs.forEach(function(h,f){j9==="uv2"&&f++;const m=f===0?"uv":`uv${f}`;s.setAttribute(m,new Ct(a.uvs[f],2))}),o.material&&o.material.mappingType!=="AllSame"){let h=a.materialIndex[0],f=0;if(a.materialIndex.forEach(function(m,g){m!==h&&(s.addGroup(f,g-f,h),h=m,f=g)}),s.groups.length>0){const m=s.groups[s.groups.length-1],g=m.start+m.count;g!==a.materialIndex.length&&s.addGroup(g,a.materialIndex.length-g,h)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,n,i),s}parseGeoNode(e,t){const n={};if(n.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],n.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return n.weightTable={},t!==null&&(n.skeleton=t,t.rawBones.forEach(function(i,s){i.indices.forEach(function(o,a){n.weightTable[o]===void 0&&(n.weightTable[o]=[]),n.weightTable[o].push({id:s,weight:i.weights[a]})})})),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,i=0,s=!1,o=[],a=[],c=[],h=[],f=[],m=[];const g=this;return e.vertexIndices.forEach(function(y,_){let M,E=!1;y<0&&(y=y^-1,E=!0);let x=[],A=[];if(o.push(y*3,y*3+1,y*3+2),e.color){const b=Ev(_,n,y,e.color);c.push(b[0],b[1],b[2])}if(e.skeleton){if(e.weightTable[y]!==void 0&&e.weightTable[y].forEach(function(b){A.push(b.weight),x.push(b.id)}),A.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const b=[0,0,0,0],R=[0,0,0,0];A.forEach(function(N,I){let O=N,V=x[I];R.forEach(function(k,F,Q){if(O>k){Q[F]=O,O=k;const le=b[F];b[F]=V,V=le}})}),x=b,A=R}for(;A.length<4;)A.push(0),x.push(0);for(let b=0;b<4;++b)f.push(A[b]),m.push(x[b])}if(e.normal){const b=Ev(_,n,y,e.normal);a.push(b[0],b[1],b[2])}e.material&&e.material.mappingType!=="AllSame"&&(M=Ev(_,n,y,e.material)[0]),e.uv&&e.uv.forEach(function(b,R){const N=Ev(_,n,y,b);h[R]===void 0&&(h[R]=[]),h[R].push(N[0]),h[R].push(N[1])}),i++,E&&(g.genFace(t,e,o,M,a,c,h,f,m,i),n++,i=0,o=[],a=[],c=[],h=[],f=[],m=[])}),t}genFace(e,t,n,i,s,o,a,c,h,f){for(let m=2;m<f;m++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[(m-1)*3]]),e.vertex.push(t.vertexPositions[n[(m-1)*3+1]]),e.vertex.push(t.vertexPositions[n[(m-1)*3+2]]),e.vertex.push(t.vertexPositions[n[m*3]]),e.vertex.push(t.vertexPositions[n[m*3+1]]),e.vertex.push(t.vertexPositions[n[m*3+2]]),t.skeleton&&(e.vertexWeights.push(c[0]),e.vertexWeights.push(c[1]),e.vertexWeights.push(c[2]),e.vertexWeights.push(c[3]),e.vertexWeights.push(c[(m-1)*4]),e.vertexWeights.push(c[(m-1)*4+1]),e.vertexWeights.push(c[(m-1)*4+2]),e.vertexWeights.push(c[(m-1)*4+3]),e.vertexWeights.push(c[m*4]),e.vertexWeights.push(c[m*4+1]),e.vertexWeights.push(c[m*4+2]),e.vertexWeights.push(c[m*4+3]),e.weightsIndices.push(h[0]),e.weightsIndices.push(h[1]),e.weightsIndices.push(h[2]),e.weightsIndices.push(h[3]),e.weightsIndices.push(h[(m-1)*4]),e.weightsIndices.push(h[(m-1)*4+1]),e.weightsIndices.push(h[(m-1)*4+2]),e.weightsIndices.push(h[(m-1)*4+3]),e.weightsIndices.push(h[m*4]),e.weightsIndices.push(h[m*4+1]),e.weightsIndices.push(h[m*4+2]),e.weightsIndices.push(h[m*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(m-1)*3]),e.colors.push(o[(m-1)*3+1]),e.colors.push(o[(m-1)*3+2]),e.colors.push(o[m*3]),e.colors.push(o[m*3+1]),e.colors.push(o[m*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(m-1)*3]),e.normal.push(s[(m-1)*3+1]),e.normal.push(s[(m-1)*3+2]),e.normal.push(s[m*3]),e.normal.push(s[m*3+1]),e.normal.push(s[m*3+2])),t.uv&&t.uv.forEach(function(g,y){e.uvs[y]===void 0&&(e.uvs[y]=[]),e.uvs[y].push(a[y][0]),e.uvs[y].push(a[y][1]),e.uvs[y].push(a[y][(m-1)*2]),e.uvs[y].push(a[y][(m-1)*2+1]),e.uvs[y].push(a[y][m*2]),e.uvs[y].push(a[y][m*2+1])})}addMorphTargets(e,t,n,i){if(n.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;n.forEach(function(o){o.rawTargets.forEach(function(a){const c=Sn.Objects.Geometry[a.geoID];c!==void 0&&s.genMorphGeometry(e,t,c,i,a.name)})})}genMorphGeometry(e,t,n,i,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=n.Vertices!==void 0?n.Vertices.a:[],c=n.Indexes!==void 0?n.Indexes.a:[],h=e.attributes.position.count*3,f=new Float32Array(h);for(let _=0;_<c.length;_++){const M=c[_]*3;f[M]=a[_*3],f[M+1]=a[_*3+1],f[M+2]=a[_*3+2]}const m={vertexIndices:o,vertexPositions:f},g=this.genBuffers(m),y=new Ct(g.vertex,3);y.name=s||n.attrName,y.applyMatrix4(i),e.morphAttributes.position.push(y)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Normals.a;let s=[];return n==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:s,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.UV.a;let s=[];return n==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:i,indices:s,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Colors.a;let s=[];return n==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const i=e.Materials.a,s=[];for(let o=0;o<i.length;++o)s.push(o);return{dataSize:1,buffer:i,indices:s,mappingType:t,referenceType:n}}parseNurbsGeometry(e){if(wC===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new sn;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new sn;const n=t-1,i=e.KnotVector.a,s=[],o=e.Points.a;for(let m=0,g=o.length;m<g;m+=4)s.push(new Ln().fromArray(o,m));let a,c;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=n,c=i.length-1-a;for(let m=0;m<n;++m)s.push(s[m])}const f=new wC(n,i,s,a,c).getPoints(s.length*12);return new sn().setFromPoints(f)}}class M7{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const n in t){const i=t[n],s=this.addClip(i);e.push(s)}return e}parseClips(){if(Sn.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Sn.Objects.AnimationCurveNode,t=new Map;for(const n in e){const i=e[n];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:i.id,attr:i.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=Sn.Objects.AnimationCurve;for(const n in t){const i={id:t[n].id,times:t[n].KeyTime.a.map(P7),values:t[n].KeyValueFloat.a},s=Rr.get(i.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=i:a.match(/Y/)?e.get(o).curves.y=i:a.match(/Z/)?e.get(o).curves.z=i:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=i)}}}parseAnimationLayers(e){const t=Sn.Objects.AnimationLayer,n=new Map;for(const i in t){const s=[],o=Rr.get(parseInt(i));o!==void 0&&(o.children.forEach(function(c,h){if(e.has(c.ID)){const f=e.get(c.ID);if(f.curves.x!==void 0||f.curves.y!==void 0||f.curves.z!==void 0){if(s[h]===void 0){const m=Rr.get(c.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID;if(m!==void 0){const g=Sn.Objects.Model[m.toString()];if(g===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",c);return}const y={modelName:g.attrName?En.sanitizeNodeName(g.attrName):"",ID:g.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};vs.traverse(function(_){_.ID===g.id&&(y.transform=_.matrix,_.userData.transformData&&(y.eulerOrder=_.userData.transformData.eulerOrder))}),y.transform||(y.transform=new bt),"PreRotation"in g&&(y.preRotation=g.PreRotation.value),"PostRotation"in g&&(y.postRotation=g.PostRotation.value),s[h]=y}}s[h]&&(s[h][f.attr]=f)}else if(f.curves.morph!==void 0){if(s[h]===void 0){const m=Rr.get(c.ID).parents.filter(function(x){return x.relationship!==void 0})[0].ID,g=Rr.get(m).parents[0].ID,y=Rr.get(g).parents[0].ID,_=Rr.get(y).parents[0].ID,M=Sn.Objects.Model[_],E={modelName:M.attrName?En.sanitizeNodeName(M.attrName):"",morphName:Sn.Objects.Deformer[m].attrName};s[h]=E}s[h][f.attr]=f}}}),n.set(parseInt(i),s))}return n}parseAnimStacks(e){const t=Sn.Objects.AnimationStack,n={};for(const i in t){const s=Rr.get(parseInt(i)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);n[i]={name:t[i].attrName,layer:o}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach(function(i){t=t.concat(n.generateTracks(i))}),new Af(e.name,-1,t)}generateTracks(e){const t=[];let n=new q,i=new Xr,s=new q;if(e.transform&&e.transform.decompose(n,i,s),n=n.toArray(),i=new ca().setFromQuaternion(i,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,n,i){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,n);return new bf(e+"."+i,s,o)}generateRotationTrack(e,t,n,i,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Wo.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Wo.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Wo.degToRad));const a=this.getTimesForAllAxes(t),c=this.getKeyframeTrackValues(a,t,n);i!==void 0&&(i=i.map(Wo.degToRad),i.push(o),i=new ca().fromArray(i),i=new Xr().setFromEuler(i)),s!==void 0&&(s=s.map(Wo.degToRad),s.push(o),s=new ca().fromArray(s),s=new Xr().setFromEuler(s).invert());const h=new Xr,f=new ca,m=[];for(let g=0;g<c.length;g+=3)f.set(c[g],c[g+1],c[g+2],o),h.setFromEuler(f),i!==void 0&&h.premultiply(i),s!==void 0&&h.multiply(s),h.toArray(m,g/3*4);return new mh(e+".quaternion",a,m)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map(function(s){return s/100}),i=vs.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Tf(e.modelName+".morphTargetInfluences["+i+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(n,i){return n-i}),t.length>1){let n=1,i=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==i&&(t[n]=o,i=o,n++)}t=t.slice(0,n)}return t}getKeyframeTrackValues(e,t,n){const i=n,s=[];let o=-1,a=-1,c=-1;return e.forEach(function(h){if(t.x&&(o=t.x.times.indexOf(h)),t.y&&(a=t.y.times.indexOf(h)),t.z&&(c=t.z.times.indexOf(h)),o!==-1){const f=t.x.values[o];s.push(f),i[0]=f}else s.push(i[0]);if(a!==-1){const f=t.y.values[a];s.push(f),i[1]=f}else s.push(i[1]);if(c!==-1){const f=t.z.values[c];s.push(f),i[2]=f}else s.push(i[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],i=e.values[t]-n,s=Math.abs(i);if(s>=180){const o=s/180,a=i/o;let c=n+a;const h=e.times[t-1],m=(e.times[t]-h)/o;let g=h+m;const y=[],_=[];for(;g<e.times[t];)y.push(g),g+=m,_.push(c),c+=a;e.times=MC(e.times,t,y),e.values=MC(e.values,t,_)}}}}class T7{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new XI,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach(function(i,s){const o=i.match(/^[\s\t]*;/),a=i.match(/^[\s\t]*$/);if(o||a)return;const c=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),h=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),f=i.match("^\\t{"+(t.currentIndent-1)+"}}");c?t.parseNodeBegin(i,c):h?t.parseNodeProperty(i,h,n[++s]):f?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(c){return c.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:n},o=this.parseNodeAttr(i),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(n,s):n in a?(n==="PoseNode"?a.PoseNode.push(s):a[n].id!==void 0&&(a[n]={},a[n][a[n].id]=a[n]),o.id!==""&&(a[n][o.id]=s)):typeof o.id=="number"?(a[n]={},a[n][o.id]=s):n!=="Properties70"&&(n==="PoseNode"?a[n]=[s]:a[n]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",i="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:n,type:i}}parseNodeProperty(e,t,n){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&s===","&&(s=n.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,i,s);return}if(i==="C"){const c=s.split(",").slice(1),h=parseInt(c[0]),f=parseInt(c[1]);let m=s.split(",").slice(3);m=m.map(function(g){return g.trim().replace(/^"/,"")}),i="connections",s=[h,f],L7(s,m),o[i]===void 0&&(o[i]=[])}i==="Node"&&(o.id=s),i in o&&Array.isArray(o[i])?o[i].push(s):i!=="a"?o[i]=s:o.a=s,this.setCurrentProp(o,i),i==="a"&&s.slice(-1)!==","&&(o.a=dw(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=dw(t.a))}parseNodeSpecialProperty(e,t,n){const i=n.split('",').map(function(f){return f.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=i[0],o=i[1],a=i[2],c=i[3];let h=i[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":h=parseFloat(h);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":h=dw(h);break}this.getPrevNode()[s]={type:o,type2:a,flag:c,value:h},this.setCurrentProp(this.getPrevNode(),s)}}class b7{parse(e){const t=new SC(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const i=new XI;for(;!this.endOfContent(t);){const s=this.parseNode(t,n);s!==null&&i.add(s.name,s)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},i=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(i===0)return null;const c=[];for(let g=0;g<s;g++)c.push(this.parseProperty(e));const h=c.length>0?c[0]:"",f=c.length>1?c[1]:"",m=c.length>2?c[2]:"";for(n.singleProperty=s===1&&e.getOffset()===i;i>e.getOffset();){const g=this.parseNode(e,t);g!==null&&this.parseSubNode(a,n,g)}return n.propertyList=c,typeof h=="number"&&(n.id=h),f!==""&&(n.attrName=f),m!==""&&(n.attrType=m),a!==""&&(n.name=a),n}parseSubNode(e,t,n){if(n.singleProperty===!0){const i=n.propertyList[0];Array.isArray(i)?(t[n.name]=n,n.a=i):t[n.name]=i}else if(e==="Connections"&&n.name==="C"){const i=[];n.propertyList.forEach(function(s,o){o!==0&&i.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(n.name==="Properties70")Object.keys(n).forEach(function(s){t[s]=n[s]});else if(e==="Properties70"&&n.name==="P"){let i=n.propertyList[0],s=n.propertyList[1];const o=n.propertyList[2],a=n.propertyList[3];let c;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?c=[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:c=n.propertyList[4],t[i]={type:s,type2:o,flag:a,value:c}}else t[n.name]===void 0?typeof n.id=="number"?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:n.name==="PoseNode"?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):t[n.name][n.id]===void 0&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const a=rm(new Uint8Array(e.getArrayBuffer(o))),c=new SC(a.buffer);switch(t){case"b":case"c":return c.getBooleanArray(i);case"d":return c.getFloat64Array(i);case"f":return c.getFloat32Array(i);case"i":return c.getInt32Array(i);case"l":return c.getInt64Array(i)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class SC{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let i=0;i<e;i++)t[i]=this.getUint8();const n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),WI(new Uint8Array(t))}}class XI{add(e,t){this[e]=t}}function A7(r){const e="Kaydara FBX Binary  \0";return r.byteLength>=e.length&&e===YI(r,0,e.length)}function C7(r){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function n(i){const s=r[i-1];return r=r.slice(t+i),t++,s}for(let i=0;i<e.length;++i)if(n(1)===e[i])return!1;return!0}function EC(r){const e=/FBXVersion: (\d+)/,t=r.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function P7(r){return r/46186158e3}const R7=[];function Ev(r,e,t,n){let i;switch(n.mappingType){case"ByPolygonVertex":i=r;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}n.referenceType==="IndexToDirect"&&(i=n.indices[i]);const s=i*n.dataSize,o=s+n.dataSize;return I7(R7,n.buffer,s,o)}const hw=new ca,Xd=new q;function $I(r){const e=new bt,t=new bt,n=new bt,i=new bt,s=new bt,o=new bt,a=new bt,c=new bt,h=new bt,f=new bt,m=new bt,g=new bt,y=r.inheritType?r.inheritType:0;if(r.translation&&e.setPosition(Xd.fromArray(r.translation)),r.preRotation){const F=r.preRotation.map(Wo.degToRad);F.push(r.eulerOrder),t.makeRotationFromEuler(hw.fromArray(F))}if(r.rotation){const F=r.rotation.map(Wo.degToRad);F.push(r.eulerOrder),n.makeRotationFromEuler(hw.fromArray(F))}if(r.postRotation){const F=r.postRotation.map(Wo.degToRad);F.push(r.eulerOrder),i.makeRotationFromEuler(hw.fromArray(F)),i.invert()}r.scale&&s.scale(Xd.fromArray(r.scale)),r.scalingOffset&&a.setPosition(Xd.fromArray(r.scalingOffset)),r.scalingPivot&&o.setPosition(Xd.fromArray(r.scalingPivot)),r.rotationOffset&&c.setPosition(Xd.fromArray(r.rotationOffset)),r.rotationPivot&&h.setPosition(Xd.fromArray(r.rotationPivot)),r.parentMatrixWorld&&(m.copy(r.parentMatrix),f.copy(r.parentMatrixWorld));const _=t.clone().multiply(n).multiply(i),M=new bt;M.extractRotation(f);const E=new bt;E.copyPosition(f);const x=E.clone().invert().multiply(f),A=M.clone().invert().multiply(x),b=s,R=new bt;if(y===0)R.copy(M).multiply(_).multiply(A).multiply(b);else if(y===1)R.copy(M).multiply(A).multiply(_).multiply(b);else{const Q=new bt().scale(new q().setFromMatrixScale(m)).clone().invert(),le=A.clone().multiply(Q);R.copy(M).multiply(_).multiply(le).multiply(b)}const N=h.clone().invert(),I=o.clone().invert();let O=e.clone().multiply(c).multiply(h).multiply(t).multiply(n).multiply(i).multiply(N).multiply(a).multiply(o).multiply(s).multiply(I);const V=new bt().copyPosition(O),k=f.clone().multiply(V);return g.copyPosition(k),O=g.clone().multiply(R),O.premultiply(f.invert()),O}function qI(r){r=r||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return r===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[r]}function dw(r){return r.split(",").map(function(t){return parseFloat(t)})}function YI(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=r.byteLength),WI(new Uint8Array(r,e,t))}function L7(r,e){for(let t=0,n=r.length,i=e.length;t<i;t++,n++)r[n]=e[t]}function I7(r,e,t,n){for(let i=t,s=0;i<n;i++,s++)r[s]=e[i];return r}function MC(r,e,t){return r.slice(0,e).concat(t).concat(r.slice(e))}class k7 extends hE{constructor(e){super(e),this.type=di}parse(e){const o=function(V,k){switch(V){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(k||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(k||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(k||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(k||""))}},f=`
`,m=function(V,k,F){k=k||1024;let le=V.pos,_e=-1,Y=0,me="",ue=String.fromCharCode.apply(null,new Uint16Array(V.subarray(le,le+128)));for(;0>(_e=ue.indexOf(f))&&Y<k&&le<V.byteLength;)me+=ue,Y+=ue.length,le+=128,ue+=String.fromCharCode.apply(null,new Uint16Array(V.subarray(le,le+128)));return-1<_e?(V.pos+=Y+_e+1,me+ue.slice(0,_e)):!1},g=function(V){const k=/^#\?(\S+)/,F=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Q=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,le=/^\s*FORMAT=(\S+)\s*$/,_e=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Y={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let me,ue;for((V.pos>=V.byteLength||!(me=m(V)))&&o(1,"no header found"),(ue=me.match(k))||o(3,"bad initial token"),Y.valid|=1,Y.programtype=ue[1],Y.string+=me+`
`;me=m(V),me!==!1;){if(Y.string+=me+`
`,me.charAt(0)==="#"){Y.comments+=me+`
`;continue}if((ue=me.match(F))&&(Y.gamma=parseFloat(ue[1])),(ue=me.match(Q))&&(Y.exposure=parseFloat(ue[1])),(ue=me.match(le))&&(Y.valid|=2,Y.format=ue[1]),(ue=me.match(_e))&&(Y.valid|=4,Y.height=parseInt(ue[1],10),Y.width=parseInt(ue[2],10)),Y.valid&2&&Y.valid&4)break}return Y.valid&2||o(3,"missing format specifier"),Y.valid&4||o(3,"missing image size specifier"),Y},y=function(V,k,F){const Q=k;if(Q<8||Q>32767||V[0]!==2||V[1]!==2||V[2]&128)return new Uint8Array(V);Q!==(V[2]<<8|V[3])&&o(3,"wrong scanline width");const le=new Uint8Array(4*k*F);le.length||o(4,"unable to allocate buffer space");let _e=0,Y=0;const me=4*Q,ue=new Uint8Array(4),Ee=new Uint8Array(me);let Z=F;for(;Z>0&&Y<V.byteLength;){Y+4>V.byteLength&&o(1),ue[0]=V[Y++],ue[1]=V[Y++],ue[2]=V[Y++],ue[3]=V[Y++],(ue[0]!=2||ue[1]!=2||(ue[2]<<8|ue[3])!=Q)&&o(3,"bad rgbe scanline format");let se=0,ee;for(;se<me&&Y<V.byteLength;){ee=V[Y++];const ne=ee>128;if(ne&&(ee-=128),(ee===0||se+ee>me)&&o(3,"bad scanline data"),ne){const ce=V[Y++];for(let xe=0;xe<ee;xe++)Ee[se++]=ce}else Ee.set(V.subarray(Y,Y+ee),se),se+=ee,Y+=ee}const H=Q;for(let ne=0;ne<H;ne++){let ce=0;le[_e]=Ee[ne+ce],ce+=Q,le[_e+1]=Ee[ne+ce],ce+=Q,le[_e+2]=Ee[ne+ce],ce+=Q,le[_e+3]=Ee[ne+ce],_e+=4}Z--}return le},_=function(V,k,F,Q){const le=V[k+3],_e=Math.pow(2,le-128)/255;F[Q+0]=V[k+0]*_e,F[Q+1]=V[k+1]*_e,F[Q+2]=V[k+2]*_e,F[Q+3]=1},M=function(V,k,F,Q){const le=V[k+3],_e=Math.pow(2,le-128)/255;F[Q+0]=$u.toHalfFloat(Math.min(V[k+0]*_e,65504)),F[Q+1]=$u.toHalfFloat(Math.min(V[k+1]*_e,65504)),F[Q+2]=$u.toHalfFloat(Math.min(V[k+2]*_e,65504)),F[Q+3]=$u.toHalfFloat(1)},E=new Uint8Array(e);E.pos=0;const x=g(E),A=x.width,b=x.height,R=y(E.subarray(E.pos),A,b);let N,I,O;switch(this.type){case jr:O=R.length/4;const V=new Float32Array(O*4);for(let F=0;F<O;F++)_(R,F*4,V,F*4);N=V,I=jr;break;case di:O=R.length/4;const k=new Uint16Array(O*4);for(let F=0;F<O;F++)M(R,F*4,k,F*4);N=k,I=di;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:A,height:b,data:N,header:x.string,gamma:x.gamma,exposure:x.exposure,type:I}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(o,a){switch(o.type){case jr:case di:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Dn,o.magFilter=Dn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,n,i)}}const Kp=AE>=152;class D7 extends hE{constructor(e){super(e),this.type=di}parse(e){const k=Math.pow(2.7182818,2.2);function F(B,W){for(var fe=0,U=0;U<65536;++U)(U==0||B[U>>3]&1<<(U&7))&&(W[fe++]=U);for(var $=fe-1;fe<65536;)W[fe++]=0;return $}function Q(B){for(var W=0;W<16384;W++)B[W]={},B[W].len=0,B[W].lit=0,B[W].p=null}const le={l:0,c:0,lc:0};function _e(B,W,fe,U,$){for(;fe<B;)W=W<<8|xt(U,$),fe+=8;fe-=B,le.l=W>>fe&(1<<B)-1,le.c=W,le.lc=fe}const Y=new Array(59);function me(B){for(var W=0;W<=58;++W)Y[W]=0;for(var W=0;W<65537;++W)Y[B[W]]+=1;for(var fe=0,W=58;W>0;--W){var U=fe+Y[W]>>1;Y[W]=fe,fe=U}for(var W=0;W<65537;++W){var $=B[W];$>0&&(B[W]=$|Y[$]++<<6)}}function ue(B,W,fe,U,$,J,ae){for(var ie=fe,Ce=0,Le=0;$<=J;$++){if(ie.value-fe.value>U)return!1;_e(6,Ce,Le,B,ie);var De=le.l;if(Ce=le.c,Le=le.lc,ae[$]=De,De==63){if(ie.value-fe.value>U)throw"Something wrong with hufUnpackEncTable";_e(8,Ce,Le,B,ie);var be=le.l+6;if(Ce=le.c,Le=le.lc,$+be>J+1)throw"Something wrong with hufUnpackEncTable";for(;be--;)ae[$++]=0;$--}else if(De>=59){var be=De-59+2;if($+be>J+1)throw"Something wrong with hufUnpackEncTable";for(;be--;)ae[$++]=0;$--}}me(ae)}function Ee(B){return B&63}function Z(B){return B>>6}function se(B,W,fe,U){for(;W<=fe;W++){var $=Z(B[W]),J=Ee(B[W]);if($>>J)throw"Invalid table entry";if(J>14){var ae=U[$>>J-14];if(ae.len)throw"Invalid table entry";if(ae.lit++,ae.p){var ie=ae.p;ae.p=new Array(ae.lit);for(var Ce=0;Ce<ae.lit-1;++Ce)ae.p[Ce]=ie[Ce]}else ae.p=new Array(1);ae.p[ae.lit-1]=W}else if(J)for(var Le=0,Ce=1<<14-J;Ce>0;Ce--){var ae=U[($<<14-J)+Le];if(ae.len||ae.p)throw"Invalid table entry";ae.len=J,ae.lit=W,Le++}}return!0}const ee={c:0,lc:0};function H(B,W,fe,U){B=B<<8|xt(fe,U),W+=8,ee.c=B,ee.lc=W}const ne={c:0,lc:0};function ce(B,W,fe,U,$,J,ae,ie,Ce,Le){if(B==W){U<8&&(H(fe,U,$,ae),fe=ee.c,U=ee.lc),U-=8;var De=fe>>U,De=new Uint8Array([De])[0];if(Ce.value+De>Le)return!1;for(var be=ie[Ce.value-1];De-- >0;)ie[Ce.value++]=be}else if(Ce.value<Le)ie[Ce.value++]=B;else return!1;ne.c=fe,ne.lc=U}function xe(B){return B&65535}function ke(B){var W=xe(B);return W>32767?W-65536:W}const Re={a:0,b:0};function ze(B,W){var fe=ke(B),U=ke(W),$=U,J=fe+($&1)+($>>1),ae=J,ie=J-$;Re.a=ae,Re.b=ie}function Ke(B,W){var fe=xe(B),U=xe(W),$=fe-(U>>1)&65535,J=U+$-32768&65535;Re.a=J,Re.b=$}function st(B,W,fe,U,$,J,ae){for(var ie=ae<16384,Ce=fe>$?$:fe,Le=1,De;Le<=Ce;)Le<<=1;for(Le>>=1,De=Le,Le>>=1;Le>=1;){for(var be=0,wt=be+J*($-De),je=J*Le,Ye=J*De,St=U*Le,Nt=U*De,Bt,$t,ut,lt;be<=wt;be+=Ye){for(var Xt=be,Ht=be+U*(fe-De);Xt<=Ht;Xt+=Nt){var qt=Xt+St,kn=Xt+je,Yn=kn+St;ie?(ze(B[Xt+W],B[kn+W]),Bt=Re.a,ut=Re.b,ze(B[qt+W],B[Yn+W]),$t=Re.a,lt=Re.b,ze(Bt,$t),B[Xt+W]=Re.a,B[qt+W]=Re.b,ze(ut,lt),B[kn+W]=Re.a,B[Yn+W]=Re.b):(Ke(B[Xt+W],B[kn+W]),Bt=Re.a,ut=Re.b,Ke(B[qt+W],B[Yn+W]),$t=Re.a,lt=Re.b,Ke(Bt,$t),B[Xt+W]=Re.a,B[qt+W]=Re.b,Ke(ut,lt),B[kn+W]=Re.a,B[Yn+W]=Re.b)}if(fe&Le){var kn=Xt+je;ie?ze(B[Xt+W],B[kn+W]):Ke(B[Xt+W],B[kn+W]),Bt=Re.a,B[kn+W]=Re.b,B[Xt+W]=Bt}}if($&Le)for(var Xt=be,Ht=be+U*(fe-De);Xt<=Ht;Xt+=Nt){var qt=Xt+St;ie?ze(B[Xt+W],B[qt+W]):Ke(B[Xt+W],B[qt+W]),Bt=Re.a,B[qt+W]=Re.b,B[Xt+W]=Bt}De=Le,Le>>=1}return be}function it(B,W,fe,U,$,J,ae,ie,Ce,Le){for(var De=0,be=0,wt=ie,je=Math.trunc($.value+(J+7)/8);$.value<je;)for(H(De,be,fe,$),De=ee.c,be=ee.lc;be>=14;){var Ye=De>>be-14&16383,St=W[Ye];if(St.len)be-=St.len,ce(St.lit,ae,De,be,fe,U,$,Ce,Le,wt),De=ne.c,be=ne.lc;else{if(!St.p)throw"hufDecode issues";var Nt;for(Nt=0;Nt<St.lit;Nt++){for(var Bt=Ee(B[St.p[Nt]]);be<Bt&&$.value<je;)H(De,be,fe,$),De=ee.c,be=ee.lc;if(be>=Bt&&Z(B[St.p[Nt]])==(De>>be-Bt&(1<<Bt)-1)){be-=Bt,ce(St.p[Nt],ae,De,be,fe,U,$,Ce,Le,wt),De=ne.c,be=ne.lc;break}}if(Nt==St.lit)throw"hufDecode issues"}}var $t=8-J&7;for(De>>=$t,be-=$t;be>0;){var St=W[De<<14-be&16383];if(St.len)be-=St.len,ce(St.lit,ae,De,be,fe,U,$,Ce,Le,wt),De=ne.c,be=ne.lc;else throw"hufDecode issues"}return!0}function ft(B,W,fe,U,$,J){var ae={value:0},ie=fe.value,Ce=yt(W,fe),Le=yt(W,fe);fe.value+=4;var De=yt(W,fe);if(fe.value+=4,Ce<0||Ce>=65537||Le<0||Le>=65537)throw"Something wrong with HUF_ENCSIZE";var be=new Array(65537),wt=new Array(16384);Q(wt);var je=U-(fe.value-ie);if(ue(B,W,fe,je,Ce,Le,be),De>8*(U-(fe.value-ie)))throw"Something wrong with hufUncompress";se(be,Ce,Le,wt),it(be,wt,B,W,fe,De,Le,J,$,ae)}function oe(B,W,fe){for(var U=0;U<fe;++U)W[U]=B[W[U]]}function Xe(B){for(var W=1;W<B.length;W++){var fe=B[W-1]+B[W]-128;B[W]=fe}}function Ue(B,W){for(var fe=0,U=Math.floor((B.length+1)/2),$=0,J=B.length-1;!($>J||(W[$++]=B[fe++],$>J));)W[$++]=B[U++]}function Je(B){for(var W=B.byteLength,fe=new Array,U=0,$=new DataView(B);W>0;){var J=$.getInt8(U++);if(J<0){var ae=-J;W-=ae+1;for(var ie=0;ie<ae;ie++)fe.push($.getUint8(U++))}else{var ae=J;W-=2;for(var Ce=$.getUint8(U++),ie=0;ie<ae+1;ie++)fe.push(Ce)}}return fe}function Fe(B,W,fe,U,$,J){var qt=new DataView(J.buffer),ae=fe[B.idx[0]].width,ie=fe[B.idx[0]].height,Ce=3,Le=Math.floor(ae/8),De=Math.ceil(ae/8),be=Math.ceil(ie/8),wt=ae-(De-1)*8,je=ie-(be-1)*8,Ye={value:0},St=new Array(Ce),Nt=new Array(Ce),Bt=new Array(Ce),$t=new Array(Ce),ut=new Array(Ce);for(let an=0;an<Ce;++an)ut[an]=W[B.idx[an]],St[an]=an<1?0:St[an-1]+De*be,Nt[an]=new Float32Array(64),Bt[an]=new Uint16Array(64),$t[an]=new Uint16Array(De*64);for(let an=0;an<be;++an){var lt=8;an==be-1&&(lt=je);var Xt=8;for(let nn=0;nn<De;++nn){nn==De-1&&(Xt=wt);for(let yn=0;yn<Ce;++yn)Bt[yn].fill(0),Bt[yn][0]=$[St[yn]++],Rt(Ye,U,Bt[yn]),dt(Bt[yn],Nt[yn]),X(Nt[yn]);G(Nt);for(let yn=0;yn<Ce;++yn)we(Nt[yn],$t[yn],nn*64)}let sr=0;for(let nn=0;nn<Ce;++nn){const yn=fe[B.idx[nn]].type;for(let zn=8*an;zn<8*an+lt;++zn){sr=ut[nn][zn];for(let Mi=0;Mi<Le;++Mi){const Tr=Mi*64+(zn&7)*8;qt.setUint16(sr+0*2*yn,$t[nn][Tr+0],!0),qt.setUint16(sr+1*2*yn,$t[nn][Tr+1],!0),qt.setUint16(sr+2*2*yn,$t[nn][Tr+2],!0),qt.setUint16(sr+3*2*yn,$t[nn][Tr+3],!0),qt.setUint16(sr+4*2*yn,$t[nn][Tr+4],!0),qt.setUint16(sr+5*2*yn,$t[nn][Tr+5],!0),qt.setUint16(sr+6*2*yn,$t[nn][Tr+6],!0),qt.setUint16(sr+7*2*yn,$t[nn][Tr+7],!0),sr+=8*2*yn}}if(Le!=De)for(let zn=8*an;zn<8*an+lt;++zn){const Mi=ut[nn][zn]+8*Le*2*yn,Tr=Le*64+(zn&7)*8;for(let Xs=0;Xs<Xt;++Xs)qt.setUint16(Mi+Xs*2*yn,$t[nn][Tr+Xs],!0)}}}for(var Ht=new Uint16Array(ae),qt=new DataView(J.buffer),kn=0;kn<Ce;++kn){fe[B.idx[kn]].decoded=!0;var Yn=fe[B.idx[kn]].type;if(fe[kn].type==2)for(var Bn=0;Bn<ie;++Bn){const an=ut[kn][Bn];for(var vn=0;vn<ae;++vn)Ht[vn]=qt.getUint16(an+vn*2*Yn,!0);for(var vn=0;vn<ae;++vn)qt.setFloat32(an+vn*2*Yn,Se(Ht[vn]),!0)}}}function Rt(B,W,fe){for(var U,$=1;$<64;)U=W[B.value],U==65280?$=64:U>>8==255?$+=U&255:(fe[$]=U,$++),B.value++}function dt(B,W){W[0]=Se(B[0]),W[1]=Se(B[1]),W[2]=Se(B[5]),W[3]=Se(B[6]),W[4]=Se(B[14]),W[5]=Se(B[15]),W[6]=Se(B[27]),W[7]=Se(B[28]),W[8]=Se(B[2]),W[9]=Se(B[4]),W[10]=Se(B[7]),W[11]=Se(B[13]),W[12]=Se(B[16]),W[13]=Se(B[26]),W[14]=Se(B[29]),W[15]=Se(B[42]),W[16]=Se(B[3]),W[17]=Se(B[8]),W[18]=Se(B[12]),W[19]=Se(B[17]),W[20]=Se(B[25]),W[21]=Se(B[30]),W[22]=Se(B[41]),W[23]=Se(B[43]),W[24]=Se(B[9]),W[25]=Se(B[11]),W[26]=Se(B[18]),W[27]=Se(B[24]),W[28]=Se(B[31]),W[29]=Se(B[40]),W[30]=Se(B[44]),W[31]=Se(B[53]),W[32]=Se(B[10]),W[33]=Se(B[19]),W[34]=Se(B[23]),W[35]=Se(B[32]),W[36]=Se(B[39]),W[37]=Se(B[45]),W[38]=Se(B[52]),W[39]=Se(B[54]),W[40]=Se(B[20]),W[41]=Se(B[22]),W[42]=Se(B[33]),W[43]=Se(B[38]),W[44]=Se(B[46]),W[45]=Se(B[51]),W[46]=Se(B[55]),W[47]=Se(B[60]),W[48]=Se(B[21]),W[49]=Se(B[34]),W[50]=Se(B[37]),W[51]=Se(B[47]),W[52]=Se(B[50]),W[53]=Se(B[56]),W[54]=Se(B[59]),W[55]=Se(B[61]),W[56]=Se(B[35]),W[57]=Se(B[36]),W[58]=Se(B[48]),W[59]=Se(B[49]),W[60]=Se(B[57]),W[61]=Se(B[58]),W[62]=Se(B[62]),W[63]=Se(B[63])}function X(B){const W=.5*Math.cos(.7853975),fe=.5*Math.cos(3.14159/16),U=.5*Math.cos(3.14159/8),$=.5*Math.cos(3*3.14159/16),J=.5*Math.cos(5*3.14159/16),ae=.5*Math.cos(3*3.14159/8),ie=.5*Math.cos(7*3.14159/16);for(var Ce=new Array(4),Le=new Array(4),De=new Array(4),be=new Array(4),wt=0;wt<8;++wt){var je=wt*8;Ce[0]=U*B[je+2],Ce[1]=ae*B[je+2],Ce[2]=U*B[je+6],Ce[3]=ae*B[je+6],Le[0]=fe*B[je+1]+$*B[je+3]+J*B[je+5]+ie*B[je+7],Le[1]=$*B[je+1]-ie*B[je+3]-fe*B[je+5]-J*B[je+7],Le[2]=J*B[je+1]-fe*B[je+3]+ie*B[je+5]+$*B[je+7],Le[3]=ie*B[je+1]-J*B[je+3]+$*B[je+5]-fe*B[je+7],De[0]=W*(B[je+0]+B[je+4]),De[3]=W*(B[je+0]-B[je+4]),De[1]=Ce[0]+Ce[3],De[2]=Ce[1]-Ce[2],be[0]=De[0]+De[1],be[1]=De[3]+De[2],be[2]=De[3]-De[2],be[3]=De[0]-De[1],B[je+0]=be[0]+Le[0],B[je+1]=be[1]+Le[1],B[je+2]=be[2]+Le[2],B[je+3]=be[3]+Le[3],B[je+4]=be[3]-Le[3],B[je+5]=be[2]-Le[2],B[je+6]=be[1]-Le[1],B[je+7]=be[0]-Le[0]}for(var Ye=0;Ye<8;++Ye)Ce[0]=U*B[16+Ye],Ce[1]=ae*B[16+Ye],Ce[2]=U*B[48+Ye],Ce[3]=ae*B[48+Ye],Le[0]=fe*B[8+Ye]+$*B[24+Ye]+J*B[40+Ye]+ie*B[56+Ye],Le[1]=$*B[8+Ye]-ie*B[24+Ye]-fe*B[40+Ye]-J*B[56+Ye],Le[2]=J*B[8+Ye]-fe*B[24+Ye]+ie*B[40+Ye]+$*B[56+Ye],Le[3]=ie*B[8+Ye]-J*B[24+Ye]+$*B[40+Ye]-fe*B[56+Ye],De[0]=W*(B[Ye]+B[32+Ye]),De[3]=W*(B[Ye]-B[32+Ye]),De[1]=Ce[0]+Ce[3],De[2]=Ce[1]-Ce[2],be[0]=De[0]+De[1],be[1]=De[3]+De[2],be[2]=De[3]-De[2],be[3]=De[0]-De[1],B[0+Ye]=be[0]+Le[0],B[8+Ye]=be[1]+Le[1],B[16+Ye]=be[2]+Le[2],B[24+Ye]=be[3]+Le[3],B[32+Ye]=be[3]-Le[3],B[40+Ye]=be[2]-Le[2],B[48+Ye]=be[1]-Le[1],B[56+Ye]=be[0]-Le[0]}function G(B){for(var W=0;W<64;++W){var fe=B[0][W],U=B[1][W],$=B[2][W];B[0][W]=fe+1.5747*$,B[1][W]=fe-.1873*U-.4682*$,B[2][W]=fe+1.8556*U}}function we(B,W,fe){for(var U=0;U<64;++U)W[fe+U]=$u.toHalfFloat(We(B[U]))}function We(B){return B<=1?Math.sign(B)*Math.pow(Math.abs(B),2.2):Math.sign(B)*Math.pow(k,Math.abs(B)-1)}function He(B){return new DataView(B.array.buffer,B.offset.value,B.size)}function Ve(B){var W=B.viewer.buffer.slice(B.offset.value,B.offset.value+B.size),fe=new Uint8Array(Je(W)),U=new Uint8Array(fe.length);return Xe(fe),Ue(fe,U),new DataView(U.buffer)}function Mt(B){var W=B.array.slice(B.offset.value,B.offset.value+B.size),fe=rm(W),U=new Uint8Array(fe.length);return Xe(fe),Ue(fe,U),new DataView(U.buffer)}function at(B){for(var W=B.viewer,fe={value:B.offset.value},U=new Uint16Array(B.width*B.scanlineBlockSize*(B.channels*B.type)),$=new Uint8Array(8192),J=0,ae=new Array(B.channels),ie=0;ie<B.channels;ie++)ae[ie]={},ae[ie].start=J,ae[ie].end=ae[ie].start,ae[ie].nx=B.width,ae[ie].ny=B.lines,ae[ie].size=B.type,J+=ae[ie].nx*ae[ie].ny*ae[ie].size;var Ce=de(W,fe),Le=de(W,fe);if(Le>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Ce<=Le)for(var ie=0;ie<Le-Ce+1;ie++)$[ie+Ce]=he(W,fe);var De=new Uint16Array(65536),be=F($,De),wt=yt(W,fe);ft(B.array,W,fe,wt,U,J);for(var ie=0;ie<B.channels;++ie)for(var je=ae[ie],Ye=0;Ye<ae[ie].size;++Ye)st(U,je.start+Ye,je.nx,je.size,je.ny,je.nx*je.size,be);oe(De,U,J);for(var St=0,Nt=new Uint8Array(U.buffer.byteLength),Bt=0;Bt<B.lines;Bt++)for(var $t=0;$t<B.channels;$t++){var je=ae[$t],ut=je.nx*je.size,lt=new Uint8Array(U.buffer,je.end*2,ut*2);Nt.set(lt,St),St+=ut*2,je.end+=ut}return new DataView(Nt.buffer)}function vt(B){var W=B.array.slice(B.offset.value,B.offset.value+B.size),fe=rm(W);const U=B.lines*B.channels*B.width,$=B.type==1?new Uint16Array(U):new Uint32Array(U);let J=0,ae=0;const ie=new Array(4);for(let Ce=0;Ce<B.lines;Ce++)for(let Le=0;Le<B.channels;Le++){let De=0;switch(B.type){case 1:ie[0]=J,ie[1]=ie[0]+B.width,J=ie[1]+B.width;for(let be=0;be<B.width;++be){const wt=fe[ie[0]++]<<8|fe[ie[1]++];De+=wt,$[ae]=De,ae++}break;case 2:ie[0]=J,ie[1]=ie[0]+B.width,ie[2]=ie[1]+B.width,J=ie[2]+B.width;for(let be=0;be<B.width;++be){const wt=fe[ie[0]++]<<24|fe[ie[1]++]<<16|fe[ie[2]++]<<8;De+=wt,$[ae]=De,ae++}break}}return new DataView($.buffer)}function It(B){var W=B.viewer,fe={value:B.offset.value},U=new Uint8Array(B.width*B.lines*(B.channels*B.type*2)),$={version:Ne(W,fe),unknownUncompressedSize:Ne(W,fe),unknownCompressedSize:Ne(W,fe),acCompressedSize:Ne(W,fe),dcCompressedSize:Ne(W,fe),rleCompressedSize:Ne(W,fe),rleUncompressedSize:Ne(W,fe),rleRawSize:Ne(W,fe),totalAcUncompressedCount:Ne(W,fe),totalDcUncompressedCount:Ne(W,fe),acCompression:Ne(W,fe)};if($.version<2)throw"EXRLoader.parse: "+$r.compression+" version "+$.version+" is unsupported";for(var J=new Array,ae=de(W,fe)-2;ae>0;){var ie=Vt(W.buffer,fe),Ce=he(W,fe),Le=Ce>>2&3,De=(Ce>>4)-1,be=new Int8Array([De])[0],wt=he(W,fe);J.push({name:ie,index:be,type:wt,compression:Le}),ae-=ie.length+3}for(var je=$r.channels,Ye=new Array(B.channels),St=0;St<B.channels;++St){var Nt=Ye[St]={},Bt=je[St];Nt.name=Bt.name,Nt.compression=0,Nt.decoded=!1,Nt.type=Bt.pixelType,Nt.pLinear=Bt.pLinear,Nt.width=B.width,Nt.height=B.lines}for(var $t={idx:new Array(3)},ut=0;ut<B.channels;++ut)for(var Nt=Ye[ut],St=0;St<J.length;++St){var lt=J[St];Nt.name==lt.name&&(Nt.compression=lt.compression,lt.index>=0&&($t.idx[lt.index]=ut),Nt.offset=ut)}if($.acCompressedSize>0)switch($.acCompression){case 0:var qt=new Uint16Array($.totalAcUncompressedCount);ft(B.array,W,fe,$.acCompressedSize,qt,$.totalAcUncompressedCount);break;case 1:var Xt=B.array.slice(fe.value,fe.value+$.totalAcUncompressedCount),Ht=rm(Xt),qt=new Uint16Array(Ht.buffer);fe.value+=$.totalAcUncompressedCount;break}if($.dcCompressedSize>0){var kn={array:B.array,offset:fe,size:$.dcCompressedSize},Yn=new Uint16Array(Mt(kn).buffer);fe.value+=$.dcCompressedSize}if($.rleRawSize>0){var Xt=B.array.slice(fe.value,fe.value+$.rleCompressedSize),Ht=rm(Xt),Bn=Je(Ht.buffer);fe.value+=$.rleCompressedSize}for(var vn=0,an=new Array(Ye.length),St=0;St<an.length;++St)an[St]=new Array;for(var sr=0;sr<B.lines;++sr)for(var nn=0;nn<Ye.length;++nn)an[nn].push(vn),vn+=Ye[nn].width*B.type*2;Fe($t,an,Ye,qt,Yn,U);for(var St=0;St<Ye.length;++St){var Nt=Ye[St];if(!Nt.decoded)switch(Nt.compression){case 2:for(var yn=0,zn=0,sr=0;sr<B.lines;++sr){for(var Mi=an[St][yn],Tr=0;Tr<Nt.width;++Tr){for(var Xs=0;Xs<2*Nt.type;++Xs)U[Mi++]=Bn[zn+Xs*Nt.width*Nt.height];zn++}yn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(U.buffer)}function Vt(B,W){for(var fe=new Uint8Array(B),U=0;fe[W.value+U]!=0;)U+=1;var $=new TextDecoder().decode(fe.slice(W.value,W.value+U));return W.value=W.value+U+1,$}function Ge(B,W,fe){var U=new TextDecoder().decode(new Uint8Array(B).slice(W.value,W.value+fe));return W.value=W.value+fe,U}function tn(B,W){var fe=Ft(B,W),U=yt(B,W);return[fe,U]}function en(B,W){var fe=yt(B,W),U=yt(B,W);return[fe,U]}function Ft(B,W){var fe=B.getInt32(W.value,!0);return W.value=W.value+4,fe}function yt(B,W){var fe=B.getUint32(W.value,!0);return W.value=W.value+4,fe}function xt(B,W){var fe=B[W.value];return W.value=W.value+1,fe}function he(B,W){var fe=B.getUint8(W.value);return W.value=W.value+1,fe}const Ne=function(B,W){let fe;return"getBigInt64"in DataView.prototype?fe=Number(B.getBigInt64(W.value,!0)):fe=B.getUint32(W.value+4,!0)+Number(B.getUint32(W.value,!0)<<32),W.value+=8,fe};function tt(B,W){var fe=B.getFloat32(W.value,!0);return W.value+=4,fe}function pt(B,W){return $u.toHalfFloat(tt(B,W))}function Se(B){var W=(B&31744)>>10,fe=B&1023;return(B>>15?-1:1)*(W?W===31?fe?NaN:1/0:Math.pow(2,W-15)*(1+fe/1024):6103515625e-14*(fe/1024))}function de(B,W){var fe=B.getUint16(W.value,!0);return W.value+=2,fe}function et(B,W){return Se(de(B,W))}function ct(B,W,fe,U){for(var $=fe.value,J=[];fe.value<$+U-1;){var ae=Vt(W,fe),ie=Ft(B,fe),Ce=he(B,fe);fe.value+=3;var Le=Ft(B,fe),De=Ft(B,fe);J.push({name:ae,pixelType:ie,pLinear:Ce,xSampling:Le,ySampling:De})}return fe.value+=1,J}function Ut(B,W){var fe=tt(B,W),U=tt(B,W),$=tt(B,W),J=tt(B,W),ae=tt(B,W),ie=tt(B,W),Ce=tt(B,W),Le=tt(B,W);return{redX:fe,redY:U,greenX:$,greenY:J,blueX:ae,blueY:ie,whiteX:Ce,whiteY:Le}}function At(B,W){var fe=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],U=he(B,W);return fe[U]}function on(B,W){var fe=yt(B,W),U=yt(B,W),$=yt(B,W),J=yt(B,W);return{xMin:fe,yMin:U,xMax:$,yMax:J}}function gn(B,W){var fe=["INCREASING_Y"],U=he(B,W);return fe[U]}function Pn(B,W){var fe=tt(B,W),U=tt(B,W);return[fe,U]}function Fn(B,W){var fe=tt(B,W),U=tt(B,W),$=tt(B,W);return[fe,U,$]}function hn(B,W,fe,U,$){if(U==="string"||U==="stringvector"||U==="iccProfile")return Ge(W,fe,$);if(U==="chlist")return ct(B,W,fe,$);if(U==="chromaticities")return Ut(B,fe);if(U==="compression")return At(B,fe);if(U==="box2i")return on(B,fe);if(U==="lineOrder")return gn(B,fe);if(U==="float")return tt(B,fe);if(U==="v2f")return Pn(B,fe);if(U==="v3f")return Fn(B,fe);if(U==="int")return Ft(B,fe);if(U==="rational")return tn(B,fe);if(U==="timecode")return en(B,fe);if(U==="preview")return fe.value+=$,"skipped";fe.value+=$}function fr(B,W,fe){const U={};if(B.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";U.version=B.getUint8(4);const $=B.getUint8(5);U.spec={singleTile:!!($&2),longName:!!($&4),deepFormat:!!($&8),multiPart:!!($&16)},fe.value=8;for(var J=!0;J;){var ae=Vt(W,fe);if(ae==0)J=!1;else{var ie=Vt(W,fe),Ce=yt(B,fe),Le=hn(B,W,fe,ie,Ce);Le===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ie}'.`):U[ae]=Le}}if(($&-5)!=0)throw console.error("EXRHeader:",U),"THREE.EXRLoader: provided file is currently unsupported.";return U}function kr(B,W,fe,U,$){const J={size:0,viewer:W,array:fe,offset:U,width:B.dataWindow.xMax-B.dataWindow.xMin+1,height:B.dataWindow.yMax-B.dataWindow.yMin+1,channels:B.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:B.channels[0].pixelType,uncompress:null,getter:null,format:null,[Kp?"colorSpace":"encoding"]:null};switch(B.compression){case"NO_COMPRESSION":J.lines=1,J.uncompress=He;break;case"RLE_COMPRESSION":J.lines=1,J.uncompress=Ve;break;case"ZIPS_COMPRESSION":J.lines=1,J.uncompress=Mt;break;case"ZIP_COMPRESSION":J.lines=16,J.uncompress=Mt;break;case"PIZ_COMPRESSION":J.lines=32,J.uncompress=at;break;case"PXR24_COMPRESSION":J.lines=16,J.uncompress=vt;break;case"DWAA_COMPRESSION":J.lines=32,J.uncompress=It;break;case"DWAB_COMPRESSION":J.lines=256,J.uncompress=It;break;default:throw"EXRLoader.parse: "+B.compression+" is unsupported"}if(J.scanlineBlockSize=J.lines,J.type==1)switch($){case jr:J.getter=et,J.inputSize=2;break;case di:J.getter=de,J.inputSize=2;break}else if(J.type==2)switch($){case jr:J.getter=tt,J.inputSize=4;break;case di:J.getter=pt,J.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+J.type+" for "+B.compression+".";J.blockCount=(B.dataWindow.yMax+1)/J.scanlineBlockSize;for(var ae=0;ae<J.blockCount;ae++)Ne(W,U);J.outputChannels=J.channels==3?4:J.channels;const ie=J.width*J.height*J.outputChannels;switch($){case jr:J.byteArray=new Float32Array(ie),J.channels<J.outputChannels&&J.byteArray.fill(1,0,ie);break;case di:J.byteArray=new Uint16Array(ie),J.channels<J.outputChannels&&J.byteArray.fill(15360,0,ie);break;default:console.error("THREE.EXRLoader: unsupported type: ",$);break}return J.bytesPerLine=J.width*J.inputSize*J.channels,J.outputChannels==4?J.format=Wr:J.format=DS,Kp?J.colorSpace="srgb-linear":J.encoding=3e3,J}const js=new DataView(e),Es=new Uint8Array(e),pi={value:0},$r=fr(js,e,pi),Kt=kr($r,js,Es,pi,this.type),_a={value:0},wl={R:0,G:1,B:2,A:3,Y:0};for(let B=0;B<Kt.height/Kt.scanlineBlockSize;B++){const W=yt(js,pi);Kt.size=yt(js,pi),Kt.lines=W+Kt.scanlineBlockSize>Kt.height?Kt.height-W:Kt.scanlineBlockSize;const U=Kt.size<Kt.lines*Kt.bytesPerLine?Kt.uncompress(Kt):He(Kt);pi.value+=Kt.size;for(let $=0;$<Kt.scanlineBlockSize;$++){const J=$+B*Kt.scanlineBlockSize;if(J>=Kt.height)break;for(let ae=0;ae<Kt.channels;ae++){const ie=wl[$r.channels[ae].name];for(let Ce=0;Ce<Kt.width;Ce++){_a.value=($*(Kt.channels*Kt.width)+ae*Kt.width+Ce)*Kt.inputSize;const Le=(Kt.height-1-J)*(Kt.width*Kt.outputChannels)+Ce*Kt.outputChannels+ie;Kt.byteArray[Le]=Kt.getter(U,_a)}}}}return{header:$r,width:Kt.width,height:Kt.height,data:Kt.byteArray,format:Kt.format,[Kp?"colorSpace":"encoding"]:Kt[Kp?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(o,a){Kp?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Dn,o.magFilter=Dn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,n,i)}}const ZI=j.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:c,...h},f)=>{const m=Us(I=>I.invalidate),g=Us(I=>I.camera),y=Us(I=>I.gl),_=Us(I=>I.events),M=Us(I=>I.setEvents),E=Us(I=>I.set),x=Us(I=>I.get),A=Us(I=>I.performance),b=e||g,R=n||_.connected||y.domElement,N=j.useMemo(()=>new p7(b),[b]);return TE(()=>{N.enabled&&N.update()},-1),j.useEffect(()=>(s&&N.connect(s===!0?R:s),N.connect(R),()=>void N.dispose()),[s,R,t,N,m]),j.useEffect(()=>{const I=k=>{m(),t&&A.regress(),o&&o(k)},O=k=>{a&&a(k)},V=k=>{c&&c(k)};return N.addEventListener("change",I),N.addEventListener("start",O),N.addEventListener("end",V),()=>{N.removeEventListener("start",O),N.removeEventListener("end",V),N.removeEventListener("change",I)}},[o,a,c,N,m,M]),j.useEffect(()=>{if(r){const I=x().controls;return E({controls:N}),()=>E({controls:I})}},[r,N]),j.createElement("primitive",hy({ref:f,object:N,enableDamping:i},h))}),O7=3e3,N7=3001,KI=(r,e,t)=>{let n;switch(r){case Bs:n=new Uint8ClampedArray(e*t*4);break;case di:n=new Uint16Array(e*t*4);break;case la:n=new Uint32Array(e*t*4);break;case RS:n=new Int8Array(e*t*4);break;case LS:n=new Int16Array(e*t*4);break;case ky:n=new Int32Array(e*t*4);break;case jr:n=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return n};let Mv;const U7=(r,e,t,n)=>{if(Mv!==void 0)return Mv;const i=new Gs(1,1,n);e.setRenderTarget(i);const s=new qn(new fh,new xl({color:16777215}));e.render(s,t),e.setRenderTarget(null);const o=KI(r,i.width,i.height);return e.readRenderTargetPixels(i,0,0,i.width,i.height,o),i.dispose(),s.geometry.dispose(),s.material.dispose(),Mv=o[0]!==0,Mv};class CE{constructor(e){var t,n,i,s,o,a,c,h,f,m,g,y,_,M,E,x;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(b){throw this._renderer.setRenderTarget(null),b}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const A={format:Wr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(n=e.renderTargetOptions)===null||n===void 0?void 0:n.anisotropy:1,generateMipmaps:((i=e.renderTargetOptions)===null||i===void 0?void 0:i.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((o=e.renderTargetOptions)===null||o===void 0?void 0:o.magFilter)!==void 0?(a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter:Dn,minFilter:((c=e.renderTargetOptions)===null||c===void 0?void 0:c.minFilter)!==void 0?(h=e.renderTargetOptions)===null||h===void 0?void 0:h.minFilter:Dn,samples:((f=e.renderTargetOptions)===null||f===void 0?void 0:f.samples)!==void 0?(m=e.renderTargetOptions)===null||m===void 0?void 0:m.samples:void 0,wrapS:((g=e.renderTargetOptions)===null||g===void 0?void 0:g.wrapS)!==void 0?(y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapS:rr,wrapT:((_=e.renderTargetOptions)===null||_===void 0?void 0:_.wrapT)!==void 0?(M=e.renderTargetOptions)===null||M===void 0?void 0:M.wrapT:rr};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=CE.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new hg,this._camera=new fa,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!U7(this._type,this._renderer,this._camera,A)){let b;switch(this._type){case di:b=this._renderer.extensions.has("EXT_color_buffer_float")?jr:void 0;break}b!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${jr}`),this._type=b):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new qn(new fh,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Gs(this.width,this.height,A),this._renderTarget.texture.mapping=((E=e.renderTargetOptions)===null||E===void 0?void 0:E.mapping)!==void 0?(x=e.renderTargetOptions)===null||x===void 0?void 0:x.mapping:Ac}static instantiateRenderer(){const e=new By;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=KI(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Mc(this.toArray(),this.width,this.height,Wr,this._type,e?.mapping||Ac,e?.wrapS||rr,e?.wrapT||rr,e?.magFilter||Dn,e?.minFilter||Dn,e?.anisotropy||1,Hs);return t.generateMipmaps=e?.generateMipmaps!==void 0?e?.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Ws&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof Gn&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof Gn&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const F7=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,B7=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class z7 extends Ws{constructor({gamma:e,offsetHdr:t,offsetSdr:n,gainMapMin:i,gainMapMax:s,maxDisplayBoost:o,hdrCapacityMin:a,hdrCapacityMax:c,sdr:h,gainMap:f}){super({name:"GainMapDecoderMaterial",vertexShader:F7,fragmentShader:B7,uniforms:{sdr:{value:h},gainMap:{value:f},gamma:{value:new q(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new q().fromArray(t)},offsetSdr:{value:new q().fromArray(n)},gainMapMin:{value:new q().fromArray(i)},gainMapMax:{value:new q().fromArray(s)},weightFactor:{value:(Math.log2(o)-a)/(c-a)}},blending:ha,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=o,this._hdrCapacityMin=a,this._hdrCapacityMax=c,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class JI extends Error{}class QI extends Error{}const Jp=(r,e,t)=>{const n=new RegExp(`${e}="([^"]*)"`,"i").exec(r);if(n)return n[1];const i=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(r);if(i){const s=i[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(o=>o.replace(/<\/?rdf:li>/g,"")):i[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},V7=r=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(r):e=r.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const n=e.indexOf("x:xmpmeta>",t),i=e.slice(t,n+10);try{const s=Jp(i,"hdrgm:GainMapMin","0"),o=Jp(i,"hdrgm:GainMapMax"),a=Jp(i,"hdrgm:Gamma","1"),c=Jp(i,"hdrgm:OffsetSDR","0.015625"),h=Jp(i,"hdrgm:OffsetHDR","0.015625"),f=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(i),m=f?f[1]:"0",g=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(i);if(!g)throw new Error("Incomplete gainmap metadata");const y=g[1];return{gainMapMin:Array.isArray(s)?s.map(_=>parseFloat(_)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(o)?o.map(_=>parseFloat(_)):[parseFloat(o),parseFloat(o),parseFloat(o)],gamma:Array.isArray(a)?a.map(_=>parseFloat(_)):[parseFloat(a),parseFloat(a),parseFloat(a)],offsetSdr:Array.isArray(c)?c.map(_=>parseFloat(_)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetHdr:Array.isArray(h)?h.map(_=>parseFloat(_)):[parseFloat(h),parseFloat(h),parseFloat(h)],hdrCapacityMin:parseFloat(m),hdrCapacityMax:parseFloat(y)}}catch{}t=e.indexOf("<x:xmpmeta",n)}};class H7{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,n)=>{const i=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){n(new Error("Not a valid jpeg"));return}const o=s.byteLength;let a=2,c=0,h;for(;a<o;){if(++c>250){n(new Error(`Found no marker after ${c} loops `));return}if(s.getUint8(a)!==255){n(new Error(`Not a valid marker at offset 0x${a.toString(16)}, found: 0x${s.getUint8(a).toString(16)}`));return}if(h=s.getUint8(a+1),i&&console.log(`Marker: ${h.toString(16)}`),h===226){i&&console.log("Found APP2 marker (0xffe2)");const f=a+4;if(s.getUint32(f)===1297106432){const m=f+4;let g;if(s.getUint16(m)===18761)g=!1;else if(s.getUint16(m)===19789)g=!0;else{n(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(m+2,!g)!==42){n(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const y=s.getUint32(m+4,!g);if(y<8){n(new Error("Not valid TIFF data! (First offset less than 8)"));return}const _=m+y,M=s.getUint16(_,!g),E=_+2;let x=0;for(let N=E;N<E+12*M;N+=12)s.getUint16(N,!g)===45057&&(x=s.getUint32(N+8,!g));const b=_+2+M*12+4,R=[];for(let N=b;N<b+x*16;N+=16){const I={MPType:s.getUint32(N,!g),size:s.getUint32(N+4,!g),dataOffset:s.getUint32(N+8,!g),dependantImages:s.getUint32(N+12,!g),start:-1,end:-1,isFII:!1};I.dataOffset?(I.start=m+I.dataOffset,I.isFII=!1):(I.start=0,I.isFII=!0),I.end=I.start+I.size,R.push(I)}if(this.options.extractNonFII&&R.length){const N=new Blob([s]),I=[];for(const O of R){if(O.isFII&&!this.options.extractFII)continue;const V=N.slice(O.start,O.end+1,"image/jpeg");I.push(V)}t(I)}}}a+=2+s.getUint16(a+2)}})}}const G7=async r=>{const e=V7(r);if(!e)throw new QI("Gain map XMP metadata not found");const n=await new H7({extractFII:!0,extractNonFII:!0}).extract(r);if(n.length!==2)throw new JI("Gain map recovery image not found");return{sdr:new Uint8Array(await n[0].arrayBuffer()),gainMap:new Uint8Array(await n[1].arrayBuffer()),metadata:e}},TC=r=>new Promise((e,t)=>{const n=document.createElement("img");n.onload=()=>{e(n)},n.onerror=i=>{t(i)},n.src=URL.createObjectURL(r)});class e3 extends Vi{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new r_}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new z7({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Gn,sdr:new Gn});return new CE({width:16,height:16,type:di,colorSpace:Hs,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,i){const s=i?new Blob([i],{type:"image/jpeg"}):void 0,o=new Blob([n],{type:"image/jpeg"});let a,c,h=!1;if(typeof createImageBitmap>"u"){const g=await Promise.all([s?TC(s):Promise.resolve(void 0),TC(o)]);c=g[0],a=g[1],h=!0}else{const g=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);c=g[0],a=g[1]}const f=new Gn(c||new ImageData(2,2),Ac,rr,rr,Dn,t1,Wr,Bs,1,Hs);f.flipY=h,f.needsUpdate=!0;const m=new Gn(a,Ac,rr,rr,Dn,t1,Wr,Bs,1,Hr);m.flipY=h,m.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=f,e.material.sdr=m,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class W7 extends e3{load([e,t,n],i,s,o){const a=this.prepareQuadRenderer();let c,h,f;const m=async()=>{if(c&&h&&f){try{await this.render(a,f,c,h)}catch(k){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(n),typeof o=="function"&&o(k),a.disposeOnDemandRenderer();return}typeof i=="function"&&i(a),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(n),a.disposeOnDemandRenderer()}};let g=!0,y=0,_=0,M=!0,E=0,x=0,A=!0,b=0,R=0;const N=()=>{if(typeof s=="function"){const k=y+E+b,F=_+x+R,Q=g&&M&&A;s(new ProgressEvent("progress",{lengthComputable:Q,loaded:F,total:k}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(n);const I=new xs(this._internalLoadingManager);I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(e,async k=>{if(typeof k=="string")throw new Error("Invalid sdr buffer");c=k,await m()},k=>{g=k.lengthComputable,_=k.loaded,y=k.total,N()},k=>{this.manager.itemError(e),typeof o=="function"&&o(k)});const O=new xs(this._internalLoadingManager);O.setResponseType("arraybuffer"),O.setRequestHeader(this.requestHeader),O.setPath(this.path),O.setWithCredentials(this.withCredentials),O.load(t,async k=>{if(typeof k=="string")throw new Error("Invalid gainmap buffer");h=k,await m()},k=>{M=k.lengthComputable,x=k.loaded,E=k.total,N()},k=>{this.manager.itemError(t),typeof o=="function"&&o(k)});const V=new xs(this._internalLoadingManager);return V.setRequestHeader(this.requestHeader),V.setPath(this.path),V.setWithCredentials(this.withCredentials),V.load(n,async k=>{if(typeof k!="string")throw new Error("Invalid metadata string");f=JSON.parse(k),await m()},k=>{A=k.lengthComputable,R=k.loaded,b=k.total,N()},k=>{this.manager.itemError(n),typeof o=="function"&&o(k)}),a}}class j7 extends e3{load(e,t,n,i){const s=this.prepareQuadRenderer(),o=new xs(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,async a=>{if(typeof a=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const c=new Uint8Array(a);let h,f,m;try{const g=await G7(c);h=g.sdr,f=g.gainMap,m=g.metadata}catch(g){if(g instanceof QI||g instanceof JI)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),m={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},h=c;else throw g}try{await this.render(s,m,h,f)}catch(g){this.manager.itemError(e),typeof i=="function"&&i(g),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},n,a=>{this.manager.itemError(e),typeof i=="function"&&i(a)}),s}}const $m={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},t3="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",df=r=>Array.isArray(r),PE=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function s_({files:r=PE,path:e="",preset:t=void 0,encoding:n=void 0,extensions:i}={}){let s=null,o=!1;t&&(RE(t),r=$m[t],e=t3),o=df(r);const{extension:a,isCubemap:c}=LE(r);if(s=IE(a),!s)throw new Error("useEnvironment: Unrecognized file extension: "+r);const h=Us(y=>y.gl);j.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function y(){Cf.clear(s,o?[r]:r)}h.domElement.addEventListener("webglcontextlost",y,{once:!0})},[r,h.domElement]);const f=Cf(s,o?[r]:r,y=>{(a==="webp"||a==="jpg"||a==="jpeg")&&y.setRenderer(h),y.setPath==null||y.setPath(e),i&&i(y)});let m=o?f[0]:f;if(a==="jpg"||a==="jpeg"||a==="webp"){var g;m=(g=m.renderTarget)==null?void 0:g.texture}return m.mapping=c?ga:nh,"colorSpace"in m?m.colorSpace=n??c?"srgb":"srgb-linear":m.encoding=n??c?N7:O7,m}const X7={files:PE,path:"",preset:void 0,extensions:void 0};s_.preload=r=>{const e={...X7,...r};let{files:t,path:n=""}=e;const{preset:i,extensions:s}=e;i&&(RE(i),t=$m[i],n=t3);const{extension:o}=LE(t);if(o==="webp"||o==="jpg"||o==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const a=IE(o);if(!a)throw new Error("useEnvironment: Unrecognized file extension: "+t);Cf.preload(a,df(t)?[t]:t,c=>{c.setPath==null||c.setPath(n),s&&s(c)})};const $7={files:PE,preset:void 0};s_.clear=r=>{const e={...$7,...r};let{files:t}=e;const{preset:n}=e;n&&(RE(n),t=$m[n]);const{extension:i}=LE(t),s=IE(i);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Cf.clear(s,df(t)?[t]:t)};function RE(r){if(!(r in $m))throw new Error("Preset must be one of: "+Object.keys($m).join(", "))}function LE(r){var e;const t=df(r)&&r.length===6,n=df(r)&&r.length===3&&r.some(o=>o.endsWith("json")),i=df(r)?r[0]:r;return{extension:t?"cube":n?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":(e=i.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:n}}function IE(r){return r==="cube"?iI:r==="hdr"?k7:r==="exr"?D7:r==="jpg"||r==="jpeg"?j7:r==="webp"?W7:null}const q7=r=>r.current&&r.current.isScene,Y7=r=>q7(r)?r.current:r;function kE(r,e,t,n,i={}){var s,o,a,c;i={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const h=Y7(e||t),f=h.background,m=h.environment,g={backgroundBlurriness:h.backgroundBlurriness,backgroundIntensity:h.backgroundIntensity,backgroundRotation:(s=(o=h.backgroundRotation)==null||o.clone==null?void 0:o.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:h.environmentIntensity,environmentRotation:(a=(c=h.environmentRotation)==null||c.clone==null?void 0:c.clone())!==null&&a!==void 0?a:[0,0,0]};return r!=="only"&&(h.environment=n),r&&(h.background=n),pc(h,i),()=>{r!=="only"&&(h.environment=m),r&&(h.background=f),pc(h,g)}}function DE({scene:r,background:e=!1,map:t,...n}){const i=Us(s=>s.scene);return j.useLayoutEffect(()=>{if(t)return kE(e,r,i,t,n)}),null}function n3({background:r=!1,scene:e,blur:t,backgroundBlurriness:n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a,...c}){const h=s_(c),f=Us(m=>m.scene);return j.useLayoutEffect(()=>kE(r,e,f,h,{backgroundBlurriness:t??n,backgroundIntensity:i,backgroundRotation:s,environmentIntensity:o,environmentRotation:a})),j.useEffect(()=>()=>{h.dispose()},[h]),null}function Z7({children:r,near:e=.1,far:t=1e3,resolution:n=256,frames:i=1,map:s,background:o=!1,blur:a,backgroundBlurriness:c,backgroundIntensity:h,backgroundRotation:f,environmentIntensity:m,environmentRotation:g,scene:y,files:_,path:M,preset:E=void 0,extensions:x}){const A=Us(V=>V.gl),b=Us(V=>V.scene),R=j.useRef(null),[N]=j.useState(()=>new hg),I=j.useMemo(()=>{const V=new XS(n);return V.texture.type=di,V},[n]);j.useEffect(()=>()=>{I.dispose()},[I]),j.useLayoutEffect(()=>{if(i===1){const V=A.autoClear;A.autoClear=!0,R.current.update(A,N),A.autoClear=V}return kE(o,y,b,I.texture,{backgroundBlurriness:a??c,backgroundIntensity:h,backgroundRotation:f,environmentIntensity:m,environmentRotation:g})},[r,N,I.texture,y,b,o,i,A]);let O=1;return TE(()=>{if(i===1/0||O<i){const V=A.autoClear;A.autoClear=!0,R.current.update(A,N),A.autoClear=V,O++}}),j.createElement(j.Fragment,null,A9(j.createElement(j.Fragment,null,r,j.createElement("cubeCamera",{ref:R,args:[e,t,I]}),_||E?j.createElement(n3,{background:!0,files:_,preset:E,path:M,extensions:x}):s?j.createElement(DE,{background:!0,map:s,extensions:x}):null),N))}function K7(r){var e,t,n,i;const s=s_(r),o=r.map||s;j.useMemo(()=>xI({GroundProjectedEnvImpl:o7}),[]),j.useEffect(()=>()=>{s.dispose()},[s]);const a=j.useMemo(()=>[o],[o]),c=(e=r.ground)==null?void 0:e.height,h=(t=r.ground)==null?void 0:t.radius,f=(n=(i=r.ground)==null?void 0:i.scale)!==null&&n!==void 0?n:1e3;return j.createElement(j.Fragment,null,j.createElement(DE,hy({},r,{map:o})),j.createElement("groundProjectedEnvImpl",{args:a,scale:f,height:c,radius:h}))}function r3(r){return r.ground?j.createElement(K7,r):r.map?j.createElement(DE,r):r.children?j.createElement(Z7,r):j.createElement(n3,r)}const J7=$e.div`
  width: 100%;
  height: 600px;
  position: relative ;
  background: linear-gradient(135deg, #fefefe 0%, #fef8f5 100%);
`,Q7=$e.div`
  position: absolute;
  bottom: 1rem;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 1rem;
  z-index: 10;
`,bC=$e.button`
  background: rgba(255, 255, 255, 0.9);
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);

  &:hover {
    background: white;
    transform: scale(1.1);
  }
`,eX=$e.div`
  position: absolute;
  top: 1rem;
  left: 1rem;
  background: rgba(255, 255, 255, 0.9);
  padding: 1rem;
  border-radius: 15px;
  backdrop-filter: blur(10px);
  max-width: 300px;
`,tX=$e.h3`
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: #333;
`,nX=$e.p`
  font-size: 0.9rem;
  color: #666;
  line-height: 1.4;
`,rX=()=>{const r=j.useRef(null),[e,t]=j.useState(null);return j.useEffect(()=>{new xg().load("/models/Cup1 model.fbx",i=>{i.scale.set(.01,.01,.01),i.position.set(0,2,0),i.traverse(s=>{s instanceof qn&&s.material&&(s.material.needsUpdate=!0,s.material.color&&s.material.color.multiplyScalar(1.2))}),t(i)})},[]),e?K.jsx("primitive",{ref:r,object:e,position:[0,-1.5,0],scale:[.01,.01,.01]}):K.jsxs("mesh",{position:[0,0,0],children:[K.jsx("cylinderGeometry",{args:[.5,.5,1.5,8]}),K.jsx("meshStandardMaterial",{color:"#EFC0C2",metalness:.3,roughness:.5})]})},iX=()=>{const r=j.useRef(null),[e,t]=j.useState(null);return j.useEffect(()=>{new xg().load("public/models/catalog/Basic Tee1 Catalog_Model.fbx",i=>{i.scale.set(.01,.01,.01),i.position.set(0,2,0),i.traverse(s=>{s instanceof qn&&s.material&&(s.material.needsUpdate=!0,s.material.color&&s.material.color.multiplyScalar(1.2))}),t(i)})},[]),e?K.jsx("primitive",{ref:r,object:e,position:[0,-1.5,0],scale:[.01,.01,.01]}):K.jsxs("mesh",{position:[0,0,0],children:[K.jsx("boxGeometry",{args:[1,1.5,.1]}),K.jsx("meshStandardMaterial",{color:"#4a90e2",metalness:.1,roughness:.8})]})},sX=()=>{const r=j.useRef(null),[e,t]=j.useState(null);return j.useEffect(()=>{new xg().load("public/models/maniken/Basic Tee3 Manequeen_Model.fbx",i=>{i.scale.set(.01,.01,.01),i.position.set(0,2,0),i.traverse(s=>{s instanceof qn&&s.material&&(s.material.needsUpdate=!0,s.material.color&&s.material.color.multiplyScalar(1.2))}),t(i)})},[]),e?K.jsx("primitive",{ref:r,object:e,position:[0,-1.5,0],scale:[.01,.01,.01]}):K.jsxs("mesh",{position:[0,0,0],children:[K.jsx("boxGeometry",{args:[1,1.5,.1]}),K.jsx("meshStandardMaterial",{color:"#e74c3c",metalness:.1,roughness:.8})]})},oX=()=>{const r=j.useRef(null),[e,t]=j.useState(null);return j.useEffect(()=>{new xg().load("/models/catalog/Basic Tee3 Catalog_Model.fbx",i=>{i.scale.set(.01,.01,.01),i.position.set(0,2,0),i.traverse(s=>{s instanceof qn&&s.material&&(s.material.needsUpdate=!0,s.material.color&&s.material.color.multiplyScalar(1.2))}),t(i)})},[]),e?K.jsx("primitive",{ref:r,object:e,position:[0,-1.5,0],scale:[.01,.01,.01]}):K.jsxs("mesh",{position:[0,0,0],children:[K.jsx("boxGeometry",{args:[1,1.5,.1]}),K.jsx("meshStandardMaterial",{color:"#27ae60",metalness:.1,roughness:.8})]})},aX=({product:r})=>{const e=j.useRef(null),t=()=>{switch(r.category){case"electronics":return K.jsx("boxGeometry",{args:[2,1,1]});case"furniture":return K.jsx("cylinderGeometry",{args:[1,1,2,8]});default:return K.jsx("sphereGeometry",{args:[1,32,32]})}},n=()=>{switch(r.category){case"electronics":return K.jsx("meshStandardMaterial",{color:"#2c3e50",metalness:.8,roughness:.2});case"furniture":return K.jsx("meshStandardMaterial",{color:"#8b4513",metalness:.1,roughness:.8});default:return K.jsx("meshStandardMaterial",{color:"#EFC0C2",metalness:.3,roughness:.5})}};return K.jsxs("mesh",{ref:e,position:[0,0,0],children:[t(),n()]})},lX=({product:r})=>{const[e,t]=j.useState(!1),n=()=>{document.querySelector("canvas")?.parentElement?.querySelector("div")},i=()=>{t(!e)},s=r.id==="1",o=r.id==="2",a=r.id==="3",c=r.id==="4";return K.jsxs(J7,{children:[K.jsxs(eX,{children:[K.jsx(tX,{children:r.name}),K.jsx(nX,{children:r.description})]}),K.jsxs(UI,{camera:{position:[0,0,5],fov:50},children:[K.jsx("ambientLight",{intensity:.8}),K.jsx("directionalLight",{position:[5,5,5],intensity:1.2,castShadow:!0,"shadow-mapSize-width":2048,"shadow-mapSize-height":2048}),K.jsx("directionalLight",{position:[-5,5,-5],intensity:.8,color:"#ffffff"}),K.jsx("pointLight",{position:[0,10,0],intensity:.5,color:"#ffffff"}),K.jsx("pointLight",{position:[0,-10,0],intensity:.3,color:"#ffffff"}),s?K.jsx(rX,{}):o?K.jsx(iX,{}):a?K.jsx(sX,{}):c?K.jsx(oX,{}):K.jsx(aX,{product:r}),K.jsx(ZI,{enablePan:!0,enableZoom:!0,enableRotate:!0,autoRotate:e,autoRotateSpeed:2}),K.jsx(r3,{preset:"sunset"})]}),K.jsxs(Q7,{children:[K.jsx(bC,{onClick:n,title:"Reset View",children:""}),K.jsx(bC,{onClick:i,title:e?"Stop Rotation":"Start Rotation",children:e?"":""})]})]})},i3=$e(Ss.div)`
  background: white;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  cursor: pointer;

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
  }
`,cX=$e.div`
  position: relative;
  height: 250px;
  overflow: hidden;
  background: linear-gradient(135deg, #fefefe 0%, #fef8f5 100%);
`,uX=$e.img`
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;

  ${i3}:hover & {
    transform: scale(1.05);
  }
`,hX=$e.button`
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: rgba(255, 255, 255, 0.9);
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);

  &:hover {
    background: white;
    transform: scale(1.1);
  }
`,dX=$e.div`
  padding: 1.5rem;
`,fX=$e.h3`
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: #333;
`,pX=$e.p`
  color: #666;
  font-size: 0.9rem;
  line-height: 1.5;
  margin-bottom: 1rem;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
`,mX=$e.div`
  font-size: 1.5rem;
  font-weight: 700;
  color: #EFC0C2;
  margin-bottom: 1rem;
`,gX=$e.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
`,vX=$e.div`
  display: flex;
  gap: 2px;
`,yX=$e(yO)`
  color: ${r=>r.$filled?"#ffd700":"#e1e5e9"};
  fill: ${r=>r.$filled?"#ffd700":"none"};
`,_X=$e.span`
  font-size: 0.9rem;
  color: #666;
`,xX=$e.div`
  display: flex;
  gap: 0.5rem;
`,wX=$e.button`
  flex: 1;
  background: linear-gradient(135deg, #EFC0C2 0%, #d4a5a7 100%);
  color: white;
  border: none;
  padding: 0.75rem;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(239, 192, 194, 0.3);
  }
`,SX=$e.button`
  background: rgba(239, 192, 194, 0.1);
  color: #EFC0C2;
  border: 2px solid #EFC0C2;
  padding: 0.75rem;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;

  &:hover {
    background: #EFC0C2;
    color: white;
  }
`,EX=$e(Ss.div)`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 2rem;
`,MX=$e.div`
  background: white;
  border-radius: 20px;
  max-width: 90vw;
  max-height: 90vh;
  overflow: hidden;
  position: relative;
`,TX=$e.button`
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: rgba(255, 255, 255, 0.9);
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 10;
  backdrop-filter: blur(10px);

  &:hover {
    background: white;
  }
`,bX=({product:r,onAddToCart:e,onLoginRequired:t})=>{const[n,i]=j.useState(!1),[s]=j.useState(Math.floor(Math.random()*2)+4),{isAuthenticated:o}=sS(),a=h=>{h.stopPropagation(),o?e(r):t()},c=h=>{h.stopPropagation(),i(!0)};return K.jsxs(K.Fragment,{children:[K.jsxs(i3,{whileHover:{scale:1.02},whileTap:{scale:.98},children:[K.jsxs(cX,{children:[K.jsx(uX,{src:r.image,alt:r.name}),K.jsx(hX,{onClick:c,children:K.jsx(sm,{size:20})})]}),K.jsxs(dX,{children:[K.jsx(fX,{children:r.name}),K.jsx(pX,{children:r.description}),K.jsxs(gX,{children:[K.jsx(vX,{children:[1,2,3,4,5].map(h=>K.jsx(yX,{size:16,$filled:h<=s},h))}),K.jsxs(_X,{children:["(",s,".0)"]})]}),K.jsxs(mX,{children:["$",r.price.toFixed(2)]}),K.jsxs(xX,{children:[K.jsxs(wX,{onClick:a,children:[K.jsx(EP,{size:18}),"Add to Cart"]}),K.jsxs(SX,{onClick:c,children:[K.jsx(sm,{size:18}),"3D View"]})]})]})]}),n&&K.jsx(EX,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>i(!1),children:K.jsxs(MX,{onClick:h=>h.stopPropagation(),children:[K.jsx(TX,{onClick:()=>i(!1),children:K.jsx(Q1,{size:20})}),K.jsx(lX,{product:r})]})})]})},AC=[{id:"1",name:"Cutie Patootie cup",description:"Premium cutie patootie cup with super sweet cherry on it.",price:24.99,category:"furniture",image:"/models/cup1.png",modelPath:"/models/Cup1 model.fbx",colors:["Black","White","Blue"],sizes:["One Size"]},{id:"2",name:"Cutie Patootie t-shirt",description:"Comfortable and stylish Cutie Patootie t-shirt designed for literal divas.",price:20.99,category:"clothes",image:"/models/Basic Tee1 Preview.png",modelPath:"/models/catalog/Basic Tee1 Catalog_Model.fbx",colors:["Gray","Black","Brown"],sizes:["XS","S","M","L","XL"]},{id:"3",name:"Girlyboss t-shirt",description:"Another fabulous t-shirt for the ultimate diva vibes and girlboss energy.",price:20.99,category:"clothes",image:"/models/Basic Tee2 Preview.png",modelPath:"/models/catalog/Basic Tee2 Catalog_Model.fbx",colors:["Silver","Black","Rose Gold"],sizes:["XS","S","M","L","XL"]},{id:"4",name:"Girlypop t-shirt",description:"The iconic girlypop t-shirt for the queen who slays every day.",price:20.99,category:"clothes",image:"/models/Basic Tee3 Preview.png",modelPath:"/models/moniken/Basic Tee2 Manequeen_Model.fbx",colors:["Oak","Walnut","White"],sizes:["XS","S","M","L","XL"]},{id:"5",name:"Portable Bluetooth Speaker",description:"Waterproof portable speaker with 360-degree sound and 20-hour battery life.",price:149.99,category:"electronics",image:"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=400&h=400&fit=crop",colors:["Black","Blue","Red"],sizes:["One Size"]},{id:"6",name:"Designer Floor Lamp",description:"Contemporary floor lamp with adjustable head and touch-sensitive controls.",price:249.99,category:"furniture",image:"https://images.unsplash.com/photo-1507473885765-e6ed057f782c?w=400&h=400&fit=crop",colors:["Brass","Black","White"],sizes:["150cm Height"]},{id:"7",name:"4K Action Camera",description:"Ultra-compact 4K camera perfect for capturing adventures with image stabilization.",price:349.99,category:"electronics",image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=400&h=400&fit=crop",colors:["Black","Silver"],sizes:["One Size"]},{id:"8",name:"Accent Armchair",description:"Comfortable accent chair with premium fabric upholstery and solid wood frame.",price:449.99,category:"furniture",image:"https://images.unsplash.com/photo-1567538096630-e0c55bd6374c?w=400&h=400&fit=crop",colors:["Navy","Gray","Beige"],sizes:["Standard"]},{id:"9",name:"Classic Denim Jacket",description:"Timeless denim jacket with comfortable fit and durable construction.",price:89.99,category:"clothes",image:"https://images.unsplash.com/photo-1544022613-e87ca75a784a?w=400&h=400&fit=crop",colors:["Blue","Black","White"],sizes:["XS","S","M","L","XL"]},{id:"10",name:"Premium Cotton T-Shirt",description:"Soft and breathable cotton t-shirt with modern fit and comfortable feel.",price:29.99,category:"clothes",image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400&h=400&fit=crop",colors:["White","Black","Gray","Navy"],sizes:["XS","S","M","L","XL","XXL"]},{id:"11",name:"Stylish Sneakers",description:"Comfortable and trendy sneakers perfect for everyday wear.",price:79.99,category:"clothes",image:"https://images.unsplash.com/photo-1549298916-b41d501d3772?w=400&h=400&fit=crop",colors:["White","Black","Gray"],sizes:["7","8","9","10","11","12"]}],AX=$e.section`
  padding: 4rem 2rem;
  max-width: 1200px;
  margin: 0 auto;
`,CX=$e.h2`
  text-align: center;
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 1rem;
  background: linear-gradient(135deg, #EFC0C2 0%, #d4a5a7 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
`,PX=$e.p`
  text-align: center;
  color: #666;
  font-size: 1.1rem;
  margin-bottom: 3rem;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
`,CC=$e.div`
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 3rem;
  flex-wrap: wrap;
`,$d=$e.button`
  padding: 0.5rem 1.5rem;
  border: 2px solid ${r=>r.$active?"#EFC0C2":"#e1e5e9"};
  background: ${r=>r.$active?"#EFC0C2":"transparent"};
  color: ${r=>r.$active?"white":"#333"};
  border-radius: 25px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.3s ease;

  &:hover {
    border-color: #EFC0C2;
    background: ${r=>r.$active?"#EFC0C2":"rgba(239, 192, 194, 0.1)"};
  }
`,RX=$e.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
`,LX=({onAddToCart:r,onLoginRequired:e})=>{const[t,n]=j.useState("all"),[i,s]=j.useState("featured"),o=["all",...Array.from(new Set(AC.map(h=>h.category)))],c=[...AC.filter(h=>t==="all"||h.category===t)].sort((h,f)=>{switch(i){case"price-low":return h.price-f.price;case"price-high":return f.price-h.price;case"name":return h.name.localeCompare(f.name);default:return 0}});return K.jsxs(AX,{id:"products",children:[K.jsx(CX,{children:"Our Products"}),K.jsx(PX,{children:"Explore our collection with immersive 3D models. Click on any product to view it in 3D."}),K.jsxs(CC,{children:[K.jsx($d,{$active:t==="all",onClick:()=>n("all"),children:"All Products"}),o.slice(1).map(h=>K.jsx($d,{$active:t===h,onClick:()=>n(h),children:h.charAt(0).toUpperCase()+h.slice(1)},h))]}),K.jsxs(CC,{children:[K.jsx($d,{$active:i==="featured",onClick:()=>s("featured"),children:"Featured"}),K.jsx($d,{$active:i==="price-low",onClick:()=>s("price-low"),children:"Price: Low to High"}),K.jsx($d,{$active:i==="price-high",onClick:()=>s("price-high"),children:"Price: High to Low"}),K.jsx($d,{$active:i==="name",onClick:()=>s("name"),children:"Name A-Z"})]}),K.jsx(RX,{children:c.map((h,f)=>K.jsx(Ss.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:f*.1},children:K.jsx(bX,{product:h,onAddToCart:r,onLoginRequired:e})},h.id))})]})},IX=$e(Ss.div)`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1000;
  display: flex;
  justify-content: flex-end;
`,kX=$e(Ss.div)`
  width: 100%;
  max-width: 400px;
  height: 100vh;
  background: white;
  box-shadow: -5px 0 30px rgba(0, 0, 0, 0.1);
  display: flex;
  flex-direction: column;
`,DX=$e.div`
  padding: 1.5rem;
  border-bottom: 1px solid #e1e5e9;
  display: flex;
  align-items: center;
  justify-content: space-between;
`,OX=$e.h2`
  font-size: 1.5rem;
  font-weight: 600;
  color: #333;
  display: flex;
  align-items: center;
  gap: 0.5rem;
`,NX=$e.button`
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 50%;
  transition: background-color 0.3s ease;

  &:hover {
    background-color: rgba(0, 0, 0, 0.1);
  }
`,UX=$e.div`
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
`,FX=$e.div`
  display: flex;
  gap: 1rem;
  padding: 1rem;
  border: 1px solid #e1e5e9;
  border-radius: 10px;
  margin-bottom: 1rem;
  background: #fafafa;
`,BX=$e.img`
  width: 60px;
  height: 60px;
  object-fit: cover;
  border-radius: 8px;
`,zX=$e.div`
  flex: 1;
`,VX=$e.h4`
  font-size: 1rem;
  font-weight: 600;
  color: #333;
  margin-bottom: 0.25rem;
`,HX=$e.p`
  font-size: 1.1rem;
  font-weight: 600;
  color: #EFC0C2;
`,GX=$e.button`
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 50%;
  transition: background-color 0.3s ease;
  color: #ff4757;

  &:hover {
    background-color: rgba(255, 71, 87, 0.1);
  }
`,WX=$e.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: #666;
  text-align: center;
  padding: 2rem;
`,jX=$e(SP)`
  font-size: 4rem;
  color: #e1e5e9;
  margin-bottom: 1rem;
`,XX=$e.div`
  padding: 1.5rem;
  border-top: 1px solid #e1e5e9;
  background: #fafafa;
`,$X=$e.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  font-size: 1.2rem;
  font-weight: 600;
`,qX=$e.button`
  width: 100%;
  background: linear-gradient(135deg, #EFC0C2 0%, #d4a5a7 100%);
  color: white;
  border: none;
  padding: 1rem;
  border-radius: 10px;
  font-size: 1.1rem;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(239, 192, 194, 0.3);
  }

  &:disabled {
    background: #e1e5e9;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }
`,YX=$e.button`
  width: 100%;
  background: none;
  color: #EFC0C2;
  border: 2px solid #EFC0C2;
  padding: 0.75rem;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  margin-top: 0.5rem;

  &:hover {
    background: #EFC0C2;
    color: white;
  }
`,ZX=({isOpen:r,items:e,onClose:t,onRemoveItem:n,onClearCart:i})=>{const s=e.reduce((o,a)=>o+a.price,0);return K.jsx(f2,{children:r&&K.jsx(IX,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,children:K.jsxs(kX,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},onClick:o=>o.stopPropagation(),children:[K.jsxs(DX,{children:[K.jsxs(OX,{children:[K.jsx(SP,{size:24}),"Shopping Cart"]}),K.jsx(NX,{onClick:t,children:K.jsx(Q1,{size:24})})]}),K.jsx(UX,{children:e.length===0?K.jsxs(WX,{children:[K.jsx(jX,{}),K.jsx("h3",{children:"Your cart is empty"}),K.jsx("p",{children:"Add some products to get started!"})]}):e.map(o=>K.jsxs(FX,{children:[K.jsx(BX,{src:o.image,alt:o.name}),K.jsxs(zX,{children:[K.jsx(VX,{children:o.name}),K.jsxs(HX,{children:["$",o.price.toFixed(2)]})]}),K.jsx(GX,{onClick:()=>n(o.id),children:K.jsx(_O,{size:20})})]},o.id))}),e.length>0&&K.jsxs(XX,{children:[K.jsxs($X,{children:[K.jsx("span",{children:"Total:"}),K.jsxs("span",{children:["$",s.toFixed(2)]})]}),K.jsx(qX,{children:"Proceed to Checkout"}),K.jsx(YX,{onClick:i,children:"Clear Cart"})]})]})})})},KX=$e(Ss.div)`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: 2rem;
`,JX=$e(Ss.div)`
  background: white;
  border-radius: 20px;
  max-width: 400px;
  width: 100%;
  overflow: hidden;
  position: relative;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
`,QX=$e.button`
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: rgba(255, 255, 255, 0.9);
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 10;
  backdrop-filter: blur(10px);

  &:hover {
    background: white;
  }
`,e$=$e.div`
  display: flex;
  border-bottom: 1px solid #e1e5e9;
`,PC=$e.button`
  flex: 1;
  padding: 1rem;
  background: none;
  border: none;
  cursor: pointer;
  font-weight: 600;
  color: ${r=>r.$active?"#EFC0C2":"#666"};
  border-bottom: 2px solid ${r=>r.$active?"#EFC0C2":"transparent"};
  transition: all 0.3s ease;

  &:hover {
    color: #EFC0C2;
  }
`,t$=$e.div`
  padding: 2rem;
`,RC=$e.form`
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
`,qd=$e.div`
  position: relative;
`,Yd=$e.input`
  width: 100%;
  padding: 1rem 1rem 1rem 3rem;
  border: 2px solid #e1e5e9;
  border-radius: 10px;
  font-size: 1rem;
  transition: border-color 0.3s ease;

  &:focus {
    outline: none;
    border-color: #EFC0C2;
  }
`,Zd=$e.div`
  position: absolute;
  left: 1rem;
  top: 50%;
  transform: translateY(-50%);
  color: #666;
`,fw=$e.button`
  position: absolute;
  right: 1rem;
  top: 50%;
  transform: translateY(-50%);
  background: none;
  border: none;
  cursor: pointer;
  color: #666;
`,LC=$e.button`
  background: linear-gradient(135deg, #EFC0C2 0%, #d4a5a7 100%);
  color: white;
  border: none;
  padding: 1rem;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;

  &:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(239, 192, 194, 0.3);
  }

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
`,n$=$e.div`
  color: #e74c3c;
  font-size: 0.9rem;
  text-align: center;
  margin-top: 1rem;
`,r$=$e.div`
  color: #27ae60;
  font-size: 0.9rem;
  text-align: center;
  margin-top: 1rem;
`;$e.div`
  background: rgba(239, 192, 194, 0.1);
  border: 1px solid #EFC0C2;
  border-radius: 10px;
  padding: 1rem;
  margin-top: 1rem;
  font-size: 0.9rem;
  color: #666;
`;const i$=({isOpen:r,onClose:e,onSuccess:t})=>{const[n,i]=j.useState("login"),[s,o]=j.useState(!1),[a,c]=j.useState(!1),[h,f]=j.useState(""),[m,g]=j.useState(""),{login:y,signup:_,isLoading:M}=sS(),[E,x]=j.useState({email:"",password:""}),[A,b]=j.useState({username:"",email:"",password:"",confirmPassword:""}),R=async O=>{O.preventDefault(),f(""),g(""),await y(E)?(g("Login successful!"),setTimeout(()=>{e(),t?.()},1e3)):f("Invalid email or password")},N=async O=>{if(O.preventDefault(),f(""),g(""),A.password!==A.confirmPassword){f("Passwords do not match");return}if(A.password.length<6){f("Password must be at least 6 characters long");return}await _(A)?(g("Account created successfully!"),setTimeout(()=>{e(),t?.()},1e3)):f("Email already exists")},I=O=>{i(O),f(""),g("")};return K.jsx(f2,{children:r&&K.jsx(KX,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,children:K.jsxs(JX,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:O=>O.stopPropagation(),children:[K.jsx(QX,{onClick:e,children:K.jsx(Q1,{size:20})}),K.jsxs(e$,{children:[K.jsxs(PC,{$active:n==="login",onClick:()=>I("login"),children:[K.jsx(pO,{size:16,style:{marginRight:"0.5rem"}}),"Login"]}),K.jsxs(PC,{$active:n==="signup",onClick:()=>I("signup"),children:[K.jsx(xO,{size:16,style:{marginRight:"0.5rem"}}),"Sign Up"]})]}),K.jsxs(t$,{children:[n==="login"?K.jsxs(RC,{onSubmit:R,children:[K.jsxs(qd,{children:[K.jsx(Zd,{children:K.jsx(VM,{size:20})}),K.jsx(Yd,{type:"email",placeholder:"Email",value:E.email,onChange:O=>x(V=>({...V,email:O.target.value})),required:!0})]}),K.jsxs(qd,{children:[K.jsx(Zd,{children:K.jsx($_,{size:20})}),K.jsx(Yd,{type:s?"text":"password",placeholder:"Password",value:E.password,onChange:O=>x(V=>({...V,password:O.target.value})),required:!0}),K.jsx(fw,{type:"button",onClick:()=>o(!s),children:s?K.jsx(X_,{size:20}):K.jsx(sm,{size:20})})]}),K.jsx(LC,{type:"submit",disabled:M,children:M?"Logging in...":"Login"})]}):K.jsxs(RC,{onSubmit:N,children:[K.jsxs(qd,{children:[K.jsx(Zd,{children:K.jsx(bw,{size:20})}),K.jsx(Yd,{type:"text",placeholder:"Username",value:A.username,onChange:O=>b(V=>({...V,username:O.target.value})),required:!0})]}),K.jsxs(qd,{children:[K.jsx(Zd,{children:K.jsx(VM,{size:20})}),K.jsx(Yd,{type:"email",placeholder:"Email",value:A.email,onChange:O=>b(V=>({...V,email:O.target.value})),required:!0})]}),K.jsxs(qd,{children:[K.jsx(Zd,{children:K.jsx($_,{size:20})}),K.jsx(Yd,{type:s?"text":"password",placeholder:"Password",value:A.password,onChange:O=>b(V=>({...V,password:O.target.value})),required:!0}),K.jsx(fw,{type:"button",onClick:()=>o(!s),children:s?K.jsx(X_,{size:20}):K.jsx(sm,{size:20})})]}),K.jsxs(qd,{children:[K.jsx(Zd,{children:K.jsx($_,{size:20})}),K.jsx(Yd,{type:a?"text":"password",placeholder:"Confirm Password",value:A.confirmPassword,onChange:O=>b(V=>({...V,confirmPassword:O.target.value})),required:!0}),K.jsx(fw,{type:"button",onClick:()=>c(!a),children:a?K.jsx(X_,{size:20}):K.jsx(sm,{size:20})})]}),K.jsx(LC,{type:"submit",disabled:M,children:M?"Creating Account...":"Create Account"})]}),h&&K.jsx(n$,{children:h}),m&&K.jsx(r$,{children:m})]})]})})})},s$=[{id:"1",name:"Cutie Patootie t-shirt",description:"Comfortable and stylish Cutie Patootie t-shirt designed for literal divas.",image:"/models/Basic Tee1 Preview.png",modelPath:"/models/moniken/Basic Tee1 Manequeen_Model.fbx",category:"clothes"},{id:"2",name:"Girlyboss t-shirt",description:"Another fabulous t-shirt for the ultimate diva vibes and girlboss energy.",image:"/models/Basic Tee2 Preview.png",modelPath:"/models/moniken/Basic Tee2 Manequeen_Model.fbx",category:"clothes"},{id:"3",name:"Girlypop t-shirt",description:"The iconic girlypop t-shirt for the queen who slays every day.",image:"/models/Basic Tee3 Preview.png",modelPath:"/models/moniken/Basic Tee3 Manequeen_Model.fbx",category:"clothes"}],o$=$e.div`
  display: flex;
  height: 100vh;
  background: linear-gradient(135deg, #fefefe 0%, #fef8f5 100%);
`,a$=$e.div`
  width: 300px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-right: 1px solid rgba(0, 0, 0, 0.1);
  padding: 2rem;
  overflow-y: auto;
  box-shadow: 2px 0 20px rgba(0, 0, 0, 0.1);
`,l$=$e.h2`
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 1.5rem;
  color: #333;
  text-align: center;
`,c$=$e.div`
  display: flex;
  flex-direction: column;
  gap: 1rem;
`,u$=$e.div`
  background: ${r=>r.isSelected?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"white"};
  border: 2px solid ${r=>r.isSelected?"#667eea":"rgba(0, 0, 0, 0.1)"};
  border-radius: 15px;
  padding: 1rem;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }
`,h$=$e.img`
  width: 100%;
  height: 120px;
  object-fit: cover;
  border-radius: 10px;
  margin-bottom: 0.5rem;
`,d$=$e.h3`
  font-size: 1rem;
  font-weight: 600;
  margin-bottom: 0.25rem;
  color: ${r=>r.isSelected?"white":"#333"};
`,f$=$e.p`
  font-size: 0.8rem;
  color: ${r=>r.isSelected?"rgba(255, 255, 255, 0.8)":"#666"};
  line-height: 1.3;
`,p$=$e.div`
  flex: 1;
  position: relative;
  background: linear-gradient(135deg, #fefefe 0%, #fef8f5 100%);
`,m$=$e.div`
  position: absolute;
  bottom: 2rem;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 1rem;
  z-index: 10;
`,IC=$e.button`
  background: rgba(255, 255, 255, 0.9);
  border: none;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);

  &:hover {
    background: white;
    transform: scale(1.1);
  }

  svg {
    width: 20px;
    height: 20px;
    color: #333;
  }
`,g$=$e.div`
  position: absolute;
  top: 2rem;
  right: 2rem;
  background: rgba(255, 255, 255, 0.95);
  padding: 1.5rem;
  border-radius: 15px;
  backdrop-filter: blur(10px);
  max-width: 300px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
`,v$=$e.h3`
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: #333;
`,y$=$e.p`
  font-size: 0.9rem;
  color: #666;
  line-height: 1.4;
`,_$=({selectedItem:r})=>{const e=j.useRef(null),[t,n]=j.useState(null),[i,s]=j.useState(!0);return j.useEffect(()=>{if(s(!0),!r){n(null),s(!1);return}new xg().load(r.modelPath,a=>{a.scale.set(.01,.01,.01),a.position.set(0,-1.5,0),a.traverse(c=>{c instanceof qn&&c.material&&(c.material.needsUpdate=!0,c.material.color&&c.material.color.multiplyScalar(1.2))}),n(a),s(!1)},void 0,a=>{console.error("Error loading model:",a),s(!1)})},[r]),TE(o=>{e.current&&(e.current.rotation.y=Math.sin(o.clock.elapsedTime*.5)*.1)}),i?K.jsxs("mesh",{position:[0,0,0],children:[K.jsx("cylinderGeometry",{args:[.3,.3,2,8]}),K.jsx("meshStandardMaterial",{color:"#f0f0f0",metalness:.1,roughness:.8})]}):t?K.jsx("primitive",{ref:e,object:t,position:[0,-1.5,0],scale:[.01,.01,.01]}):K.jsxs("mesh",{position:[0,0,0],children:[K.jsx("cylinderGeometry",{args:[.3,.3,2,8]}),K.jsx("meshStandardMaterial",{color:"#f0f0f0",metalness:.1,roughness:.8})]})},x$=()=>{const[r,e]=j.useState(null),[t,n]=j.useState(!0),i=()=>{},s=()=>{n(!t)};return K.jsxs(o$,{children:[K.jsxs(a$,{children:[K.jsx(l$,{children:"Available Styles"}),K.jsx(c$,{children:s$.map(o=>K.jsxs(u$,{isSelected:r?.id===o.id,onClick:()=>e(o),children:[K.jsx(h$,{src:o.image,alt:o.name}),K.jsx(d$,{isSelected:r?.id===o.id,children:o.name}),K.jsx(f$,{isSelected:r?.id===o.id,children:o.description})]},o.id))})]}),K.jsxs(p$,{children:[K.jsxs(UI,{camera:{position:[0,0,5],fov:50},style:{background:"transparent"},children:[K.jsx("ambientLight",{intensity:.6}),K.jsx("directionalLight",{position:[10,10,5],intensity:1}),K.jsx("pointLight",{position:[-10,-10,-5],intensity:.5}),K.jsx(_$,{selectedItem:r}),K.jsx(ZI,{enablePan:!0,enableZoom:!0,enableRotate:!0,autoRotate:t,autoRotateSpeed:1,minDistance:2,maxDistance:10}),K.jsx(r3,{preset:"studio"})]}),K.jsxs(m$,{children:[K.jsx(IC,{onClick:i,title:"Reset View",children:K.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:K.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),K.jsx(IC,{onClick:s,title:t?"Stop Rotation":"Start Rotation",children:K.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:K.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),K.jsxs(g$,{children:[K.jsx(v$,{children:"3D Mannequin Styler"}),K.jsx(y$,{children:r?`Currently wearing: ${r.name}. Click on different items in the sidebar to try them on!`:"Select a clothing item from the sidebar to see it on the mannequin. Use the controls to rotate and zoom the view."})]})]})]})},w$=$e.div`
  min-height: 100vh;
  background: linear-gradient(135deg, #fefefe 0%, #fef8f5 100%);
`,S$=$e.main`
  padding-top: 80px;
`;$e(Km)`
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 0.75rem 1.5rem;
  border-radius: 25px;
  text-decoration: none;
  font-weight: 600;
  transition: all 0.3s ease;
  margin-left: 1rem;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
  }
`;const E$=()=>{const[r,e]=j.useState([]),[t,n]=j.useState(!1),[i,s]=j.useState(!1),o=m=>{e(g=>[...g,m])},a=m=>{e(g=>g.filter(y=>y.id!==m))},c=()=>{e([])},h=()=>{s(!0)},f=()=>{s(!1)};return K.jsxs(K.Fragment,{children:[K.jsx(WP,{cartItemCount:r.length,onCartClick:()=>n(!0),onLoginClick:()=>s(!0)}),K.jsxs(S$,{children:[K.jsx(l5,{}),K.jsx(LX,{onAddToCart:o,onLoginRequired:h})]}),K.jsx(ZX,{isOpen:t,items:r,onClose:()=>n(!1),onRemoveItem:a,onClearCart:c}),K.jsx(i$,{isOpen:i,onClose:()=>s(!1),onSuccess:f})]})},M$=()=>K.jsxs(K.Fragment,{children:[K.jsx(WP,{cartItemCount:0,onCartClick:()=>{},onLoginClick:()=>{}}),K.jsx(x$,{})]}),T$=()=>K.jsx(tD,{children:K.jsx(w$,{children:K.jsxs(Lk,{children:[K.jsx(mw,{path:"/",element:K.jsx(E$,{})}),K.jsx(mw,{path:"/styler",element:K.jsx(M$,{})})]})})}),b$=()=>K.jsx(TU,{children:K.jsx(T$,{})}),A$=hO`
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
      sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background: linear-gradient(135deg, #fefefe 0%, #fef8f5 100%);
    color: #333;
  }

  html {
    scroll-behavior: smooth;
  }
`,C$=B3.createRoot(document.getElementById("root"));C$.render(K.jsxs(ao.StrictMode,{children:[K.jsx(A$,{}),K.jsx(b$,{})]}));
//# sourceMappingURL=index-Bb4lYC63.js.map
